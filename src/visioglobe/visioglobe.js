/* Visioglobe SDK Copyright 2014 */

/* without requirejs */
var vg;
vg = (function(vg){

  /* with requirejs (uncomment next line, comment two lines above)
   * make changes at the footer as well
   */
//define("visioweb",["jquery"],function(jQuery){
// Visioglobe Mapviewer ad6f17e
  var __almond_force_sync=!0;var requirejs,require,define;
  (function(e){function n(a,e){var d,f,g,k,r,q,m,l,u,n=e&&e.split("/"),v=x.map,t=v&&v["*"]||{};if(a&&"."===a.charAt(0))if(e){n=n.slice(0,n.length-1);a=n.concat(a.split("/"));for(l=0;l<a.length;l+=1)if(d=a[l],"."===d)a.splice(l,1),--l;else if(".."===d)if(1!==l||".."!==a[2]&&".."!==a[0])0<l&&(a.splice(l-1,2),l-=2);else break;a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||t)&&v){d=a.split("/");for(l=d.length;0<l;--l){f=d.slice(0,l).join("/");if(n)for(u=n.length;0<u;--u)if(g=v[n.slice(0,
    u).join("/")])if(g=g[f]){k=g;r=l;break}if(k)break;!q&&t&&t[f]&&(q=t[f],m=l)}!k&&q&&(k=q,r=m);k&&(d.splice(0,r,k),a=d.join("/"))}return a}function l(a,d){return function(){return g.apply(e,z.call(arguments,0).concat([a,d]))}}function m(a){return function(e){return n(e,a)}}function d(a){return function(e){q[a]=e}}function a(a){if(y.call(t,a)){var d=t[a];delete t[a];w[a]=!0;f.apply(e,d)}if(!y.call(q,a)&&!y.call(w,a))throw Error("No "+a);return q[a]}function k(a){var e,d=a?a.indexOf("!"):-1;-1<d&&(e=
    a.substring(0,d),a=a.substring(d+1,a.length));return[e,a]}function r(a){return function(){return x&&x.config&&x.config[a]||{}}}var f,g,u,v,q={},t={},x={},w={},y=Object.prototype.hasOwnProperty,z=[].slice;u=function(e,d){var f,g=k(e),r=g[0];e=g[1];r&&(r=n(r,d),f=a(r));r?e=f&&f.normalize?f.normalize(e,m(d)):n(e,d):(e=n(e,d),g=k(e),r=g[0],e=g[1],r&&(f=a(r)));return{f:r?r+"!"+e:e,n:e,pr:r,p:f}};v={require:function(a){return l(a)},exports:function(a){var e=q[a];return"undefined"!==typeof e?e:q[a]={}},
    module:function(a){return{id:a,uri:"",exports:q[a],config:r(a)}}};f=function(f,g,k,r){var m,n,x,z,R=[],W;r=r||f;if("function"===typeof k){g=!g.length&&k.length?["require","exports","module"]:g;for(z=0;z<g.length;z+=1)if(x=u(g[z],r),n=x.f,"require"===n)R[z]=v.require(f);else if("exports"===n)R[z]=v.exports(f),W=!0;else if("module"===n)m=R[z]=v.module(f);else if(y.call(q,n)||y.call(t,n)||y.call(w,n))R[z]=a(n);else if(x.p)x.p.load(x.n,l(r,!0),d(n),{}),R[z]=q[n];else throw Error(f+" missing "+n);g=k.apply(q[f],
    R);f&&(m&&m.exports!==e&&m.exports!==q[f]?q[f]=m.exports:g===e&&W||(q[f]=g))}else f&&(q[f]=k)};requirejs=require=g=function(d,k,r,q,m){if("string"===typeof d)return v[d]?v[d](k):a(u(d,k).f);d&&d.splice||(x=d,callbak&&k.splice?(d=k,k=r,r=null):d=e);k=k||function(){};"function"===typeof r&&(r=q,q=m);q||__almond_force_sync?f(e,d,k,r):setTimeout(function(){f(e,d,k,r)},4);return g};g.config=function(a){x=a;x.deps&&g(x.deps,x.callback);return g};define=function(a,e,d){e&&e.splice||(d=e,e=[]);y.call(q,a)||
  y.call(t,a)||(t[a]=[a,e,d])};define.amd={jQuery:!0}})();(function(e){!1==="performance"in e&&(e.performance={});Date.now=Date.now||function(){return(new Date).getTime()};if(!1==="now"in e.performance){var n=e.performance.timing&&e.performance.timing.navigationStart?performance.timing.navigationStart:Date.now();e.performance.now=function(){return Date.now()-n}}})(this);
  var TWEEN=TWEEN||function(){var e=[];return{REVISION:"14",getAll:function(){return e},removeAll:function(){e=[]},add:function(n){e.push(n)},remove:function(n){n=e.indexOf(n);-1!==n&&e.splice(n,1)},update:function(n){if(0===e.length)return!1;var l=0;for(n=void 0!==n?n:window.performance.now();l<e.length;)e[l].update(n)?l++:e.splice(l,1);return!0}}}();
  TWEEN.Tween=function(e){var n={},l={},m={},d=1E3,a=0,k=!1,r=!1,f=!1,g=0,u=null,v=TWEEN.Easing.Linear.None,q=TWEEN.Interpolation.Linear,t=[],x=null,w=!1,y=null,z=null,B=null,C;for(C in e)n[C]=parseFloat(e[C],10);this.to=function(a,e){void 0!==e&&(d=e);l=a;return this};this.start=function(a){TWEEN.add(this);r=!0;w=!1;u=void 0!==a?a:window.performance.now();u+=g;for(var d in l){if(l[d]instanceof Array){if(0===l[d].length)continue;l[d]=[e[d]].concat(l[d])}n[d]=e[d];!1===n[d]instanceof Array&&(n[d]*=1);
    m[d]=n[d]||0}return this};this.stop=function(){if(!r)return this;TWEEN.remove(this);r=!1;null!==B&&B.call(e);this.stopChainedTweens();return this};this.stopChainedTweens=function(){for(var a=0,e=t.length;a<e;a++)t[a].stop()};this.delay=function(a){g=a;return this};this.repeat=function(e){a=e;return this};this.yoyo=function(a){k=a;return this};this.easing=function(a){v=a;return this};this.interpolation=function(a){q=a;return this};this.chain=function(){t=arguments;return this};this.onStart=function(a){x=
    a;return this};this.onUpdate=function(a){y=a;return this};this.onComplete=function(a){z=a;return this};this.onStop=function(a){B=a;return this};this.update=function(r){var B;if(r<u)return!0;!1===w&&(null!==x&&x.call(e),w=!0);var C=(r-u)/d,C=1<C?1:C,J=v(f?1-C:C);for(B in l){var O=n[B]||0,L=l[B];L instanceof Array?e[B]=q(L,J):("string"===typeof L&&(L=O+parseFloat(L,10)),"number"===typeof L&&(e[B]=O+(L-O)*J))}null!==y&&y.call(e,J);if(1==C)if(0<a){isFinite(a)&&a--;for(B in m)"string"===typeof l[B]&&(m[B]+=
    parseFloat(l[B],10)),k&&(C=m[B],m[B]=l[B],l[B]=C),n[B]=m[B];k&&(f=!f);u=r+g}else{null!==z&&z.call(e);B=0;for(C=t.length;B<C;B++)t[B].start(r);return!1}return!0}};
  TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return 1>(e*=2)?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*
        e*e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:1>(e*=2)?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-
        e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var n,l=.1;if(0===e)return 0;if(1===e)return 1;!l||1>l?(l=1,n=.1):n=.4*Math.asin(1/l)/(2*Math.PI);return-(l*Math.pow(2,10*--e)*Math.sin(2*(e-n)*Math.PI/.4))},Out:function(e){var n,l=.1;if(0===e)return 0;if(1===e)return 1;!l||1>l?(l=1,n=.1):n=.4*Math.asin(1/l)/(2*Math.PI);return l*Math.pow(2,-10*e)*Math.sin(2*(e-n)*Math.PI/.4)+1},InOut:function(e){var n,
        l=.1;if(0===e)return 0;if(1===e)return 1;!l||1>l?(l=1,n=.1):n=.4*Math.asin(1/l)/(2*Math.PI);return 1>(e*=2)?-.5*l*Math.pow(2,10*--e)*Math.sin(2*(e-n)*Math.PI/.4):l*Math.pow(2,-10*--e)*Math.sin(2*(e-n)*Math.PI/.4)*.5+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return 1>(e*=2)?.5*e*e*(3.5949095*e-2.5949095):.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return e<
      1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return.5>e?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}};
  TWEEN.Interpolation={Linear:function(e,n){var l=e.length-1,m=l*n,d=Math.floor(m),a=TWEEN.Interpolation.Utils.Linear;return 0>n?a(e[0],e[1],m):1<n?a(e[l],e[l-1],l-m):a(e[d],e[d+1>l?l:d+1],m-d)},Bezier:function(e,n){var l=0,m=e.length-1,d=Math.pow,a=TWEEN.Interpolation.Utils.Bernstein,k;for(k=0;k<=m;k++)l+=d(1-n,m-k)*d(n,k)*e[k]*a(m,k);return l},CatmullRom:function(e,n){var l=e.length-1,m=l*n,d=Math.floor(m),a=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[l]?(0>n&&(d=Math.floor(m=l*(1+n))),a(e[(d-
      1+l)%l],e[d],e[(d+1)%l],e[(d+2)%l],m-d)):0>n?e[0]-(a(e[0],e[0],e[1],e[1],-m)-e[0]):1<n?e[l]-(a(e[l],e[l],e[l-1],e[l-1],m-l)-e[l]):a(e[d?d-1:0],e[d],e[l<d+1?l:d+1],e[l<d+2?l:d+2],m-d)},Utils:{Linear:function(e,n,l){return(n-e)*l+e},Bernstein:function(e,n){var l=TWEEN.Interpolation.Utils.Factorial;return l(e)/l(n)/l(e-n)},Factorial:function(){var e=[1];return function(n){var l=1,m;if(e[n])return e[n];for(m=n;1<m;m--)l*=m;return e[n]=l}}(),CatmullRom:function(e,n,l,m,d){e=.5*(l-e);m=.5*(m-n);var a=d*
        d;return(2*n-2*l+e+m)*d*a+(-3*n+3*l-2*e-m)*a+e*d+n}}};(function(e){"function"===typeof define&&define.amd?define([],function(){return TWEEN}):"object"===typeof exports?module.exports=TWEEN:e.TWEEN=TWEEN})(this);var Proj4js={defaultDatum:"WGS84",transform:function(e,n,l){if(!e.readyToUse)return this.reportError("Proj4js initialization for:"+e.srsCode+" not yet complete"),l;if(!n.readyToUse)return this.reportError("Proj4js initialization for:"+n.srsCode+" not yet complete"),l;if("900913"==e.srsProjNumber&&"WGS84"!=n.datumCode&&!n.datum_params||"900913"==n.srsProjNumber&&"WGS84"!=e.datumCode&&!e.datum_params){var m=Proj4js.WGS84;this.transform(e,m,l);e=m}"enu"!=e.axis&&this.adjust_axis(e,!1,l);"longlat"==e.projName?
      (l.x*=Proj4js.common.D2R,l.y*=Proj4js.common.D2R):(e.to_meter&&(l.x*=e.to_meter,l.y*=e.to_meter),e.inverse(l));e.from_greenwich&&(l.x+=e.from_greenwich);l=this.datum_transform(e.datum,n.datum,l);n.from_greenwich&&(l.x-=n.from_greenwich);"longlat"==n.projName?(l.x*=Proj4js.common.R2D,l.y*=Proj4js.common.R2D):(n.forward(l),n.to_meter&&(l.x/=n.to_meter,l.y/=n.to_meter));"enu"!=n.axis&&this.adjust_axis(n,!0,l);return l},datum_transform:function(e,n,l){if(e.compare_datums(n)||e.datum_type==Proj4js.common.PJD_NODATUM||
      n.datum_type==Proj4js.common.PJD_NODATUM)return l;e.datum_type==Proj4js.common.PJD_GRIDSHIFT&&alert("ERROR: Grid shift transformations are not implemented yet.");n.datum_type==Proj4js.common.PJD_GRIDSHIFT&&alert("ERROR: Grid shift transformations are not implemented yet.");if(e.es!=n.es||e.a!=n.a||e.datum_type==Proj4js.common.PJD_3PARAM||e.datum_type==Proj4js.common.PJD_7PARAM||n.datum_type==Proj4js.common.PJD_3PARAM||n.datum_type==Proj4js.common.PJD_7PARAM)e.geodetic_to_geocentric(l),e.datum_type!=
    Proj4js.common.PJD_3PARAM&&e.datum_type!=Proj4js.common.PJD_7PARAM||e.geocentric_to_wgs84(l),n.datum_type!=Proj4js.common.PJD_3PARAM&&n.datum_type!=Proj4js.common.PJD_7PARAM||n.geocentric_from_wgs84(l),n.geocentric_to_geodetic(l);n.datum_type==Proj4js.common.PJD_GRIDSHIFT&&alert("ERROR: Grid shift transformations are not implemented yet.");return l},adjust_axis:function(e,n,l){for(var m=l.x,d=l.y,a=l.z||0,k,r,f=0;3>f;f++)if(!n||2!=f||void 0!==l.z)switch(0==f?(k=m,r="x"):1==f?(k=d,r="y"):(k=a,r="z"),
      e.axis[f]){case "e":l[r]=k;break;case "w":l[r]=-k;break;case "n":l[r]=k;break;case "s":l[r]=-k;break;case "u":void 0!==l[r]&&(l.z=k);break;case "d":void 0!==l[r]&&(l.z=-k);break;default:return alert("ERROR: unknow axis ("+e.axis[f]+") - check definition of "+e.projName),null}return l},reportError:function(e){},extend:function(e,n){e=e||{};if(n)for(var l in n){var m=n[l];void 0!==m&&(e[l]=m)}return e},Class:function(){for(var e=function(){this.initialize.apply(this,arguments)},n={},l,m=0;m<arguments.length;++m)l=
      "function"==typeof arguments[m]?arguments[m].prototype:arguments[m],Proj4js.extend(n,l);e.prototype=n;return e},bind:function(e,n){var l=Array.prototype.slice.apply(arguments,[2]);return function(){var m=l.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(n,m)}},scriptName:"proj4js.js",defsLookupService:"http://spatialreference.org/ref",libPath:null,getScriptLocation:function(){if(this.libPath)return this.libPath;for(var e=this.scriptName,n=e.length,l=document.getElementsByTagName("script"),
                                                                                                                                                                                                                                                                                                                                                                                                                                                             m=0;m<l.length;m++){var d=l[m].getAttribute("src");if(d){var a=d.lastIndexOf(e);if(-1<a&&a+n==d.length){this.libPath=d.slice(0,-n);break}}}return this.libPath||""},loadScript:function(e,n,l,m){var d=document.createElement("script");d.defer=!1;d.type="text/javascript";d.id=e;d.src=e;d.onload=n;d.onerror=l;d.loadCheck=m;/MSIE/.test(navigator.userAgent)&&(d.onreadystatechange=this.checkReadyState);document.getElementsByTagName("head")[0].appendChild(d)},checkReadyState:function(){if("loaded"==this.readyState)if(this.loadCheck())this.onload();
    else this.onerror()}};
  Proj4js.Proj=Proj4js.Class({readyToUse:!1,title:null,projName:null,units:null,datum:null,x0:0,y0:0,localCS:!1,queue:null,initialize:function(e,n){this.srsCodeInput=e;this.queue=[];n&&this.queue.push(n);if(0<=e.indexOf("GEOGCS")||0<=e.indexOf("GEOCCS")||0<=e.indexOf("PROJCS")||0<=e.indexOf("LOCAL_CS"))this.parseWKT(e),this.deriveConstants(),this.loadProjCode(this.projName);else{if(0==e.indexOf("urn:")){var l=e.split(":");"ogc"!=l[1]&&"x-ogc"!=l[1]||"def"!=l[2]||"crs"!=l[3]||(e=l[4]+":"+l[l.length-
    1])}else 0==e.indexOf("http://")&&(l=e.split("#"),l[0].match(/epsg.org/)?e="EPSG:"+l[1]:l[0].match(/RIG.xml/)&&(e="IGNF:"+l[1]));this.srsCode=e.toUpperCase();0==this.srsCode.indexOf("EPSG")?(this.srsCode=this.srsCode,this.srsAuth="epsg",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("IGNF")?(this.srsCode=this.srsCode,this.srsAuth="IGNF",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("CRS")?(this.srsCode=this.srsCode,this.srsAuth="CRS",this.srsProjNumber=
      this.srsCode.substring(4)):(this.srsAuth="",this.srsProjNumber=this.srsCode);this.loadProjDefinition()}},loadProjDefinition:function(){if(Proj4js.defs[this.srsCode])this.defsLoaded();else{var e=Proj4js.getScriptLocation()+"defs/"+this.srsAuth.toUpperCase()+this.srsProjNumber+".js";Proj4js.loadScript(e,Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.loadFromService,this),Proj4js.bind(this.checkDefsLoaded,this))}},loadFromService:function(){Proj4js.loadScript(Proj4js.defsLookupService+"/"+this.srsAuth+
      "/"+this.srsProjNumber+"/proj4js/",Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.defsFailed,this),Proj4js.bind(this.checkDefsLoaded,this))},defsLoaded:function(){this.parseDefs();this.loadProjCode(this.projName)},checkDefsLoaded:function(){return Proj4js.defs[this.srsCode]?!0:!1},defsFailed:function(){Proj4js.reportError("failed to load projection definition for: "+this.srsCode);Proj4js.defs[this.srsCode]=Proj4js.defs.WGS84;this.defsLoaded()},loadProjCode:function(e){if(Proj4js.Proj[e])this.initTransforms();
    else{var n=Proj4js.getScriptLocation()+"projCode/"+e+".js";Proj4js.loadScript(n,Proj4js.bind(this.loadProjCodeSuccess,this,e),Proj4js.bind(this.loadProjCodeFailure,this,e),Proj4js.bind(this.checkCodeLoaded,this,e))}},loadProjCodeSuccess:function(e){Proj4js.Proj[e].dependsOn?this.loadProjCode(Proj4js.Proj[e].dependsOn):this.initTransforms()},loadProjCodeFailure:function(e){Proj4js.reportError("failed to find projection file for: "+e)},checkCodeLoaded:function(e){return Proj4js.Proj[e]?!0:!1},initTransforms:function(){Proj4js.extend(this,
      Proj4js.Proj[this.projName]);this.init();this.readyToUse=!0;if(this.queue)for(var e;e=this.queue.shift();)e.call(this,this)},wktRE:/^(\w+)\[(.*)\]$/,parseWKT:function(e){if(e=e.match(this.wktRE)){var n=e[1],l=e[2].split(","),m;m="TOWGS84"==n.toUpperCase()?n:l.shift();m=m.replace(/^\"/,"");m=m.replace(/\"$/,"");e=[];for(var d=0,a="",k=0;k<l.length;++k){for(var r=l[k],f=0;f<r.length;++f)"["==r.charAt(f)&&++d,"]"==r.charAt(f)&&--d;a+=r;0===d?(e.push(a),a=""):a+=","}switch(n){case "LOCAL_CS":this.projName=
      "identity";this.localCS=!0;this.srsCode=m;break;case "GEOGCS":this.projName="longlat";this.geocsCode=m;this.srsCode||(this.srsCode=m);break;case "PROJCS":this.srsCode=m;break;case "PROJECTION":this.projName=Proj4js.wktProjections[m];break;case "DATUM":this.datumName=m;break;case "LOCAL_DATUM":this.datumCode="none";break;case "SPHEROID":this.ellps=m;this.a=parseFloat(e.shift());this.rf=parseFloat(e.shift());break;case "PRIMEM":this.from_greenwich=parseFloat(e.shift());break;case "UNIT":this.units=
      m;this.unitsPerMeter=parseFloat(e.shift());break;case "PARAMETER":n=m.toLowerCase();l=parseFloat(e.shift());switch(n){case "false_easting":this.x0=l;break;case "false_northing":this.y0=l;break;case "scale_factor":this.k0=l;break;case "central_meridian":this.long0=l*Proj4js.common.D2R;break;case "latitude_of_origin":this.lat0=l*Proj4js.common.D2R}break;case "TOWGS84":this.datum_params=e;break;case "AXIS":n=m.toLowerCase();l=e.shift();switch(l){case "EAST":l="e";break;case "WEST":l="w";break;case "NORTH":l=
      "n";break;case "SOUTH":l="s";break;case "UP":l="u";break;case "DOWN":l="d";break;default:l=" "}this.axis||(this.axis="enu");switch(n){case "X":this.axis=l+this.axis.substr(1,2);break;case "Y":this.axis=this.axis.substr(0,1)+l+this.axis.substr(2,1);break;case "Z":this.axis=this.axis.substr(0,2)+l}}for(k=0;k<e.length;++k)this.parseWKT(e[k])}},parseDefs:function(){this.defData=Proj4js.defs[this.srsCode];var e,n;if(this.defData){for(var l=this.defData.split("+"),m=0;m<l.length;m++)switch(n=l[m].split("="),
      e=n[0].toLowerCase(),n=n[1],e.replace(/\s/gi,"")){case "title":this.title=n;break;case "proj":this.projName=n.replace(/\s/gi,"");break;case "units":this.units=n.replace(/\s/gi,"");break;case "datum":this.datumCode=n.replace(/\s/gi,"");break;case "nadgrids":this.nagrids=n.replace(/\s/gi,"");break;case "ellps":this.ellps=n.replace(/\s/gi,"");break;case "a":this.a=parseFloat(n);break;case "b":this.b=parseFloat(n);break;case "rf":this.rf=parseFloat(n);break;case "lat_0":this.lat0=n*Proj4js.common.D2R;
      break;case "lat_1":this.lat1=n*Proj4js.common.D2R;break;case "lat_2":this.lat2=n*Proj4js.common.D2R;break;case "lat_ts":this.lat_ts=n*Proj4js.common.D2R;break;case "lon_0":this.long0=n*Proj4js.common.D2R;break;case "alpha":this.alpha=parseFloat(n)*Proj4js.common.D2R;break;case "lonc":this.longc=n*Proj4js.common.D2R;break;case "x_0":this.x0=parseFloat(n);break;case "y_0":this.y0=parseFloat(n);break;case "k_0":this.k0=parseFloat(n);break;case "k":this.k0=parseFloat(n);break;case "r_a":this.R_A=!0;break;
      case "zone":this.zone=parseInt(n);break;case "south":this.utmSouth=!0;break;case "towgs84":this.datum_params=n.split(",");break;case "to_meter":this.to_meter=parseFloat(n);break;case "from_greenwich":this.from_greenwich=n*Proj4js.common.D2R;break;case "pm":n=n.replace(/\s/gi,"");this.from_greenwich=Proj4js.PrimeMeridian[n]?Proj4js.PrimeMeridian[n]:parseFloat(n);this.from_greenwich*=Proj4js.common.D2R;break;case "axis":n=n.replace(/\s/gi,""),3==n.length&&-1!="ewnsud".indexOf(n.substr(0,1))&&-1!="ewnsud".indexOf(n.substr(1,
        1))&&-1!="ewnsud".indexOf(n.substr(2,1))&&(this.axis=n)}this.deriveConstants()}},deriveConstants:function(){"@null"==this.nagrids&&(this.datumCode="none");if(this.datumCode&&"none"!=this.datumCode){var e=Proj4js.Datum[this.datumCode];e&&(this.datum_params=e.towgs84?e.towgs84.split(","):null,this.ellps=e.ellipse,this.datumName=e.datumName?e.datumName:this.datumCode)}this.a||Proj4js.extend(this,Proj4js.Ellipsoid[this.ellps]?Proj4js.Ellipsoid[this.ellps]:Proj4js.Ellipsoid.WGS84);this.rf&&!this.b&&(this.b=
      (1-1/this.rf)*this.a);Math.abs(this.a-this.b)<Proj4js.common.EPSLN&&(this.sphere=!0,this.b=this.a);this.a2=this.a*this.a;this.b2=this.b*this.b;this.es=(this.a2-this.b2)/this.a2;this.e=Math.sqrt(this.es);this.R_A&&(this.a*=1-this.es*(Proj4js.common.SIXTH+this.es*(Proj4js.common.RA4+this.es*Proj4js.common.RA6)),this.a2=this.a*this.a,this.b2=this.b*this.b,this.es=0);this.ep2=(this.a2-this.b2)/this.b2;this.k0||(this.k0=1);this.axis||(this.axis="enu");this.datum=new Proj4js.datum(this)}});
  Proj4js.Proj.longlat={init:function(){},forward:function(e){return e},inverse:function(e){return e}};Proj4js.Proj.identity=Proj4js.Proj.longlat;Proj4js.defs={WGS84:"+title=long/lat:WGS84 +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4326":"+title=long/lat:WGS84 +proj=longlat +a=6378137.0 +b=6356752.31424518 +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4269":"+title=long/lat:NAD83 +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees","EPSG:3785":"+title= Google Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"};
  Proj4js.defs.GOOGLE=Proj4js.defs["EPSG:3785"];Proj4js.defs["EPSG:900913"]=Proj4js.defs["EPSG:3785"];Proj4js.defs["EPSG:102113"]=Proj4js.defs["EPSG:3785"];
  Proj4js.common={PI:3.141592653589793,HALF_PI:1.5707963267948966,TWO_PI:6.283185307179586,FORTPI:.7853981633974483,R2D:57.29577951308232,D2R:.017453292519943295,SEC_TO_RAD:4.84813681109536E-6,EPSLN:1E-10,MAX_ITER:20,COS_67P5:.3826834323650898,AD_C:1.0026,PJD_UNKNOWN:0,PJD_3PARAM:1,PJD_7PARAM:2,PJD_GRIDSHIFT:3,PJD_WGS84:4,PJD_NODATUM:5,SRS_WGS84_SEMIMAJOR:6378137,SIXTH:.16666666666666666,RA4:.04722222222222222,RA6:.022156084656084655,RV4:.06944444444444445,RV6:.04243827160493827,msfnz:function(e,n,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   l){e*=n;return l/Math.sqrt(1-e*e)},tsfnz:function(e,n,l){l*=e;l=Math.pow((1-l)/(1+l),.5*e);return Math.tan(.5*(this.HALF_PI-n))/l},phi2z:function(e,n){for(var l=.5*e,m,d=this.HALF_PI-2*Math.atan(n),a=0;15>=a;a++)if(m=e*Math.sin(d),m=this.HALF_PI-2*Math.atan(n*Math.pow((1-m)/(1+m),l))-d,d+=m,1E-10>=Math.abs(m))return d;alert("phi2z has NoConvergence");return-9999},qsfnz:function(e,n){var l;return 1E-7<e?(l=e*n,(1-e*e)*(n/(1-l*l)-.5/e*Math.log((1-l)/(1+l)))):2*n},asinz:function(e){1<Math.abs(e)&&(e=
      1<e?1:-1);return Math.asin(e)},e0fn:function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},e1fn:function(e){return.375*e*(1+.25*e*(1+.46875*e))},e2fn:function(e){return.05859375*e*e*(1+.75*e)},e3fn:function(e){return 35/3072*e*e*e},mlfn:function(e,n,l,m,d){return e*d-n*Math.sin(2*d)+l*Math.sin(4*d)-m*Math.sin(6*d)},srat:function(e,n){return Math.pow((1-e)/(1+e),n)},sign:function(e){return 0>e?-1:1},adjust_lon:function(e){return e=Math.abs(e)<this.PI?e:e-this.sign(e)*this.TWO_PI},adjust_lat:function(e){return e=
      Math.abs(e)<this.HALF_PI?e:e-this.sign(e)*this.PI},latiso:function(e,n,l){if(Math.abs(n)>this.HALF_PI)return+Number.NaN;if(n==this.HALF_PI)return Number.POSITIVE_INFINITY;if(n==-1*this.HALF_PI)return-1*Number.POSITIVE_INFINITY;l*=e;return Math.log(Math.tan((this.HALF_PI+n)/2))+e*Math.log((1-l)/(1+l))/2},fL:function(e,n){return 2*Math.atan(e*Math.exp(n))-this.HALF_PI},invlatiso:function(e,n){var l=this.fL(1,n),m=0,d=0;do m=l,d=e*Math.sin(m),l=this.fL(Math.exp(e*Math.log((1+d)/(1-d))/2),n);while(1E-12<
    Math.abs(l-m));return l},sinh:function(e){e=Math.exp(e);return(e-1/e)/2},cosh:function(e){e=Math.exp(e);return(e+1/e)/2},tanh:function(e){e=Math.exp(e);return(e-1/e)/(e+1/e)},asinh:function(e){return(0<=e?1:-1)*Math.log(Math.abs(e)+Math.sqrt(e*e+1))},acosh:function(e){return 2*Math.log(Math.sqrt((e+1)/2)+Math.sqrt((e-1)/2))},atanh:function(e){return Math.log((e-1)/(e+1))/2},gN:function(e,n,l){n*=l;return e/Math.sqrt(1-n*n)}};
  Proj4js.datum=Proj4js.Class({initialize:function(e){this.datum_type=Proj4js.common.PJD_WGS84;e.datumCode&&"none"==e.datumCode&&(this.datum_type=Proj4js.common.PJD_NODATUM);if(e&&e.datum_params){for(var n=0;n<e.datum_params.length;n++)e.datum_params[n]=parseFloat(e.datum_params[n]);if(0!=e.datum_params[0]||0!=e.datum_params[1]||0!=e.datum_params[2])this.datum_type=Proj4js.common.PJD_3PARAM;3<e.datum_params.length&&(0!=e.datum_params[3]||0!=e.datum_params[4]||0!=e.datum_params[5]||0!=e.datum_params[6])&&
    (this.datum_type=Proj4js.common.PJD_7PARAM,e.datum_params[3]*=Proj4js.common.SEC_TO_RAD,e.datum_params[4]*=Proj4js.common.SEC_TO_RAD,e.datum_params[5]*=Proj4js.common.SEC_TO_RAD,e.datum_params[6]=e.datum_params[6]/1E6+1)}e&&(this.a=e.a,this.b=e.b,this.es=e.es,this.ep2=e.ep2,this.datum_params=e.datum_params)},compare_datums:function(e){return this.datum_type!=e.datum_type||this.a!=e.a||5E-11<Math.abs(this.es-e.es)?!1:this.datum_type==Proj4js.common.PJD_3PARAM?this.datum_params[0]==e.datum_params[0]&&
      this.datum_params[1]==e.datum_params[1]&&this.datum_params[2]==e.datum_params[2]:this.datum_type==Proj4js.common.PJD_7PARAM?this.datum_params[0]==e.datum_params[0]&&this.datum_params[1]==e.datum_params[1]&&this.datum_params[2]==e.datum_params[2]&&this.datum_params[3]==e.datum_params[3]&&this.datum_params[4]==e.datum_params[4]&&this.datum_params[5]==e.datum_params[5]&&this.datum_params[6]==e.datum_params[6]:this.datum_type==Proj4js.common.PJD_GRIDSHIFT?(alert("ERROR: Grid shift transformations are not implemented yet."),
      !1):!0},geodetic_to_geocentric:function(e){var n=e.x,l=e.y,m=e.z?e.z:0,d,a,k;if(l<-Proj4js.common.HALF_PI&&l>-1.001*Proj4js.common.HALF_PI)l=-Proj4js.common.HALF_PI;else if(l>Proj4js.common.HALF_PI&&l<1.001*Proj4js.common.HALF_PI)l=Proj4js.common.HALF_PI;else if(l<-Proj4js.common.HALF_PI||l>Proj4js.common.HALF_PI)return Proj4js.reportError("geocent:lat out of range:"+l),null;n>Proj4js.common.PI&&(n-=2*Proj4js.common.PI);a=Math.sin(l);k=Math.cos(l);d=this.a/Math.sqrt(1-this.es*a*a);l=(d+m)*k*Math.cos(n);
      n=(d+m)*k*Math.sin(n);m=(d*(1-this.es)+m)*a;e.x=l;e.y=n;e.z=m;return 0},geocentric_to_geodetic:function(e){var n,l,m,d,a,k,r,f,g,u,v=e.x;m=e.y;var q=e.z?e.z:0;n=Math.sqrt(v*v+m*m);l=Math.sqrt(v*v+m*m+q*q);if(1E-12>n/this.a){if(v=0,1E-12>l/this.a)return}else v=Math.atan2(m,v);m=q/l;d=n/l;a=1/Math.sqrt(1-this.es*(2-this.es)*d*d);r=d*(1-this.es)*a;f=m*a;u=0;do u++,k=this.a/Math.sqrt(1-this.es*f*f),l=n*r+q*f-k*(1-this.es*f*f),k=this.es*k/(k+l),a=1/Math.sqrt(1-k*(2-k)*d*d),k=d*(1-k)*a,a*=m,g=a*r-k*f,r=
      k,f=a;while(1E-24<g*g&&30>u);n=Math.atan(a/Math.abs(k));e.x=v;e.y=n;e.z=l;return e},geocentric_to_geodetic_noniter:function(e){var n=e.x,l=e.y,m=e.z?e.z:0,d,a,k,r,f,n=parseFloat(n),l=parseFloat(l),m=parseFloat(m);f=!1;if(0!=n)d=Math.atan2(l,n);else if(0<l)d=Proj4js.common.HALF_PI;else if(0>l)d=-Proj4js.common.HALF_PI;else if(f=!0,d=0,0<m)a=Proj4js.common.HALF_PI;else if(0>m)a=-Proj4js.common.HALF_PI;else return;k=n*n+l*l;n=Math.sqrt(k);l=m*Proj4js.common.AD_C;k=Math.sqrt(l*l+k);l/=k;k=n/k;l=m+this.b*
      this.ep2*l*l*l;r=n-this.a*this.es*k*k*k;k=Math.sqrt(l*l+r*r);l/=k;k=r/k;r=this.a/Math.sqrt(1-this.es*l*l);m=k>=Proj4js.common.COS_67P5?n/k-r:k<=-Proj4js.common.COS_67P5?n/-k-r:m/l+r*(this.es-1);0==f&&(a=Math.atan(l/k));e.x=d;e.y=a;e.z=m;return e},geocentric_to_wgs84:function(e){if(this.datum_type==Proj4js.common.PJD_3PARAM)e.x+=this.datum_params[0],e.y+=this.datum_params[1],e.z+=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var n=this.datum_params[3],l=this.datum_params[4],
      m=this.datum_params[5],d=this.datum_params[6],a=d*(m*e.x+e.y-n*e.z)+this.datum_params[1],n=d*(-l*e.x+n*e.y+e.z)+this.datum_params[2];e.x=d*(e.x-m*e.y+l*e.z)+this.datum_params[0];e.y=a;e.z=n}},geocentric_from_wgs84:function(e){if(this.datum_type==Proj4js.common.PJD_3PARAM)e.x-=this.datum_params[0],e.y-=this.datum_params[1],e.z-=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var n=this.datum_params[3],l=this.datum_params[4],m=this.datum_params[5],d=this.datum_params[6],a=(e.x-
      this.datum_params[0])/d,k=(e.y-this.datum_params[1])/d,d=(e.z-this.datum_params[2])/d;e.x=a+m*k-l*d;e.y=-m*a+k+n*d;e.z=l*a-n*k+d}}});
  Proj4js.Point=Proj4js.Class({initialize:function(e,n,l){"object"==typeof e?(this.x=e[0],this.y=e[1],this.z=e[2]||0):"string"==typeof e&&"undefined"==typeof n?(e=e.split(","),this.x=parseFloat(e[0]),this.y=parseFloat(e[1]),this.z=parseFloat(e[2])||0):(this.x=e,this.y=n,this.z=l||0)},clone:function(){return new Proj4js.Point(this.x,this.y,this.z)},toString:function(){return"x="+this.x+",y="+this.y},toShortString:function(){return this.x+", "+this.y}});
  Proj4js.PrimeMeridian={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};
  Proj4js.Ellipsoid={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},"APL4.":{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},
    andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},CPM:{a:6375738.7,rf:334.29,
      ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},
    fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},
    new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS72:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},
    sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};
  Proj4js.Datum={WGS84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},GGRS87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},NAD83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},NAD27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",
      ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},OSGB36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"}};
  Proj4js.WGS84=new Proj4js.Proj("WGS84");Proj4js.Datum.OSB36=Proj4js.Datum.OSGB36;Proj4js.wktProjections={"Lambert Tangential Conformal Conic Projection":"lcc",Mercator:"merc","Popular Visualisation Pseudo Mercator":"merc",Transverse_Mercator:"tmerc","Transverse Mercator":"tmerc","Lambert Azimuthal Equal Area":"laea","Universal Transverse Mercator System":"utm"};Proj4js.defs.UTM31="+proj=utm +zone=31 +ellps=WGS84 +units=m +nadgrids=@null +no_defs";Proj4js.defs.UTM40="+proj=utm +zone=40 +ellps=WGS84 +units=m +nadgrids=@null +no_defs";Proj4js.Proj.utm={dependsOn:"tmerc",init:function(){this.zone?(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*Proj4js.common.D2R,this.x0=5E5,this.y0=this.utmSouth?1E7:0,this.k0=.9996,Proj4js.Proj.tmerc.init.apply(this),this.forward=Proj4js.Proj.tmerc.forward,this.inverse=Proj4js.Proj.tmerc.inverse):Proj4js.reportError("utm:init: zone must be specified for UTM")}};Proj4js.Proj.lcc={init:function(){this.lat2||(this.lat2=this.lat0);this.k0||(this.k0=1);if(Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN)Proj4js.reportError("lcc:init: Equal Latitudes");else{var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),n=Proj4js.common.msfnz(this.e,e,n),l=Proj4js.common.tsfnz(this.e,this.lat1,e),m=Math.sin(this.lat2),d=Math.cos(this.lat2),d=Proj4js.common.msfnz(this.e,m,d),m=Proj4js.common.tsfnz(this.e,this.lat2,m),a=Proj4js.common.tsfnz(this.e,
      this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Proj4js.common.EPSLN?this.ns=Math.log(n/d)/Math.log(l/m):this.ns=e;this.f0=n/(this.ns*Math.pow(l,this.ns));this.rh=this.a*this.f0*Math.pow(a,this.ns);this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var n=e.x,l=e.y;if(!(90>=l&&-90<=l&&180>=n&&-180<=n))return Proj4js.reportError("lcc:forward: llInputOutOfRange: "+n+" : "+l),null;var m=Math.abs(Math.abs(l)-Proj4js.common.HALF_PI);if(m>Proj4js.common.EPSLN)l=Proj4js.common.tsfnz(this.e,
      l,Math.sin(l)),l=this.a*this.f0*Math.pow(l,this.ns);else{m=l*this.ns;if(0>=m)return Proj4js.reportError("lcc:forward: No Projection"),null;l=0}n=this.ns*Proj4js.common.adjust_lon(n-this.long0);e.x=this.k0*l*Math.sin(n)+this.x0;e.y=this.k0*(this.rh-l*Math.cos(n))+this.y0;return e},inverse:function(e){var n,l,m,d=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0;0<this.ns?(n=Math.sqrt(d*d+a*a),l=1):(n=-Math.sqrt(d*d+a*a),l=-1);m=0;0!=n&&(m=Math.atan2(l*d,l*a));if(0!=n||0<this.ns){if(l=1/this.ns,
      n=Math.pow(n/(this.a*this.f0),l),n=Proj4js.common.phi2z(this.e,n),-9999==n)return null}else n=-Proj4js.common.HALF_PI;m=Proj4js.common.adjust_lon(m/this.ns+this.long0);e.x=m;e.y=n;return e}};Proj4js.Proj.tmerc={init:function(){this.e0=Proj4js.common.e0fn(this.es);this.e1=Proj4js.common.e1fn(this.es);this.e2=Proj4js.common.e2fn(this.es);this.e3=Proj4js.common.e3fn(this.es);this.ml0=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var n=e.y,l=Proj4js.common.adjust_lon(e.x-this.long0),m,d;m=Math.sin(n);var a=Math.cos(n);if(this.sphere){var k=a*Math.sin(l);if(1E-10>Math.abs(Math.abs(k)-1))return Proj4js.reportError("tmerc:forward: Point projects into infinity"),
      93;d=.5*this.a*this.k0*Math.log((1+k)/(1-k));m=Math.acos(a*Math.cos(l)/Math.sqrt(1-k*k));0>n&&(m=-m);n=this.a*this.k0*(m-this.lat0)}else{d=a*l;var l=Math.pow(d,2),a=this.ep2*Math.pow(a,2),k=Math.tan(n),r=Math.pow(k,2);m=1-this.es*Math.pow(m,2);m=this.a/Math.sqrt(m);n=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,n);d=this.k0*m*d*(1+l/6*(1-r+a+l/20*(5-18*r+Math.pow(r,2)+72*a-58*this.ep2)))+this.x0;n=this.k0*(n-this.ml0+m*k*l*(.5+l/24*(5-r+9*a+4*Math.pow(a,2)+l/30*(61-58*r+Math.pow(r,2)+
      600*a-330*this.ep2))))+this.y0}e.x=d;e.y=n;return e},inverse:function(e){var n,l,m,d;if(this.sphere){l=Math.exp(e.x/(this.a*this.k0));var a=.5*(l-1/l);m=this.lat0+e.y/(this.a*this.k0);d=Math.cos(m);n=Math.sqrt((1-d*d)/(1+a*a));l=Proj4js.common.asinz(n);0>m&&(l=-l);n=0==a&&0==d?this.long0:Proj4js.common.adjust_lon(Math.atan2(a,d)+this.long0)}else{var a=e.x-this.x0,k=e.y-this.y0;l=n=(this.ml0+k/this.k0)/this.a;for(d=0;;d++){m=(n+this.e1*Math.sin(2*l)-this.e2*Math.sin(4*l)+this.e3*Math.sin(6*l))/this.e0-
      l;l+=m;if(Math.abs(m)<=Proj4js.common.EPSLN)break;if(6<=d)return Proj4js.reportError("tmerc:inverse: Latitude failed to converge"),95}if(Math.abs(l)<Proj4js.common.HALF_PI){n=Math.sin(l);m=Math.cos(l);var r=Math.tan(l);d=this.ep2*Math.pow(m,2);var k=Math.pow(d,2),f=Math.pow(r,2),g=Math.pow(f,2);n=1-this.es*Math.pow(n,2);var u=this.a/Math.sqrt(n);n=u*(1-this.es)/n;var a=a/(u*this.k0),v=Math.pow(a,2);l-=u*r*v/n*(.5-v/24*(5+3*f+10*d-4*k-9*this.ep2-v/30*(61+90*f+298*d+45*g-252*this.ep2-3*k)));n=Proj4js.common.adjust_lon(this.long0+
      a*(1-v/6*(1+2*f+d-v/20*(5-2*d+28*f-3*k+8*this.ep2+24*g)))/m)}else l=Proj4js.common.HALF_PI*Proj4js.common.sign(k),n=this.long0}e.x=n;e.y=l;return e}};Proj4js.Proj.somerc={init:function(){var e=this.lat0;this.lambda0=this.long0;var n=Math.sin(e),l=this.a,m=1/this.rf,m=2*m-Math.pow(m,2),d=this.e=Math.sqrt(m);this.R=this.k0*l*Math.sqrt(1-m)/(1-m*Math.pow(n,2));this.alpha=Math.sqrt(1+m/(1-m)*Math.pow(Math.cos(e),4));this.b0=Math.asin(n/this.alpha);this.K=Math.log(Math.tan(Math.PI/4+this.b0/2))-this.alpha*Math.log(Math.tan(Math.PI/4+e/2))+this.alpha*d/2*Math.log((1+d*n)/(1-d*n))},forward:function(e){var n=Math.log(Math.tan(Math.PI/4-e.y/2)),l=this.e/
      2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),l=2*(Math.atan(Math.exp(-this.alpha*(n+l)+this.K))-Math.PI/4),m=this.alpha*(e.x-this.lambda0),n=Math.atan(Math.sin(m)/(Math.sin(this.b0)*Math.tan(l)+Math.cos(this.b0)*Math.cos(m))),l=Math.asin(Math.cos(this.b0)*Math.sin(l)-Math.sin(this.b0)*Math.cos(l)*Math.cos(m));e.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0;e.x=this.R*n+this.x0;return e},inverse:function(e){for(var n=(e.x-this.x0)/this.R,l=2*(Math.atan(Math.exp((e.y-
      this.y0)/this.R))-Math.PI/4),m=Math.asin(Math.cos(this.b0)*Math.sin(l)+Math.sin(this.b0)*Math.cos(l)*Math.cos(n)),n=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(l))),n=this.lambda0+n/this.alpha,l=0,d=m,a=-1E3,k=0;1E-7<Math.abs(d-a);){if(20<++k){Proj4js.reportError("omercFwdInfinity");return}l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+m/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(d))/2));a=d;d=2*Math.atan(Math.exp(l))-Math.PI/2}e.x=n;
      e.y=d;return e}};define("com/visioglobe/web/helpers/StringUtils",[],function(){var e=function(){};e.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return e});
  define("com/visioglobe/web/helpers/MathUtils",[],function(){var e=function(){};e.sign=function(e){return 0===e?0:0<e?1:-1};e.easeIn=function(n){return 1<n?1:0>n?0:1-Math.sin(Math.sqrt(1-n)*e.PI_2)};e.easeOut=function(n){return 1<n?1:0>n?0:Math.sin(Math.sqrt(n)*e.PI_2)};e.easeInOut=function(n){if(1<n)return 1;if(0>n)return 0;n=Math.sin(n*e.PI_2);return n*n};e.isInside2D=function(e,l){for(var m=e.x,d=e.y,a=!1,k=0,r=l.length-1;k<l.length;r=k++){var f=l[k].x,g=l[k].y,u=l[r].x,r=l[r].y;g>d!==r>d&&m<(u-
    f)*(d-g)/(r-g)+f&&(a=!a)}return a};e.dot=function(e,l){return e.x*l.x+e.y*l.y};e.squareDistanceToSegment=function(n,l){var m={x:l.end.x-l.start.x,y:l.end.y-l.start.y},d={x:n.x-l.start.x,y:n.y-l.start.y},a=e.dot(d,m);if(0>=a)return{squareDistance:e.dot(d,d),closestPoint:l.start};var k=e.dot(m,m);if(a>=k)return d={x:n.x-l.end.x,y:n.y-l.end.y},{squareDistance:e.dot(d,d),closestPoint:l.end};var r=Math.sqrt(k),k=m.x/r,m=m.y/r,a=a/r;return{squareDistance:e.dot(d,d)-a*a,closestPoint:{x:l.start.x+a*k,y:l.start.y+
      a*m}}};e.projectPointToPolygon=function(n,l){if(3>l.length||e.isInside2D(n,l))return n;for(var m=1E9,d=l[0],a=0;a<l.length-1;a++){var k=l[a],r=l[a+1],f=k.x-n.x,g=k.y-n.y,u=r.x-n.x,v=r.y-n.y;f*f>=m&&u*u>=m&&0<f*u||g*g>=m&&v*v>=m&&0<g*v||(k=e.squareDistanceToSegment(n,{start:k,end:r}),k.squareDistance<m&&(m=k.squareDistance,d=k.closestPoint))}return d};e.DEG2RAD=Math.PI/180;e.RAD2DEG=180/Math.PI;e.TWOPI=2*Math.PI;e.PI_2=Math.PI/2;return e});
  !function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("bluebird",[],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self);n.Promise=e()}}(function(){return function n(l,m,d){function a(f,g){if(!m[f]){if(!l[f]){var r="function"==typeof _dereq_&&_dereq_;if(!g&&r)return r(f,!0);if(k)return k(f,!0);r=Error("Cannot find module '"+f+"'");throw r.code=
    "MODULE_NOT_FOUND",r;}r=m[f]={exports:{}};l[f][0].call(r.exports,function(d){var g=l[f][1][d];return a(g?g:d)},r,r.exports,n,l,m,d)}return m[f].exports}for(var k="function"==typeof _dereq_&&_dereq_,r=0;r<d.length;r++)a(d[r]);return a}({1:[function(n,l,m){l.exports=function(d){function a(a){a=new k(a);var d=a.promise();return a.setHowMany(1),a.setUnwrap(),a.init(),d}var k=d._SomePromiseArray;d.any=function(d){return a(d)};d.prototype.any=function(){return a(this)}}},{}],2:[function(n,l,m){function d(){this._isTickUsed=
      this._customScheduler=!1;this._lateQueue=new u(16);this._normalQueue=new u(16);this._haveDrainedQueues=!1;this._trampolineEnabled=!0;var a=this;this.drainQueues=function(){a._drainQueues()};this._schedule=g}function a(a,d,f){this._lateQueue.push(a,d,f);this._queueTick()}function k(a,d,f){this._normalQueue.push(a,d,f);this._queueTick()}function r(a){this._normalQueue._pushOne(a);this._queueTick()}try{throw Error();}catch(f){m=f}var g=n("./schedule"),u=n("./queue"),v=n("./util");d.prototype.setScheduler=
      function(a){var d=this._schedule;return this._schedule=a,this._customScheduler=!0,d};d.prototype.hasCustomScheduler=function(){return this._customScheduler};d.prototype.enableTrampoline=function(){this._trampolineEnabled=!0};d.prototype.disableTrampolineIfNecessary=function(){v.hasDevTools&&(this._trampolineEnabled=!1)};d.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues};d.prototype.fatalError=function(a,d){d?(process.stderr.write("Fatal "+(a instanceof Error?
      a.stack:a)+"\n"),process.exit(2)):this.throwLater(a)};d.prototype.throwLater=function(a,d){if(1===arguments.length&&(d=a,a=function(){throw d;}),"undefined"!=typeof setTimeout)setTimeout(function(){a(d)},0);else try{this._schedule(function(){a(d)})}catch(f){throw Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n");}};v.hasDevTools?(d.prototype.invokeLater=function(d,f,g){this._trampolineEnabled?a.call(this,d,f,g):this._schedule(function(){setTimeout(function(){d.call(f,g)},100)})},
      d.prototype.invoke=function(a,d,f){this._trampolineEnabled?k.call(this,a,d,f):this._schedule(function(){a.call(d,f)})},d.prototype.settlePromises=function(a){this._trampolineEnabled?r.call(this,a):this._schedule(function(){a._settlePromises()})}):(d.prototype.invokeLater=a,d.prototype.invoke=k,d.prototype.settlePromises=r);d.prototype._drainQueue=function(a){for(;0<a.length();){var d=a.shift();if("function"==typeof d){var f=a.shift(),g=a.shift();d.call(f,g)}else d._settlePromises()}};d.prototype._drainQueues=
      function(){this._drainQueue(this._normalQueue);this._reset();this._haveDrainedQueues=!0;this._drainQueue(this._lateQueue)};d.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))};d.prototype._reset=function(){this._isTickUsed=!1};l.exports=d;l.exports.firstLineError=m},{"./queue":26,"./schedule":29,"./util":36}],3:[function(n,l,m){l.exports=function(d,a,k,r){var f=!1,g=function(a,d){this._reject(d)},m=function(a,d){d.promiseRejectionQueued=!0;d.bindingPromise._then(g,
      g,null,this,a)},l=function(a,d){0===(50397184&this._bitField)&&this._resolveCallback(d.target)},q=function(a,d){d.promiseRejectionQueued||this._reject(a)};d.prototype.bind=function(g){f||(f=!0,d.prototype._propagateFrom=r.propagateFromFunction(),d.prototype._boundValue=r.boundValueFunction());g=k(g);var n=new d(a);n._propagateFrom(this,1);var w=this._target();if(n._setBoundTo(g),g instanceof d){var y={promiseRejectionQueued:!1,promise:n,target:w,bindingPromise:g};w._then(a,m,void 0,n,y);g._then(l,
      q,void 0,n,y);n._setOnCancel(g)}else n._resolveCallback(w);return n};d.prototype._setBoundTo=function(a){void 0!==a?(this._bitField|=2097152,this._boundTo=a):this._bitField&=-2097153};d.prototype._isBound=function(){return 2097152===(2097152&this._bitField)};d.bind=function(a,f){return d.resolve(f).bind(a)}}},{}],4:[function(n,l,m){var d;"undefined"!=typeof Promise&&(d=Promise);var a=n("./promise")();a.noConflict=function(){try{Promise===a&&(Promise=d)}catch(k){}return a};l.exports=a},{"./promise":22}],
    5:[function(n,l,m){var d=Object.create;d&&(m=d(null),d=d(null),m[" size"]=d[" size"]=0);l.exports=function(a){function d(f){var k=this.pop(),r;if(null!=f&&(r=f[k]),"function"!=typeof r)throw f="Object "+g.classString(f)+" has no method '"+g.toString(k)+"'",new a.TypeError(f);return r.apply(f,this)}function r(a){return a[this]}function f(a){var d=+this;return 0>d&&(d=Math.max(0,d+a.length)),a[d]}var g=n("./util"),m=g.canEvaluate;g.isIdentifier;a.prototype.call=function(a){var f=[].slice.call(arguments,
      1);return f.push(a),this._then(d,void 0,void 0,f,void 0)};a.prototype.get=function(a){var d;"number"==typeof a?d=f:m?(d=(void 0)(a),d=null!==d?d:r):d=r;return this._then(d,void 0,void 0,a,void 0)}}},{"./util":36}],6:[function(n,l,m){l.exports=function(d,a,k,r){var f=n("./util"),g=f.tryCatch,m=f.errorObj,l=d._async;d.prototype["break"]=d.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var a=this,d=a;a._isCancellable();){if(!a._cancelBy(d)){d._isFollowing()?
      d._followee().cancel():d._cancelBranched();break}var f=a._cancellationParent;if(null==f||!f._isCancellable()){a._isFollowing()?a._followee().cancel():a._cancelBranched();break}a._isFollowing()&&a._followee().cancel();a._setWillBeCancelled();d=a;a=f}};d.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--};d.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||0>=this._branchesRemainingToCancel};d.prototype._cancelBy=function(a){return a===
    this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)};d.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()};d.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))};d.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()};d.prototype._unsetOnCancel=function(){this._onCancelField=
      void 0};d.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()};d.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()};d.prototype._doInvokeOnCancel=function(a,d){if(f.isArray(a))for(var k=0;k<a.length;++k)this._doInvokeOnCancel(a[k],d);else void 0!==a&&("function"==typeof a?d||(k=g(a).call(this._boundValue()),k===m&&(this._attachExtraTrace(k.e),l.throwLater(k.e))):a._resultCancelled(this))};d.prototype._invokeOnCancel=function(){var a=this._onCancel();
      this._unsetOnCancel();l.invoke(this._doInvokeOnCancel,this,a)};d.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())};d.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(n,l,m){l.exports=function(d){var a=n("./util"),k=n("./es5").keys,r=a.tryCatch,f=a.errorObj;return function(g,m,l){return function(q){var n=l._boundValue(),x=0;a:for(;x<g.length;++x){var w=g[x];if(w===Error||null!=w&&
      w.prototype instanceof Error){if(q instanceof w)return r(m).call(n,q)}else if("function"==typeof w){w=r(w).call(n,q);if(w===f)return w;if(w)return r(m).call(n,q)}else if(a.isObject(q)){for(var y=k(w),z=0;z<y.length;++z){var B=y[z];if(w[B]!=q[B])continue a}return r(m).call(n,q)}}return d}}}},{"./es5":13,"./util":36}],8:[function(n,l,m){l.exports=function(d){function a(){this._trace=new a.CapturedTrace(k())}function k(){var a=f.length-1;return 0<=a?f[a]:void 0}var r=!1,f=[];return d.prototype._promiseCreated=
      function(){},d.prototype._pushContext=function(){},d.prototype._popContext=function(){return null},d._peekContext=d.prototype._peekContext=function(){},a.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,f.push(this._trace))},a.prototype._popContext=function(){if(void 0!==this._trace){var a=f.pop(),d=a._promiseCreated;return a._promiseCreated=null,d}return null},a.CapturedTrace=null,a.create=function(){return r?new a:void 0},a.deactivateLongStackTraces=function(){},
      a.activateLongStackTraces=function(){var f=d.prototype._pushContext,m=d.prototype._popContext,l=d._peekContext,q=d.prototype._peekContext,n=d.prototype._promiseCreated;a.deactivateLongStackTraces=function(){d.prototype._pushContext=f;d.prototype._popContext=m;d._peekContext=l;d.prototype._peekContext=q;d.prototype._promiseCreated=n;r=!1};r=!0;d.prototype._pushContext=a.prototype._pushContext;d.prototype._popContext=a.prototype._popContext;d._peekContext=d.prototype._peekContext=k;d.prototype._promiseCreated=
        function(){var a=this._peekContext();a&&null==a._promiseCreated&&(a._promiseCreated=this)}},a}},{}],9:[function(n,l,m){l.exports=function(d,a){function k(a,d){return{promise:d}}function r(){return!1}function f(a,d,f){var g=this;try{a(d,f,function(a){if("function"!=typeof a)throw new TypeError("onCancel must be a function, got: "+G.toString(a));g._attachCancellationCallback(a)})}catch(k){return k}}function g(a){if(!this._isCancellable())return this;var d=this._onCancel();void 0!==d?G.isArray(d)?d.push(a):
      this._setOnCancel([d,a]):this._setOnCancel(a)}function m(){return this._onCancelField}function l(a){this._onCancelField=a}function q(){this._onCancelField=this._cancellationParent=void 0}function t(a,d){if(0!==(1&d)){this._cancellationParent=a;var f=a._branchesRemainingToCancel;void 0===f&&(f=0);a._branchesRemainingToCancel=f+1}0!==(2&d)&&a._isBound()&&this._setBoundTo(a._boundTo)}function x(){var a=this._boundTo;return void 0!==a&&a instanceof d?a.isFulfilled()?a.value():void 0:a}function w(){this._trace=
      new R(this._peekContext())}function y(a,d){if(Aa(a)){var f=this._trace;(void 0!==f&&d&&(f=f._parent),void 0!==f)?f.attachExtraTrace(a):a.__stackCleaned__||(f=E(a),G.notEnumerableProp(a,"stack",f.message+"\n"+f.stack.join("\n")),G.notEnumerableProp(a,"__stackCleaned__",!0))}}function z(a,f,g){if(pa.warnings){var k;a=new Fa(a);f?g._attachExtraTrace(a):pa.longStackTraces&&(k=d._peekContext())?k.attachExtraTrace(a):(f=E(a),a.stack=f.message+"\n"+f.stack.join("\n"));xa("warning",a)||H(a,"",!0)}}function B(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                d){for(var f=0;f<d.length-1;++f)d[f].push("From previous event:"),d[f]=d[f].join("\n");return f<d.length&&(d[f]=d[f].join("\n")),a+"\n"+d.join("\n")}function C(a){for(var d=[],f=0;f<a.length;++f){var g=a[f],k="    (No stack trace)"===g||sa.test(g),r=k&&Ra(g);k&&!r&&(ta&&" "!==g.charAt(0)&&(g="    "+g),d.push(g))}return d}function E(a){var d=a.stack,f=a.toString(),g;if("string"==typeof d&&0<d.length){var k=a.stack.replace(/\s+$/g,"").split("\n");for(g=0;g<k.length;++g){var r=k[g];if("    (No stack trace)"===
      r||sa.test(r))break}g=(0<g&&"SyntaxError"!=a.name&&(k=k.slice(g)),k)}else g=["    (No stack trace)"];return d=g,{message:f,stack:"SyntaxError"==a.name?d:C(d)}}function H(a,d,f){"undefined"!=typeof console&&(a=G.isObject(a)?d+ca(a.stack,a):d+String(a),"function"==typeof da?da(a,f):("function"==typeof console.log||"object"==typeof console.log)&&console.log(a))}function K(a,d,f,g){var k=!1;try{"function"==typeof d&&(k=!0,"rejectionHandled"===a?d(g):d(f,g))}catch(r){ea.throwLater(r)}"unhandledRejection"===
    a?xa(a,f,g)||k||H(f,"Unhandled rejection "):xa(a,g)}function J(a){var d;if("function"==typeof a)d="[function "+(a.name||"anonymous")+"]";else{d=a&&"function"==typeof a.toString?a.toString():G.toString(a);if(/\[object [a-zA-Z0-9$_]+\]/.test(d))try{d=JSON.stringify(a)}catch(f){}0===d.length&&(d="(empty array)")}return"(<"+(41>d.length?d:d.substr(0,38)+"...")+">, no stack trace)"}function O(){return"function"==typeof Ma}function L(a){return(a=a.match(Q))?{fileName:a[1],line:parseInt(a[2],10)}:void 0}
      function R(a){this._parent=a;this._promisesCreated=0;a=this._length=1+(void 0===a?0:a._length);Ma(this,R);32<a&&this.uncycle()}var W,I,da,ya=d._getDomain,ea=d._async,Fa=n("./errors").Warning,G=n("./util"),Aa=G.canAttachTrace,Z=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,va=/\((?:timers\.js):\d+:\d+\)/,ga=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,sa=null,ca=null,ta=!1,Ba=!(0==G.env("BLUEBIRD_DEBUG")||!G.env("BLUEBIRD_DEBUG")&&"development"!==G.env("NODE_ENV")),Da=!(0==G.env("BLUEBIRD_WARNINGS")||
        !Ba&&!G.env("BLUEBIRD_WARNINGS")),Ba=!(0==G.env("BLUEBIRD_LONG_STACK_TRACES")||!Ba&&!G.env("BLUEBIRD_LONG_STACK_TRACES")),ua=0!=G.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Da||!!G.env("BLUEBIRD_W_FORGOTTEN_RETURN"));d.prototype.suppressUnhandledRejections=function(){var a=this._target();a._bitField=-1048577&a._bitField|524288};d.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),ea.invokeLater(this._notifyUnhandledRejection,this,void 0))};
      d.prototype._notifyUnhandledRejectionIsHandled=function(){K("rejectionHandled",W,void 0,this)};d.prototype._setReturnedNonUndefined=function(){this._bitField|=268435456};d.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)};d.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue();this._setUnhandledRejectionIsNotified();K("unhandledRejection",I,a,this)}};d.prototype._setUnhandledRejectionIsNotified=function(){this._bitField|=
        262144};d.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField&=-262145};d.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)};d.prototype._setRejectionIsUnhandled=function(){this._bitField|=1048576};d.prototype._unsetRejectionIsUnhandled=function(){this._bitField&=-1048577;this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())};d.prototype._isRejectionUnhandled=function(){return 0<
        (1048576&this._bitField)};d.prototype._warn=function(a,d,f){return z(a,d,f||this)};d.onPossiblyUnhandledRejection=function(a){var d=ya();I="function"==typeof a?null===d?a:G.domainBind(d,a):void 0};d.onUnhandledRejectionHandled=function(a){var d=ya();W="function"==typeof a?null===d?a:G.domainBind(d,a):void 0};var S=function(){};d.longStackTraces=function(){if(ea.haveItemsQueued()&&!pa.longStackTraces)throw Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");
        if(!pa.longStackTraces&&O()){var f=d.prototype._captureStackTrace,g=d.prototype._attachExtraTrace;pa.longStackTraces=!0;S=function(){if(ea.haveItemsQueued()&&!pa.longStackTraces)throw Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");d.prototype._captureStackTrace=f;d.prototype._attachExtraTrace=g;a.deactivateLongStackTraces();ea.enableTrampoline();pa.longStackTraces=!1};d.prototype._captureStackTrace=w;d.prototype._attachExtraTrace=y;a.activateLongStackTraces();
          ea.disableTrampolineIfNecessary()}};d.hasLongStackTraces=function(){return pa.longStackTraces&&O()};var ha=function(){try{if("function"==typeof CustomEvent){var a=new CustomEvent("CustomEvent");return G.global.dispatchEvent(a),function(a,d){var f=new CustomEvent(a.toLowerCase(),{detail:d,cancelable:!0});return!G.global.dispatchEvent(f)}}if("function"==typeof Event)return a=new Event("CustomEvent"),G.global.dispatchEvent(a),function(a,d){var f=new Event(a.toLowerCase(),{cancelable:!0});return f.detail=
        d,!G.global.dispatchEvent(f)};a=document.createEvent("CustomEvent");return a.initCustomEvent("testingtheevent",!1,!0,{}),G.global.dispatchEvent(a),function(a,d){var f=document.createEvent("CustomEvent");return f.initCustomEvent(a.toLowerCase(),!1,!0,d),!G.global.dispatchEvent(f)}}catch(d){}return function(){return!1}}(),Ia=function(){return G.isNode?function(){return process.emit.apply(process,arguments)}:G.global?function(a){var d="on"+a.toLowerCase();return(d=G.global[d])?(d.apply(G.global,[].slice.call(arguments,
        1)),!0):!1}:function(){return!1}}(),ba={promiseCreated:k,promiseFulfilled:k,promiseRejected:k,promiseResolved:k,promiseCancelled:k,promiseChained:function(a,d,f){return{promise:d,child:f}},warning:function(a,d){return{warning:d}},unhandledRejection:function(a,d,f){return{reason:d,promise:f}},rejectionHandled:k},xa=function(a){var d=!1;try{d=Ia.apply(null,arguments)}catch(f){ea.throwLater(f),d=!0}var g=!1;try{g=ha(a,ba[a].apply(null,arguments))}catch(f){ea.throwLater(f),g=!0}return g||d};d.config=
        function(a){if(a=Object(a),"longStackTraces"in a&&(a.longStackTraces?d.longStackTraces():!a.longStackTraces&&d.hasLongStackTraces()&&S()),"warnings"in a){var k=a.warnings;pa.warnings=!!k;ua=pa.warnings;G.isObject(k)&&"wForgottenReturn"in k&&(ua=!!k.wForgottenReturn)}if("cancellation"in a&&a.cancellation&&!pa.cancellation){if(ea.haveItemsQueued())throw Error("cannot enable cancellation after promises are in use");d.prototype._clearCancellationData=q;d.prototype._propagateFrom=t;d.prototype._onCancel=
          m;d.prototype._setOnCancel=l;d.prototype._attachCancellationCallback=g;d.prototype._execute=f;ka=t;pa.cancellation=!0}return"monitoring"in a&&(a.monitoring&&!pa.monitoring?(pa.monitoring=!0,d.prototype._fireEvent=xa):!a.monitoring&&pa.monitoring&&(pa.monitoring=!1,d.prototype._fireEvent=r)),d};d.prototype._fireEvent=r;d.prototype._execute=function(a,d,f){try{a(d,f)}catch(g){return g}};d.prototype._onCancel=function(){};d.prototype._setOnCancel=function(a){};d.prototype._attachCancellationCallback=
        function(a){};d.prototype._captureStackTrace=function(){};d.prototype._attachExtraTrace=function(){};d.prototype._clearCancellationData=function(){};d.prototype._propagateFrom=function(a,d){};var ka=function(a,d){0!==(2&d)&&a._isBound()&&this._setBoundTo(a._boundTo)},Ra=function(){return!1},Q=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;G.inherits(R,Error);a.CapturedTrace=R;R.prototype.uncycle=function(){var a=this._length;if(!(2>a)){for(var d=[],f={},g=0,a=this;void 0!==a;++g)d.push(a),a=a._parent;a=
        this._length=g;for(g=a-1;0<=g;--g){var k=d[g].stack;void 0===f[k]&&(f[k]=g)}for(g=0;a>g;++g)if(k=f[d[g].stack],void 0!==k&&k!==g){0<k&&(d[k-1]._parent=void 0,d[k-1]._length=1);d[g]._parent=void 0;d[g]._length=1;f=0<g?d[g-1]:this;a-1>k?(f._parent=d[k+1],f._parent.uncycle(),f._length=f._parent._length+1):(f._parent=void 0,f._length=1);a=f._length+1;for(g-=2;0<=g;--g)d[g]._length=a,a++;break}}};R.prototype.attachExtraTrace=function(a){if(!a.__stackCleaned__){this.uncycle();for(var d=E(a),f=d.message,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         d=[d.stack],g=this;void 0!==g;)d.push(C(g.stack.split("\n"))),g=g._parent;for(var g=d[0],k=1;k<d.length;++k){for(var r=d[k],m=g.length-1,l=g[m],q=-1,n=r.length-1;0<=n;--n)if(r[n]===l){q=n;break}for(n=q;0<=n&&g[m]===r[n];--n)g.pop(),m--;g=r}for(g=0;g<d.length;++g)(0===d[g].length||g+1<d.length&&d[g][0]===d[g+1][0])&&(d.splice(g,1),g--);G.notEnumerableProp(a,"stack",B(f,d));G.notEnumerableProp(a,"__stackCleaned__",!0)}};var Ma=function(){var a=/^\s*at\s*/,d=function(a,d){return"string"==typeof a?a:
        void 0!==d.name&&void 0!==d.message?d.toString():J(d)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6;sa=a;ca=d;var f=Error.captureStackTrace;return Ra=function(a){return Z.test(a)},function(a,d){Error.stackTraceLimit+=6;f(a,d);Error.stackTraceLimit-=6}}var g=Error();if("string"==typeof g.stack&&0<=g.stack.split("\n")[0].indexOf("stackDetection@"))return sa=/@/,ca=d,ta=!0,function(a){a.stack=Error().stack};var k;try{throw Error();}catch(r){k=
        "stack"in r}return"stack"in g||!k||"number"!=typeof Error.stackTraceLimit?(ca=function(a,d){return"string"==typeof a?a:"object"!=typeof d&&"function"!=typeof d||void 0===d.name||void 0===d.message?J(d):d.toString()},null):(sa=a,ca=d,function(a){Error.stackTraceLimit+=6;try{throw Error();}catch(d){a.stack=d.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(da=function(a){console.warn(a)},G.isNode&&process.stderr.isTTY?da=function(a,d){console.warn((d?
        "\u001b[33m":"\u001b[31m")+a+"\u001b[0m\n")}:G.isNode||"string"!=typeof Error().stack||(da=function(a,d){console.warn("%c"+a,d?"color: darkorange":"color: red")}));var pa={warnings:Da,longStackTraces:!1,cancellation:!1,monitoring:!1};return Ba&&d.longStackTraces(),{longStackTraces:function(){return pa.longStackTraces},warnings:function(){return pa.warnings},cancellation:function(){return pa.cancellation},monitoring:function(){return pa.monitoring},propagateFromFunction:function(){return ka},boundValueFunction:function(){return x},
        checkForgottenReturns:function(a,d,f,g,k){if(void 0===a&&null!==d&&ua&&(void 0===k||!k._returnedNonUndefined())&&0!==(65535&g._bitField)){f&&(f+=" ");k=a="";if(d._trace){for(var r=d._trace.stack.split("\n"),m=C(r),l=m.length-1;0<=l;--l){var q=m[l];if(!va.test(q)){(l=q.match(ga))&&(a="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(0<m.length)for(m=m[0],l=0;l<r.length;++l)if(r[l]===m){0<l&&(k="\n"+r[l-1]);break}}g._warn("a promise was created in a "+f+"handler "+a+"but was not returned from it, see http://goo.gl/rRqMUw"+
          k,!0,d)}},setBounds:function(a,d){if(O()){for(var f,g,k=a.stack.split("\n"),r=d.stack.split("\n"),m=-1,l=-1,q=0;q<k.length;++q){var n=L(k[q]);if(n){f=n.fileName;m=n.line;break}}for(q=0;q<r.length;++q)if(n=L(r[q])){g=n.fileName;l=n.line;break}0>m||0>l||!f||!g||f!==g||m>=l||(Ra=function(a){return Z.test(a)?!0:(a=L(a))&&a.fileName===f&&m<=a.line&&a.line<=l?!0:!1})}},warn:z,deprecated:function(a,d){var f=a+" is deprecated and will be removed in a future version.";return d&&(f+=" Use "+d+" instead."),
          z(f)},CapturedTrace:R,fireDomEvent:ha,fireGlobalEvent:Ia}}},{"./errors":12,"./util":36}],10:[function(n,l,m){l.exports=function(d){function a(){return this.value}function k(){throw this.reason;}d.prototype["return"]=d.prototype.thenReturn=function(k){return k instanceof d&&k.suppressUnhandledRejections(),this._then(a,void 0,void 0,{value:k},void 0)};d.prototype["throw"]=d.prototype.thenThrow=function(a){return this._then(k,void 0,void 0,{reason:a},void 0)};d.prototype.catchThrow=function(a){if(1>=
      arguments.length)return this._then(void 0,k,void 0,{reason:a},void 0);var d=arguments[1];return this.caught(a,function(){throw d;})};d.prototype.catchReturn=function(k){if(1>=arguments.length)return k instanceof d&&k.suppressUnhandledRejections(),this._then(void 0,a,void 0,{value:k},void 0);var f=arguments[1];f instanceof d&&f.suppressUnhandledRejections();return this.caught(k,function(){return f})}}},{}],11:[function(n,l,m){l.exports=function(d,a){function k(){return f(this)}var r=d.reduce,f=d.all;
      d.prototype.each=function(d){return r(this,d,a,0)._then(k,void 0,void 0,this,void 0)};d.prototype.mapSeries=function(d){return r(this,d,a,a)};d.each=function(d,f){return r(d,f,a,0)._then(k,void 0,void 0,d,void 0)};d.mapSeries=function(d,f){return r(d,f,a,a)}}},{}],12:[function(n,l,m){function d(a,d){function f(g){return this instanceof f?(u(this,"message","string"==typeof g?g:d),u(this,"name",a),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new f(g)}
      return g(f,Error),f}function a(d){return this instanceof a?(u(this,"name","OperationalError"),u(this,"message",d),this.cause=d,this.isOperational=!0,void(d instanceof Error?(u(this,"message",d.message),u(this,"stack",d.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new a(d)}var k,r;m=n("./es5");var f=m.freeze;n=n("./util");var g=n.inherits,u=n.notEnumerableProp;n=d("Warning","warning");var v=d("CancellationError","cancellation error"),q=d("TimeoutError","timeout error"),
      t=d("AggregateError","aggregate error");try{k=TypeError,r=RangeError}catch(x){k=d("TypeError","type error"),r=d("RangeError","range error")}for(var w="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<w.length;++y)"function"==typeof Array.prototype[w[y]]&&(t.prototype[w[y]]=Array.prototype[w[y]]);m.defineProperty(t.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0});t.prototype.isOperational=!0;
      var z=0;t.prototype.toString=function(){var a=Array(4*z+1).join(" "),d="\n"+a+"AggregateError of:\n";z++;for(var a=Array(4*z+1).join(" "),f=0;f<this.length;++f){for(var g=this[f]===this?"[Circular AggregateError]":this[f]+"",g=g.split("\n"),k=0;k<g.length;++k)g[k]=a+g[k];g=g.join("\n");d+=g+"\n"}return z--,d};g(a,Error);(w=Error.__BluebirdErrorTypes__)||(w=f({CancellationError:v,TimeoutError:q,OperationalError:a,RejectionError:a,AggregateError:t}),m.defineProperty(Error,"__BluebirdErrorTypes__",{value:w,
        writable:!1,enumerable:!1,configurable:!1}));l.exports={Error:Error,TypeError:k,RangeError:r,CancellationError:w.CancellationError,OperationalError:w.OperationalError,TimeoutError:w.TimeoutError,AggregateError:w.AggregateError,Warning:n}},{"./es5":13,"./util":36}],13:[function(n,l,m){if(n=function(){return void 0===this}())l.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,
      isArray:Array.isArray,isES5:n,propertyIsWritable:function(a,d){var g=Object.getOwnPropertyDescriptor(a,d);return!(g&&!g.writable&&!g.set)}};else{var d={}.hasOwnProperty,a={}.toString,k={}.constructor.prototype;m=function(a){var f=[],g;for(g in a)d.call(a,g)&&f.push(g);return f};l.exports={isArray:function(d){try{return"[object Array]"===a.call(d)}catch(f){return!1}},keys:m,names:m,defineProperty:function(a,d,g){return a[d]=g.value,a},getDescriptor:function(a,d){return{value:a[d]}},freeze:function(a){return a},
      getPrototypeOf:function(a){try{return Object(a).constructor.prototype}catch(d){return k}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(n,l,m){l.exports=function(d,a){var k=d.map;d.prototype.filter=function(d,f){return k(this,d,f,a)};d.filter=function(d,f,g){return k(d,f,g,a)}}},{}],15:[function(n,l,m){l.exports=function(d,a,k){function r(a,d,f){this.promise=a;this.type=d;this.handler=f;this.called=!1;this.cancelPromise=null}function f(a){this.finallyHandler=a}function g(a,d){return null!=
    a.cancelPromise?(1<arguments.length?a.cancelPromise._reject(d):a.cancelPromise._cancel(),a.cancelPromise=null,!0):!1}function m(){return q.call(this,this.promise._target()._settledValue())}function l(a){return g(this,a)?void 0:(w.e=a,w)}function q(r){var q=this.promise,n=this.handler;if(!this.called){this.called=!0;n=this.isFinallyHandler()?n.call(q._boundValue()):n.call(q._boundValue(),r);if(n===k)return n;if(void 0!==n&&(q._setReturnedNonUndefined(),n=a(n,q),n instanceof d)){if(null!=this.cancelPromise){if(n._isCancelled())return r=
      new x("late cancellation observer"),q._attachExtraTrace(r),w.e=r,w;n.isPending()&&n._attachCancellationCallback(new f(this))}return n._then(m,l,void 0,this,void 0)}}return q.isRejected()?(g(this),w.e=r,w):(g(this),r)}var t=n("./util"),x=d.CancellationError,w=t.errorObj,y=n("./catch_filter")(k);return r.prototype.isFinallyHandler=function(){return 0===this.type},f.prototype._resultCancelled=function(){g(this.finallyHandler)},d.prototype._passThrough=function(a,d,f,g){return"function"!=typeof a?this.then():
      this._then(f,g,void 0,new r(this,d,a),void 0)},d.prototype.lastly=d.prototype["finally"]=function(a){return this._passThrough(a,0,q,q)},d.prototype.tap=function(a){return this._passThrough(a,1,q)},d.prototype.tapCatch=function(a){var f=arguments.length;if(1===f)return this._passThrough(a,1,void 0,q);var g,k=Array(f-1),r=0;for(g=0;f-1>g;++g){var m=arguments[g];if(!t.isObject(m))return d.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+t.classString(m)));k[r++]=m}k.length=
      r;return this._passThrough(y(k,arguments[g],this),1,void 0,q)},r}},{"./catch_filter":7,"./util":36}],16:[function(n,l,m){l.exports=function(d,a,k,r,f,g){function m(a,f,r,l){if(g.cancellation()){var n=new d(k),q=this._finallyPromise=new d(k);this._promise=n.lastly(function(){return q});n._captureStackTrace();n._setOnCancel(this)}else(this._promise=new d(k))._captureStackTrace();this._stack=l;this._generatorFunction=a;this._receiver=f;this._generator=void 0;this._yieldHandlers="function"==typeof r?
      [r].concat(w):w;this._yieldedPromise=null;this._cancellationPhase=!1}var l=n("./errors").TypeError,q=n("./util"),t=q.errorObj,x=q.tryCatch,w=[];q.inherits(m,f);m.prototype._isResolved=function(){return null===this._promise};m.prototype._cleanup=function(){this._promise=this._generator=null;g.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)};m.prototype._promiseCancelled=function(){if(!this._isResolved()){var a;"undefined"!=typeof this._generator["return"]?
      (this._promise._pushContext(),a=x(this._generator["return"]).call(this._generator,void 0)):(a=new d.CancellationError("generator .return() sentinel"),d.coroutine.returnSentinel=a,this._promise._attachExtraTrace(a),this._promise._pushContext(),a=x(this._generator["throw"]).call(this._generator,a));this._promise._popContext();this._cancellationPhase=!0;this._yieldedPromise=null;this._continue(a)}};m.prototype._promiseFulfilled=function(a){this._yieldedPromise=null;this._promise._pushContext();a=x(this._generator.next).call(this._generator,
      a);this._promise._popContext();this._continue(a)};m.prototype._promiseRejected=function(a){this._yieldedPromise=null;this._promise._attachExtraTrace(a);this._promise._pushContext();a=x(this._generator["throw"]).call(this._generator,a);this._promise._popContext();this._continue(a)};m.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof d){var a=this._yieldedPromise;this._yieldedPromise=null;a.cancel()}};m.prototype.promise=function(){return this._promise};m.prototype._run=function(){this._generator=
      this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=void 0;this._promiseFulfilled(void 0)};m.prototype._continue=function(a){var f=this._promise;if(a===t)return this._cleanup(),this._cancellationPhase?f.cancel():f._rejectCallback(a.e,!1);var g=a.value;if(!0===a.done)return this._cleanup(),this._cancellationPhase?f.cancel():f._resolveCallback(g);a=r(g,this._promise);if(f=!(a instanceof d)){a:{for(var k=a,m=this._yieldHandlers,f=this._promise,n=0;n<m.length;++n){f._pushContext();
      var q=x(m[n])(k);if(f._popContext(),q===t){f._pushContext();k=d.reject(t.e);f=(f._popContext(),k);break a}q=r(q,f);if(q instanceof d){f=q;break a}}f=null}f=(a=f,null===a)}if(f)return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(g))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));a=a._target();g=a._bitField;0===(50397184&g)?(this._yieldedPromise=a,a._proxy(this,null)):0!==
    (33554432&g)?d._async.invoke(this._promiseFulfilled,this,a._value()):0!==(16777216&g)?d._async.invoke(this._promiseRejected,this,a._reason()):this._promiseCancelled()};d.coroutine=function(a,d){if("function"!=typeof a)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var f=Object(d).yieldHandler,g=Error().stack;return function(){var d=a.apply(this,arguments),k=new m(void 0,void 0,f,g),r=k.promise();return k._generator=d,k._promiseFulfilled(void 0),r}};d.coroutine.addYieldHandler=
      function(a){if("function"!=typeof a)throw new l("expecting a function but got "+q.classString(a));w.push(a)};d.spawn=function(f){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof f)return a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");f=new m(f,this);var k=f.promise();return f._run(d.spawn),k}}},{"./errors":12,"./util":36}],17:[function(n,l,m){l.exports=function(d,a,k,r,f,g){k=n("./util");k.canEvaluate;k.tryCatch;k.errorObj;d.join=function(){var d,
      f=arguments.length-1;0<f&&"function"==typeof arguments[f]&&(d=arguments[f]);f=[].slice.call(arguments);d&&f.pop();f=(new a(f)).promise();return void 0!==d?f.spread(d):f}}},{"./util":36}],18:[function(n,l,m){l.exports=function(d,a,k,r,f,g){function m(a,d,g,k){this.constructor$(a);this._promise._captureStackTrace();a=q();this._callback=null===a?d:t.domainBind(a,d);this._preservedValues=k===f?Array(this.length()):null;this._limit=g;this._inFlight=0;this._queue=[];y.invoke(this._asyncInit,this,void 0)}
      function l(a,f,g,r){if("function"!=typeof f)return k("expecting a function but got "+t.classString(f));var n=0;if(void 0!==g){if("object"!=typeof g||null===g)return d.reject(new TypeError("options argument must be an object but it is "+t.classString(g)));if("number"!=typeof g.concurrency)return d.reject(new TypeError("'concurrency' must be a number but it is "+t.classString(g.concurrency)));n=g.concurrency}return n="number"==typeof n&&isFinite(n)&&1<=n?n:0,(new m(a,f,n,r)).promise()}var q=d._getDomain,
        t=n("./util"),x=t.tryCatch,w=t.errorObj,y=d._async;t.inherits(m,a);m.prototype._asyncInit=function(){this._init$(void 0,-2)};m.prototype._init=function(){};m.prototype._promiseFulfilled=function(a,f){var k=this._values,m=this.length(),l=this._preservedValues,n=this._limit;if(0>f){if(f=-1*f-1,k[f]=a,1<=n&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(1<=n&&this._inFlight>=n)return k[f]=a,this._queue.push(f),!1;null!==l&&(l[f]=a);var q=this._promise,u=this._callback,v=q._boundValue();
        q._pushContext();u=x(u).call(v,a,f,m);v=q._popContext();if(g.checkForgottenReturns(u,v,null!==l?"Promise.filter":"Promise.map",q),u===w)return this._reject(u.e),!0;q=r(u,this._promise);if(q instanceof d){q=q._target();u=q._bitField;if(0===(50397184&u))return 1<=n&&this._inFlight++,k[f]=q,q._proxy(this,-1*(f+1)),!1;if(0===(33554432&u))return 0!==(16777216&u)?(this._reject(q._reason()),!0):(this._cancel(),!0);u=q._value()}k[f]=u}return++this._totalResolved>=m?(null!==l?this._filter(k,l):this._resolve(k),
        !0):!1};m.prototype._drainQueue=function(){for(var a=this._queue,d=this._limit,f=this._values;0<a.length&&this._inFlight<d&&!this._isResolved();){var g=a.pop();this._promiseFulfilled(f[g],g)}};m.prototype._filter=function(a,d){for(var f=d.length,g=Array(f),k=0,r=0;f>r;++r)a[r]&&(g[k++]=d[r]);g.length=k;this._resolve(g)};m.prototype.preservedValues=function(){return this._preservedValues};d.prototype.map=function(a,d){return l(this,a,d,null)};d.map=function(a,d,f,g){return l(a,d,f,g)}}},{"./util":36}],
    19:[function(n,l,m){l.exports=function(d,a,k,r,f){var g=n("./util"),m=g.tryCatch;d.method=function(k){if("function"!=typeof k)throw new d.TypeError("expecting a function but got "+g.classString(k));return function(){var g=new d(a);g._captureStackTrace();g._pushContext();var r=m(k).apply(this,arguments),l=g._popContext();return f.checkForgottenReturns(r,l,"Promise.method",g),g._resolveFromSyncValue(r),g}};d.attempt=d["try"]=function(k){if("function"!=typeof k)return r("expecting a function but got "+
      g.classString(k));var l=new d(a);l._captureStackTrace();l._pushContext();var n;if(1<arguments.length){f.deprecated("calling Promise.try with more than 1 argument");n=arguments[1];var x=arguments[2];n=g.isArray(n)?m(k).apply(x,n):m(k).call(x,n)}else n=m(k)();x=l._popContext();return f.checkForgottenReturns(n,x,"Promise.try",l),l._resolveFromSyncValue(n),l};d.prototype._resolveFromSyncValue=function(a){a===g.errorObj?this._rejectCallback(a.e,!1):this._resolveCallback(a,!0)}}},{"./util":36}],20:[function(n,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 l,m){var d=n("./util"),a=d.maybeWrapAsError,k=n("./errors").OperationalError,r=n("./es5"),f=/^(?:name|message|stack|cause)$/;l.exports=function(g,m){return function(l,n){if(null!==g){if(l){var t;t=a(l);var x;if(t instanceof Error&&r.getPrototypeOf(t)===Error.prototype){x=new k(t);x.name=t.name;x.message=t.message;x.stack=t.stack;for(var w=r.keys(t),y=0;y<w.length;++y){var z=w[y];f.test(z)||(x[z]=t[z])}t=x}else t=(d.markAsOriginatingFromRejection(t),t);g._attachExtraTrace(t);g._reject(t)}else m?(t=
      [].slice.call(arguments,1),g._fulfill(t)):g._fulfill(n);g=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(n,l,m){l.exports=function(d){function a(a,d){if(!f.isArray(a))return k.call(this,a,d);var r=m(d).apply(this._boundValue(),[null].concat(a));r===l&&g.throwLater(r.e)}function k(a,d){var f=this._boundValue(),f=void 0===a?m(d).call(f,null):m(d).call(f,null,a);f===l&&g.throwLater(f.e)}function r(a,d){if(!a){var f=Error(a+"");f.cause=a;a=f}f=m(d).call(this._boundValue(),a);f===l&&g.throwLater(f.e)}
      var f=n("./util"),g=d._async,m=f.tryCatch,l=f.errorObj;d.prototype.asCallback=d.prototype.nodeify=function(d,f){if("function"==typeof d){var g=k;void 0!==f&&Object(f).spread&&(g=a);this._then(g,r,void 0,this,d)}return this}}},{"./util":36}],22:[function(n,l,m){l.exports=function(){function d(){}function a(d){if(d!==E){if(null==this||this.constructor!==a)throw new B("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof d)throw new B("expecting a function but got "+
      x.classString(d));}this._bitField=0;this._receiver0=this._promise0=this._rejectionHandler0=this._fulfillmentHandler0=void 0;this._resolveFromExecutor(d);this._promiseCreated();this._fireEvent("promiseCreated",this)}function k(a){this.promise._resolveCallback(a)}function r(a){this.promise._rejectCallback(a,!1)}function f(d){var f=new a(E);f._fulfillmentHandler0=d;f._rejectionHandler0=d;f._promise0=d;f._receiver0=d}var g,m=function(){return new B("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},
      v=function(){return new a.PromiseInspection(this._target())},q=function(d){return a.reject(new B(d))},t={},x=n("./util");g=x.isNode?function(){var a=process.domain;return void 0===a&&(a=null),a}:function(){return null};x.notEnumerableProp(a,"_getDomain",g);var w=n("./es5"),y=n("./async"),z=new y;w.defineProperty(a,"_async",{value:z});var w=n("./errors"),B=a.TypeError=w.TypeError;a.RangeError=w.RangeError;var C=a.CancellationError=w.CancellationError;a.TimeoutError=w.TimeoutError;a.OperationalError=
      w.OperationalError;a.RejectionError=w.OperationalError;a.AggregateError=w.AggregateError;var E=function(){},H={},K={},J=n("./thenables")(a,E),O=n("./promise_array")(a,E,J,q,d),w=n("./context")(a),L=w.create,R=n("./debuggability")(a,w),W=(R.CapturedTrace,n("./finally")(a,J,K)),I=n("./catch_filter")(K),da=n("./nodeback"),ya=x.errorObj,ea=x.tryCatch;return a.prototype.toString=function(){return"[object Promise]"},a.prototype.caught=a.prototype["catch"]=function(a){var d=arguments.length;if(1<d){var f,
      g=Array(d-1),k=0;for(f=0;d-1>f;++f){var r=arguments[f];if(!x.isObject(r))return q("Catch statement predicate: expecting an object but got "+x.classString(r));g[k++]=r}return g.length=k,a=arguments[f],this.then(void 0,I(g,a,this))}return this.then(void 0,a)},a.prototype.reflect=function(){return this._then(v,v,void 0,this,void 0)},a.prototype.then=function(a,d){if(R.warnings()&&0<arguments.length&&"function"!=typeof a&&"function"!=typeof d){var f=".then() only accepts functions but was passed: "+x.classString(a);
      1<arguments.length&&(f+=", "+x.classString(d));this._warn(f)}return this._then(a,d,void 0,void 0,void 0)},a.prototype.done=function(a,d){this._then(a,d,void 0,void 0,void 0)._setIsFinal()},a.prototype.spread=function(a){return"function"!=typeof a?q("expecting a function but got "+x.classString(a)):this.all()._then(a,void 0,void 0,H,void 0)},a.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=
      this.value(),a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this.reason(),a.isRejected=!0),a},a.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),(new O(this)).promise()},a.prototype.error=function(a){return this.caught(x.originatesFromRejection,a)},a.getNewLibraryCopy=l.exports,a.is=function(d){return d instanceof a},a.fromNode=a.fromCallback=function(d){var f=new a(E);f._captureStackTrace();var g=1<arguments.length?!!Object(arguments[1]).multiArgs:
      !1,g=ea(d)(da(f,g));return g===ya&&f._rejectCallback(g.e,!0),f._isFateSealed()||f._setAsyncGuaranteed(),f},a.all=function(a){return(new O(a)).promise()},a.cast=function(d){var f=J(d);return f instanceof a||(f=new a(E),f._captureStackTrace(),f._setFulfilled(),f._rejectionHandler0=d),f},a.resolve=a.fulfilled=a.cast,a.reject=a.rejected=function(d){var f=new a(E);return f._captureStackTrace(),f._rejectCallback(d,!0),f},a.setScheduler=function(a){if("function"!=typeof a)throw new B("expecting a function but got "+
      x.classString(a));return z.setScheduler(a)},a.prototype._then=function(d,f,k,r,m){var l=void 0!==m;m=l?m:new a(E);k=this._target();var n=k._bitField;l||(m._propagateFrom(this,3),m._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&n)?this._boundValue():k===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,m));l=g();if(0!==(50397184&n)){var q,u,v=k._settlePromiseCtx;0!==(33554432&n)?(u=k._rejectionHandler0,q=d):0!==(16777216&n)?(u=k._fulfillmentHandler0,
      q=f,k._unsetRejectionIsUnhandled()):(v=k._settlePromiseLateCancellationObserver,u=new C("late cancellation observer"),k._attachExtraTrace(u),q=f);z.invoke(v,k,{handler:null===l?q:"function"==typeof q&&x.domainBind(l,q),promise:m,receiver:r,value:u})}else k._addCallbacks(d,f,m,r,l);return m},a.prototype._length=function(){return 65535&this._bitField},a.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},a.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},
      a.prototype._setLength=function(a){this._bitField=-65536&this._bitField|65535&a},a.prototype._setFulfilled=function(){this._bitField|=33554432;this._fireEvent("promiseFulfilled",this)},a.prototype._setRejected=function(){this._bitField|=16777216;this._fireEvent("promiseRejected",this)},a.prototype._setFollowing=function(){this._bitField|=67108864;this._fireEvent("promiseResolved",this)},a.prototype._setIsFinal=function(){this._bitField|=4194304},a.prototype._isFinal=function(){return 0<(4194304&this._bitField)},
      a.prototype._unsetCancelled=function(){this._bitField&=-65537},a.prototype._setCancelled=function(){this._bitField|=65536;this._fireEvent("promiseCancelled",this)},a.prototype._setWillBeCancelled=function(){this._bitField|=8388608},a.prototype._setAsyncGuaranteed=function(){z.hasCustomScheduler()||(this._bitField|=134217728)},a.prototype._receiverAt=function(a){a=0===a?this._receiver0:this[4*a-4+3];return a===t?void 0:void 0===a&&this._isBound()?this._boundValue():a},a.prototype._promiseAt=function(a){return this[4*
    a-4+2]},a.prototype._fulfillmentHandlerAt=function(a){return this[4*a-4+0]},a.prototype._rejectionHandlerAt=function(a){return this[4*a-4+1]},a.prototype._boundValue=function(){},a.prototype._migrateCallback0=function(a){var d=(a._bitField,a._fulfillmentHandler0),f=a._rejectionHandler0,g=a._promise0;a=a._receiverAt(0);void 0===a&&(a=t);this._addCallbacks(d,f,g,a,null)},a.prototype._migrateCallbackAt=function(a,d){var f=a._fulfillmentHandlerAt(d),g=a._rejectionHandlerAt(d),k=a._promiseAt(d),r=a._receiverAt(d);
      void 0===r&&(r=t);this._addCallbacks(f,g,k,r,null)},a.prototype._addCallbacks=function(a,d,f,g,k){var r=this._length();if(65531<=r&&(r=0,this._setLength(0)),0===r)this._promise0=f,this._receiver0=g,"function"==typeof a&&(this._fulfillmentHandler0=null===k?a:x.domainBind(k,a)),"function"==typeof d&&(this._rejectionHandler0=null===k?d:x.domainBind(k,d));else{var m=4*r-4;this[m+2]=f;this[m+3]=g;"function"==typeof a&&(this[m+0]=null===k?a:x.domainBind(k,a));"function"==typeof d&&(this[m+1]=null===k?d:
      x.domainBind(k,d))}return this._setLength(r+1),r},a.prototype._proxy=function(a,d){this._addCallbacks(void 0,void 0,d,a,null)},a.prototype._resolveCallback=function(d,f){if(0===(117506048&this._bitField)){if(d===this)return this._rejectCallback(m(),!1);var g=J(d,this);if(!(g instanceof a))return this._fulfill(d);f&&this._propagateFrom(g,2);g=g._target();if(g===this)return void this._reject(m());var k=g._bitField;if(0===(50397184&k)){k=this._length();0<k&&g._migrateCallback0(this);for(var r=1;k>r;++r)g._migrateCallbackAt(this,
      r);this._setFollowing();this._setLength(0);this._setFollowee(g)}else 0!==(33554432&k)?this._fulfill(g._value()):0!==(16777216&k)?this._reject(g._reason()):(k=new C("late cancellation observer"),g._attachExtraTrace(k),this._reject(k))}},a.prototype._rejectCallback=function(a,d,f){var g=x.ensureErrorObject(a),k=g===a;k||f||!R.warnings()||(f="a promise was rejected with a non-error: "+x.classString(a),this._warn(f,!0));this._attachExtraTrace(g,d?k:!1);this._reject(a)},a.prototype._resolveFromExecutor=
      function(a){if(a!==E){var d=this;this._captureStackTrace();this._pushContext();var f=!0;a=this._execute(a,function(a){d._resolveCallback(a)},function(a){d._rejectCallback(a,f)});f=!1;this._popContext();void 0!==a&&d._rejectCallback(a,!0)}},a.prototype._settlePromiseFromHandler=function(a,d,f,g){var k=g._bitField;if(0===(65536&k)){g._pushContext();var r;d===H?f&&"number"==typeof f.length?r=ea(a).apply(this._boundValue(),f):(r=ya,r.e=new B("cannot .spread() a non-array: "+x.classString(f))):r=ea(a).call(d,
      f);a=g._popContext();k=g._bitField;0===(65536&k)&&(r===K?g._reject(f):r===ya?g._rejectCallback(r.e,!1):(R.checkForgottenReturns(r,a,"",g,this),g._resolveCallback(r)))}},a.prototype._target=function(){for(var a=this;a._isFollowing();)a=a._followee();return a},a.prototype._followee=function(){return this._rejectionHandler0},a.prototype._setFollowee=function(a){this._rejectionHandler0=a},a.prototype._settlePromise=function(f,g,k,r){var m=f instanceof a,l=this._bitField,n=0!==(134217728&l);0!==(65536&
      l)?(m&&f._invokeInternalOnCancel(),k instanceof W&&k.isFinallyHandler()?(k.cancelPromise=f,ea(g).call(k,r)===ya&&f._reject(ya.e)):g===v?f._fulfill(v.call(k)):k instanceof d?k._promiseCancelled(f):m||f instanceof O?f._cancel():k.cancel()):"function"==typeof g?m?(n&&f._setAsyncGuaranteed(),this._settlePromiseFromHandler(g,k,r,f)):g.call(k,r,f):k instanceof d?k._isResolved()||(0!==(33554432&l)?k._promiseFulfilled(r,f):k._promiseRejected(r,f)):m&&(n&&f._setAsyncGuaranteed(),0!==(33554432&l)?f._fulfill(r):
      f._reject(r))},a.prototype._settlePromiseLateCancellationObserver=function(d){var f=d.handler,g=d.promise,k=d.receiver;d=d.value;"function"==typeof f?g instanceof a?this._settlePromiseFromHandler(f,k,d,g):f.call(k,d,g):g instanceof a&&g._reject(d)},a.prototype._settlePromiseCtx=function(a){this._settlePromise(a.promise,a.handler,a.receiver,a.value)},a.prototype._settlePromise0=function(a,d,f){f=this._promise0;var g=this._receiverAt(0);this._receiver0=this._promise0=void 0;this._settlePromise(f,a,
      g,d)},a.prototype._clearCallbackDataAtIndex=function(a){a=4*a-4;this[a+2]=this[a+3]=this[a+0]=this[a+1]=void 0},a.prototype._fulfill=function(a){var d=this._bitField;if(!((117506048&d)>>>16)){if(a===this)return a=m(),this._attachExtraTrace(a),this._reject(a);this._setFulfilled();this._rejectionHandler0=a;0<(65535&d)&&(0!==(134217728&d)?this._settlePromises():z.settlePromises(this))}},a.prototype._reject=function(a){var d=this._bitField;if(!((117506048&d)>>>16))return this._setRejected(),this._fulfillmentHandler0=
      a,this._isFinal()?z.fatalError(a,x.isNode):void(0<(65535&d)?z.settlePromises(this):this._ensurePossibleRejectionHandled())},a.prototype._fulfillPromises=function(a,d){for(var f=1;a>f;f++){var g=this._fulfillmentHandlerAt(f),k=this._promiseAt(f),r=this._receiverAt(f);this._clearCallbackDataAtIndex(f);this._settlePromise(k,g,r,d)}},a.prototype._rejectPromises=function(a,d){for(var f=1;a>f;f++){var g=this._rejectionHandlerAt(f),k=this._promiseAt(f),r=this._receiverAt(f);this._clearCallbackDataAtIndex(f);
      this._settlePromise(k,g,r,d)}},a.prototype._settlePromises=function(){var a=this._bitField,d=65535&a;if(0<d){if(0!==(16842752&a)){var f=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,f,a);this._rejectPromises(d,f)}else f=this._rejectionHandler0,this._settlePromise0(this._fulfillmentHandler0,f,a),this._fulfillPromises(d,f);this._setLength(0)}this._clearCancellationData()},a.prototype._settledValue=function(){var a=this._bitField;return 0!==(33554432&a)?this._rejectionHandler0:
      0!==(16777216&a)?this._fulfillmentHandler0:void 0},a.defer=a.pending=function(){R.deprecated("Promise.defer","new Promise");return{promise:new a(E),resolve:k,reject:r}},x.notEnumerableProp(a,"_makeSelfResolutionError",m),n("./method")(a,E,J,q,R),n("./bind")(a,E,J,R),n("./cancel")(a,O,q,R),n("./direct_resolve")(a),n("./synchronous_inspection")(a),n("./join")(a,O,J,E,z,g),a.Promise=a,a.version="3.5.0",n("./map.js")(a,O,q,J,E,R),n("./call_get.js")(a),n("./using.js")(a,q,J,L,E,R),n("./timers.js")(a,E,
      R),n("./generators.js")(a,q,E,J,d,R),n("./nodeify.js")(a),n("./promisify.js")(a,E),n("./props.js")(a,O,J,q),n("./race.js")(a,E,J,q),n("./reduce.js")(a,O,q,J,E,R),n("./settle.js")(a,O,R),n("./some.js")(a,O,q),n("./filter.js")(a,E),n("./each.js")(a,E),n("./any.js")(a),x.toFastProperties(a),x.toFastProperties(a.prototype),f({a:1}),f({b:2}),f({c:3}),f(1),f(function(){}),f(void 0),f(!1),f(new a(E)),R.setBounds(y.firstLineError,x.lastLineError),a}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,
      "./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(n,l,m){l.exports=function(d,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   a,k,r,f){function g(a){switch(a){case -2:return[];case -3:return{};case -6:return new Map}}function m(f){var g=this._promise=new d(a);f instanceof d&&g._propagateFrom(f,3);g._setOnCancel(this);this._values=f;this._totalResolved=this._length=0;this._init(void 0,-2)}var l=n("./util");l.isArray;return l.inherits(m,f),m.prototype.length=function(){return this._length},m.prototype.promise=function(){return this._promise},m.prototype._init=function t(a,f){var m=k(this._values,this._promise);if(m instanceof
      d){var m=m._target(),n=m._bitField;if(this._values=m,0===(50397184&n))return this._promise._setAsyncGuaranteed(),m._then(t,this._reject,void 0,this,f);if(0===(33554432&n))return 0!==(16777216&n)?this._reject(m._reason()):this._cancel();m=m._value()}return(m=l.asArray(m),null===m)?(m=r("expecting an array or an iterable object but got "+l.classString(m)).reason(),void this._promise._rejectCallback(m,!1)):0===m.length?void(-5===f?this._resolveEmptyArray():this._resolve(g(f))):void this._iterate(m)},
      m.prototype._iterate=function(a){var f=this.getActualLength(a.length);this._length=f;this._values=this.shouldCopyValues()?Array(f):this._values;for(var g=this._promise,r=!1,m=null,l=0;f>l;++l){var n=k(a[l],g);n instanceof d?(n=n._target(),m=n._bitField):m=null;r?null!==m&&n.suppressUnhandledRejections():null!==m?0===(50397184&m)?(n._proxy(this,l),this._values[l]=n):r=0!==(33554432&m)?this._promiseFulfilled(n._value(),l):0!==(16777216&m)?this._promiseRejected(n._reason(),l):this._promiseCancelled(l):
        r=this._promiseFulfilled(n,l)}r||g._setAsyncGuaranteed()},m.prototype._isResolved=function(){return null===this._values},m.prototype._resolve=function(a){this._values=null;this._promise._fulfill(a)},m.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},m.prototype._reject=function(a){this._values=null;this._promise._rejectCallback(a,!1)},m.prototype._promiseFulfilled=function(a,d){this._values[d]=a;return++this._totalResolved>=
    this._length?(this._resolve(this._values),!0):!1},m.prototype._promiseCancelled=function(){return this._cancel(),!0},m.prototype._promiseRejected=function(a){return this._totalResolved++,this._reject(a),!0},m.prototype._resultCancelled=function(){if(!this._isResolved()){var a=this._values;if(this._cancel(),a instanceof d)a.cancel();else for(var f=0;f<a.length;++f)a[f]instanceof d&&a[f].cancel()}},m.prototype.shouldCopyValues=function(){return!0},m.prototype.getActualLength=function(a){return a},m}},
      {"./util":36}],24:[function(n,l,m){l.exports=function(d,a){function k(a){return!C.test(a)}function r(a){try{return!0===a.__isPromisified__}catch(d){return!1}}function f(a,d,f,g){for(var k=q.inheritedDataKeys(a),m=[],l=0;l<k.length;++l){var n=k[l],u=a[n],v=g===E?!0:E(n,u,a),w;(w="function"!=typeof u||r(u))||(w=(w=q.getDataPropertyOrDefault(a,n+d,B))?r(w):!1);w||!g(n,u,a,v)||m.push(n,u)}for(a=0;a<m.length;a+=2)if(g=m[a],f.test(g))for(g=g.replace(f,""),k=0;k<m.length;k+=2)if(m[k]===g)throw new z("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",
      d));return m}function g(f,g,k,m,r,n){function u(){var k=g;g===l&&(k=this);var m=new d(a);m._captureStackTrace();var r="string"==typeof z&&this!==y?this[z]:f,q=t(m,n);try{r.apply(k,x(arguments,q))}catch(B){m._rejectCallback(w(B),!0,!0)}return m._isFateSealed()||m._setAsyncGuaranteed(),m}var y=function(){return this}(),z=f;return"string"==typeof z&&(f=m),q.notEnumerableProp(u,"__isPromisified__",!0),u}function m(a,d,g,k,r){var n=new RegExp(d.replace(/([$])/,"\\$")+"$");g=f(a,d,n,g);for(var n=0,u=g.length;u>
    n;n+=2){var w=g[n],t=g[n+1],x=w+d;if(k===H)a[x]=H(w,l,w,t,d,r);else{var y=k(t,function(){return H(w,l,w,t,d,r)});q.notEnumerableProp(y,"__isPromisified__",!0);a[x]=y}}return q.toFastProperties(a),a}var l={},q=n("./util"),t=n("./nodeback"),x=q.withAppended,w=q.maybeWrapAsError,y=q.canEvaluate,z=n("./errors").TypeError,B={__isPromisified__:!0},C=/^(?:arity|length|name|arguments|caller|callee|prototype|__isPromisified__)$/,E=function(a){return q.isIdentifier(a)&&"_"!==a.charAt(0)&&"constructor"!==a},
      H=y?void 0:g;d.promisify=function(a,d){if("function"!=typeof a)throw new z("expecting a function but got "+q.classString(a));if(r(a))return a;d=Object(d);var f=H(a,void 0===d.context?l:d.context,void 0,a,null,!!d.multiArgs);return q.copyDescriptors(a,f,k),f};d.promisifyAll=function(a,d){if("function"!=typeof a&&"object"!=typeof a)throw new z("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");d=Object(d);var f=!!d.multiArgs,g=d.suffix;"string"!=typeof g&&
    (g="Async");var k=d.filter;"function"!=typeof k&&(k=E);var r=d.promisifier;if("function"!=typeof r&&(r=H),!q.isIdentifier(g))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var l=q.inheritedDataKeys(a),n=0;n<l.length;++n){var v=a[l[n]];"constructor"!==l[n]&&q.isClass(v)&&(m(v.prototype,g,k,r,f),m(v,g,k,r,f))}return m(a,g,k,r,f)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(n,l,m){l.exports=function(d,a,k,m){function f(a){var d,f=!1;if(void 0!==
      l&&a instanceof l)d=x(a),f=!0;else{var g=t.keys(a),k=g.length;d=Array(2*k);for(var m=0;k>m;++m){var r=g[m];d[m]=a[r];d[m+k]=r}}this.constructor$(d);this._isMap=f;this._init$(void 0,f?-6:-3)}function g(a){var g;a=k(a);return q(a)?(g=a instanceof d?a._then(d.props,void 0,void 0,void 0,void 0):(new f(a)).promise(),a instanceof d&&g._propagateFrom(a,2),g):m("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var l,v=n("./util"),q=v.isObject,t=n("./es5");"function"==typeof Map&&
    (l=Map);var x=function(){function a(g,k){this[d]=g;this[d+f]=k;d++}var d=0,f=0;return function(g){f=g.size;d=0;var k=Array(2*g.size);return g.forEach(a,k),k}}();v.inherits(f,a);f.prototype._init=function(){};f.prototype._promiseFulfilled=function(a,d){this._values[d]=a;if(++this._totalResolved>=this._length){var f;if(this._isMap){f=this._values;for(var g=new l,k=f.length/2|0,m=0;k>m;++m)g.set(f[k+m],f[m]);f=g}else for(f={},g=this.length(),k=0,m=this.length();m>k;++k)f[this._values[k+g]]=this._values[k];
      return this._resolve(f),!0}return!1};f.prototype.shouldCopyValues=function(){return!1};f.prototype.getActualLength=function(a){return a>>1};d.prototype.props=function(){return g(this)};d.props=function(a){return g(a)}}},{"./es5":13,"./util":36}],26:[function(n,l,m){function d(a){this._capacity=a;this._front=this._length=0}d.prototype._willBeOverCapacity=function(a){return this._capacity<a};d.prototype._pushOne=function(a){var d=this.length();this._checkCapacity(d+1);this[this._front+d&this._capacity-
    1]=a;this._length=d+1};d.prototype.push=function(a,d,m){var f=this.length()+3;if(this._willBeOverCapacity(f))return this._pushOne(a),this._pushOne(d),void this._pushOne(m);var g=this._front+f-3;this._checkCapacity(f);var l=this._capacity-1;this[g+0&l]=a;this[g+1&l]=d;this[g+2&l]=m;this._length=f};d.prototype.shift=function(){var a=this._front,d=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,d};d.prototype.length=function(){return this._length};d.prototype._checkCapacity=
      function(a){this._capacity<a&&this._resizeTo(this._capacity<<1)};d.prototype._resizeTo=function(a){var d=this._capacity;this._capacity=a;a=this._front+this._length&d-1;for(var m=0;a>m;++m)this[m+d]=this[m+0],this[m+0]=void 0};l.exports=d},{}],27:[function(n,l,m){l.exports=function(d,a,k,m){function f(f,n){var t=k(f);if(t instanceof d)return l(t);if(f=g.asArray(f),null===f)return m("expecting an array or an iterable object but got "+g.classString(f));t=new d(a);void 0!==n&&t._propagateFrom(n,3);for(var x=
      t._fulfill,w=t._reject,y=0,z=f.length;z>y;++y){var B=f[y];(void 0!==B||y in f)&&d.cast(B)._then(x,w,void 0,t,null)}return t}var g=n("./util"),l=function(a){return a.then(function(d){return f(d,a)})};d.race=function(a){return f(a,void 0)};d.prototype.race=function(){return f(this,void 0)}}},{"./util":36}],28:[function(n,l,m){l.exports=function(d,a,k,m,f,g){function l(a,g,k,m){this.constructor$(a);a=w();this._fn=null===a?g:y.domainBind(a,g);void 0!==k&&(k=d.resolve(k),k._attachCancellationCallback(this));
      this._initialValue=k;this._currentCancellable=null;m===f?this._eachValues=Array(this._length):0===m?this._eachValues=null:this._eachValues=void 0;this._promise._captureStackTrace();this._init$(void 0,-5)}function v(a,d){this.isFulfilled()?d._resolve(a):d._reject(a)}function q(a,d,f,g){return"function"!=typeof d?k("expecting a function but got "+y.classString(d)):(new l(a,d,f,g)).promise()}function t(a){this.accum=a;this.array._gotAccum(a);a=m(this.value,this.array._promise);return a instanceof d?
      (this.array._currentCancellable=a,a._then(x,void 0,void 0,this,void 0)):x.call(this,a)}function x(a){var f=this.array,k=f._promise,m=z(f._fn);k._pushContext();a=void 0!==f._eachValues?m.call(k._boundValue(),a,this.index,this.length):m.call(k._boundValue(),this.accum,a,this.index,this.length);a instanceof d&&(f._currentCancellable=a);m=k._popContext();return g.checkForgottenReturns(a,m,void 0!==f._eachValues?"Promise.each":"Promise.reduce",k),a}var w=d._getDomain,y=n("./util"),z=y.tryCatch;y.inherits(l,
      a);l.prototype._gotAccum=function(a){void 0!==this._eachValues&&null!==this._eachValues&&a!==f&&this._eachValues.push(a)};l.prototype._eachComplete=function(a){return null!==this._eachValues&&this._eachValues.push(a),this._eachValues};l.prototype._init=function(){};l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)};l.prototype.shouldCopyValues=function(){return!1};l.prototype._resolve=function(a){this._promise._resolveCallback(a);
      this._values=null};l.prototype._resultCancelled=function(a){return a===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof d&&this._currentCancellable.cancel(),this._initialValue instanceof d&&this._initialValue.cancel()))};l.prototype._iterate=function(a){this._values=a;var f,g,k=a.length;if(void 0!==this._initialValue?(f=this._initialValue,g=0):(f=d.resolve(a[0]),g=1),this._currentCancellable=f,!f.isRejected())for(;k>g;++g)f=f._then(t,
      void 0,void 0,{accum:null,value:a[g],index:g,length:k,array:this},void 0);void 0!==this._eachValues&&(f=f._then(this._eachComplete,void 0,void 0,this,void 0));f._then(v,v,void 0,f,this)};d.prototype.reduce=function(a,d){return q(this,a,d,null)};d.reduce=function(a,d,f,g){return q(a,d,f,g)}}},{"./util":36}],29:[function(n,l,m){n=n("./util");m=function(){throw Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n");};var d=n.getNativePromise();if(n.isNode&&"undefined"==typeof MutationObserver){var a=
      global.setImmediate,k=process.nextTick;n=n.isRecentNode?function(d){a.call(global,d)}:function(a){k.call(process,a)}}else if("function"==typeof d&&"function"==typeof d.resolve){var r=d.resolve();n=function(a){r.then(a)}}else n="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(a){setImmediate(a)}:"undefined"!=typeof setTimeout?function(a){setTimeout(a,0)}:m:function(){var a=document.createElement("div"),
      d={attributes:!0},k=!1,m=document.createElement("div");(new MutationObserver(function(){a.classList.toggle("foo");k=!1})).observe(m,d);return function(r){var l=new MutationObserver(function(){l.disconnect();r()});l.observe(a,d);k||(k=!0,m.classList.toggle("foo"))}}();l.exports=n},{"./util":36}],30:[function(n,l,m){l.exports=function(d,a,k){function m(a){this.constructor$(a)}var f=d.PromiseInspection;n("./util").inherits(m,a);m.prototype._promiseResolved=function(a,d){this._values[a]=d;return++this._totalResolved>=
    this._length?(this._resolve(this._values),!0):!1};m.prototype._promiseFulfilled=function(a,d){var k=new f;return k._bitField=33554432,k._settledValueField=a,this._promiseResolved(d,k)};m.prototype._promiseRejected=function(a,d){var k=new f;return k._bitField=16777216,k._settledValueField=a,this._promiseResolved(d,k)};d.settle=function(a){return k.deprecated(".settle()",".reflect()"),(new m(a)).promise()};d.prototype.settle=function(){return d.settle(this)}}},{"./util":36}],31:[function(n,l,m){l.exports=
      function(d,a,k){function m(a){this.constructor$(a);this._howMany=0;this._initialized=this._unwrap=!1}function f(a,d){if((0|d)!==d||0>d)return k("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var f=new m(a),g=f.promise();return f.setHowMany(d),f.init(),g}var g=n("./util"),l=n("./errors").RangeError,v=n("./errors").AggregateError,q=g.isArray,t={};g.inherits(m,a);m.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,
        -5);var a=q(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}};m.prototype.init=function(){this._initialized=!0;this._init()};m.prototype.setUnwrap=function(){this._unwrap=!0};m.prototype.howMany=function(){return this._howMany};m.prototype.setHowMany=function(a){this._howMany=a};m.prototype._promiseFulfilled=function(a){return this._addFulfilled(a),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),
        1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1};m.prototype._promiseRejected=function(a){return this._addRejected(a),this._checkOutcome()};m.prototype._promiseCancelled=function(){return this._values instanceof d||null==this._values?this._cancel():(this._addRejected(t),this._checkOutcome())};m.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var a=new v,d=this.length();d<this._values.length;++d)this._values[d]!==
      t&&a.push(this._values[d]);return 0<a.length?this._reject(a):this._cancel(),!0}return!1};m.prototype._fulfilled=function(){return this._totalResolved};m.prototype._rejected=function(){return this._values.length-this.length()};m.prototype._addRejected=function(a){this._values.push(a)};m.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a};m.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};m.prototype._getRangeError=function(a){return new l("Input array must contain at least "+
        this._howMany+" items but contains only "+a+" items")};m.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};d.some=function(a,d){return f(a,d)};d.prototype.some=function(a){return f(this,a)};d._SomePromiseArray=m}},{"./errors":12,"./util":36}],32:[function(n,l,m){l.exports=function(d){function a(a){void 0!==a?(a=a._target(),this._bitField=a._bitField,this._settledValueField=a._isFateSealed()?a._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}a.prototype._settledValue=
      function(){return this._settledValueField};var k=a.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},m=a.prototype.error=a.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},f=a.prototype.isFulfilled=function(){return 0!==
      (33554432&this._bitField)},g=a.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},l=a.prototype.isPending=function(){return 0===(50397184&this._bitField)},n=a.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};a.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)};d.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)};d.prototype._isCancelled=function(){return this._target().__isCancelled()};d.prototype.isCancelled=function(){return 0!==
      (8454144&this._target()._bitField)};d.prototype.isPending=function(){return l.call(this._target())};d.prototype.isRejected=function(){return g.call(this._target())};d.prototype.isFulfilled=function(){return f.call(this._target())};d.prototype.isResolved=function(){return n.call(this._target())};d.prototype.value=function(){return k.call(this._target())};d.prototype.reason=function(){var a=this._target();return a._unsetRejectionIsUnhandled(),m.call(a)};d.prototype._value=function(){return this._settledValue()};
      d.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()};d.PromiseInspection=a}},{}],33:[function(n,l,m){l.exports=function(d,a){function k(g,k,l){var n=new d(a),u=n;l&&l._pushContext();n._captureStackTrace();l&&l._popContext();var y=!0;g=m.tryCatch(k).call(g,function(a){n&&(n._resolveCallback(a),n=null)},function(a){n&&(n._rejectCallback(a,y,!0),n=null)});return y=!1,n&&g===f&&(n._rejectCallback(g.e,!0,!0),n=null),u}var m=n("./util"),f=m.errorObj,g=m.isObject,
      l={}.hasOwnProperty;return function(m,r){if(g(m)){if(m instanceof d)return m;var n;try{n=m.then}catch(x){n=(f.e=x,f)}if(n===f)return r&&r._pushContext(),n=d.reject(n.e),r&&r._popContext(),n;if("function"==typeof n){var w;try{w=l.call(m,"_promise0")}catch(x){w=!1}return w?(n=new d(a),m._then(n._fulfill,n._reject,void 0,n,null),n):k(m,n,r)}}return m}}},{"./util":36}],34:[function(n,l,m){l.exports=function(d,a,k){function m(a){this.handle=a}function f(a){return clearTimeout(this.handle),a}function g(a){throw clearTimeout(this.handle),
      a;}var l=n("./util"),v=d.TimeoutError;m.prototype._resultCancelled=function(){clearTimeout(this.handle)};var q=function(a){return t(+this).thenReturn(a)},t=d.delay=function(f,g){var l,n;return void 0!==g?(l=d.resolve(g)._then(q,null,null,f,void 0),k.cancellation()&&g instanceof d&&l._setOnCancel(g)):(l=new d(a),n=setTimeout(function(){l._fulfill()},+f),k.cancellation()&&l._setOnCancel(new m(n)),l._captureStackTrace()),l._setAsyncGuaranteed(),l};d.prototype.delay=function(a){return t(a,this)};d.prototype.timeout=
      function(a,d){var n,q,t=new m(setTimeout(function(){if(n.isPending()){var a=n,f=q,g;g="string"!=typeof d?d instanceof Error?d:new v("operation timed out"):new v(d);l.markAsOriginatingFromRejection(g);a._attachExtraTrace(g);a._reject(g);null!=f&&f.cancel()}},+a));return k.cancellation()?(q=this.then(),n=q._then(f,g,void 0,t,void 0),n._setOnCancel(t)):n=this._then(f,g,void 0,t,void 0),n}}},{"./util":36}],35:[function(n,l,m){l.exports=function(d,a,k,m,f,g){function l(a){setTimeout(function(){throw a;
    },0)}function v(a,g){function m(){if(r>=n)return q._fulfill();var f;f=a[r++];var v=k(f);f=(v!==f&&"function"==typeof f._isDisposable&&"function"==typeof f._getDisposer&&f._isDisposable()&&v._setDisposable(f._getDisposer()),v);if(f instanceof d&&f._isDisposable()){try{f=k(f._getDisposer().tryDispose(g),a.promise)}catch(t){return l(t)}if(f instanceof d)return f._then(m,l,null,null,null)}m()}var r=0,n=a.length,q=new d(f);return m(),q}function q(a,d,f){this._data=a;this._promise=d;this._context=f}function t(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 d,f){this.constructor$(a,d,f)}function x(a){return q.isDisposer(a)?(this.resources[this.index]._setDisposable(a),a.promise()):a}function w(a){this.length=a;this.promise=null;this[a-1]=null}var y=n("./util"),z=n("./errors").TypeError,B=n("./util").inherits,C=y.errorObj,E=y.tryCatch,H={};q.prototype.data=function(){return this._data};q.prototype.promise=function(){return this._promise};q.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():H};q.prototype.tryDispose=
      function(a){var d=this.resource(),f=this._context;void 0!==f&&f._pushContext();a=d!==H?this.doDispose(d,a):null;return void 0!==f&&f._popContext(),this._promise._unsetDisposable(),this._data=null,a};q.isDisposer=function(a){return null!=a&&"function"==typeof a.resource&&"function"==typeof a.tryDispose};B(t,q);t.prototype.doDispose=function(a,d){return this.data().call(a,a,d)};w.prototype._resultCancelled=function(){for(var a=this.length,f=0;a>f;++f){var g=this[f];g instanceof d&&g.cancel()}};d.using=
      function(){var f=arguments.length;if(2>f)return a("you must pass at least 2 arguments to Promise.using");var m=arguments[f-1];if("function"!=typeof m)return a("expecting a function but got "+y.classString(m));var l,r=!0;2===f&&Array.isArray(arguments[0])?(l=arguments[0],f=l.length,r=!1):(l=arguments,f--);for(var n=new w(f),u=0;f>u;++u){var t=l[u];if(q.isDisposer(t)){var z=t,t=t.promise();t._setDisposable(z)}else z=k(t),z instanceof d&&(t=z._then(x,null,null,{resources:n,index:u},void 0));n[u]=t}f=
        Array(n.length);for(u=0;u<f.length;++u)f[u]=d.resolve(n[u]).reflect();var B=d.all(f).then(function(a){for(var d=0;d<a.length;++d){var f=a[d];if(f.isRejected())return C.e=f.error(),C;if(!f.isFulfilled())return void B.cancel();a[d]=f.value()}H._pushContext();m=E(m);a=r?m.apply(void 0,a):m(a);d=H._popContext();return g.checkForgottenReturns(a,d,"Promise.using",H),a}),H=B.lastly(function(){var a=new d.PromiseInspection(B);return v(n,a)});return n.promise=H,H._setOnCancel(n),H};d.prototype._setDisposable=
      function(a){this._bitField|=131072;this._disposer=a};d.prototype._isDisposable=function(){return 0<(131072&this._bitField)};d.prototype._getDisposer=function(){return this._disposer};d.prototype._unsetDisposable=function(){this._bitField&=-131073;this._disposer=void 0};d.prototype.disposer=function(a){if("function"==typeof a)return new t(a,this,m());throw new z;}}},{"./errors":12,"./util":36}],36:[function(n,l,m){function d(){try{var a=q;return q=null,a.apply(this,arguments)}catch(d){return v.e=d,
      v}}function a(a){return null==a||!0===a||!1===a||"string"==typeof a||"number"==typeof a}function k(d,f,g){return a(d)?d:(u.defineProperty(d,f,{value:g,configurable:!0,enumerable:!1,writable:!0}),d)}function r(a){return null!==a&&"object"==typeof a&&"string"==typeof a.message&&"string"==typeof a.name}function f(a){return r(a)&&u.propertyIsWritable(a,"stack")}function g(a){return{}.toString.call(a)}var u=n("./es5");n="undefined"==typeof navigator;var v={e:{}},q;m="undefined"!=typeof self?self:"undefined"!=
    typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null;var t=function(){var a=[Array.prototype,Object.prototype,Function.prototype],d=function(d){for(var f=0;f<a.length;++f)if(a[f]===d)return!0;return!1};if(u.isES5){var f=Object.getOwnPropertyNames;return function(a){for(var g=[],k=Object.create(null);null!=a&&!d(a);){var m;try{m=f(a)}catch(l){break}for(var r=0;r<m.length;++r){var n=m[r];if(!k[n]){k[n]=!0;var q=Object.getOwnPropertyDescriptor(a,n);null!=q&&null==q.get&&null==
    q.set&&g.push(n)}}a=u.getPrototypeOf(a)}return g}}var g={}.hasOwnProperty;return function(f){if(d(f))return[];var k=[],m;a:for(m in f){if(!g.call(f,m))for(var l=0;l<a.length;++l)if(g.call(a[l],m))continue a;k.push(m)}return k}}(),x=/this\s*\.\s*\S+\s*=/,w=/^[a-z$_][a-z$_0-9]*$/i,y=function(){return"stack"in Error()?function(a){return f(a)?a:Error(a+"")}:function(a){if(f(a))return a;try{throw Error(a+"");}catch(d){return d}}}(),z=function(a){return u.isArray(a)?a:null};if("undefined"!=typeof Symbol&&
      Symbol.iterator)var B="function"==typeof Array.from?function(a){return Array.from(a)}:function(a){for(var d=[],f=a[Symbol.iterator]();!(a=f.next()).done;)d.push(a.value);return d},z=function(a){return u.isArray(a)?a:null!=a&&"function"==typeof a[Symbol.iterator]?B(a):null};var C="undefined"!=typeof process&&"[object process]"===g(process).toLowerCase(),E="undefined"!=typeof process&&"undefined"!=typeof process.env;n={isClass:function(a){try{if("function"==typeof a){var d=u.names(a.prototype),f=u.isES5&&
        1<d.length,g=0<d.length&&!(1===d.length&&"constructor"===d[0]),k=x.test(a+"")&&0<u.names(a).length;if(f||g||k)return!0}return!1}catch(m){return!1}},isIdentifier:function(a){return w.test(a)},inheritedDataKeys:t,getDataPropertyOrDefault:function(a,d,f){if(!u.isES5)return{}.hasOwnProperty.call(a,d)?a[d]:void 0;a=Object.getOwnPropertyDescriptor(a,d);return null!=a?null==a.get&&null==a.set?a.value:f:void 0},thrower:function(a){throw a;},isArray:u.isArray,asArray:z,notEnumerableProp:k,isPrimitive:a,isObject:function(a){return"function"==
        typeof a||"object"==typeof a&&null!==a},isError:r,canEvaluate:n,errorObj:v,tryCatch:function(a){return q=a,d},inherits:function(a,d){function f(){this.constructor=a;this.constructor$=d;for(var k in d.prototype)g.call(d.prototype,k)&&"$"!==k.charAt(k.length-1)&&(this[k+"$"]=d.prototype[k])}var g={}.hasOwnProperty;return f.prototype=d.prototype,a.prototype=new f,a.prototype},withAppended:function(a,d){var f,g=a.length,k=Array(g+1);for(f=0;g>f;++f)k[f]=a[f];return k[f]=d,k},maybeWrapAsError:function(d){return a(d)?
        Error(d+""):d},toFastProperties:function(a){function d(){}d.prototype=a;for(var f=8;f--;)new d;return a},filledRange:function(a,d,f){for(var g=Array(a),k=0;a>k;++k)g[k]=d+k+f;return g},toString:function(a){return a+""},canAttachTrace:f,ensureErrorObject:y,originatesFromRejection:function(a){return null==a?!1:a instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===a.isOperational},markAsOriginatingFromRejection:function(a){try{k(a,"isOperational",!0)}catch(d){}},classString:g,copyDescriptors:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          d,f){for(var g=u.names(a),k=0;k<g.length;++k){var m=g[k];if(f(m))try{u.defineProperty(d,m,u.getDescriptor(a,m))}catch(l){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:C,hasEnvVariables:E,env:function(a){return E?process.env[a]:void 0},global:m,getNativePromise:function(){if("function"==typeof Promise)try{var a=new Promise(function(){});if("[object Promise]"==={}.toString.call(a))return Promise}catch(d){}},domainBind:function(a,d){return a.bind(d)}};
      n.isRecentNode=n.isNode&&function(){var a=process.versions.node.split(".").map(Number);return 0===a[0]&&10<a[1]||0<a[0]}();n.isNode&&n.toFastProperties(process);try{throw Error();}catch(H){n.lastLineError=H}l.exports=n},{"./es5":13}]},{},[4])(4)});"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);
  define("com/visioglobe/common/utils/Utils",["bluebird"],function(e){var n=0,l={isNumeric:function(e){var d=/-?\d+(\.{1}\d+)?(e{1}-?\d+)?/.exec(e);return null!==d&&d[0].length===(e+"").length},getURLParameters:function(e){e="undefined"===typeof e?window.location.search:e;var d=/[?|&]?([^=^&^#]+)=?([^&^#]+)?/g,a,k={};do if(a=d.exec(e),null!==a){var r=decodeURIComponent(a[1]),f="undefined"!==typeof a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):!0;l.isNumeric(f)&&(f=parseFloat(f));var g=/([^\[^\]]+)((\[(^\[^\])\])*)/g,
      n=void 0,v=k,q=[];do n=g.exec(r),null!==n&&"undefined"!==typeof n[1]&&q.push(decodeURIComponent(n[1]));while(n);for(r=0;r<q.length-1;r++)"undefined"===typeof v[q[r]]&&(v[q[r]]={}),v=v[q[r]];v[q[q.length-1]]=f}while(a);return k},toURLParameters:function(e){var d=function(a,f,g){switch(typeof a){case "object":Object.keys(a).forEach(function(e){d(a[e],f+"["+e+"]",g)});break;case "boolean":a&&g.push(f);break;default:g.push(f+"="+encodeURIComponent(a).replace(/%20/g,"+"))}},a=[];Object.keys(e).forEach(function(k){d(e[k],
      k,a)});var k="";a.forEach(function(a,d,g){k+=a;d<g.length-1&&(k+="&")});return k},extendDeep:function(e){if("object"!==typeof e)return e;for(var d,a,k=1,r=arguments.length;k<r;k++)for(a in d=arguments[k],d)hasOwnProperty.call(d,a)&&(e[a]="object"===typeof d[a]&&d[a]?l.extendDeep({},d[a]):d[a]);return e},queryChildren:function(e,d){var a=e.id,k="#"+(e.id=a||"query_children_"+n++)+" > ";d=k+(d+"").replace(",",","+k,"g");k=e.parentNode.querySelectorAll(d);a||e.removeAttribute("id");return k},getElementWidth:function(e){return""!==
    e.style.width?parseInt(e.style.width,10):parseInt(getComputedStyle(e).width,10)},getElementHeight:function(e){return""!==e.style.height?parseInt(e.style.height,10):parseInt(getComputedStyle(e).height,10)},getXDomainRequest:function(){var e=null;window.XDomainRequest?e=new XDomainRequest:window.XMLHttpRequest?e=new XMLHttpRequest:console.log("Your browser lacks AJAX cross domain support");return e},request:function(m,d,a,k){return new e(function(e,f){var g=new XMLHttpRequest;"undefined"!==typeof k.crossDomain&&
    k.crossDomain&&(g=l.getXDomainRequest());"undefined"!==typeof k.contentType&&k.contentType&&g.setRequestHeader("Content-Type",k.contentType);g.onload=function(){200<=g.status&&400>g.status||-1!==g.responseURL.indexOf("file:///")&&0===g.status?e({response:g.response,status:g.status,request:g}):f(Error(g.status))};g.onerror=function(){f(Error(g.status))};"function"===typeof k.progressCallBack&&(g.onprogress=function(a){k.progressCallBack(a)});var n=!0;"undefined"===typeof k.async||k.async||(n=!1);null!==
    a&&"GET"===d?g.open(d,m+"?"+a,n):g.open(d,m,n);"POST"===d?g.send(a):g.send()})},now:function(){return Math.round((new Date).getTime()/1E3)},getCookie:function(e){return(e=document.cookie.match(RegExp("(?:^|;\\s*)"+e.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")+"=([^;]*)")))?e[1]:null},setCookie:function(e,d,a){var k=new Date;k.setTime(k.getTime()+864E5*a);a="expires="+k.toUTCString();document.cookie=e+"="+d+";"+a+";path=/"},sha1:function(e){var d=function(a,d){return a<<d|a>>>32-d},a=function(a){var d=
      "",f,g;for(f=7;0<=f;f--)g=a>>>4*f&15,d+=g.toString(16);return d},k,l,f=Array(80),g=1732584193,n=4023233417,v=2562383102,q=271733878,t=3285377520,x,w,y,z,B;e=unescape(encodeURIComponent(e));x=e.length;var C=[];for(k=0;k<x-3;k+=4)l=e.charCodeAt(k)<<24|e.charCodeAt(k+1)<<16|e.charCodeAt(k+2)<<8|e.charCodeAt(k+3),C.push(l);switch(x%4){case 0:k=2147483648;break;case 1:k=e.charCodeAt(x-1)<<24|8388608;break;case 2:k=e.charCodeAt(x-2)<<24|e.charCodeAt(x-1)<<16|32768;break;case 3:k=e.charCodeAt(x-3)<<24|e.charCodeAt(x-
      2)<<16|e.charCodeAt(x-1)<<8|128}for(C.push(k);14!=C.length%16;)C.push(0);C.push(x>>>29);C.push(x<<3&4294967295);for(e=0;e<C.length;e+=16){for(k=0;16>k;k++)f[k]=C[e+k];for(k=16;79>=k;k++)f[k]=d(f[k-3]^f[k-8]^f[k-14]^f[k-16],1);l=g;x=n;w=v;y=q;z=t;for(k=0;19>=k;k++)B=d(l,5)+(x&w|~x&y)+z+f[k]+1518500249&4294967295,z=y,y=w,w=d(x,30),x=l,l=B;for(k=20;39>=k;k++)B=d(l,5)+(x^w^y)+z+f[k]+1859775393&4294967295,z=y,y=w,w=d(x,30),x=l,l=B;for(k=40;59>=k;k++)B=d(l,5)+(x&w|x&y|w&y)+z+f[k]+2400959708&4294967295,
      z=y,y=w,w=d(x,30),x=l,l=B;for(k=60;79>=k;k++)B=d(l,5)+(x^w^y)+z+f[k]+3395469782&4294967295,z=y,y=w,w=d(x,30),x=l,l=B;g=g+l&4294967295;n=n+x&4294967295;v=v+w&4294967295;q=q+y&4294967295;t=t+z&4294967295}B=a(g)+a(n)+a(v)+a(q)+a(t);return B.toLowerCase()},LZWCompress:function(e){var d,a={},k,l,f="",g=[],n=256;for(d=0;256>d;d+=1)a[String.fromCharCode(d)]=d;for(d=0;d<e.length;d+=1)k=e.charAt(d),l=f+k,a.hasOwnProperty(l)?f=l:(g.push(a[f]),a[l]=n++,f=String(k));""!==f&&g.push(a[f]);return g},LZWDecompress:function(e){var d,
      a=[],k,l,f;f="";var g=256;for(d=0;256>d;d+=1)a[d]=String.fromCharCode(d);l=k=String.fromCharCode(e[0]);for(d=1;d<e.length;d+=1){f=e[d];if(a[f])f=a[f];else if(f===g)f=k+k.charAt(0);else return null;l+=f;a[g++]=k+f.charAt(0);k=f}return l}};return l});
  (function(e,n){"object"===typeof exports&&"undefined"!==typeof module?n(exports):"function"===typeof define&&define.amd?define("three",["exports"],n):n(e.THREE={})})(this,function(e){function n(){}function l(b,h){this.x=b||0;this.y=h||0}function m(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function d(b,h,p,a){this._x=b||0;this._y=h||0;this._z=p||0;this._w=void 0!==a?a:1}function a(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            h,p){this.x=b||0;this.y=h||0;this.z=p||0}function k(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function r(b,h,p,a,d,f,g,e,m,n){Object.defineProperty(this,"id",{value:Tf++});this.uuid=qa.generateUUID();this.name="";this.image=void 0!==b?b:r.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==h?h:r.DEFAULT_MAPPING;this.wrapS=void 0!==p?p:1001;this.wrapT=void 0!==a?a:1001;this.magFilter=void 0!==
  d?d:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==m?m:1;this.format=void 0!==g?g:1023;this.type=void 0!==e?e:1009;this.offset=new l(0,0);this.repeat=new l(1,1);this.center=new l(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new k;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==n?n:3E3;this.version=0;this.onUpdate=null}function f(b,h,p,a){this.x=b||0;this.y=h||0;this.z=p||0;this.w=void 0!==a?a:1}function g(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     h,p){this.uuid=qa.generateUUID();this.width=b;this.height=h;this.scissor=new f(0,0,b,h);this.scissorTest=!1;this.viewport=new f(0,0,b,h);p=p||{};void 0===p.minFilter&&(p.minFilter=1006);this.texture=new r(void 0,void 0,p.wrapS,p.wrapT,p.magFilter,p.minFilter,p.format,p.type,p.anisotropy,p.encoding);this.depthBuffer=void 0!==p.depthBuffer?p.depthBuffer:!0;this.stencilBuffer=void 0!==p.stencilBuffer?p.stencilBuffer:!0;this.depthTexture=void 0!==p.depthTexture?p.depthTexture:null}function u(b,h,p){g.call(this,
    b,h,p);this.activeMipMapLevel=this.activeCubeFace=0}function v(b,h,p,a,d,f,g,e,k,m,l,n){r.call(this,null,f,g,e,k,m,a,d,l,n);this.image={data:b,width:h,height:p};this.magFilter=void 0!==k?k:1003;this.minFilter=void 0!==m?m:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}function q(b,h,p,a,d,f,g,e,k,m){b=void 0!==b?b:[];r.call(this,b,void 0!==h?h:301,p,a,d,f,g,e,k,m);this.flipY=!1}function t(b,h,p){var a=b[0];if(0>=a||0<a)return b;var d=h*p,f=jf[d];void 0===f&&(f=new Float32Array(d),
    jf[d]=f);if(0!==h)for(a.toArray(f,0),a=1,d=0;a!==h;++a)d+=p,b[a].toArray(f,d);return f}function x(b,h){var p=kf[h];void 0===p&&(p=new Int32Array(h),kf[h]=p);for(var a=0;a!==h;++a)p[a]=b.allocTextureUnit();return p}function w(b,h){b.uniform1f(this.addr,h)}function y(b,h){b.uniform1i(this.addr,h)}function z(b,h){void 0===h.x?b.uniform2fv(this.addr,h):b.uniform2f(this.addr,h.x,h.y)}function B(b,h){void 0!==h.x?b.uniform3f(this.addr,h.x,h.y,h.z):void 0!==h.r?b.uniform3f(this.addr,h.r,h.g,h.b):b.uniform3fv(this.addr,
    h)}function C(b,h){void 0===h.x?b.uniform4fv(this.addr,h):b.uniform4f(this.addr,h.x,h.y,h.z,h.w)}function E(b,h){b.uniformMatrix2fv(this.addr,!1,h.elements||h)}function H(b,h){void 0===h.elements?b.uniformMatrix3fv(this.addr,!1,h):(lf.set(h.elements),b.uniformMatrix3fv(this.addr,!1,lf))}function K(b,h){void 0===h.elements?b.uniformMatrix4fv(this.addr,!1,h):(mf.set(h.elements),b.uniformMatrix4fv(this.addr,!1,mf))}function J(b,h,p){var a=p.allocTextureUnit();b.uniform1i(this.addr,a);p.setTexture2D(h||
    nf,a)}function O(b,h,p){var a=p.allocTextureUnit();b.uniform1i(this.addr,a);p.setTextureCube(h||of,a)}function L(b,h){b.uniform2iv(this.addr,h)}function R(b,h){b.uniform3iv(this.addr,h)}function W(b,h){b.uniform4iv(this.addr,h)}function I(b){switch(b){case 5126:return w;case 35664:return z;case 35665:return B;case 35666:return C;case 35674:return E;case 35675:return H;case 35676:return K;case 35678:case 36198:return J;case 35680:return O;case 5124:case 35670:return y;case 35667:case 35671:return L;
    case 35668:case 35672:return R;case 35669:case 35673:return W}}function da(b,h){b.uniform1fv(this.addr,h)}function ya(b,h){b.uniform1iv(this.addr,h)}function ea(b,h){b.uniform2fv(this.addr,t(h,this.size,2))}function Fa(b,h){b.uniform3fv(this.addr,t(h,this.size,3))}function G(b,h){b.uniform4fv(this.addr,t(h,this.size,4))}function Aa(b,h){b.uniformMatrix2fv(this.addr,!1,t(h,this.size,4))}function Z(b,h){b.uniformMatrix3fv(this.addr,!1,t(h,this.size,9))}function va(b,h){b.uniformMatrix4fv(this.addr,
    !1,t(h,this.size,16))}function ga(b,h,p){var a=h.length,d=x(p,a);b.uniform1iv(this.addr,d);for(b=0;b!==a;++b)p.setTexture2D(h[b]||nf,d[b])}function sa(b,h,p){var a=h.length,d=x(p,a);b.uniform1iv(this.addr,d);for(b=0;b!==a;++b)p.setTextureCube(h[b]||of,d[b])}function ca(b){switch(b){case 5126:return da;case 35664:return ea;case 35665:return Fa;case 35666:return G;case 35674:return Aa;case 35675:return Z;case 35676:return va;case 35678:return ga;case 35680:return sa;case 5124:case 35670:return ya;case 35667:case 35671:return L;
    case 35668:case 35672:return R;case 35669:case 35673:return W}}function ta(b,h,p){this.id=b;this.addr=p;this.setValue=I(h.type)}function Ba(b,h,p){this.id=b;this.addr=p;this.size=h.size;this.setValue=ca(h.type)}function Da(b){this.id=b;this.seq=[];this.map={}}function ua(b,h,p){this.seq=[];this.map={};this.renderer=p;p=b.getProgramParameter(h,b.ACTIVE_UNIFORMS);for(var a=0;a<p;++a){var d=b.getActiveUniform(h,a),f=b.getUniformLocation(h,d.name),g=this,e=d.name,k=e.length;for(De.lastIndex=0;;){var m=
    De.exec(e),l=De.lastIndex,n=m[1],r=m[3];"]"===m[2]&&(n|=0);if(void 0===r||"["===r&&l+2===k){e=g;d=void 0===r?new ta(n,d,f):new Ba(n,d,f);e.seq.push(d);e.map[d.id]=d;break}else r=g.map[n],void 0===r&&(r=new Da(n),n=g,g=r,n.seq.push(g),n.map[g.id]=g),g=r}}}function S(b,h,p){return void 0===h&&void 0===p?this.set(b):this.setRGB(b,h,p)}function ha(b,h,p,a,d,f,g,e,k){r.call(this,b,h,p,a,d,f,g,e,k);this.needsUpdate=!0}function Ia(b,h,p,M,f){var g,e,k,m,l,n,r,q,u,v,t,w,D,x,y,z,P,F;function B(b,h){return b.renderOrder!==
  h.renderOrder?b.renderOrder-h.renderOrder:b.z!==h.z?h.z-b.z:h.id-b.id}var N,C,A,Pa,ra=new a,O=new d,L=new a;this.render=function(a,d,oa){if(0!==a.length){if(void 0===A){var ma=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),I=new Uint16Array([0,1,2,0,2,3]);N=h.createBuffer();C=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,N);h.bufferData(h.ARRAY_BUFFER,ma,h.STATIC_DRAW);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,C);h.bufferData(h.ELEMENT_ARRAY_BUFFER,I,h.STATIC_DRAW);var ma=h.createProgram(),
    I=h.createShader(h.VERTEX_SHADER),X=h.createShader(h.FRAGMENT_SHADER);h.shaderSource(I,["precision "+f.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 center;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvUV = uvOffset + uv * uvScale;\n\tvec2 alignedPosition = ( position - center ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\tfogDepth = - mvPosition.z;\n}"].join("\n"));
    h.shaderSource(X,["precision "+f.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvec4 texture = texture2D( map, vUV );\n\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\n\tif ( gl_FragColor.a < alphaTest ) discard;\n\tif ( fogType > 0 ) {\n\t\tfloat fogFactor = 0.0;\n\t\tif ( fogType == 1 ) {\n\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t\t} else {\n\t\t\tconst float LOG2 = 1.442695;\n\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t\t}\n\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\t}\n}"].join("\n"));
    h.compileShader(I);h.compileShader(X);h.attachShader(ma,I);h.attachShader(ma,X);h.linkProgram(ma);A=ma;P=h.getAttribLocation(A,"position");F=h.getAttribLocation(A,"uv");g=h.getUniformLocation(A,"uvOffset");e=h.getUniformLocation(A,"uvScale");k=h.getUniformLocation(A,"rotation");m=h.getUniformLocation(A,"center");l=h.getUniformLocation(A,"scale");n=h.getUniformLocation(A,"color");r=h.getUniformLocation(A,"map");q=h.getUniformLocation(A,"opacity");u=h.getUniformLocation(A,"modelViewMatrix");v=h.getUniformLocation(A,
      "projectionMatrix");t=h.getUniformLocation(A,"fogType");w=h.getUniformLocation(A,"fogDensity");D=h.getUniformLocation(A,"fogNear");x=h.getUniformLocation(A,"fogFar");y=h.getUniformLocation(A,"fogColor");h.getUniformLocation(A,"fogDepth");z=h.getUniformLocation(A,"alphaTest");ma=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");ma.width=8;ma.height=8;I=ma.getContext("2d");I.fillStyle="white";I.fillRect(0,0,8,8);Pa=new ha(ma)}p.useProgram(A);p.initAttributes();p.enableAttribute(P);p.enableAttribute(F);
    p.disableUnusedAttributes();p.disable(h.CULL_FACE);p.enable(h.BLEND);h.bindBuffer(h.ARRAY_BUFFER,N);h.vertexAttribPointer(P,2,h.FLOAT,!1,16,0);h.vertexAttribPointer(F,2,h.FLOAT,!1,16,8);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,C);h.uniformMatrix4fv(v,!1,oa.projectionMatrix.elements);p.activeTexture(h.TEXTURE0);h.uniform1i(r,0);I=ma=0;(X=d.fog)?(h.uniform3f(y,X.color.r,X.color.g,X.color.b),X.isFog?(h.uniform1f(D,X.near),h.uniform1f(x,X.far),h.uniform1i(t,1),I=ma=1):X.isFogExp2&&(h.uniform1f(w,X.density),
      h.uniform1i(t,2),I=ma=2)):(h.uniform1i(t,0),I=ma=0);for(var X=0,E=a.length;X<E;X++){var H=a[X];H.modelViewMatrix.multiplyMatrices(oa.matrixWorldInverse,H.matrixWorld);H.z=-H.modelViewMatrix.elements[14]}a.sort(B);for(var za=[],R=[],X=0,E=a.length;X<E;X++){var H=a[X],La=H.material;if(!1!==La.visible){H.onBeforeRender(b,d,oa,void 0,La,void 0);h.uniform1f(z,La.alphaTest);h.uniformMatrix4fv(u,!1,H.modelViewMatrix.elements);H.matrixWorld.decompose(ra,O,L);za[0]=L.x;za[1]=L.y;R[0]=H.center.x-.5;R[1]=H.center.y-
      .5;var K=0;d.fog&&La.fog&&(K=I);ma!==K&&(h.uniform1i(t,K),ma=K);null!==La.map?(h.uniform2f(g,La.map.offset.x,La.map.offset.y),h.uniform2f(e,La.map.repeat.x,La.map.repeat.y)):(h.uniform2f(g,0,0),h.uniform2f(e,1,1));h.uniform1f(q,La.opacity);h.uniform3f(n,La.color.r,La.color.g,La.color.b);h.uniform1f(k,La.rotation);h.uniform2fv(m,R);h.uniform2fv(l,za);p.setBlending(La.blending,La.blendEquation,La.blendSrc,La.blendDst,La.blendEquationAlpha,La.blendSrcAlpha,La.blendDstAlpha,La.premultipliedAlpha);p.buffers.depth.setTest(La.depthTest);
      p.buffers.depth.setMask(La.depthWrite);p.buffers.color.setMask(La.colorWrite);M.setTexture2D(La.map||Pa,0);h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0);H.onAfterRender(b,d,oa,void 0,La,void 0)}}p.enable(h.CULL_FACE);p.reset()}}}function ba(){Object.defineProperty(this,"id",{value:Uf++});this.uuid=qa.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=
    205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function xa(b){ba.call(this);
    this.type="MeshDepthMaterial";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(b)}function ka(b){ba.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new a;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=
    1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(b)}function Ra(b,h){this.min=void 0!==b?b:new a(Infinity,Infinity,Infinity);this.max=void 0!==h?h:new a(-Infinity,-Infinity,-Infinity)}function Q(b,h){this.center=void 0!==b?b:new a;this.radius=void 0!==h?h:0}function Ma(b,h){this.normal=void 0!==b?b:new a(1,0,0);this.constant=void 0!==h?h:0}function pa(b,h,p,a,d,f){this.planes=[void 0!==b?b:new Ma,void 0!==h?h:new Ma,void 0!==p?p:new Ma,void 0!==a?a:new Ma,void 0!==d?d:new Ma,void 0!==
  f?f:new Ma]}function gb(b,h,p){function M(h,p,a,M,d,f){var V=h.geometry,g=null,g=v,e=h.customDepthMaterial;a&&(g=t,e=h.customDistanceMaterial);e?g=e:(e=!1,p.morphTargets&&(V&&V.isBufferGeometry?e=V.morphAttributes&&V.morphAttributes.position&&0<V.morphAttributes.position.length:V&&V.isGeometry&&(e=V.morphTargets&&0<V.morphTargets.length)),h.isSkinnedMesh&&!1===p.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",h),h=h.isSkinnedMesh&&p.skinning,V=
    0,e&&(V|=1),h&&(V|=2),g=g[V]);b.localClippingEnabled&&!0===p.clipShadows&&0!==p.clippingPlanes.length&&(e=g.uuid,h=p.uuid,V=w[e],void 0===V&&(V={},w[e]=V),e=V[h],void 0===e&&(e=g.clone(),V[h]=e),g=e);g.visible=p.visible;g.wireframe=p.wireframe;g.side=null!=p.shadowSide?p.shadowSide:D[p.side];g.clipShadows=p.clipShadows;g.clippingPlanes=p.clippingPlanes;g.clipIntersection=p.clipIntersection;g.wireframeLinewidth=p.wireframeLinewidth;g.linewidth=p.linewidth;a&&g.isMeshDistanceMaterial&&(g.referencePosition.copy(M),
    g.nearDistance=d,g.farDistance=f);return g}function d(p,a,f,g){if(!1!==p.visible){if(p.layers.test(a.layers)&&(p.isMesh||p.isLine||p.isPoints)&&p.castShadow&&(!p.frustumCulled||e.intersectsObject(p))){p.modelViewMatrix.multiplyMatrices(f.matrixWorldInverse,p.matrixWorld);var k=h.update(p),m=p.material;if(Array.isArray(m))for(var l=k.groups,Ea=0,n=l.length;Ea<n;Ea++){var r=l[Ea],Ja=m[r.materialIndex];Ja&&Ja.visible&&(Ja=M(p,Ja,g,u,f.near,f.far),b.renderBufferDirect(f,null,k,Ja,p,r))}else m.visible&&
  (Ja=M(p,m,g,u,f.near,f.far),b.renderBufferDirect(f,null,k,Ja,p,null))}p=p.children;k=0;for(m=p.length;k<m;k++)d(p[k],a,f,g)}}var e=new pa,k=new m,n=new l,r=new l(p,p),q=new a,u=new a,v=Array(4),t=Array(4),w={},D={0:1,1:0,2:2},x=[new a(1,0,0),new a(-1,0,0),new a(0,0,1),new a(0,0,-1),new a(0,1,0),new a(0,-1,0)],y=[new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,0,1),new a(0,0,-1)],z=[new f,new f,new f,new f,new f,new f];for(p=0;4!==p;++p){var P=0!==(p&1),F=0!==(p&2),B=new xa({depthPacking:3201,
    morphTargets:P,skinning:F});v[p]=B;P=new ka({morphTargets:P,skinning:F});t[p]=P}var N=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(h,p,a){if(!1!==N.enabled&&(!1!==N.autoUpdate||!1!==N.needsUpdate)&&0!==h.length){var M=b.state;M.disable(b.context.BLEND);M.buffers.color.setClear(1,1,1,1);M.buffers.depth.setTest(!0);M.setScissorTest(!1);for(var f,m=0,l=h.length;m<l;m++){var v=h[m];f=v.shadow;var t=v&&v.isPointLight;if(void 0===f)console.warn("THREE.WebGLShadowMap:",
    v,"has no shadow.");else{var w=f.camera;n.copy(f.mapSize);n.min(r);if(t){var D=n.x,la=n.y;z[0].set(2*D,la,D,la);z[1].set(0,la,D,la);z[2].set(3*D,la,D,la);z[3].set(D,la,D,la);z[4].set(3*D,0,D,la);z[5].set(D,0,D,la);n.x*=4;n.y*=2}null===f.map&&(f.map=new g(n.x,n.y,{minFilter:1003,magFilter:1003,format:1023}),f.map.texture.name=v.name+".shadowMap",w.updateProjectionMatrix());f.isSpotLightShadow&&f.update(v);D=f.map;la=f.matrix;u.setFromMatrixPosition(v.matrixWorld);w.position.copy(u);t?(f=6,la.makeTranslation(-u.x,
    -u.y,-u.z)):(f=1,q.setFromMatrixPosition(v.target.matrixWorld),w.lookAt(q),w.updateMatrixWorld(),la.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),la.multiply(w.projectionMatrix),la.multiply(w.matrixWorldInverse));b.setRenderTarget(D);b.clear();for(v=0;v<f;v++)t&&(q.copy(w.position),q.add(x[v]),w.up.copy(y[v]),w.lookAt(q),w.updateMatrixWorld(),M.viewport(z[v])),k.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),e.setFromMatrix(k),d(p,a,w,t)}}N.needsUpdate=!1}}}function fc(b){var h={};return{get:function(b){b.isInterleavedBufferAttribute&&
    (b=b.data);return h[b.uuid]},remove:function(p){p.isInterleavedBufferAttribute&&(p=p.data);var a=h[p.uuid];a&&(b.deleteBuffer(a.buffer),delete h[p.uuid])},update:function(p,a){p.isInterleavedBufferAttribute&&(p=p.data);var d=h[p.uuid];if(void 0===d){var d=p.uuid,f=p,g=f.array,e=f.dynamic?b.DYNAMIC_DRAW:b.STATIC_DRAW,k=b.createBuffer();b.bindBuffer(a,k);b.bufferData(a,g,e);f.onUploadCallback();e=b.FLOAT;g instanceof Float32Array?e=b.FLOAT:g instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):
      g instanceof Uint16Array?e=b.UNSIGNED_SHORT:g instanceof Int16Array?e=b.SHORT:g instanceof Uint32Array?e=b.UNSIGNED_INT:g instanceof Int32Array?e=b.INT:g instanceof Int8Array?e=b.BYTE:g instanceof Uint8Array&&(e=b.UNSIGNED_BYTE);h[d]={buffer:k,type:e,bytesPerElement:g.BYTES_PER_ELEMENT,version:f.version}}else d.version<p.version&&(f=p,g=f.array,k=f.updateRange,b.bindBuffer(a,d.buffer),!1===f.dynamic?b.bufferData(a,g,b.STATIC_DRAW):-1===k.count?b.bufferSubData(a,0,g):0===k.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
      (b.bufferSubData(a,k.offset*g.BYTES_PER_ELEMENT,g.subarray(k.offset,k.offset+k.count)),k.count=-1),d.version=p.version)}}}function Ua(b,h,p,a){this._x=b||0;this._y=h||0;this._z=p||0;this._order=a||Ua.DefaultOrder}function $b(){this.mask=1}function aa(){Object.defineProperty(this,"id",{value:Vf++});this.uuid=qa.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=aa.DefaultUp.clone();var b=new a,h=new Ua,p=new d,M=new a(1,1,1);h.onChange(function(){p.setFromEuler(h,
    !1)});p.onChange(function(){h.setFromQuaternion(p,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:b},rotation:{enumerable:!0,value:h},quaternion:{enumerable:!0,value:p},scale:{enumerable:!0,value:M},modelViewMatrix:{value:new m},normalMatrix:{value:new k}});this.matrix=new m;this.matrixWorld=new m;this.matrixAutoUpdate=aa.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new $b;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=
    0;this.userData={}}function ab(){aa.call(this);this.type="Camera";this.matrixWorldInverse=new m;this.projectionMatrix=new m}function wb(b,h,p,a,d,f){ab.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=b;this.right=h;this.top=p;this.bottom=a;this.near=void 0!==d?d:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}function ib(b,h,p,M,d,f){this.a=b;this.b=h;this.c=p;this.normal=M&&M.isVector3?M:new a;this.vertexNormals=Array.isArray(M)?M:[];this.color=d&&d.isColor?
    d:new S;this.vertexColors=Array.isArray(d)?d:[];this.materialIndex=void 0!==f?f:0}function fa(){Object.defineProperty(this,"id",{value:pf+=2});this.uuid=qa.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=
    this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function na(b,h,p){if(Array.isArray(b))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=qa.generateUUID();this.name="";this.array=b;this.itemSize=h;this.count=void 0!==b?b.length/h:0;this.normalized=!0===p;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function Sa(b,h,p){na.call(this,new Int8Array(b),h,p)}function Za(b,h,p){na.call(this,
    new Uint8Array(b),h,p)}function yb(b,h,p){na.call(this,new Uint8ClampedArray(b),h,p)}function Mb(b,h,p){na.call(this,new Int16Array(b),h,p)}function qb(b,h,p){na.call(this,new Uint16Array(b),h,p)}function A(b,h,p){na.call(this,new Int32Array(b),h,p)}function $a(b,h,p){na.call(this,new Uint32Array(b),h,p)}function Y(b,h,p){na.call(this,new Float32Array(b),h,p)}function Bb(b,h,p){na.call(this,new Float64Array(b),h,p)}function Va(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=
    [];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Nb(b){if(0===b.length)return-Infinity;for(var h=b[0],p=1,a=b.length;p<a;++p)b[p]>h&&(h=b[p]);return h}function N(){Object.defineProperty(this,"id",{value:qf+=2});this.uuid=qa.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;
    this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}}function oa(b,h,p,a,d,f){fa.call(this);this.type="BoxGeometry";this.parameters={width:b,height:h,depth:p,widthSegments:a,heightSegments:d,depthSegments:f};this.fromBufferGeometry(new X(b,h,p,a,d,f));this.mergeVertices()}function X(b,h,p,M,d,f){function g(b,h,p,M,d,f,V,wa,Ea,u,v){var t=f/Ea,w=V/u,D=f/2,x=V/2,y=wa/2;V=Ea+1;var z=u+1,P=f=0,F,B,N=new a;for(B=0;B<
  z;B++){var A=B*w-x;for(F=0;F<V;F++)N[b]=(F*t-D)*M,N[h]=A*d,N[p]=y,m.push(N.x,N.y,N.z),N[b]=0,N[h]=0,N[p]=0<wa?1:-1,l.push(N.x,N.y,N.z),n.push(F/Ea),n.push(1-B/u),f+=1}for(B=0;B<u;B++)for(F=0;F<Ea;F++)b=r+F+V*(B+1),h=r+(F+1)+V*(B+1),p=r+(F+1)+V*B,k.push(r+F+V*B,b,p),k.push(b,h,p),P+=6;e.addGroup(q,P,v);q+=P;r+=f}N.call(this);this.type="BoxBufferGeometry";this.parameters={width:b,height:h,depth:p,widthSegments:M,heightSegments:d,depthSegments:f};var e=this;b=b||1;h=h||1;p=p||1;M=Math.floor(M)||1;d=
    Math.floor(d)||1;f=Math.floor(f)||1;var k=[],m=[],l=[],n=[],r=0,q=0;g("z","y","x",-1,-1,p,h,b,f,d,0);g("z","y","x",1,-1,p,h,-b,f,d,1);g("x","z","y",1,1,b,p,h,M,f,2);g("x","z","y",1,-1,b,p,-h,M,f,3);g("x","y","z",1,-1,b,h,p,M,d,4);g("x","y","z",-1,-1,b,h,-p,M,d,5);this.setIndex(k);this.addAttribute("position",new Y(m,3));this.addAttribute("normal",new Y(l,3));this.addAttribute("uv",new Y(n,2))}function bb(b,h,p,a){fa.call(this);this.type="PlaneGeometry";this.parameters={width:b,height:h,widthSegments:p,
    heightSegments:a};this.fromBufferGeometry(new Ca(b,h,p,a));this.mergeVertices()}function Ca(b,h,p,a){N.call(this);this.type="PlaneBufferGeometry";this.parameters={width:b,height:h,widthSegments:p,heightSegments:a};b=b||1;h=h||1;var d=b/2,f=h/2;p=Math.floor(p)||1;a=Math.floor(a)||1;var g=p+1,e=a+1,k=b/p,m=h/a,l=[],n=[],r=[],q=[];for(b=0;b<e;b++){var u=b*m-f;for(h=0;h<g;h++)n.push(h*k-d,-u,0),r.push(0,0,1),q.push(h/p),q.push(1-b/a)}for(b=0;b<a;b++)for(h=0;h<p;h++)d=h+g*(b+1),f=h+1+g*(b+1),e=h+1+g*b,
    l.push(h+g*b,d,e),l.push(d,f,e);this.setIndex(l);this.addAttribute("position",new Y(n,3));this.addAttribute("normal",new Y(r,3));this.addAttribute("uv",new Y(q,2))}function Ka(b){ba.call(this);this.type="MeshBasicMaterial";this.color=new S(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=
    this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;this.setValues(b)}function Na(b){ba.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=
    this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=!1;void 0!==b&&(void 0!==b.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(b))}function Cb(b,h){this.origin=void 0!==b?b:new a;this.direction=void 0!==h?h:new a}function Ob(b,h){this.start=void 0!==
  b?b:new a;this.end=void 0!==h?h:new a}function zb(b,h,p){this.a=void 0!==b?b:new a;this.b=void 0!==h?h:new a;this.c=void 0!==p?p:new a}function cb(b,h){aa.call(this);this.type="Mesh";this.geometry=void 0!==b?b:new N;this.material=void 0!==h?h:new Ka({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function fd(b,h,p,a){function d(b,p){h.buffers.color.setClear(b.r,b.g,b.b,p,a)}var f=new S(0),g=0,e,k,m;return{getClearColor:function(){return f},setClearColor:function(b,h){f.set(b);
      g=void 0!==h?h:1;d(f,g)},getClearAlpha:function(){return g},setClearAlpha:function(b){g=b;d(f,g)},render:function(h,a,M,l){a=a.background;null===a?d(f,g):a&&a.isColor&&(d(a,1),l=!0);(b.autoClear||l)&&b.clear(b.autoClearColor,b.autoClearDepth,b.autoClearStencil);a&&a.isCubeTexture?(void 0===m&&(m=new cb(new X(1,1,1),new Na({uniforms:gc.cube.uniforms,vertexShader:gc.cube.vertexShader,fragmentShader:gc.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1})),m.geometry.removeAttribute("normal"),
      m.geometry.removeAttribute("uv"),m.onBeforeRender=function(b,h,p){this.matrixWorld.copyPosition(p.matrixWorld)},p.update(m.geometry)),m.material.uniforms.tCube.value=a,h.push(m,m.geometry,m.material,0,null)):a&&a.isTexture&&(void 0===e&&(e=new wb(-1,1,1,-1,0,1),k=new cb(new Ca(2,2),new Ka({depthTest:!1,depthWrite:!1,fog:!1})),p.update(k.geometry)),k.material.map=a,b.renderBufferDirect(e,null,k.geometry,k.material,k,null))}}}function gd(b,h){return b.renderOrder!==h.renderOrder?b.renderOrder-h.renderOrder:
    b.program&&h.program&&b.program!==h.program?b.program.id-h.program.id:b.material.id!==h.material.id?b.material.id-h.material.id:b.z!==h.z?b.z-h.z:b.id-h.id}function xc(b,h){return b.renderOrder!==h.renderOrder?b.renderOrder-h.renderOrder:b.z!==h.z?h.z-b.z:b.id-h.id}function hd(){var b=[],h=0,p=[],a=[];return{opaque:p,transparent:a,init:function(){h=0;p.length=0;a.length=0},push:function(d,f,g,e,k){var m=b[h];void 0===m?(m={id:d.id,object:d,geometry:f,material:g,program:g.program,renderOrder:d.renderOrder,
      z:e,group:k},b[h]=m):(m.id=d.id,m.object=d,m.geometry=f,m.material=g,m.program=g.program,m.renderOrder=d.renderOrder,m.z=e,m.group=k);(!0===g.transparent?a:p).push(m);h++},sort:function(){1<p.length&&p.sort(gd);1<a.length&&a.sort(xc)}}}function jd(){var b={};return{get:function(h,p){var a=h.id+","+p.id,d=b[a];void 0===d&&(d=new hd,b[a]=d);return d},dispose:function(){b={}}}}function kd(b,h){return Math.abs(h[1])-Math.abs(b[1])}function be(b){var h={},p=new Float32Array(8);return{update:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          d,f,g){var e=a.morphTargetInfluences,k=e.length;a=h[d.id];if(void 0===a){a=[];for(var m=0;m<k;m++)a[m]=[m,0];h[d.id]=a}var l=f.morphTargets&&d.morphAttributes.position;f=f.morphNormals&&d.morphAttributes.normal;for(m=0;m<k;m++){var n=a[m];0!==n[1]&&(l&&d.removeAttribute("morphTarget"+m),f&&d.removeAttribute("morphNormal"+m))}for(m=0;m<k;m++)n=a[m],n[0]=m,n[1]=e[m];a.sort(kd);for(m=0;8>m;m++){if(n=a[m])if(e=n[0],k=n[1]){l&&d.addAttribute("morphTarget"+m,l[e]);f&&d.addAttribute("morphNormal"+m,f[e]);
      p[m]=k;continue}p[m]=0}g.getUniforms().setValue(b,"morphTargetInfluences",p)}}}function ld(b,h,p){var a,d,f;this.setMode=function(b){a=b};this.setIndex=function(b){d=b.type;f=b.bytesPerElement};this.render=function(h,g){b.drawElements(a,g,d,h*f);p.calls++;p.vertices+=g;a===b.TRIANGLES?p.faces+=g/3:a===b.POINTS&&(p.points+=g)};this.renderInstances=function(g,e,k){var m=h.get("ANGLE_instanced_arrays");null===m?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
    (m.drawElementsInstancedANGLE(a,k,d,e*f,g.maxInstancedCount),p.calls++,p.vertices+=k*g.maxInstancedCount,a===b.TRIANGLES?p.faces+=g.maxInstancedCount*k/3:a===b.POINTS&&(p.points+=g.maxInstancedCount*k))}}function Oa(b,h,p){var a;this.setMode=function(b){a=b};this.render=function(h,d){b.drawArrays(a,h,d);p.calls++;p.vertices+=d;a===b.TRIANGLES?p.faces+=d/3:a===b.POINTS&&(p.points+=d)};this.renderInstances=function(d,f,g){var e=h.get("ANGLE_instanced_arrays");if(null===e)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
  else{var k=d.attributes.position;k.isInterleavedBufferAttribute?(g=k.data.count,e.drawArraysInstancedANGLE(a,0,g,d.maxInstancedCount)):e.drawArraysInstancedANGLE(a,f,g,d.maxInstancedCount);p.calls++;p.vertices+=g*d.maxInstancedCount;a===b.TRIANGLES?p.faces+=d.maxInstancedCount*g/3:a===b.POINTS&&(p.points+=d.maxInstancedCount*g)}}}function ce(b,h,p){function a(b){b=b.target;var g=d[b.id];null!==g.index&&h.remove(g.index);for(var e in g.attributes)h.remove(g.attributes[e]);b.removeEventListener("dispose",
    a);delete d[b.id];if(e=f[b.id])h.remove(e),delete f[b.id];if(e=f[g.id])h.remove(e),delete f[g.id];p.geometries--;p.vertices-=g.attributes.position.count;b.faces&&(p.faces-=b.faces.length)}var d={},f={};return{get:function(b,h){var f=d[h.id];if(f)return f;h.addEventListener("dispose",a);h.isBufferGeometry?f=h:h.isGeometry&&(void 0===h._bufferGeometry&&(h._bufferGeometry=(new N).setFromObject(b)),f=h._bufferGeometry);d[h.id]=f;p.geometries++;p.vertices+=f.attributes.position.count;h.faces&&(p.faces+=
      h.faces.length);return f},update:function(p){var a=p.index,M=p.attributes;null!==a&&h.update(a,b.ELEMENT_ARRAY_BUFFER);for(var d in M)h.update(M[d],b.ARRAY_BUFFER);p=p.morphAttributes;for(d in p)for(var a=p[d],M=0,f=a.length;M<f;M++)h.update(a[M],b.ARRAY_BUFFER)},getWireframeAttribute:function(p){var a=f[p.id];if(a)return a;var a=[],M=p.index,d=p.attributes;if(null!==M)for(var M=M.array,d=0,V=M.length;d<V;d+=3){var g=M[d+0],e=M[d+1],k=M[d+2];a.push(g,e,e,k,k,g)}else for(M=d.position.array,d=0,V=M.length/
      3-1;d<V;d+=3)g=d+0,e=d+1,k=d+2,a.push(g,e,e,k,k,g);a=new (65535<Nb(a)?$a:qb)(a,1);h.update(a,b.ELEMENT_ARRAY_BUFFER);return f[p.id]=a}}}function yc(b,h){var p={};return{update:function(a){var d=h.frame,f=a.geometry,g=b.get(a,f);p[g.id]!==d&&(f.isGeometry&&g.updateFromObject(a),b.update(g),p[g.id]=d);return g},dispose:function(){p={}}}}function de(b){b=b.split("\n");for(var h=0;h<b.length;h++)b[h]=h+1+": "+b[h];return b.join("\n")}function Tb(b,h,p){var a=b.createShader(h);b.shaderSource(a,p);b.compileShader(a);
    !1===b.getShaderParameter(a,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(a)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",h===b.VERTEX_SHADER?"vertex":"fragment",b.getShaderInfoLog(a),de(p));return a}function md(b){switch(b){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD",
    "( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+b);}}function hc(b,h){var p=md(h);return"vec4 "+b+"( vec4 value ) { return "+p[0]+"ToLinear"+p[1]+"; }"}function T(b,h){var p=md(h);return"vec4 "+b+"( vec4 value ) { return LinearTo"+p[0]+p[1]+"; }"}function zc(b,h){var p;switch(h){case 1:p="Linear";break;case 2:p="Reinhard";break;case 3:p="Uncharted2";break;case 4:p="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+
    h);}return"vec3 "+b+"( vec3 color ) { return "+p+"ToneMapping( color ); }"}function nd(b,h,p){b=b||{};return[b.derivatives||h.envMapCubeUV||h.bumpMap||h.normalMap||h.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(b.fragDepth||h.logarithmicDepthBuffer)&&p.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",b.drawBuffers&&p.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(b.shaderTextureLOD||h.envMap)&&p.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":
    ""].filter(Ub).join("\n")}function od(b){var h=[],p;for(p in b){var a=b[p];!1!==a&&h.push("#define "+p+" "+a)}return h.join("\n")}function Ub(b){return""!==b}function Ac(b,h){return b.replace(/NUM_DIR_LIGHTS/g,h.numDirLights).replace(/NUM_SPOT_LIGHTS/g,h.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,h.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,h.numPointLights).replace(/NUM_HEMI_LIGHTS/g,h.numHemiLights)}function pd(b,h){return b.replace(/NUM_CLIPPING_PLANES/g,h.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,
    h.numClippingPlanes-h.numClipIntersection)}function Pb(b){return b.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(b,p){var a=Ga[p];if(void 0===a)throw Error("Can not resolve #include <"+p+">");return Pb(a)})}function ac(b){return b.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(b,p,a,d){b="";for(p=parseInt(p);p<parseInt(a);p++)b+=d.replace(/\[ i \]/g,"[ "+p+" ]");return b})}function Bc(b,h,p,a,d,f){var g=b.context,e=a.defines,k=
    d.vertexShader,m=d.fragmentShader,l="SHADOWMAP_TYPE_BASIC";1===f.shadowMapType?l="SHADOWMAP_TYPE_PCF":2===f.shadowMapType&&(l="SHADOWMAP_TYPE_PCF_SOFT");var n="ENVMAP_TYPE_CUBE",r="ENVMAP_MODE_REFLECTION",q="ENVMAP_BLENDING_MULTIPLY";if(f.envMap){switch(a.envMap.mapping){case 301:case 302:n="ENVMAP_TYPE_CUBE";break;case 306:case 307:n="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:n="ENVMAP_TYPE_EQUIREC";break;case 305:n="ENVMAP_TYPE_SPHERE"}switch(a.envMap.mapping){case 302:case 304:r="ENVMAP_MODE_REFRACTION"}switch(a.combine){case 0:q=
    "ENVMAP_BLENDING_MULTIPLY";break;case 1:q="ENVMAP_BLENDING_MIX";break;case 2:q="ENVMAP_BLENDING_ADD"}}var u=0<b.gammaFactor?b.gammaFactor:1,v=nd(a.extensions,f,h),t=od(e),w=g.createProgram();a.isRawShaderMaterial?(e=[t].filter(Ub).join("\n"),0<e.length&&(e+="\n"),h=[v,t].filter(Ub).join("\n"),0<h.length&&(h+="\n")):(e=["precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+d.name,t,f.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+u,
    "#define MAX_BONES "+f.maxBones,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+r:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.displacementMap&&f.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?
      "#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.flatShading?"#define FLAT_SHADED":"",f.skinning?"#define USE_SKINNING":"",f.useVertexTexture?"#define BONE_TEXTURE":"",f.morphTargets?"#define USE_MORPHTARGETS":"",f.morphNormals&&!1===f.flatShading?"#define USE_MORPHNORMALS":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",
    f.shadowMapEnabled?"#define "+l:"",f.sizeAttenuation?"#define USE_SIZEATTENUATION":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&h.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;",
    "#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif",
    "#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ub).join("\n"),h=[v,"precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+d.name,t,f.alphaTest?"#define ALPHATEST "+f.alphaTest:"","#define GAMMA_FACTOR "+u,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+n:"",f.envMap?"#define "+r:"",f.envMap?"#define "+
    q:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.gradientMap?"#define USE_GRADIENTMAP":"",f.flatShading?"#define FLAT_SHADED":"",f.doubleSided?"#define DOUBLE_SIDED":
    "",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+l:"",f.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",f.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&h.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",f.envMap&&h.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",
    0!==f.toneMapping?"#define TONE_MAPPING":"",0!==f.toneMapping?Ga.tonemapping_pars_fragment:"",0!==f.toneMapping?zc("toneMapping",f.toneMapping):"",f.dithering?"#define DITHERING":"",f.outputEncoding||f.mapEncoding||f.envMapEncoding||f.emissiveMapEncoding?Ga.encodings_pars_fragment:"",f.mapEncoding?hc("mapTexelToLinear",f.mapEncoding):"",f.envMapEncoding?hc("envMapTexelToLinear",f.envMapEncoding):"",f.emissiveMapEncoding?hc("emissiveMapTexelToLinear",f.emissiveMapEncoding):"",f.outputEncoding?T("linearToOutputTexel",
      f.outputEncoding):"",f.depthPacking?"#define DEPTH_PACKING "+a.depthPacking:"","\n"].filter(Ub).join("\n"));k=Pb(k);k=Ac(k,f);k=pd(k,f);m=Pb(m);m=Ac(m,f);m=pd(m,f);k=ac(k);m=ac(m);m=h+m;k=Tb(g,g.VERTEX_SHADER,e+k);m=Tb(g,g.FRAGMENT_SHADER,m);g.attachShader(w,k);g.attachShader(w,m);void 0!==a.index0AttributeName?g.bindAttribLocation(w,0,a.index0AttributeName):!0===f.morphTargets&&g.bindAttribLocation(w,0,"position");g.linkProgram(w);f=g.getProgramInfoLog(w).trim();d=g.getShaderInfoLog(k).trim();l=
    g.getShaderInfoLog(m).trim();r=n=!0;if(!1===g.getProgramParameter(w,g.LINK_STATUS))n=!1,console.error("THREE.WebGLProgram: shader error: ",g.getError(),"gl.VALIDATE_STATUS",g.getProgramParameter(w,g.VALIDATE_STATUS),"gl.getProgramInfoLog",f,d,l);else if(""!==f)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",f);else if(""===d||""===l)r=!1;r&&(this.diagnostics={runnable:n,material:a,programLog:f,vertexShader:{log:d,prefix:e},fragmentShader:{log:l,prefix:h}});g.deleteShader(k);g.deleteShader(m);
    var D;this.getUniforms=function(){void 0===D&&(D=new ua(g,w,b));return D};var x;this.getAttributes=function(){if(void 0===x){for(var b={},h=g.getProgramParameter(w,g.ACTIVE_ATTRIBUTES),p=0;p<h;p++){var a=g.getActiveAttrib(w,p).name;b[a]=g.getAttribLocation(w,a)}x=b}return x};this.destroy=function(){g.deleteProgram(w);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");
          return this.getAttributes()}}});this.id=Wf++;this.code=p;this.usedTimes=1;this.program=w;this.vertexShader=k;this.fragmentShader=m;return this}function D(b,h,p){function a(b,h){var p;b?b.isTexture?p=b.encoding:b.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),p=b.texture.encoding):p=3E3;3E3===p&&h&&(p=3007);return p}var d=[],f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",
    MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},g="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");
    this.getParameters=function(h,d,g,V,e,k,m){var l=f[h.type],n;if(m.isSkinnedMesh)if(n=m.skeleton.bones,p.floatVertexTextures)n=1024;else{var r=Math.min(Math.floor((p.maxVertexUniforms-20)/4),n.length);r<n.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+r+"."),n=0):n=r}else n=0;r=p.precision;null!==h.precision&&(r=p.getMaxPrecision(h.precision),r!==h.precision&&console.warn("THREE.WebGLProgram.getParameters:",h.precision,"not supported, using",r,"instead."));
      var Ea=b.getRenderTarget();return{shaderID:l,precision:r,supportsVertexTextures:p.vertexTextures,outputEncoding:a(Ea?Ea.texture:null,b.gammaOutput),map:!!h.map,mapEncoding:a(h.map,b.gammaInput),envMap:!!h.envMap,envMapMode:h.envMap&&h.envMap.mapping,envMapEncoding:a(h.envMap,b.gammaInput),envMapCubeUV:!!h.envMap&&(306===h.envMap.mapping||307===h.envMap.mapping),lightMap:!!h.lightMap,aoMap:!!h.aoMap,emissiveMap:!!h.emissiveMap,emissiveMapEncoding:a(h.emissiveMap,b.gammaInput),bumpMap:!!h.bumpMap,normalMap:!!h.normalMap,
        displacementMap:!!h.displacementMap,roughnessMap:!!h.roughnessMap,metalnessMap:!!h.metalnessMap,specularMap:!!h.specularMap,alphaMap:!!h.alphaMap,gradientMap:!!h.gradientMap,combine:h.combine,vertexColors:h.vertexColors,fog:!!V,useFog:h.fog,fogExp:V&&V.isFogExp2,flatShading:h.flatShading,sizeAttenuation:h.sizeAttenuation,logarithmicDepthBuffer:p.logarithmicDepthBuffer,skinning:h.skinning&&0<n,maxBones:n,useVertexTexture:p.floatVertexTextures,morphTargets:h.morphTargets,morphNormals:h.morphNormals,
        maxMorphTargets:b.maxMorphTargets,maxMorphNormals:b.maxMorphNormals,numDirLights:d.directional.length,numPointLights:d.point.length,numSpotLights:d.spot.length,numRectAreaLights:d.rectArea.length,numHemiLights:d.hemi.length,numClippingPlanes:e,numClipIntersection:k,dithering:h.dithering,shadowMapEnabled:b.shadowMap.enabled&&m.receiveShadow&&0<g.length,shadowMapType:b.shadowMap.type,toneMapping:b.toneMapping,physicallyCorrectLights:b.physicallyCorrectLights,premultipliedAlpha:h.premultipliedAlpha,
        alphaTest:h.alphaTest,doubleSided:2===h.side,flipSided:1===h.side,depthPacking:void 0!==h.depthPacking?h.depthPacking:!1}};this.getProgramCode=function(h,p){var a=[];p.shaderID?a.push(p.shaderID):(a.push(h.fragmentShader),a.push(h.vertexShader));if(void 0!==h.defines)for(var M in h.defines)a.push(M),a.push(h.defines[M]);for(M=0;M<g.length;M++)a.push(p[g[M]]);a.push(h.onBeforeCompile.toString());a.push(b.gammaOutput);return a.join()};this.acquireProgram=function(p,a,M,f){for(var g,e=0,k=d.length;e<
    k;e++){var m=d[e];if(m.code===f){g=m;++g.usedTimes;break}}void 0===g&&(g=new Bc(b,h,f,p,a,M),d.push(g));return g};this.releaseProgram=function(b){if(0===--b.usedTimes){var h=d.indexOf(b);d[h]=d[d.length-1];d.pop();b.destroy()}};this.programs=d}function P(b,h,p,a,d,f,g,e){function k(b,h){if(b.width>h||b.height>h){var p=h/Math.max(b.width,b.height),a=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");a.width=Math.floor(b.width*p);a.height=Math.floor(b.height*p);a.getContext("2d").drawImage(b,
    0,0,b.width,b.height,0,0,a.width,a.height);console.warn("THREE.WebGLRenderer: image is too big ("+b.width+"x"+b.height+"). Resized to "+a.width+"x"+a.height,b);return a}return b}function m(b){return qa.isPowerOfTwo(b.width)&&qa.isPowerOfTwo(b.height)}function l(b,h){return b.generateMipmaps&&h&&1003!==b.minFilter&&1006!==b.minFilter}function n(h){return 1003===h||1004===h||1005===h?b.NEAREST:b.LINEAR}function r(h){h=h.target;h.removeEventListener("dispose",r);a:{var p=a.get(h);if(h.image&&p.__image__webglTextureCube)b.deleteTexture(p.__image__webglTextureCube);
  else{if(void 0===p.__webglInit)break a;b.deleteTexture(p.__webglTexture)}a.remove(h)}h.isVideoTexture&&delete x[h.id];g.textures--;g.textureSz-=h.textureSz}function q(h){h=h.target;h.removeEventListener("dispose",q);var p=a.get(h),d=a.get(h.texture);if(h){void 0!==d.__webglTexture&&b.deleteTexture(d.__webglTexture);h.depthTexture&&h.depthTexture.dispose();if(h.isWebGLRenderTargetCube)for(d=0;6>d;d++)b.deleteFramebuffer(p.__webglFramebuffer[d]),p.__webglDepthbuffer&&b.deleteRenderbuffer(p.__webglDepthbuffer[d]);
  else b.deleteFramebuffer(p.__webglFramebuffer),p.__webglDepthbuffer&&b.deleteRenderbuffer(p.__webglDepthbuffer);a.remove(h.texture);a.remove(h)}g.textures--}function u(h,n){var q=a.get(h);if(h.isVideoTexture){var t=h.id,w=e.frame;x[t]!==w&&(x[t]=w,h.update())}if(0<h.version&&q.__version!==h.version)if(t=h.image,void 0===t)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",h);else if(!1===t.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",
    h);else{void 0===q.__webglInit?(q.__webglInit=!0,h.addEventListener("dispose",r),q.__webglTexture=b.createTexture(),g.textures++):g.textureSz-=h.textureSz;h.textureSz=0;p.activeTexture(b.TEXTURE0+n);p.bindTexture(b.TEXTURE_2D,q.__webglTexture);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,h.flipY);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.premultiplyAlpha);b.pixelStorei(b.UNPACK_ALIGNMENT,h.unpackAlignment);var la=k(h.image,d.maxTextureSize);(1001!==h.wrapS||1001!==h.wrapT||1003!==h.minFilter&&1006!==
    h.minFilter)&&!1===m(la)&&(t=la,t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageBitmap?(void 0===y&&(y=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),y.width=qa.floorPowerOfTwo(t.width),y.height=qa.floorPowerOfTwo(t.height),y.getContext("2d").drawImage(t,0,0,y.width,y.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+y.width+"x"+y.height,t),la=y):la=t);var t=m(la),w=f.convert(h.format),
    z=f.convert(h.type);v(b.TEXTURE_2D,h,t);var P=h.mipmaps;if(h.isDepthTexture){P=b.DEPTH_COMPONENT;if(1015===h.type){if(!D)throw Error("Float Depth Texture only supported in WebGL2.0");P=b.DEPTH_COMPONENT32F}else D&&(P=b.DEPTH_COMPONENT16);1026===h.format&&P===b.DEPTH_COMPONENT&&1012!==h.type&&1014!==h.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),h.type=1012,z=f.convert(h.type));1027===h.format&&(P=b.DEPTH_STENCIL,1020!==h.type&&
  (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),h.type=1020,z=f.convert(h.type)));p.texImage2D(b.TEXTURE_2D,0,P,la.width,la.height,0,w,z,null)}else if(h.isDataTexture)if(0<P.length&&t){for(var F=0,B=P.length;F<B;F++)la=P[F],p.texImage2D(b.TEXTURE_2D,F,w,la.width,la.height,0,w,z,la.data);h.generateMipmaps=!1}else p.texImage2D(b.TEXTURE_2D,0,w,la.width,la.height,0,w,z,la.data);else if(h.isCompressedTexture)for(F=0,B=P.length;F<B;F++)la=P[F],1023!==h.format&&
  1022!==h.format?-1<p.getCompressedTextureFormats().indexOf(w)?p.compressedTexImage2D(b.TEXTURE_2D,F,w,la.width,la.height,0,la.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):p.texImage2D(b.TEXTURE_2D,F,w,la.width,la.height,0,w,z,la.data);else if(0<P.length&&t){F=0;for(B=P.length;F<B;F++)la=P[F],p.texImage2D(b.TEXTURE_2D,F,w,w,z,la),h.textureSz+=la.image.width*la.image.height*(1023===la.format?4:3);h.generateMipmaps=!1}else p.texImage2D(b.TEXTURE_2D,
    0,w,w,z,la),h.textureSz+=h.image.width*h.image.height*(1023===h.format?4:3);l(h,t)&&b.generateMipmap(b.TEXTURE_2D);q.__version=h.version;if(h.onUpdate)h.onUpdate(h);g.textureSz+=h.textureSz;return}p.activeTexture(b.TEXTURE0+n);p.bindTexture(b.TEXTURE_2D,q.__webglTexture)}function v(p,g,e){e?(b.texParameteri(p,b.TEXTURE_WRAP_S,f.convert(g.wrapS)),b.texParameteri(p,b.TEXTURE_WRAP_T,f.convert(g.wrapT)),b.texParameteri(p,b.TEXTURE_MAG_FILTER,f.convert(g.magFilter)),b.texParameteri(p,b.TEXTURE_MIN_FILTER,
    f.convert(g.minFilter))):(b.texParameteri(p,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(p,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),1001===g.wrapS&&1001===g.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",g),b.texParameteri(p,b.TEXTURE_MAG_FILTER,n(g.magFilter)),b.texParameteri(p,b.TEXTURE_MIN_FILTER,n(g.minFilter)),1003!==g.minFilter&&1006!==g.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",
    g));!(e=h.get("EXT_texture_filter_anisotropic"))||1015===g.type&&null===h.get("OES_texture_float_linear")||1016===g.type&&null===h.get("OES_texture_half_float_linear")||!(1<g.anisotropy||a.get(g).__currentAnisotropy)||(b.texParameterf(p,e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,d.getMaxAnisotropy())),a.get(g).__currentAnisotropy=g.anisotropy)}function t(h,d,g,V){var e=f.convert(d.texture.format),k=f.convert(d.texture.type);p.texImage2D(V,0,e,d.width,d.height,0,e,k,null);b.bindFramebuffer(b.FRAMEBUFFER,
    h);b.framebufferTexture2D(b.FRAMEBUFFER,g,V,a.get(d.texture).__webglTexture,0);b.bindFramebuffer(b.FRAMEBUFFER,null)}function w(h,p){b.bindRenderbuffer(b.RENDERBUFFER,h);p.depthBuffer&&!p.stencilBuffer?(b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,p.width,p.height),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,h)):p.depthBuffer&&p.stencilBuffer?(b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,p.width,p.height),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,
    b.RENDERBUFFER,h)):b.renderbufferStorage(b.RENDERBUFFER,b.RGBA4,p.width,p.height);b.bindRenderbuffer(b.RENDERBUFFER,null)}var D="undefined"!==typeof WebGL2RenderingContext&&b instanceof WebGL2RenderingContext,x={},y;this.setTexture2D=u;this.setTextureCube=function(h,e){var n=a.get(h);if(6===h.image.length)if(0<h.version&&n.__version!==h.version){n.__image__webglTextureCube||(h.addEventListener("dispose",r),n.__image__webglTextureCube=b.createTexture(),g.textures++,h.textureSz=0);p.activeTexture(b.TEXTURE0+
    e);p.bindTexture(b.TEXTURE_CUBE_MAP,n.__image__webglTextureCube);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,h.flipY);for(var q=h&&h.isCompressedTexture,Ja=h.image[0]&&h.image[0].isDataTexture,u=[],t=0;6>t;t++)u[t]=q||Ja?Ja?h.image[t].image:h.image[t]:k(h.image[t],d.maxCubemapSize);var w=m(u[0]),D=f.convert(h.format),x=f.convert(h.type);v(b.TEXTURE_CUBE_MAP,h,w);for(t=0;6>t;t++)if(q)for(var la,y=u[t].mipmaps,z=0,P=y.length;z<P;z++)la=y[z],1023!==h.format&&1022!==h.format?-1<p.getCompressedTextureFormats().indexOf(D)?
    p.compressedTexImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+t,z,D,la.width,la.height,0,la.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):p.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+t,z,D,la.width,la.height,0,D,x,la.data),h.textureSz+=la.width*la.height*(1023===h.format?4:3);else Ja?p.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,D,u[t].width,u[t].height,0,D,x,u[t].data):p.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,D,D,x,u[t]),h.textureSz+=
    u[t].width*u[t].height*(1023===h.format?4:3);l(h,w)&&b.generateMipmap(b.TEXTURE_CUBE_MAP);n.__version=h.version;if(h.onUpdate)h.onUpdate(h);g.textureSz+=h.textureSz}else p.activeTexture(b.TEXTURE0+e),p.bindTexture(b.TEXTURE_CUBE_MAP,n.__image__webglTextureCube)};this.setTextureCubeDynamic=function(h,d){p.activeTexture(b.TEXTURE0+d);p.bindTexture(b.TEXTURE_CUBE_MAP,a.get(h).__webglTexture)};this.setupRenderTarget=function(h){var d=a.get(h),f=a.get(h.texture);h.addEventListener("dispose",q);f.__webglTexture=
    b.createTexture();g.textures++;var V=!0===h.isWebGLRenderTargetCube,e=m(h);if(V){d.__webglFramebuffer=[];for(var k=0;6>k;k++)d.__webglFramebuffer[k]=b.createFramebuffer()}else d.__webglFramebuffer=b.createFramebuffer();if(V){p.bindTexture(b.TEXTURE_CUBE_MAP,f.__webglTexture);v(b.TEXTURE_CUBE_MAP,h.texture,e);for(k=0;6>k;k++)t(d.__webglFramebuffer[k],h,b.COLOR_ATTACHMENT0,b.TEXTURE_CUBE_MAP_POSITIVE_X+k);l(h.texture,e)&&b.generateMipmap(b.TEXTURE_CUBE_MAP);p.bindTexture(b.TEXTURE_CUBE_MAP,null)}else p.bindTexture(b.TEXTURE_2D,
    f.__webglTexture),v(b.TEXTURE_2D,h.texture,e),t(d.__webglFramebuffer,h,b.COLOR_ATTACHMENT0,b.TEXTURE_2D),l(h.texture,e)&&b.generateMipmap(b.TEXTURE_2D),p.bindTexture(b.TEXTURE_2D,null);if(h.depthBuffer){d=a.get(h);f=!0===h.isWebGLRenderTargetCube;if(h.depthTexture){if(f)throw Error("target.depthTexture not supported in Cube render targets");if(h&&h.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");b.bindFramebuffer(b.FRAMEBUFFER,d.__webglFramebuffer);if(!h.depthTexture||
    !h.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");a.get(h.depthTexture).__webglTexture&&h.depthTexture.image.width===h.width&&h.depthTexture.image.height===h.height||(h.depthTexture.image.width=h.width,h.depthTexture.image.height=h.height,h.depthTexture.needsUpdate=!0);u(h.depthTexture,0);d=a.get(h.depthTexture).__webglTexture;if(1026===h.depthTexture.format)b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.TEXTURE_2D,d,0);else if(1027===
    h.depthTexture.format)b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,d,0);else throw Error("Unknown depthTexture format");}else if(f)for(d.__webglDepthbuffer=[],f=0;6>f;f++)b.bindFramebuffer(b.FRAMEBUFFER,d.__webglFramebuffer[f]),d.__webglDepthbuffer[f]=b.createRenderbuffer(),w(d.__webglDepthbuffer[f],h);else b.bindFramebuffer(b.FRAMEBUFFER,d.__webglFramebuffer),d.__webglDepthbuffer=b.createRenderbuffer(),w(d.__webglDepthbuffer,h);b.bindFramebuffer(b.FRAMEBUFFER,null)}};
    this.updateRenderTargetMipmap=function(h){var d=h.texture,f=m(h);l(d,f)&&(h=h.isWebGLRenderTargetCube?b.TEXTURE_CUBE_MAP:b.TEXTURE_2D,d=a.get(d).__webglTexture,p.bindTexture(h,d),b.generateMipmap(h),p.bindTexture(h,null))}}function F(){var b={};return{get:function(h){h=h.uuid;var p=b[h];void 0===p&&(p={},b[h]=p);return p},remove:function(h){delete b[h.uuid]},update:function(h,p,a){b[h.uuid][p]=a},dispose:function(){b={}}}}function Pa(b,h,p){function a(h,p,M){var d=new Uint8Array(4),f=b.createTexture();
    b.bindTexture(h,f);b.texParameteri(h,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(h,b.TEXTURE_MAG_FILTER,b.NEAREST);for(h=0;h<M;h++)b.texImage2D(p+h,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,d);return f}function d(h){!0!==x[h]&&(b.enable(h),x[h]=!0)}function g(h){!1!==x[h]&&(b.disable(h),x[h]=!1)}function e(h,a,M,f,k,m,l,n){0!==h?d(b.BLEND):g(b.BLEND);if(5!==h){if(h!==P||n!==ra)switch(h){case 2:n?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ONE,b.ONE,b.ONE,b.ONE)):(b.blendEquation(b.FUNC_ADD),
    b.blendFunc(b.SRC_ALPHA,b.ONE));break;case 3:n?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ZERO,b.ZERO,b.ONE_MINUS_SRC_COLOR,b.ONE_MINUS_SRC_ALPHA)):(b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ZERO,b.ONE_MINUS_SRC_COLOR));break;case 4:n?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ZERO,b.SRC_COLOR,b.ZERO,b.SRC_ALPHA)):(b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ZERO,b.SRC_COLOR));break;default:n?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ONE,
    b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA)):(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA))}Pa=C=A=N=B=F=null}else{k=k||a;m=m||M;l=l||f;if(a!==F||k!==A)b.blendEquationSeparate(p.convert(a),p.convert(k)),F=a,A=k;if(M!==B||f!==N||m!==C||l!==Pa)b.blendFuncSeparate(p.convert(M),p.convert(f),p.convert(m),p.convert(l)),B=M,N=f,C=m,Pa=l}P=h;ra=n}function k(h){ma!==h&&(h?b.frontFace(b.CW):b.frontFace(b.CCW),ma=h)}
    function m(h){0!==h?(d(b.CULL_FACE),h!==O&&(1===h?b.cullFace(b.BACK):2===h?b.cullFace(b.FRONT):b.cullFace(b.FRONT_AND_BACK))):g(b.CULL_FACE);O=h}function l(h,p,a){if(h){if(d(b.POLYGON_OFFSET_FILL),oa!==p||I!==a)b.polygonOffset(p,a),oa=p,I=a}else g(b.POLYGON_OFFSET_FILL)}function n(h){void 0===h&&(h=b.TEXTURE0+X-1);H!==h&&(b.activeTexture(h),H=h)}var r=new function(){var h=!1,p=new f,a=null,M=new f(0,0,0,0);return{setMask:function(p){a===p||h||(b.colorMask(p,p,p,p),a=p)},setLocked:function(b){h=b},
        setClear:function(h,a,d,f,g){!0===g&&(h*=f,a*=f,d*=f);p.set(h,a,d,f);!1===M.equals(p)&&(b.clearColor(h,a,d,f),M.copy(p))},reset:function(){h=!1;a=null;M.set(-1,0,0,0)}}},q=new function(){var h=!1,p=null,a=null,M=null;return{setTest:function(h){h?d(b.DEPTH_TEST):g(b.DEPTH_TEST)},setMask:function(a){p===a||h||(b.depthMask(a),p=a)},setFunc:function(h){if(a!==h){if(h)switch(h){case 0:b.depthFunc(b.NEVER);break;case 1:b.depthFunc(b.ALWAYS);break;case 2:b.depthFunc(b.LESS);break;case 3:b.depthFunc(b.LEQUAL);
          break;case 4:b.depthFunc(b.EQUAL);break;case 5:b.depthFunc(b.GEQUAL);break;case 6:b.depthFunc(b.GREATER);break;case 7:b.depthFunc(b.NOTEQUAL);break;default:b.depthFunc(b.LEQUAL)}else b.depthFunc(b.LEQUAL);a=h}},setLocked:function(b){h=b},setClear:function(h){M!==h&&(b.clearDepth(h),M=h)},reset:function(){h=!1;M=a=p=null}}},u=new function(){var h=!1,p=null,a=null,M=null,f=null,e=null,k=null,m=null,l=null;return{setTest:function(h){h?d(b.STENCIL_TEST):g(b.STENCIL_TEST)},setMask:function(a){p===a||h||
        (b.stencilMask(a),p=a)},setFunc:function(h,p,d){if(a!==h||M!==p||f!==d)b.stencilFunc(h,p,d),a=h,M=p,f=d},setOp:function(h,p,a){if(e!==h||k!==p||m!==a)b.stencilOp(h,p,a),e=h,k=p,m=a},setLocked:function(b){h=b},setClear:function(h){l!==h&&(b.clearStencil(h),l=h)},reset:function(){h=!1;l=m=k=e=f=M=a=p=null}}},v=b.getParameter(b.MAX_VERTEX_ATTRIBS),t=new Uint8Array(v),w=new Uint8Array(v),D=new Uint8Array(v),x={},y=null,z=null,P=null,F=null,B=null,N=null,A=null,C=null,Pa=null,ra=!1,ma=null,O=null,L=null,
      oa=null,I=null,X=b.getParameter(b.MAX_COMBINED_TEXTURE_IMAGE_UNITS),E=!1,v=0,v=b.getParameter(b.VERSION);-1!==v.indexOf("WebGL")?(v=parseFloat(/^WebGL\ ([0-9])/.exec(v)[1]),E=1<=v):-1!==v.indexOf("OpenGL ES")&&(v=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(v)[1]),E=2<=v);var H=null,za={},R=new f,K=new f,W={};W[b.TEXTURE_2D]=a(b.TEXTURE_2D,b.TEXTURE_2D,1);W[b.TEXTURE_CUBE_MAP]=a(b.TEXTURE_CUBE_MAP,b.TEXTURE_CUBE_MAP_POSITIVE_X,6);r.setClear(0,0,0,1);q.setClear(1);u.setClear(0);d(b.DEPTH_TEST);q.setFunc(3);
    k(!1);m(1);d(b.CULL_FACE);d(b.BLEND);e(1);return{buffers:{color:r,depth:q,stencil:u},initAttributes:function(){for(var b=0,h=t.length;b<h;b++)t[b]=0},enableAttribute:function(p){t[p]=1;0===w[p]&&(b.enableVertexAttribArray(p),w[p]=1);0!==D[p]&&(h.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(p,0),D[p]=0)},enableAttributeAndDivisor:function(p,a){t[p]=1;0===w[p]&&(b.enableVertexAttribArray(p),w[p]=1);D[p]!==a&&(h.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(p,a),D[p]=a)},disableUnusedAttributes:function(){for(var h=
        0,p=w.length;h!==p;++h)w[h]!==t[h]&&(b.disableVertexAttribArray(h),w[h]=0)},enable:d,disable:g,getCompressedTextureFormats:function(){if(null===y&&(y=[],h.get("WEBGL_compressed_texture_pvrtc")||h.get("WEBGL_compressed_texture_s3tc")||h.get("WEBGL_compressed_texture_etc1")||h.get("WEBGL_compressed_texture_astc")))for(var p=b.getParameter(b.COMPRESSED_TEXTURE_FORMATS),a=0;a<p.length;a++)y.push(p[a]);return y},useProgram:function(h){return z!==h?(b.useProgram(h),z=h,!0):!1},setBlending:e,setMaterial:function(h,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       p){2===h.side?g(b.CULL_FACE):d(b.CULL_FACE);var a=1===h.side;p&&(a=!a);k(a);!0===h.transparent?e(h.blending,h.blendEquation,h.blendSrc,h.blendDst,h.blendEquationAlpha,h.blendSrcAlpha,h.blendDstAlpha,h.premultipliedAlpha):e(0);q.setFunc(h.depthFunc);q.setTest(h.depthTest);q.setMask(h.depthWrite);r.setMask(h.colorWrite);l(h.polygonOffset,h.polygonOffsetFactor,h.polygonOffsetUnits)},setFlipSided:k,setCullFace:m,setLineWidth:function(h){h!==L&&(E&&b.lineWidth(h),L=h)},setPolygonOffset:l,setScissorTest:function(h){h?
        d(b.SCISSOR_TEST):g(b.SCISSOR_TEST)},activeTexture:n,bindTexture:function(h,p){null===H&&n();var a=za[H];void 0===a&&(a={type:void 0,texture:void 0},za[H]=a);if(a.type!==h||a.texture!==p)b.bindTexture(h,p||W[h]),a.type=h,a.texture=p},compressedTexImage2D:function(){try{b.compressedTexImage2D.apply(b,arguments)}catch(h){console.error("THREE.WebGLState:",h)}},texImage2D:function(){try{b.texImage2D.apply(b,arguments)}catch(h){console.error("THREE.WebGLState:",h)}},scissor:function(h){!1===R.equals(h)&&
      (b.scissor(h.x,h.y,h.z,h.w),R.copy(h))},viewport:function(h){!1===K.equals(h)&&(b.viewport(h.x,h.y,h.z,h.w),K.copy(h))},reset:function(){for(var h=0;h<w.length;h++)1===w[h]&&(b.disableVertexAttribArray(h),w[h]=0);x={};H=y=null;za={};O=ma=P=z=null;r.reset();q.reset();u.reset()}}}function ma(b,h,p){function a(h){if("highp"===h){if(0<b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.HIGH_FLOAT).precision&&0<b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.HIGH_FLOAT).precision)return"highp";h="mediump"}return"mediump"===
  h&&0<b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.MEDIUM_FLOAT).precision&&0<b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT).precision?"mediump":"lowp"}var d,f=void 0!==p.precision?p.precision:"highp",g=a(f);g!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",g,"instead."),f=g);p=!0===p.logarithmicDepthBuffer;var g=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS),e=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS),k=b.getParameter(b.MAX_TEXTURE_SIZE),m=b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE),
    l=b.getParameter(b.MAX_VERTEX_ATTRIBS),n=b.getParameter(b.MAX_VERTEX_UNIFORM_VECTORS),r=b.getParameter(b.MAX_VARYING_VECTORS),q=b.getParameter(b.MAX_FRAGMENT_UNIFORM_VECTORS),u=0<e,v=!!h.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==d)return d;var p=h.get("EXT_texture_filter_anisotropic");return d=null!==p?b.getParameter(p.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:a,precision:f,logarithmicDepthBuffer:p,maxTextures:g,maxVertexTextures:e,maxTextureSize:k,maxCubemapSize:m,
    maxAttributes:l,maxVertexUniforms:n,maxVaryings:r,maxFragmentUniforms:q,vertexTextures:u,floatFragmentTextures:v,floatVertexTextures:u&&v}}function ra(b,h,p,a){ab.call(this);this.type="PerspectiveCamera";this.fov=void 0!==b?b:50;this.zoom=1;this.near=void 0!==p?p:.1;this.far=void 0!==a?a:2E3;this.focus=10;this.aspect=void 0!==h?h:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function za(b){ra.call(this);this.cameras=b||[]}function rf(b){function h(){if(null!==
    a&&a.isPresenting){var h=a.getEyeParameters("left"),d=h.renderWidth,h=h.renderHeight;v=b.getPixelRatio();u=b.getSize();b.setDrawingBufferSize(2*d,h,1)}else p.enabled&&b.setDrawingBufferSize(u.width,u.height,v)}var p=this,a=null,d=null,g=null,e=new m,k=new m;"undefined"!==typeof window&&"VRFrameData"in window&&(d=new window.VRFrameData);var l=new m,n=new ra;n.bounds=new f(0,0,.5,1);n.layers.enable(1);var r=new ra;r.bounds=new f(.5,0,.5,1);r.layers.enable(2);var q=new za([n,r]);q.layers.enable(1);q.layers.enable(2);
    var u,v;"undefined"!==typeof window&&window.addEventListener("vrdisplaypresentchange",h,!1);this.enabled=!1;this.userHeight=1.6;this.getDevice=function(){return a};this.setDevice=function(b){void 0!==b&&(a=b)};this.setPoseTarget=function(b){void 0!==b&&(g=b)};this.getCamera=function(b){if(null===a)return b;a.depthNear=b.near;a.depthFar=b.far;a.getFrameData(d);var h=d.pose,f=null!==g?g:b;null!==h.position?f.position.fromArray(h.position):f.position.set(0,0,0);null!==h.orientation&&f.quaternion.fromArray(h.orientation);
      (h=a.stageParameters)?e.fromArray(h.sittingToStandingTransform):e.makeTranslation(0,p.userHeight,0);f.position.applyMatrix4(e);f.updateMatrixWorld();if(!1===a.isPresenting)return b;n.near=b.near;r.near=b.near;n.far=b.far;r.far=b.far;q.matrixWorld.copy(b.matrixWorld);q.matrixWorldInverse.copy(b.matrixWorldInverse);n.matrixWorldInverse.fromArray(d.leftViewMatrix);r.matrixWorldInverse.fromArray(d.rightViewMatrix);k.getInverse(e);n.matrixWorldInverse.multiply(k);r.matrixWorldInverse.multiply(k);b=f.parent;
      null!==b&&(l.getInverse(b.matrixWorld),n.matrixWorldInverse.multiply(l),r.matrixWorldInverse.multiply(l));n.matrixWorld.getInverse(n.matrixWorldInverse);r.matrixWorld.getInverse(r.matrixWorldInverse);n.projectionMatrix.fromArray(d.leftProjectionMatrix);r.projectionMatrix.fromArray(d.rightProjectionMatrix);q.projectionMatrix.copy(n.projectionMatrix);b=a.getLayers();b.length&&(b=b[0],null!==b.leftBounds&&4===b.leftBounds.length&&n.bounds.fromArray(b.leftBounds),null!==b.rightBounds&&4===b.rightBounds.length&&
      r.bounds.fromArray(b.rightBounds));return q};this.getStandingMatrix=function(){return e};this.submitFrame=function(){a&&a.isPresenting&&a.submitFrame()};this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",h)}}function Ya(b){var h={};return{get:function(p){if(void 0!==h[p])return h[p];var a;switch(p){case "WEBGL_depth_texture":a=b.getExtension("WEBGL_depth_texture")||b.getExtension("MOZ_WEBGL_depth_texture")||b.getExtension("WEBKIT_WEBGL_depth_texture");
      break;case "EXT_texture_filter_anisotropic":a=b.getExtension("EXT_texture_filter_anisotropic")||b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":a=b.getExtension("WEBGL_compressed_texture_s3tc")||b.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":a=b.getExtension("WEBGL_compressed_texture_pvrtc")||
      b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case "WEBGL_compressed_texture_etc1":a=b.getExtension("WEBGL_compressed_texture_etc1");break;default:a=b.getExtension(p)}null===a&&console.warn("THREE.WebGLRenderer: "+p+" extension not supported.");return h[p]=a}}}function Xf(){function b(){l.value!==a&&(l.value=a,l.needsUpdate=0<d);p.numPlanes=d;p.numIntersection=0}function h(b,h,a,d){var M=null!==b?b.length:0,f=null;if(0!==M){f=l.value;if(!0!==d||null===f){d=a+4*M;h=h.matrixWorldInverse;
    m.getNormalMatrix(h);if(null===f||f.length<d)f=new Float32Array(d);for(d=0;d!==M;++d,a+=4)e.copy(b[d]).applyMatrix4(h,m),e.normal.toArray(f,a),f[a+3]=e.constant}l.value=f;l.needsUpdate=!0}p.numPlanes=M;return f}var p=this,a=null,d=0,f=!1,g=!1,e=new Ma,m=new k,l={value:null,needsUpdate:!1};this.uniform=l;this.numIntersection=this.numPlanes=0;this.init=function(b,p,g){var e=0!==b.length||p||0!==d||f;f=p;a=h(b,g,0);d=b.length;return e};this.beginShadows=function(){g=!0;h(null)};this.endShadows=function(){g=
    !1;b()};this.setState=function(p,e,k,m,n,r){if(!f||null===p||0===p.length||g&&!k)g?h(null):b();else{k=g?0:d;var q=4*k,Ja=n.clippingState||null;l.value=Ja;Ja=h(p,m,q,r);for(p=0;p!==q;++p)Ja[p]=a[p];n.clippingState=Ja;this.numIntersection=e?this.numPlanes:0;this.numPlanes+=k}}}function sf(b,h){return{convert:function(p){var a;if(1E3===p)return b.REPEAT;if(1001===p)return b.CLAMP_TO_EDGE;if(1002===p)return b.MIRRORED_REPEAT;if(1003===p)return b.NEAREST;if(1004===p)return b.NEAREST_MIPMAP_NEAREST;if(1005===
      p)return b.NEAREST_MIPMAP_LINEAR;if(1006===p)return b.LINEAR;if(1007===p)return b.LINEAR_MIPMAP_NEAREST;if(1008===p)return b.LINEAR_MIPMAP_LINEAR;if(1009===p)return b.UNSIGNED_BYTE;if(1017===p)return b.UNSIGNED_SHORT_4_4_4_4;if(1018===p)return b.UNSIGNED_SHORT_5_5_5_1;if(1019===p)return b.UNSIGNED_SHORT_5_6_5;if(1010===p)return b.BYTE;if(1011===p)return b.SHORT;if(1012===p)return b.UNSIGNED_SHORT;if(1013===p)return b.INT;if(1014===p)return b.UNSIGNED_INT;if(1015===p)return b.FLOAT;if(1016===p&&(a=
      h.get("OES_texture_half_float"),null!==a))return a.HALF_FLOAT_OES;if(1021===p)return b.ALPHA;if(1022===p)return b.RGB;if(1023===p)return b.RGBA;if(1024===p)return b.LUMINANCE;if(1025===p)return b.LUMINANCE_ALPHA;if(1026===p)return b.DEPTH_COMPONENT;if(1027===p)return b.DEPTH_STENCIL;if(100===p)return b.FUNC_ADD;if(101===p)return b.FUNC_SUBTRACT;if(102===p)return b.FUNC_REVERSE_SUBTRACT;if(200===p)return b.ZERO;if(201===p)return b.ONE;if(202===p)return b.SRC_COLOR;if(203===p)return b.ONE_MINUS_SRC_COLOR;
      if(204===p)return b.SRC_ALPHA;if(205===p)return b.ONE_MINUS_SRC_ALPHA;if(206===p)return b.DST_ALPHA;if(207===p)return b.ONE_MINUS_DST_ALPHA;if(208===p)return b.DST_COLOR;if(209===p)return b.ONE_MINUS_DST_COLOR;if(210===p)return b.SRC_ALPHA_SATURATE;if(33776===p||33777===p||33778===p||33779===p)if(a=h.get("WEBGL_compressed_texture_s3tc"),null!==a){if(33776===p)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===p)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===p)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;
        if(33779===p)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===p||35841===p||35842===p||35843===p)if(a=h.get("WEBGL_compressed_texture_pvrtc"),null!==a){if(35840===p)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===p)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===p)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===p)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===p&&(a=h.get("WEBGL_compressed_texture_etc1"),null!==a))return a.COMPRESSED_RGB_ETC1_WEBGL;if(37808===p||37809===p||37810===
        p||37811===p||37812===p||37813===p||37814===p||37815===p||37816===p||37817===p||37818===p||37819===p||37820===p||37821===p)if(a=h.get("WEBGL_compressed_texture_astc"),null!==a)return p;if(103===p||104===p)if(a=h.get("EXT_blend_minmax"),null!==a){if(103===p)return a.MIN_EXT;if(104===p)return a.MAX_EXT}return 1020===p&&(a=h.get("WEBGL_depth_texture"),null!==a)?a.UNSIGNED_INT_24_8_WEBGL:0}}}function qd(){var b={};return{get:function(h){if(void 0!==b[h.id])return b[h.id];var p;switch(h.type){case "DirectionalLight":p=
      {direction:new a,color:new S,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new l};break;case "SpotLight":p={position:new a,direction:new a,color:new S,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new l};break;case "PointLight":p={position:new a,color:new S,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new l,shadowCameraNear:1,shadowCameraFar:1E3};break;case "HemisphereLight":p={direction:new a,skyColor:new S,groundColor:new S};
      break;case "RectAreaLight":p={color:new S,position:new a,halfWidth:new a,halfHeight:new a}}return b[h.id]=p}}}function jb(){var b=new qd,h={id:Yf++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},p=new a,d=new m,f=new m;return{setup:function(a,g,e){var k=0,m=0,l=0,n=0,r=0,q=0,u=0,v=0;e=e.matrixWorldInverse;for(var t=0,w=a.length;t<w;t++){var D=
      a[t],x=D.color,y=D.intensity,z=D.distance,P=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)k+=x.r*y,m+=x.g*y,l+=x.b*y;else if(D.isDirectionalLight){var F=b.get(D);F.color.copy(D.color).multiplyScalar(D.intensity);F.direction.setFromMatrixPosition(D.matrixWorld);p.setFromMatrixPosition(D.target.matrixWorld);F.direction.sub(p);F.direction.transformDirection(e);if(F.shadow=D.castShadow)x=D.shadow,F.shadowBias=x.bias,F.shadowRadius=x.radius,F.shadowMapSize=x.mapSize;h.directionalShadowMap[n]=
      P;h.directionalShadowMatrix[n]=D.shadow.matrix;h.directional[n]=F;n++}else if(D.isSpotLight){F=b.get(D);F.position.setFromMatrixPosition(D.matrixWorld);F.position.applyMatrix4(e);F.color.copy(x).multiplyScalar(y);F.distance=z;F.direction.setFromMatrixPosition(D.matrixWorld);p.setFromMatrixPosition(D.target.matrixWorld);F.direction.sub(p);F.direction.transformDirection(e);F.coneCos=Math.cos(D.angle);F.penumbraCos=Math.cos(D.angle*(1-D.penumbra));F.decay=0===D.distance?0:D.decay;if(F.shadow=D.castShadow)x=
      D.shadow,F.shadowBias=x.bias,F.shadowRadius=x.radius,F.shadowMapSize=x.mapSize;h.spotShadowMap[q]=P;h.spotShadowMatrix[q]=D.shadow.matrix;h.spot[q]=F;q++}else if(D.isRectAreaLight)F=b.get(D),F.color.copy(x).multiplyScalar(y),F.position.setFromMatrixPosition(D.matrixWorld),F.position.applyMatrix4(e),f.identity(),d.copy(D.matrixWorld),d.premultiply(e),f.extractRotation(d),F.halfWidth.set(.5*D.width,0,0),F.halfHeight.set(0,.5*D.height,0),F.halfWidth.applyMatrix4(f),F.halfHeight.applyMatrix4(f),h.rectArea[u]=
      F,u++;else if(D.isPointLight){F=b.get(D);F.position.setFromMatrixPosition(D.matrixWorld);F.position.applyMatrix4(e);F.color.copy(D.color).multiplyScalar(D.intensity);F.distance=D.distance;F.decay=0===D.distance?0:D.decay;if(F.shadow=D.castShadow)x=D.shadow,F.shadowBias=x.bias,F.shadowRadius=x.radius,F.shadowMapSize=x.mapSize,F.shadowCameraNear=x.camera.near,F.shadowCameraFar=x.camera.far;h.pointShadowMap[r]=P;h.pointShadowMatrix[r]=D.shadow.matrix;h.point[r]=F;r++}else D.isHemisphereLight&&(F=b.get(D),
      F.direction.setFromMatrixPosition(D.matrixWorld),F.direction.transformDirection(e),F.direction.normalize(),F.skyColor.copy(D.color).multiplyScalar(y),F.groundColor.copy(D.groundColor).multiplyScalar(y),h.hemi[v]=F,v++)}h.ambient[0]=k;h.ambient[1]=m;h.ambient[2]=l;h.directional.length=n;h.spot.length=q;h.rectArea.length=u;h.point.length=r;h.hemi.length=v;h.hash=h.id+","+n+","+r+","+q+","+u+","+v+","+g.length},state:h}}function Wa(){var b=new jb,h=[],p=[],a=[];return{init:function(){h.length=0;p.length=
      0;a.length=0},state:{lightsArray:h,shadowsArray:p,spritesArray:a,lights:b},setupLights:function(a){b.setup(h,p,a)},pushLight:function(b){h.push(b)},pushShadow:function(b){p.push(b)},pushSprite:function(b){a.push(b)}}}function Zf(){var b={};return{get:function(h,p){var a=h.id+","+p.id,d=b[a];void 0===d&&(d=new Wa,b[a]=d);return d},dispose:function(){b={}}}}function Cc(b){function h(){T=new Ya(U);T.get("WEBGL_depth_texture");T.get("OES_texture_float");T.get("OES_texture_float_linear");T.get("OES_texture_half_float");
    T.get("OES_texture_half_float_linear");T.get("OES_standard_derivatives");T.get("OES_element_index_uint");T.get("ANGLE_instanced_arrays");sb=new sf(U,T);ca=new ma(U,T,b);Q=new Pa(U,T,sb);Q.scissor(J.copy(Z).multiplyScalar(ea));Q.viewport(da.copy(ba).multiplyScalar(ea));Y=new F;Aa=new P(U,T,Q,Y,ca,sb,xa,ga);fa=new fc(U);Fa=new ce(U,fa,xa);Ka=new yc(Fa,ga);Na=new be(U);rb=new D(E,T,ca);va=new jd;Ba=new Zf;lb=new fd(E,Q,Fa,O);Vb=new Oa(U,T,ga);ia=new ld(U,T,ga);na=new Ia(E,U,Q,Aa,ca);E.info.programs=
      rb.programs;E.context=U;E.capabilities=ca;E.extensions=T;E.properties=Y;E.renderLists=va;E.state=Q}function p(b){b.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");H=!0}function d(){console.log("THREE.WebGLRenderer: Context Restored.");H=!1;h()}function g(b){b=b.target;b.removeEventListener("dispose",g);e(b);Y.remove(b)}function e(b){var h=Y.get(b).program;b.program=void 0;void 0!==h&&rb.releaseProgram(h)}function k(b,h,p){b.render(function(b){E.renderBufferImmediate(b,h,p)})}function l(){var b=
    Ua.getDevice();b&&b.isPresenting?b.requestAnimationFrame(n):window.requestAnimationFrame(n)}function n(b){!1!==sa&&(bc(b),l())}function r(b,h,p){if(!1!==b.visible){if(b.layers.test(h.layers))if(b.isLight)X.pushLight(b),b.castShadow&&X.pushShadow(b);else if(b.isSprite)b.frustumCulled&&!qd.intersectsSprite(b)||X.pushSprite(b);else if(b.isImmediateRenderObject)p&&ha.setFromMatrixPosition(b.matrixWorld).applyMatrix4(ta),I.push(b,null,b.material,ha.z,null);else if(b.isMesh||b.isLine||b.isPoints)if(b.isSkinnedMesh&&
  b.skeleton.update(),!b.frustumCulled||qd.intersectsObject(b)){p&&ha.setFromMatrixPosition(b.matrixWorld).applyMatrix4(ta);var a=Ka.update(b),d=b.material;if(Array.isArray(d))for(var M=a.groups,f=0,g=M.length;f<g;f++){var e=M[f],V=d[e.materialIndex];V&&V.visible&&I.push(b,a,V,ha.z,e)}else d.visible&&I.push(b,a,d,ha.z,null)}b=b.children;f=0;for(g=b.length;f<g;f++)r(b[f],h,p)}}function q(b,h,p,a){for(var d=0,f=b.length;d<f;d++){var M=b[d],g=M.object,e=M.geometry,V=void 0===a?M.material:a,M=M.group;if(p.isArrayCamera){S=
    p;for(var k=p.cameras,m=0,l=k.length;m<l;m++){var n=k[m];if(g.layers.test(n.layers)){var wa=n.bounds;Q.viewport(da.set(wa.x*ka,wa.y*Wa,wa.z*ka,wa.w*Wa).multiplyScalar(ea));u(g,h,n,e,V,M)}}}else S=null,u(g,h,p,e,V,M)}}function u(b,h,p,a,d,M){b.onBeforeRender(E,h,p,a,d,M);X=Ba.get(h,S||p);b.modelViewMatrix.multiplyMatrices(p.matrixWorldInverse,b.matrixWorld);b.normalMatrix.getNormalMatrix(b.modelViewMatrix);if(b.isImmediateRenderObject){var f=b.isMesh&&0>b.matrixWorld.determinant();Q.setMaterial(d,
    f);f=w(p,h.fog,d,b);W="";k(b,f,d)}else E.renderBufferDirect(p,h.fog,a,d,b,M);b.onAfterRender(E,h,p,a,d,M);X=Ba.get(h,S||p)}function t(b,h,p){var a=Y.get(b),d=X.state.lights;p=rb.getParameters(b,d.state,X.state.shadowsArray,h,aa.numPlanes,aa.numIntersection,p);var M=rb.getProgramCode(b,p),f=a.program,k=!0;if(void 0===f)b.addEventListener("dispose",g);else if(f.code!==M)e(b);else{if(a.lightsHash!==d.state.hash)Y.update(b,"lightsHash",d.state.hash);else if(void 0!==p.shaderID)return;k=!1}k&&(p.shaderID?
    (f=gc[p.shaderID],a.shader={name:b.type,uniforms:kb.clone(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}):a.shader={name:b.type,uniforms:b.uniforms,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader},b.onBeforeCompile(a.shader),f=rb.acquireProgram(b,a.shader,p,M),a.program=f,b.program=f);p=f.getAttributes();if(b.morphTargets)for(M=b.numSupportedMorphTargets=0;M<E.maxMorphTargets;M++)0<=p["morphTarget"+M]&&b.numSupportedMorphTargets++;if(b.morphNormals)for(M=b.numSupportedMorphNormals=
    0;M<E.maxMorphNormals;M++)0<=p["morphNormal"+M]&&b.numSupportedMorphNormals++;p=a.shader.uniforms;if(!b.isShaderMaterial&&!b.isRawShaderMaterial||!0===b.clipping)a.numClippingPlanes=aa.numPlanes,a.numIntersection=aa.numIntersection,p.clippingPlanes=aa.uniform;a.fog=h;a.lightsHash=d.state.hash;b.lights&&(p.ambientLightColor.value=d.state.ambient,p.directionalLights.value=d.state.directional,p.spotLights.value=d.state.spot,p.rectAreaLights.value=d.state.rectArea,p.pointLights.value=d.state.point,p.hemisphereLights.value=
    d.state.hemi,p.directionalShadowMap.value=d.state.directionalShadowMap,p.directionalShadowMatrix.value=d.state.directionalShadowMatrix,p.spotShadowMap.value=d.state.spotShadowMap,p.spotShadowMatrix.value=d.state.spotShadowMatrix,p.pointShadowMap.value=d.state.pointShadowMap,p.pointShadowMatrix.value=d.state.pointShadowMatrix);b=a.program.getUniforms();b=ua.seqWithValue(b.seq,p);a.uniformsList=b}function w(b,h,p,a){bb=0;var d=Y.get(p),M=X.state.lights;Ca&&(ya||b!==G)&&aa.setState(p.clippingPlanes,
    p.clipIntersection,p.clipShadows,b,d,b===G&&p.id===K);!1===p.needsUpdate&&(void 0===d.program?p.needsUpdate=!0:p.fog&&d.fog!==h?p.needsUpdate=!0:p.lights&&d.lightsHash!==M.state.hash?p.needsUpdate=!0:void 0===d.numClippingPlanes||d.numClippingPlanes===aa.numPlanes&&d.numIntersection===aa.numIntersection||(p.needsUpdate=!0));p.needsUpdate&&(t(p,h,a),p.needsUpdate=!1);var f=!1,g=!1,e=!1,M=d.program,V=M.getUniforms(),k=d.shader.uniforms;Q.useProgram(M.program)&&(e=g=f=!0,ga.programSwitch++);p.id!==K&&
  (K=p.id,g=!0);if(f||b!==G){V.setValue(U,"projectionMatrix",b.projectionMatrix);ca.logarithmicDepthBuffer&&V.setValue(U,"logDepthBufFC",2/(Math.log(b.far+1)/Math.LN2));G!==(S||b)&&(G=S||b,e=g=!0);if(p.isShaderMaterial||p.isMeshPhongMaterial||p.isMeshStandardMaterial||p.envMap)f=V.map.cameraPosition,void 0!==f&&f.setValue(U,ha.setFromMatrixPosition(b.matrixWorld));(p.isMeshPhongMaterial||p.isMeshLambertMaterial||p.isMeshBasicMaterial||p.isMeshStandardMaterial||p.isShaderMaterial||p.skinning)&&V.setValue(U,
    "viewMatrix",b.matrixWorldInverse)}if(p.skinning&&(V.setOptional(U,a,"bindMatrix"),V.setOptional(U,a,"bindMatrixInverse"),b=a.skeleton))if(f=b.bones,ca.floatVertexTextures){if(void 0===b.boneTexture){var f=Math.sqrt(4*f.length),f=qa.ceilPowerOfTwo(f),f=Math.max(f,4),m=new Float32Array(f*f*4);m.set(b.boneMatrices);var l=new v(m,f,f,1023,1015);l.needsUpdate=!0;b.boneMatrices=m;b.boneTexture=l;b.boneTextureSize=f}V.setValue(U,"boneTexture",b.boneTexture);V.setValue(U,"boneTextureSize",b.boneTextureSize)}else V.setOptional(U,
    b,"boneMatrices");g&&(V.setValue(U,"toneMappingExposure",E.toneMappingExposure),V.setValue(U,"toneMappingWhitePoint",E.toneMappingWhitePoint),p.lights&&(g=e,k.ambientLightColor.needsUpdate=g,k.directionalLights.needsUpdate=g,k.pointLights.needsUpdate=g,k.spotLights.needsUpdate=g,k.rectAreaLights.needsUpdate=g,k.hemisphereLights.needsUpdate=g),h&&p.fog&&(k.fogColor.value=h.color,h.isFog?(k.fogNear.value=h.near,k.fogFar.value=h.far):h.isFogExp2&&(k.fogDensity.value=h.density)),p.isMeshBasicMaterial?
    x(k,p):p.isMeshLambertMaterial?(x(k,p),p.emissiveMap&&(k.emissiveMap.value=p.emissiveMap)):p.isMeshPhongMaterial?(x(k,p),p.isMeshToonMaterial?(y(k,p),p.gradientMap&&(k.gradientMap.value=p.gradientMap)):y(k,p)):p.isMeshStandardMaterial?(x(k,p),p.isMeshPhysicalMaterial&&(k.clearCoat.value=p.clearCoat,k.clearCoatRoughness.value=p.clearCoatRoughness),k.roughness.value=p.roughness,k.metalness.value=p.metalness,p.roughnessMap&&(k.roughnessMap.value=p.roughnessMap),p.metalnessMap&&(k.metalnessMap.value=
      p.metalnessMap),p.emissiveMap&&(k.emissiveMap.value=p.emissiveMap),p.bumpMap&&(k.bumpMap.value=p.bumpMap,k.bumpScale.value=p.bumpScale),p.normalMap&&(k.normalMap.value=p.normalMap,k.normalScale.value.copy(p.normalScale)),p.displacementMap&&(k.displacementMap.value=p.displacementMap,k.displacementScale.value=p.displacementScale,k.displacementBias.value=p.displacementBias),p.envMap&&(k.envMapIntensity.value=p.envMapIntensity)):p.isMeshDepthMaterial?(x(k,p),p.displacementMap&&(k.displacementMap.value=
      p.displacementMap,k.displacementScale.value=p.displacementScale,k.displacementBias.value=p.displacementBias)):p.isMeshDistanceMaterial?(x(k,p),p.displacementMap&&(k.displacementMap.value=p.displacementMap,k.displacementScale.value=p.displacementScale,k.displacementBias.value=p.displacementBias),k.referencePosition.value.copy(p.referencePosition),k.nearDistance.value=p.nearDistance,k.farDistance.value=p.farDistance):p.isMeshNormalMaterial?(x(k,p),p.bumpMap&&(k.bumpMap.value=p.bumpMap,k.bumpScale.value=
      p.bumpScale),p.normalMap&&(k.normalMap.value=p.normalMap,k.normalScale.value.copy(p.normalScale)),p.displacementMap&&(k.displacementMap.value=p.displacementMap,k.displacementScale.value=p.displacementScale,k.displacementBias.value=p.displacementBias)):p.isLineBasicMaterial?(k.diffuse.value=p.color,k.opacity.value=p.opacity,p.isLineDashedMaterial&&(k.dashSize.value=p.dashSize,k.totalSize.value=p.dashSize+p.gapSize,k.scale.value=p.scale)):p.isPointsMaterial?(k.diffuse.value=p.color,k.opacity.value=
      p.opacity,k.size.value=p.size*ea,k.scale.value=.5*Wa,k.map.value=p.map,null!==p.map&&(!0===p.map.matrixAutoUpdate&&(h=p.map.offset,g=p.map.repeat,e=p.map.center,p.map.matrix.setUvTransform(h.x,h.y,g.x,g.y,p.map.rotation,e.x,e.y)),k.uvTransform.value.copy(p.map.matrix))):p.isShadowMaterial&&(k.color.value=p.color,k.opacity.value=p.opacity),void 0!==k.ltc_1&&(k.ltc_1.value=ja.LTC_1),void 0!==k.ltc_2&&(k.ltc_2.value=ja.LTC_2),ua.upload(U,d.uniformsList,k,E));p.isShaderMaterial&&!0===p.uniformsNeedUpdate&&
  (ua.upload(U,d.uniformsList,k,E),p.uniformsNeedUpdate=!1);V.setValue(U,"modelViewMatrix",a.modelViewMatrix);V.setValue(U,"normalMatrix",a.normalMatrix);V.setValue(U,"modelMatrix",a.matrixWorld);return M}function x(b,h){b.opacity.value=h.opacity;h.color&&(b.diffuse.value=h.color);h.emissive&&b.emissive.value.copy(h.emissive).multiplyScalar(h.emissiveIntensity);h.map&&(b.map.value=h.map);h.alphaMap&&(b.alphaMap.value=h.alphaMap);h.specularMap&&(b.specularMap.value=h.specularMap);h.envMap&&(b.envMap.value=
    h.envMap,b.flipEnvMap.value=h.envMap&&h.envMap.isCubeTexture?-1:1,b.reflectivity.value=h.reflectivity,b.refractionRatio.value=h.refractionRatio);h.lightMap&&(b.lightMap.value=h.lightMap,b.lightMapIntensity.value=h.lightMapIntensity);h.aoMap&&(b.aoMap.value=h.aoMap,b.aoMapIntensity.value=h.aoMapIntensity);var p;h.map?p=h.map:h.specularMap?p=h.specularMap:h.displacementMap?p=h.displacementMap:h.normalMap?p=h.normalMap:h.bumpMap?p=h.bumpMap:h.roughnessMap?p=h.roughnessMap:h.metalnessMap?p=h.metalnessMap:
    h.alphaMap?p=h.alphaMap:h.emissiveMap&&(p=h.emissiveMap);if(void 0!==p){p.isWebGLRenderTarget&&(p=p.texture);if(!0===p.matrixAutoUpdate){var a=p.offset,d=p.repeat,f=p.center;p.matrix.setUvTransform(a.x,a.y,d.x,d.y,p.rotation,f.x,f.y)}b.uvTransform.value.copy(p.matrix)}}function y(b,h){b.specular.value=h.specular;b.shininess.value=Math.max(h.shininess,1E-4);h.emissiveMap&&(b.emissiveMap.value=h.emissiveMap);h.bumpMap&&(b.bumpMap.value=h.bumpMap,b.bumpScale.value=h.bumpScale);h.normalMap&&(b.normalMap.value=
    h.normalMap,b.normalScale.value.copy(h.normalScale));h.displacementMap&&(b.displacementMap.value=h.displacementMap,b.displacementScale.value=h.displacementScale,b.displacementBias.value=h.displacementBias)}b=b||{};var z=void 0!==b.canvas?b.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),B=void 0!==b.context?b.context:null,N=void 0!==b.alpha?b.alpha:!1,A=void 0!==b.depth?b.depth:!0,C=void 0!==b.stencil?b.stencil:!0,ra=void 0!==b.antialias?b.antialias:!1,O=void 0!==b.premultipliedAlpha?
    b.premultipliedAlpha:!0,L=void 0!==b.preserveDrawingBuffer?b.preserveDrawingBuffer:!1,oa=void 0!==b.powerPreference?b.powerPreference:"default",I=null,X=null;this.domElement=z;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=
    8;this.maxMorphNormals=4;var E=this,H=!1,za=null,R=null,K=-1,W="",G=null,S=null,da=new f,J=new f,jb=null,bb=0,ka=z.width,Wa=z.height,ea=1,ba=new f(0,0,ka,Wa),Z=new f(0,0,ka,Wa),Cc=!1,qd=new pa,aa=new Xf,Ca=!1,ya=!1,ta=new m,ha=new a,xa={geometries:0,textures:0,vertices:0,faces:0,textureSz:0},ga={frame:0,calls:0,vertices:0,faces:0,points:0,programSwitch:0};this.info={render:ga,memory:xa,programs:null,autoReset:!0,reset:function(){ga.frame++;ga.calls=0;ga.vertices=0;ga.faces=0;ga.points=0;ga.programSwitch=
      0}};var U;try{N={alpha:N,depth:A,stencil:C,antialias:ra,premultipliedAlpha:O,preserveDrawingBuffer:L,powerPreference:oa};z.addEventListener("webglcontextlost",p,!1);z.addEventListener("webglcontextrestored",d,!1);U=B||z.getContext("webgl",N)||z.getContext("experimental-webgl",N);if(null===U){if(null!==z.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.");}void 0===U.getShaderPrecisionFormat&&(U.getShaderPrecisionFormat=
    function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Da){console.error("THREE.WebGLRenderer: "+Da.message)}var T,ca,Q,Y,Aa,fa,Fa,Ka,rb,va,Ba,lb,Na,Vb,ia,na,sb;h();var Ua=new rf(E);this.vr=Ua;var Ha=new gb(E,Ka,ca.maxTextureSize);this.shadowMap=Ha;this.getContext=function(){return U};this.getContextAttributes=function(){return U.getContextAttributes()};this.forceContextLoss=function(){var b=T.get("WEBGL_lose_context");b&&b.loseContext()};this.forceContextRestore=function(){var b=T.get("WEBGL_lose_context");
    b&&b.restoreContext()};this.getPixelRatio=function(){return ea};this.setPixelRatio=function(b){void 0!==b&&(ea=b,this.setSize(ka,Wa,!1))};this.getSize=function(){return{width:ka,height:Wa}};this.setSize=function(b,h,p){var a=Ua.getDevice();a&&a.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ka=b,Wa=h,z.width=b*ea,z.height=h*ea,!1!==p&&(z.style.width=b+"px",z.style.height=h+"px"),this.setViewport(0,0,b,h))};this.getDrawingBufferSize=function(){return{width:ka*
    ea,height:Wa*ea}};this.setDrawingBufferSize=function(b,h,p){ka=b;Wa=h;ea=p;z.width=b*p;z.height=h*p;this.setViewport(0,0,b,h)};this.getCurrentViewport=function(){return da};this.setViewport=function(b,h,p,a){ba.set(b,Wa-h-a,p,a);Q.viewport(da.copy(ba).multiplyScalar(ea))};this.setScissor=function(b,h,p,a){Z.set(b,Wa-h-a,p,a);Q.scissor(J.copy(Z).multiplyScalar(ea))};this.setScissorTest=function(b){Q.setScissorTest(Cc=b)};this.getClearColor=function(){return lb.getClearColor()};this.setClearColor=function(){lb.setClearColor.apply(lb,
    arguments)};this.getClearAlpha=function(){return lb.getClearAlpha()};this.setClearAlpha=function(){lb.setClearAlpha.apply(lb,arguments)};this.clear=function(b,h,p){var a=0;if(void 0===b||b)a|=U.COLOR_BUFFER_BIT;if(void 0===h||h)a|=U.DEPTH_BUFFER_BIT;if(void 0===p||p)a|=U.STENCIL_BUFFER_BIT;U.clear(a)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(b,h,p,a){this.setRenderTarget(b);
    this.clear(h,p,a)};this.dispose=function(){z.removeEventListener("webglcontextlost",p,!1);z.removeEventListener("webglcontextrestored",d,!1);va.dispose();Ba.dispose();Y.dispose();Ka.dispose();Ua.dispose();sa=!1};this.renderBufferImmediate=function(b,h,p){Q.initAttributes();var a=Y.get(b);b.hasPositions&&!a.position&&(a.position=U.createBuffer());b.hasNormals&&!a.normal&&(a.normal=U.createBuffer());b.hasUvs&&!a.uv&&(a.uv=U.createBuffer());b.hasColors&&!a.color&&(a.color=U.createBuffer());h=h.getAttributes();
    b.hasPositions&&(U.bindBuffer(U.ARRAY_BUFFER,a.position),U.bufferData(U.ARRAY_BUFFER,b.positionArray,U.DYNAMIC_DRAW),Q.enableAttribute(h.position),U.vertexAttribPointer(h.position,3,U.FLOAT,!1,0,0));if(b.hasNormals){U.bindBuffer(U.ARRAY_BUFFER,a.normal);if(!p.isMeshPhongMaterial&&!p.isMeshStandardMaterial&&!p.isMeshNormalMaterial&&!0===p.flatShading)for(var d=0,f=3*b.count;d<f;d+=9){var M=b.normalArray,g=(M[d+0]+M[d+3]+M[d+6])/3,e=(M[d+1]+M[d+4]+M[d+7])/3,V=(M[d+2]+M[d+5]+M[d+8])/3;M[d+0]=g;M[d+1]=
      e;M[d+2]=V;M[d+3]=g;M[d+4]=e;M[d+5]=V;M[d+6]=g;M[d+7]=e;M[d+8]=V}U.bufferData(U.ARRAY_BUFFER,b.normalArray,U.DYNAMIC_DRAW);Q.enableAttribute(h.normal);U.vertexAttribPointer(h.normal,3,U.FLOAT,!1,0,0)}b.hasUvs&&p.map&&(U.bindBuffer(U.ARRAY_BUFFER,a.uv),U.bufferData(U.ARRAY_BUFFER,b.uvArray,U.DYNAMIC_DRAW),Q.enableAttribute(h.uv),U.vertexAttribPointer(h.uv,2,U.FLOAT,!1,0,0));b.hasColors&&0!==p.vertexColors&&(U.bindBuffer(U.ARRAY_BUFFER,a.color),U.bufferData(U.ARRAY_BUFFER,b.colorArray,U.DYNAMIC_DRAW),
      Q.enableAttribute(h.color),U.vertexAttribPointer(h.color,3,U.FLOAT,!1,0,0));Q.disableUnusedAttributes();U.drawArrays(U.TRIANGLES,0,b.count);b.count=0};this.renderBufferDirect=function(b,h,p,a,d,M){var f=d.isMesh&&0>d.matrixWorld.determinant();Q.setMaterial(a,f);var g=w(b,h,a,d);b=p.id+"_"+g.id+"_"+(!0===a.wireframe);var e=!1;b!==W&&(W=b,e=!0);d.morphTargetInfluences&&(Na.update(d,p,a,g),e=!0);var f=p.index,V=p.attributes.position;h=1;!0===a.wireframe&&(f=Fa.getWireframeAttribute(p),h=2);var k;b=Vb;
    null!==f&&(k=fa.get(f),b=ia,b.setIndex(k));if(e){e=void 0;if(p&&p.isInstancedBufferGeometry&&null===T.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===e&&(e=0);Q.initAttributes();var m=p.attributes,g=g.getAttributes(),l=a.defaultAttributeValues,n;for(n in g){var wa=g[n];if(0<=wa){var r=m[n];if(void 0!==r){var Ea=r.normalized,q=r.itemSize,Ja=fa.get(r);
      if(void 0!==Ja){var u=Ja.buffer,xb=Ja.type,Ja=Ja.bytesPerElement;if(r.isInterleavedBufferAttribute){var v=r.data,t=v.stride,r=r.offset;v&&v.isInstancedInterleavedBuffer?(Q.enableAttributeAndDivisor(wa,v.meshPerAttribute),void 0===p.maxInstancedCount&&(p.maxInstancedCount=v.meshPerAttribute*v.count)):Q.enableAttribute(wa);U.bindBuffer(U.ARRAY_BUFFER,u);U.vertexAttribPointer(wa,q,xb,Ea,t*Ja,(e*t+r)*Ja)}else r.isInstancedBufferAttribute?(Q.enableAttributeAndDivisor(wa,r.meshPerAttribute),void 0===p.maxInstancedCount&&
      (p.maxInstancedCount=r.meshPerAttribute*r.count)):Q.enableAttribute(wa),U.bindBuffer(U.ARRAY_BUFFER,u),U.vertexAttribPointer(wa,q,xb,Ea,0,e*q*Ja)}}else if(void 0!==l&&(Ea=l[n],void 0!==Ea))switch(Ea.length){case 2:U.vertexAttrib2fv(wa,Ea);break;case 3:U.vertexAttrib3fv(wa,Ea);break;case 4:U.vertexAttrib4fv(wa,Ea);break;default:U.vertexAttrib1fv(wa,Ea)}}}Q.disableUnusedAttributes()}null!==f&&U.bindBuffer(U.ELEMENT_ARRAY_BUFFER,k.buffer)}k=Infinity;null!==f?k=f.count:void 0!==V&&(k=V.count);n=p.drawRange.start*
      h;f=p.drawRange.count*h;V=null!==M?M.start*h:0;h=null!==M?M.count*h:Infinity;M=Math.max(n,V);h=Math.min(k,n+f,V+h)-1;h=Math.max(0,h-M+1);if(0!==h){if(d.isMesh)if(!0===a.wireframe)Q.setLineWidth(a.wireframeLinewidth*(null===za?ea:1)),b.setMode(U.LINES);else switch(d.drawMode){case 0:b.setMode(U.TRIANGLES);break;case 1:b.setMode(U.TRIANGLE_STRIP);break;case 2:b.setMode(U.TRIANGLE_FAN)}else d.isLine?(a=a.linewidth,void 0===a&&(a=1),Q.setLineWidth(a*(null===za?ea:1)),d.isLineSegments?b.setMode(U.LINES):
      d.isLineLoop?b.setMode(U.LINE_LOOP):b.setMode(U.LINE_STRIP)):d.isPoints&&b.setMode(U.POINTS);p&&p.isInstancedBufferGeometry?0<p.maxInstancedCount&&b.renderInstances(p,M,h):b.render(M,h)}};this.compile=function(b,h){X=Ba.get(b,h);X.init();b.traverse(function(b){b.isLight&&(X.pushLight(b),b.castShadow&&X.pushShadow(b))});X.setupLights(h);b.traverse(function(h){if(h.material)if(Array.isArray(h.material))for(var p=0;p<h.material.length;p++)t(h.material[p],b.fog,h);else t(h.material,b.fog,h)})};var sa=
    !1,bc=null;this.animate=function(b){bc=b;null!==bc?sa||(l(),sa=!0):sa=!1};this.render=function(b,h,p,a){if(!h||!h.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!H){W="";K=-1;G=null;!0===b.autoUpdate&&b.updateMatrixWorld();null===h.parent&&h.updateMatrixWorld();Ua.enabled&&(h=Ua.getCamera(h));X=Ba.get(b,h);X.init();b.onBeforeRender(E,b,h,p);ta.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse);qd.setFromMatrix(ta);ya=this.localClippingEnabled;
    Ca=aa.init(this.clippingPlanes,ya,h);I=va.get(b,h);I.init();r(b,h,E.sortObjects);!0===E.sortObjects&&I.sort();Ca&&aa.beginShadows();Ha.render(X.state.shadowsArray,b,h);X.setupLights(h);Ca&&aa.endShadows();this.info.autoReset&&this.info.reset();void 0===p&&(p=null);this.setRenderTarget(p);lb.render(I,b,h,a);a=I.opaque;var d=I.transparent;if(b.overrideMaterial){var M=b.overrideMaterial;a.length&&q(a,b,h,M);d.length&&q(d,b,h,M)}else a.length&&q(a,b,h),d.length&&q(d,b,h);na.render(X.state.spritesArray,
      b,h);p&&Aa.updateRenderTargetMipmap(p);Q.buffers.depth.setTest(!0);Q.buffers.depth.setMask(!0);Q.buffers.color.setMask(!0);Q.setPolygonOffset(!1);b.onAfterRender(E,b,h);Ua.enabled&&Ua.submitFrame();X=I=null}};this.allocTextureUnit=function(){var b=bb;b>=ca.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+b+" texture units while this GPU supports only "+ca.maxTextures);bb+=1;return b};this.setTexture2D=function(){var b=!1;return function(h,p){h&&h.isWebGLRenderTarget&&(b||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),
    b=!0),h=h.texture);Aa.setTexture2D(h,p)}}();this.setTexture=function(){var b=!1;return function(h,p){b||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),b=!0);Aa.setTexture2D(h,p)}}();this.setTextureCube=function(){var b=!1;return function(h,p){h&&h.isWebGLRenderTargetCube&&(b||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),b=!0),h=h.texture);h&&h.isCubeTexture||Array.isArray(h.image)&&
  6===h.image.length?Aa.setTextureCube(h,p):Aa.setTextureCubeDynamic(h,p)}}();this.getRenderTarget=function(){return za};this.setRenderTarget=function(b){(za=b)&&void 0===Y.get(b).__webglFramebuffer&&Aa.setupRenderTarget(b);var h=null,p=!1;b?(h=Y.get(b).__webglFramebuffer,b.isWebGLRenderTargetCube&&(h=h[b.activeCubeFace],p=!0),da.copy(b.viewport),J.copy(b.scissor),jb=b.scissorTest):(da.copy(ba).multiplyScalar(ea),J.copy(Z).multiplyScalar(ea),jb=Cc);R!==h&&(U.bindFramebuffer(U.FRAMEBUFFER,h),R=h);Q.viewport(da);
    Q.scissor(J);Q.setScissorTest(jb);p&&(p=Y.get(b.texture),U.framebufferTexture2D(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,U.TEXTURE_CUBE_MAP_POSITIVE_X+b.activeCubeFace,p.__webglTexture,b.activeMipMapLevel))};this.readRenderTargetPixels=function(b,h,p,a,d,M){if(b&&b.isWebGLRenderTarget){var f=Y.get(b).__webglFramebuffer;if(f){var g=!1;f!==R&&(U.bindFramebuffer(U.FRAMEBUFFER,f),g=!0);try{var e=b.texture,V=e.format,k=e.type;1023!==V&&sb.convert(V)!==U.getParameter(U.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):
    1009===k||sb.convert(k)===U.getParameter(U.IMPLEMENTATION_COLOR_READ_TYPE)||1015===k&&(T.get("OES_texture_float")||T.get("WEBGL_color_buffer_float"))||1016===k&&T.get("EXT_color_buffer_half_float")?U.checkFramebufferStatus(U.FRAMEBUFFER)===U.FRAMEBUFFER_COMPLETE?0<=h&&h<=b.width-a&&0<=p&&p<=b.height-d&&U.readPixels(h,p,a,d,sb.convert(V),sb.convert(k),M):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{g&&
  U.bindFramebuffer(U.FRAMEBUFFER,R)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};this.copyFramebufferToTexture=function(b,h,p){var a=h.image.width,d=h.image.height,M=sb.convert(h.format);this.setTexture2D(h,0);U.copyTexImage2D(U.TEXTURE_2D,p||0,M,b.x,b.y,a,d,0)}}function Vb(b,h){this.name="";this.color=new S(b);this.density=void 0!==h?h:2.5E-4}function rb(b,h,p){this.name="";this.color=new S(b);this.near=void 0!==h?h:1;this.far=void 0!==
  p?p:1E3}function bc(){aa.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function cc(b){ba.call(this);this.type="SpriteMaterial";this.color=new S(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(b)}function rd(b){aa.call(this);this.type="Sprite";this.material=void 0!==b?b:new cc;this.center=new l(.5,.5)}function sd(){aa.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function lb(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             h){b=b||[];this.bones=b.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===h)this.calculateInverses();else if(this.bones.length===h.length)this.boneInverses=h.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length.");this.boneInverses=[];for(var p=0,a=this.bones.length;p<a;p++)this.boneInverses.push(new m)}}function sb(){aa.call(this);this.type="Bone"}function ee(b,h){cb.call(this,b,h);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=
    new m;this.bindMatrixInverse=new m;var p=this.initBones(),p=new lb(p);this.bind(p,this.matrixWorld);this.normalizeSkinWeights()}function Ha(b){ba.call(this);this.type="LineBasicMaterial";this.color=new S(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(b)}function mb(b,h,p){if(1===p)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Qa(b,h);aa.call(this);this.type="Line";this.geometry=
    void 0!==b?b:new N;this.material=void 0!==h?h:new Ha({color:16777215*Math.random()})}function Qa(b,h){mb.call(this,b,h);this.type="LineSegments"}function fe(b,h){mb.call(this,b,h);this.type="LineLoop"}function Db(b){ba.call(this);this.type="PointsMaterial";this.color=new S(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(b)}function Dc(b,h){aa.call(this);this.type="Points";this.geometry=void 0!==b?b:new N;this.material=void 0!==h?h:new Db({color:16777215*Math.random()})}
    function ge(){aa.call(this);this.type="Group"}function Ee(b,h,p,a,d,f,g,e,k){r.call(this,b,h,p,a,d,f,g,e,k);this.generateMipmaps=!1}function Ec(b,h,p,a,d,f,g,e,k,m,l,n){r.call(this,null,f,g,e,k,m,a,d,l,n);this.image={width:h,height:p};this.mipmaps=b;this.generateMipmaps=this.flipY=!1}function td(b,h,p,a,d,f,g,e,k,m){m=void 0!==m?m:1026;if(1026!==m&&1027!==m)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===p&&1026===m&&(p=1012);void 0===p&&1027===
    m&&(p=1020);r.call(this,null,a,d,f,g,e,m,p,k);this.image={width:b,height:h};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==e?e:1003;this.generateMipmaps=this.flipY=!1}function Fc(b){N.call(this);this.type="WireframeGeometry";var h=[],p,d,f,g,e=[0,0],k={},m,l,n=["a","b","c"];if(b&&b.isGeometry){var r=b.faces;p=0;for(f=r.length;p<f;p++){var q=r[p];for(d=0;3>d;d++)m=q[n[d]],l=q[n[(d+1)%3]],e[0]=Math.min(m,l),e[1]=Math.max(m,l),m=e[0]+","+e[1],void 0===k[m]&&(k[m]={index1:e[0],index2:e[1]})}for(m in k)p=
      k[m],n=b.vertices[p.index1],h.push(n.x,n.y,n.z),n=b.vertices[p.index2],h.push(n.x,n.y,n.z)}else if(b&&b.isBufferGeometry){var u,n=new a;if(null!==b.index){r=b.attributes.position;q=b.index;u=b.groups;0===u.length&&(u=[{start:0,count:q.count,materialIndex:0}]);b=0;for(g=u.length;b<g;++b)for(p=u[b],d=p.start,f=p.count,p=d,f=d+f;p<f;p+=3)for(d=0;3>d;d++)m=q.getX(p+d),l=q.getX(p+(d+1)%3),e[0]=Math.min(m,l),e[1]=Math.max(m,l),m=e[0]+","+e[1],void 0===k[m]&&(k[m]={index1:e[0],index2:e[1]});for(m in k)p=
      k[m],n.fromBufferAttribute(r,p.index1),h.push(n.x,n.y,n.z),n.fromBufferAttribute(r,p.index2),h.push(n.x,n.y,n.z)}else for(r=b.attributes.position,p=0,f=r.count/3;p<f;p++)for(d=0;3>d;d++)k=3*p+d,n.fromBufferAttribute(r,k),h.push(n.x,n.y,n.z),k=3*p+(d+1)%3,n.fromBufferAttribute(r,k),h.push(n.x,n.y,n.z)}this.addAttribute("position",new Y(h,3))}function ud(b,h,p){fa.call(this);this.type="ParametricGeometry";this.parameters={func:b,slices:h,stacks:p};this.fromBufferGeometry(new Gc(b,h,p));this.mergeVertices()}
    function Gc(b,h,p){N.call(this);this.type="ParametricBufferGeometry";this.parameters={func:b,slices:h,stacks:p};var d=[],f=[],g=[],e=[],k=new a,m=new a,l=new a,n=new a,r=new a,q,u,v=h+1;for(q=0;q<=p;q++){var t=q/p;for(u=0;u<=h;u++){var w=u/h,m=b(w,t,m);f.push(m.x,m.y,m.z);0<=w-1E-5?(l=b(w-1E-5,t,l),n.subVectors(m,l)):(l=b(w+1E-5,t,l),n.subVectors(l,m));0<=t-1E-5?(l=b(w,t-1E-5,l),r.subVectors(m,l)):(l=b(w,t+1E-5,l),r.subVectors(l,m));k.crossVectors(n,r).normalize();g.push(k.x,k.y,k.z);e.push(w,t)}}for(q=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                0;q<p;q++)for(u=0;u<h;u++)b=q*v+u+1,k=(q+1)*v+u+1,m=(q+1)*v+u,d.push(q*v+u,b,m),d.push(b,k,m);this.setIndex(d);this.addAttribute("position",new Y(f,3));this.addAttribute("normal",new Y(g,3));this.addAttribute("uv",new Y(e,2))}function vd(b,h,p,a){fa.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:b,indices:h,radius:p,detail:a};this.fromBufferGeometry(new nb(b,h,p,a));this.mergeVertices()}function nb(b,h,p,d){function f(b){k.push(b.x,b.y,b.z)}function g(h,p){var a=3*h;p.x=b[a+0];
      p.y=b[a+1];p.z=b[a+2]}function e(b,h,p,a){0>a&&1===b.x&&(m[h]=b.x-1);0===p.x&&0===p.z&&(m[h]=a/2/Math.PI+.5)}N.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:b,indices:h,radius:p,detail:d};p=p||1;d=d||0;var k=[],m=[];(function(b){for(var p=new a,d=new a,M=new a,e=0;e<h.length;e+=3){g(h[e+0],p);g(h[e+1],d);g(h[e+2],M);for(var k=p,m=d,l=M,n=Math.pow(2,b),r=[],q=void 0,Ea=void 0,q=0;q<=n;q++){r[q]=[];for(var u=k.clone().lerp(l,q/n),v=m.clone().lerp(l,q/n),Ja=n-q,Ea=0;Ea<=Ja;Ea++)r[q][Ea]=
      0===Ea&&q===n?u:u.clone().lerp(v,Ea/Ja)}for(q=0;q<n;q++)for(Ea=0;Ea<2*(n-q)-1;Ea++)k=Math.floor(Ea/2),0===Ea%2?(f(r[q][k+1]),f(r[q+1][k]),f(r[q][k])):(f(r[q][k+1]),f(r[q+1][k+1]),f(r[q+1][k]))}})(d);(function(b){for(var h=new a,p=0;p<k.length;p+=3)h.x=k[p+0],h.y=k[p+1],h.z=k[p+2],h.normalize().multiplyScalar(b),k[p+0]=h.x,k[p+1]=h.y,k[p+2]=h.z})(p);(function(){for(var b=new a,h=0;h<k.length;h+=3){b.x=k[h+0];b.y=k[h+1];b.z=k[h+2];var p=Math.atan2(b.z,-b.x)/2/Math.PI+.5,d=Math.atan2(-b.y,Math.sqrt(b.x*
      b.x+b.z*b.z))/Math.PI+.5;m.push(p,1-d)}for(var b=new a,h=new a,p=new a,d=new a,f=new l,M=new l,g=new l,V=0,n=0;V<k.length;V+=9,n+=6){b.set(k[V+0],k[V+1],k[V+2]);h.set(k[V+3],k[V+4],k[V+5]);p.set(k[V+6],k[V+7],k[V+8]);f.set(m[n+0],m[n+1]);M.set(m[n+2],m[n+3]);g.set(m[n+4],m[n+5]);d.copy(b).add(h).add(p).divideScalar(3);var wa=Math.atan2(d.z,-d.x);e(f,n+0,b,wa);e(M,n+2,h,wa);e(g,n+4,p,wa)}for(b=0;b<m.length;b+=6)h=m[b+0],p=m[b+2],d=m[b+4],f=Math.max(h,p,d),M=Math.min(h,p,d),.9<f&&.1>M&&(.2>h&&(m[b+
    0]+=1),.2>p&&(m[b+2]+=1),.2>d&&(m[b+4]+=1))})();this.addAttribute("position",new Y(k,3));this.addAttribute("normal",new Y(k.slice(),3));this.addAttribute("uv",new Y(m,2));0===d?this.computeVertexNormals():this.normalizeNormals()}function wd(b,h){fa.call(this);this.type="TetrahedronGeometry";this.parameters={radius:b,detail:h};this.fromBufferGeometry(new Hc(b,h));this.mergeVertices()}function Hc(b,h){nb.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],b,h);this.type="TetrahedronBufferGeometry";
      this.parameters={radius:b,detail:h}}function xd(b,h){fa.call(this);this.type="OctahedronGeometry";this.parameters={radius:b,detail:h};this.fromBufferGeometry(new ic(b,h));this.mergeVertices()}function ic(b,h){nb.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],b,h);this.type="OctahedronBufferGeometry";this.parameters={radius:b,detail:h}}function yd(b,h){fa.call(this);this.type="IcosahedronGeometry";this.parameters={radius:b,detail:h};this.fromBufferGeometry(new Ic(b,
      h));this.mergeVertices()}function Ic(b,h){var p=(1+Math.sqrt(5))/2;nb.call(this,[-1,p,0,1,p,0,-1,-p,0,1,-p,0,0,-1,p,0,1,p,0,-1,-p,0,1,-p,p,0,-1,p,0,1,-p,0,-1,-p,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],b,h);this.type="IcosahedronBufferGeometry";this.parameters={radius:b,detail:h}}function zd(b,h){fa.call(this);this.type="DodecahedronGeometry";this.parameters={radius:b,detail:h};this.fromBufferGeometry(new Jc(b,
      h));this.mergeVertices()}function Jc(b,h){var p=(1+Math.sqrt(5))/2,a=1/p;nb.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-p,0,-a,p,0,a,-p,0,a,p,-a,-p,0,-a,p,0,a,-p,0,a,p,0,-p,0,-a,p,0,-a,-p,0,a,p,0,a],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],b,
      h);this.type="DodecahedronBufferGeometry";this.parameters={radius:b,detail:h}}function Ad(b,h,p,a,d,f){fa.call(this);this.type="TubeGeometry";this.parameters={path:b,tubularSegments:h,radius:p,radialSegments:a,closed:d};void 0!==f&&console.warn("THREE.TubeGeometry: taper has been removed.");b=new Kc(b,h,p,a,d);this.tangents=b.tangents;this.normals=b.normals;this.binormals=b.binormals;this.fromBufferGeometry(b);this.mergeVertices()}function Kc(b,h,p,d,f){function g(a){r=b.getPointAt(a/h,r);var f=e.normals[a];
      a=e.binormals[a];for(u=0;u<=d;u++){var V=u/d*Math.PI*2,n=Math.sin(V),V=-Math.cos(V);m.x=V*f.x+n*a.x;m.y=V*f.y+n*a.y;m.z=V*f.z+n*a.z;m.normalize();t.push(m.x,m.y,m.z);k.x=r.x+p*m.x;k.y=r.y+p*m.y;k.z=r.z+p*m.z;v.push(k.x,k.y,k.z)}}N.call(this);this.type="TubeBufferGeometry";this.parameters={path:b,tubularSegments:h,radius:p,radialSegments:d,closed:f};h=h||64;p=p||1;d=d||8;f=f||!1;var e=b.computeFrenetFrames(h,f);this.tangents=e.tangents;this.normals=e.normals;this.binormals=e.binormals;var k=new a,
      m=new a,n=new l,r=new a,q,u,v=[],t=[],w=[],D=[];for(q=0;q<h;q++)g(q);g(!1===f?h:0);for(q=0;q<=h;q++)for(u=0;u<=d;u++)n.x=q/h,n.y=u/d,w.push(n.x,n.y);(function(){for(u=1;u<=h;u++)for(q=1;q<=d;q++){var b=(d+1)*u+(q-1),p=(d+1)*u+q,a=(d+1)*(u-1)+q;D.push((d+1)*(u-1)+(q-1),b,a);D.push(b,p,a)}})();this.setIndex(D);this.addAttribute("position",new Y(v,3));this.addAttribute("normal",new Y(t,3));this.addAttribute("uv",new Y(w,2))}function Bd(b,h,p,a,d,f,g){fa.call(this);this.type="TorusKnotGeometry";this.parameters=
      {radius:b,tube:h,tubularSegments:p,radialSegments:a,p:d,q:f};void 0!==g&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new Lc(b,h,p,a,d,f));this.mergeVertices()}function Lc(b,h,p,d,f,g){function e(b,h,p,a,d){var f=Math.cos(b),M=Math.sin(b);b*=p/h;h=Math.cos(b);d.x=a*(2+h)*.5*f;d.y=a*(2+h)*M*.5;d.z=a*Math.sin(b)*.5}N.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:b,tube:h,tubularSegments:p,radialSegments:d,
      p:f,q:g};b=b||1;h=h||.4;p=Math.floor(p)||64;d=Math.floor(d)||8;f=f||2;g=g||3;var k=[],m=[],n=[],l=[],r,q,u=new a,v=new a,t=new a,w=new a,D=new a,x=new a,y=new a;for(r=0;r<=p;++r)for(q=r/p*f*Math.PI*2,e(q,f,g,b,t),e(q+.01,f,g,b,w),x.subVectors(w,t),y.addVectors(w,t),D.crossVectors(x,y),y.crossVectors(D,x),D.normalize(),y.normalize(),q=0;q<=d;++q){var F=q/d*Math.PI*2,z=-h*Math.cos(F),F=h*Math.sin(F);u.x=t.x+(z*y.x+F*D.x);u.y=t.y+(z*y.y+F*D.y);u.z=t.z+(z*y.z+F*D.z);m.push(u.x,u.y,u.z);v.subVectors(u,
      t).normalize();n.push(v.x,v.y,v.z);l.push(r/p);l.push(q/d)}for(q=1;q<=p;q++)for(r=1;r<=d;r++)b=(d+1)*q+(r-1),h=(d+1)*q+r,f=(d+1)*(q-1)+r,k.push((d+1)*(q-1)+(r-1),b,f),k.push(b,h,f);this.setIndex(k);this.addAttribute("position",new Y(m,3));this.addAttribute("normal",new Y(n,3));this.addAttribute("uv",new Y(l,2))}function Cd(b,h,p,a,d){fa.call(this);this.type="TorusGeometry";this.parameters={radius:b,tube:h,radialSegments:p,tubularSegments:a,arc:d};this.fromBufferGeometry(new Mc(b,h,p,a,d));this.mergeVertices()}
    function Mc(b,h,p,d,f){N.call(this);this.type="TorusBufferGeometry";this.parameters={radius:b,tube:h,radialSegments:p,tubularSegments:d,arc:f};b=b||1;h=h||.4;p=Math.floor(p)||8;d=Math.floor(d)||6;f=f||2*Math.PI;var g=[],e=[],k=[],m=[],n=new a,l=new a,r=new a,q,u;for(q=0;q<=p;q++)for(u=0;u<=d;u++){var v=u/d*f,t=q/p*Math.PI*2;l.x=(b+h*Math.cos(t))*Math.cos(v);l.y=(b+h*Math.cos(t))*Math.sin(v);l.z=h*Math.sin(t);e.push(l.x,l.y,l.z);n.x=b*Math.cos(v);n.y=b*Math.sin(v);r.subVectors(l,n).normalize();k.push(r.x,
      r.y,r.z);m.push(u/d);m.push(q/p)}for(q=1;q<=p;q++)for(u=1;u<=d;u++)b=(d+1)*(q-1)+u-1,h=(d+1)*(q-1)+u,f=(d+1)*q+u,g.push((d+1)*q+u-1,b,f),g.push(b,h,f);this.setIndex(g);this.addAttribute("position",new Y(e,3));this.addAttribute("normal",new Y(k,3));this.addAttribute("uv",new Y(m,2))}function tf(b,h,p,a,d){for(var f,g=0,e=h,k=p-a;e<p;e+=a)g+=(b[k]-b[e])*(b[e+1]+b[k+1]),k=e;if(d===0<g)for(d=h;d<p;d+=a)f=uf(d,b[d],b[d+1],f);else for(d=p-a;d>=h;d-=a)f=uf(d,b[d],b[d+1],f);f&&jc(f,f.next)&&(Dd(f),f=f.next);
      return f}function Ed(b,h){if(!b)return b;h||(h=b);var p=b,a;do if(a=!1,p.steiner||!jc(p,p.next)&&0!==hb(p.prev,p,p.next))p=p.next;else{Dd(p);p=h=p.prev;if(p===p.next)break;a=!0}while(a||p!==h);return h}function Fd(b,h,p,a,d,f,g){if(b){if(!g&&f){var e=b,k=e;do null===k.z&&(k.z=Fe(k.x,k.y,a,d,f)),k.prevZ=k.prev,k=k.nextZ=k.next;while(k!==e);k.prevZ.nextZ=null;k.prevZ=null;var e=k,m,n,l,r,q,u,v=1;do{k=e;l=e=null;for(r=0;k;){r++;n=k;for(m=q=0;m<v&&(q++,n=n.nextZ,n);m++);for(u=v;0<q||0<u&&n;)0!==q&&(0===
      u||!n||k.z<=n.z)?(m=k,k=k.nextZ,q--):(m=n,n=n.nextZ,u--),l?l.nextZ=m:e=m,m.prevZ=l,l=m;k=n}l.nextZ=null;v*=2}while(1<r)}for(e=b;b.prev!==b.next;){k=b.prev;n=b.next;if(f)a:{l=b;u=a;var t=d,w=f;r=l.prev;q=l;v=l.next;if(0<=hb(r,q,v))l=!1;else{var D=r.x>q.x?r.x>v.x?r.x:v.x:q.x>v.x?q.x:v.x,x=r.y>q.y?r.y>v.y?r.y:v.y:q.y>v.y?q.y:v.y;m=Fe(r.x<q.x?r.x<v.x?r.x:v.x:q.x<v.x?q.x:v.x,r.y<q.y?r.y<v.y?r.y:v.y:q.y<v.y?q.y:v.y,u,t,w);u=Fe(D,x,u,t,w);for(t=l.nextZ;t&&t.z<=u;){if(t!==l.prev&&t!==l.next&&he(r.x,r.y,q.x,
      q.y,v.x,v.y,t.x,t.y)&&0<=hb(t.prev,t,t.next)){l=!1;break a}t=t.nextZ}for(t=l.prevZ;t&&t.z>=m;){if(t!==l.prev&&t!==l.next&&he(r.x,r.y,q.x,q.y,v.x,v.y,t.x,t.y)&&0<=hb(t.prev,t,t.next)){l=!1;break a}t=t.prevZ}l=!0}}else a:if(l=b,r=l.prev,q=l,v=l.next,0<=hb(r,q,v))l=!1;else{for(m=l.next.next;m!==l.prev;){if(he(r.x,r.y,q.x,q.y,v.x,v.y,m.x,m.y)&&0<=hb(m.prev,m,m.next)){l=!1;break a}m=m.next}l=!0}if(l)h.push(k.i/p),h.push(b.i/p),h.push(n.i/p),Dd(b),e=b=n.next;else if(b=n,b===e){if(!g)Fd(Ed(b),h,p,a,d,f,
      1);else if(1===g){g=h;e=p;k=b;do n=k.prev,l=k.next.next,!jc(n,l)&&vf(n,k,k.next,l)&&Gd(n,l)&&Gd(l,n)&&(g.push(n.i/e),g.push(k.i/e),g.push(l.i/e),Dd(k),Dd(k.next),k=b=l),k=k.next;while(k!==b);b=k;Fd(b,h,p,a,d,f,2)}else if(2===g)a:{g=b;do{for(e=g.next.next;e!==g.prev;){if(k=g.i!==e.i){k=g;n=e;l=void 0;if(l=k.next.i!==n.i&&k.prev.i!==n.i){l=void 0;b:{l=k;do{if(l.i!==k.i&&l.next.i!==k.i&&l.i!==n.i&&l.next.i!==n.i&&vf(l,l.next,k,n)){l=!0;break b}l=l.next}while(l!==k);l=!1}l=!l}r=void 0;if(r=l&&Gd(k,n)&&
      Gd(n,k)){l=k;r=!1;q=(k.x+n.x)/2;n=(k.y+n.y)/2;do l.y>n!==l.next.y>n&&l.next.y!==l.y&&q<(l.next.x-l.x)*(n-l.y)/(l.next.y-l.y)+l.x&&(r=!r),l=l.next;while(l!==k)}k=r}if(k){b=wf(g,e);g=Ed(g,g.next);b=Ed(b,b.next);Fd(g,h,p,a,d,f);Fd(b,h,p,a,d,f);break a}e=e.next}g=g.next}while(g!==b)}break}}}}function $f(b,h){return b.x-h.x}function ag(b,h){var p=h,a=b.x,d=b.y,f=-Infinity,g;do{if(d<=p.y&&d>=p.next.y&&p.next.y!==p.y){var e=p.x+(d-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(e<=a&&e>f){f=e;if(e===a){if(d===p.y)return p;
      if(d===p.next.y)return p.next}g=p.x<p.next.x?p:p.next}}p=p.next}while(p!==h);if(!g)return null;if(a===f)return g.prev;for(var e=g,k=g.x,m=g.y,l=Infinity,n,p=g.next;p!==e;)a>=p.x&&p.x>=k&&a!==p.x&&he(d<m?a:f,d,k,m,d<m?f:a,d,p.x,p.y)&&(n=Math.abs(d-p.y)/(a-p.x),(n<l||n===l&&p.x>g.x)&&Gd(p,b)&&(g=p,l=n)),p=p.next;return g}function Fe(b,h,p,a,d){b=32767*(b-p)*d;h=32767*(h-a)*d;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;h=(h|h<<8)&16711935;h=(h|h<<4)&252645135;h=(h|h<<2)&858993459;return(b|
      b<<1)&1431655765|((h|h<<1)&1431655765)<<1}function bg(b){var h=b,p=b;do h.x<p.x&&(p=h),h=h.next;while(h!==b);return p}function he(b,h,p,a,d,f,g,e){return 0<=(d-g)*(h-e)-(b-g)*(f-e)&&0<=(b-g)*(a-e)-(p-g)*(h-e)&&0<=(p-g)*(f-e)-(d-g)*(a-e)}function hb(b,h,p){return(h.y-b.y)*(p.x-h.x)-(h.x-b.x)*(p.y-h.y)}function jc(b,h){return b.x===h.x&&b.y===h.y}function vf(b,h,p,a){return jc(b,h)&&jc(p,a)||jc(b,a)&&jc(p,h)?!0:0<hb(b,h,p)!==0<hb(b,h,a)&&0<hb(p,a,b)!==0<hb(p,a,h)}function Gd(b,h){return 0>hb(b.prev,
      b,b.next)?0<=hb(b,h,b.next)&&0<=hb(b,b.prev,h):0>hb(b,h,b.prev)||0>hb(b,b.next,h)}function wf(b,h){var p=new Ge(b.i,b.x,b.y),a=new Ge(h.i,h.x,h.y),d=b.next,f=h.prev;b.next=h;h.prev=b;p.next=d;d.prev=p;a.next=p;p.prev=a;f.next=a;a.prev=f;return a}function uf(b,h,p,a){b=new Ge(b,h,p);a?(b.next=a.next,b.prev=a,a.next.prev=b,a.next=b):(b.prev=b,b.next=b);return b}function Dd(b){b.next.prev=b.prev;b.prev.next=b.next;b.prevZ&&(b.prevZ.nextZ=b.nextZ);b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function Ge(b,h,p){this.i=
      b;this.x=h;this.y=p;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function xf(b){var h=b.length;2<h&&b[h-1].equals(b[0])&&b.pop()}function yf(b,h){for(var p=0;p<h.length;p++)b.push(h[p].x),b.push(h[p].y)}function dc(b,h){fa.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:b,options:h};this.fromBufferGeometry(new Eb(b,h));this.mergeVertices()}function Eb(b,h){"undefined"!==typeof b&&(N.call(this),this.type="ExtrudeBufferGeometry",b=Array.isArray(b)?b:[b],this.addShapeList(b,
      h),this.computeVertexNormals())}function Hd(b,h){fa.call(this);this.type="TextGeometry";this.parameters={text:b,parameters:h};this.fromBufferGeometry(new Nc(b,h));this.mergeVertices()}function Nc(b,h){h=h||{};var p=h.font;if(!p||!p.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new fa;p=p.generateShapes(b,h.size,h.curveSegments);h.amount=void 0!==h.height?h.height:50;void 0===h.bevelThickness&&(h.bevelThickness=10);void 0===h.bevelSize&&(h.bevelSize=
      8);void 0===h.bevelEnabled&&(h.bevelEnabled=!1);Eb.call(this,p,h);this.type="TextBufferGeometry"}function Id(b,h,p,a,d,f,g){fa.call(this);this.type="SphereGeometry";this.parameters={radius:b,widthSegments:h,heightSegments:p,phiStart:a,phiLength:d,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new kc(b,h,p,a,d,f,g));this.mergeVertices()}function kc(b,h,p,d,f,g,e){N.call(this);this.type="SphereBufferGeometry";this.parameters={radius:b,widthSegments:h,heightSegments:p,phiStart:d,phiLength:f,thetaStart:g,
      thetaLength:e};b=b||1;h=Math.max(3,Math.floor(h)||8);p=Math.max(2,Math.floor(p)||6);d=void 0!==d?d:0;f=void 0!==f?f:2*Math.PI;g=void 0!==g?g:0;e=void 0!==e?e:Math.PI;var k=g+e,m,l,n=0,r=[],q=new a,u=new a,v=[],t=[],w=[],D=[];for(l=0;l<=p;l++){var x=[],y=l/p;for(m=0;m<=h;m++){var F=m/h;q.x=-b*Math.cos(d+F*f)*Math.sin(g+y*e);q.y=b*Math.cos(g+y*e);q.z=b*Math.sin(d+F*f)*Math.sin(g+y*e);t.push(q.x,q.y,q.z);u.set(q.x,q.y,q.z).normalize();w.push(u.x,u.y,u.z);D.push(F,1-y);x.push(n++)}r.push(x)}for(l=0;l<
    p;l++)for(m=0;m<h;m++)b=r[l][m+1],d=r[l][m],f=r[l+1][m],e=r[l+1][m+1],(0!==l||0<g)&&v.push(b,d,e),(l!==p-1||k<Math.PI)&&v.push(d,f,e);this.setIndex(v);this.addAttribute("position",new Y(t,3));this.addAttribute("normal",new Y(w,3));this.addAttribute("uv",new Y(D,2))}function Jd(b,h,p,a,d,f){fa.call(this);this.type="RingGeometry";this.parameters={innerRadius:b,outerRadius:h,thetaSegments:p,phiSegments:a,thetaStart:d,thetaLength:f};this.fromBufferGeometry(new Oc(b,h,p,a,d,f));this.mergeVertices()}function Oc(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   h,p,d,f,g){N.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:b,outerRadius:h,thetaSegments:p,phiSegments:d,thetaStart:f,thetaLength:g};b=b||.5;h=h||1;f=void 0!==f?f:0;g=void 0!==g?g:2*Math.PI;p=void 0!==p?Math.max(3,p):8;d=void 0!==d?Math.max(1,d):1;var e=[],k=[],m=[],n=[],r=b,q=(h-b)/d,u=new a,v=new l,t,w;for(t=0;t<=d;t++){for(w=0;w<=p;w++)b=f+w/p*g,u.x=r*Math.cos(b),u.y=r*Math.sin(b),k.push(u.x,u.y,u.z),m.push(0,0,1),v.x=(u.x/h+1)/2,v.y=(u.y/h+1)/2,n.push(v.x,v.y);r+=q}for(t=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            0;t<d;t++)for(h=t*(p+1),w=0;w<p;w++)b=w+h,f=b+p+1,g=b+p+2,r=b+1,e.push(b,f,r),e.push(f,g,r);this.setIndex(e);this.addAttribute("position",new Y(k,3));this.addAttribute("normal",new Y(m,3));this.addAttribute("uv",new Y(n,2))}function Kd(b,h,p,a){fa.call(this);this.type="LatheGeometry";this.parameters={points:b,segments:h,phiStart:p,phiLength:a};this.fromBufferGeometry(new Pc(b,h,p,a));this.mergeVertices()}function Pc(b,h,p,d){N.call(this);this.type="LatheBufferGeometry";this.parameters={points:b,segments:h,
      phiStart:p,phiLength:d};h=Math.floor(h)||12;p=p||0;d=d||2*Math.PI;d=qa.clamp(d,0,2*Math.PI);var f=[],g=[],e=[],k=1/h,m=new a,n=new l,r,q;for(r=0;r<=h;r++){q=p+r*k*d;var u=Math.sin(q),v=Math.cos(q);for(q=0;q<=b.length-1;q++)m.x=b[q].x*u,m.y=b[q].y,m.z=b[q].x*v,g.push(m.x,m.y,m.z),n.x=r/h,n.y=q/(b.length-1),e.push(n.x,n.y)}for(r=0;r<h;r++)for(q=0;q<b.length-1;q++)p=q+r*b.length,k=p+b.length,m=p+b.length+1,n=p+1,f.push(p,k,n),f.push(k,m,n);this.setIndex(f);this.addAttribute("position",new Y(g,3));this.addAttribute("uv",
      new Y(e,2));this.computeVertexNormals();if(d===2*Math.PI)for(d=this.attributes.normal.array,f=new a,g=new a,e=new a,p=h*b.length*3,q=r=0;r<b.length;r++,q+=3)f.x=d[q+0],f.y=d[q+1],f.z=d[q+2],g.x=d[p+q+0],g.y=d[p+q+1],g.z=d[p+q+2],e.addVectors(f,g).normalize(),d[q+0]=d[p+q+0]=e.x,d[q+1]=d[p+q+1]=e.y,d[q+2]=d[p+q+2]=e.z}function lc(b,h){fa.call(this);this.type="ShapeGeometry";"object"===typeof h&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),h=h.curveSegments);this.parameters=
      {shapes:b,curveSegments:h};this.fromBufferGeometry(new mc(b,h));this.mergeVertices()}function mc(b,h){function p(b){var p,e,m=d.length/3;b=b.extractPoints(h);var l=b.shape,n=b.holes;if(!1===Wb.isClockWise(l))for(l=l.reverse(),b=0,p=n.length;b<p;b++)e=n[b],!0===Wb.isClockWise(e)&&(n[b]=e.reverse());var r=Wb.triangulateShape(l,n);b=0;for(p=n.length;b<p;b++)e=n[b],l=l.concat(e);b=0;for(p=l.length;b<p;b++)e=l[b],d.push(e.x,e.y,0),f.push(0,0,1),g.push(e.x,e.y);b=0;for(p=r.length;b<p;b++)l=r[b],a.push(l[0]+
      m,l[1]+m,l[2]+m),k+=3}N.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:b,curveSegments:h};h=h||12;var a=[],d=[],f=[],g=[],e=0,k=0;if(!1===Array.isArray(b))p(b);else for(var m=0;m<b.length;m++)p(b[m]),this.addGroup(e,k,m),e+=k,k=0;this.setIndex(a);this.addAttribute("position",new Y(d,3));this.addAttribute("normal",new Y(f,3));this.addAttribute("uv",new Y(g,2))}function zf(b,h){h.shapes=[];if(Array.isArray(b))for(var p=0,a=b.length;p<a;p++)h.shapes.push(b[p].uuid);else h.shapes.push(b.uuid);
      return h}function Qc(b,h){N.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:h};var p=[],a=Math.cos(qa.DEG2RAD*(void 0!==h?h:1)),d=[0,0],f={},g,e,k=["a","b","c"],m;b.isBufferGeometry?(m=new fa,m.fromBufferGeometry(b)):m=b.clone();m.mergeVertices();m.computeFaceNormals();var l=m.vertices;m=m.faces;for(var n=0,r=m.length;n<r;n++)for(var q=m[n],u=0;3>u;u++)g=q[k[u]],e=q[k[(u+1)%3]],d[0]=Math.min(g,e),d[1]=Math.max(g,e),g=d[0]+","+d[1],void 0===f[g]?f[g]={index1:d[0],index2:d[1],face1:n,
      face2:void 0}:f[g].face2=n;for(g in f)if(d=f[g],void 0===d.face2||m[d.face1].normal.dot(m[d.face2].normal)<=a)k=l[d.index1],p.push(k.x,k.y,k.z),k=l[d.index2],p.push(k.x,k.y,k.z);this.addAttribute("position",new Y(p,3))}function nc(b,h,p,a,d,f,g,e){fa.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:b,radiusBottom:h,height:p,radialSegments:a,heightSegments:d,openEnded:f,thetaStart:g,thetaLength:e};this.fromBufferGeometry(new Xb(b,h,p,a,d,f,g,e));this.mergeVertices()}function Xb(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          h,p,d,f,g,e,k){function m(p){var f,g,V,wa=new l,w=new a,xb=0,y=!0===p?b:h,F=!0===p?1:-1;g=t;for(f=1;f<=d;f++)q.push(0,D*F,0),u.push(0,F,0),v.push(.5,.5),t++;V=t;for(f=0;f<=d;f++){var z=f/d*k+e,P=Math.cos(z),z=Math.sin(z);w.x=y*z;w.y=D*F;w.z=y*P;q.push(w.x,w.y,w.z);u.push(0,F,0);wa.x=.5*P+.5;wa.y=.5*z*F+.5;v.push(wa.x,wa.y);t++}for(f=0;f<d;f++)wa=g+f,w=V+f,!0===p?r.push(w,w+1,wa):r.push(w+1,w,wa),xb+=3;n.addGroup(x,xb,!0===p?1:2);x+=xb}N.call(this);this.type="CylinderBufferGeometry";this.parameters=
      {radiusTop:b,radiusBottom:h,height:p,radialSegments:d,heightSegments:f,openEnded:g,thetaStart:e,thetaLength:k};var n=this;b=void 0!==b?b:1;h=void 0!==h?h:1;p=p||1;d=Math.floor(d)||8;f=Math.floor(f)||1;g=void 0!==g?g:!1;e=void 0!==e?e:0;k=void 0!==k?k:2*Math.PI;var r=[],q=[],u=[],v=[],t=0,w=[],D=p/2,x=0;(function(){var g,m,l=new a,wa=new a,xb=0,y=(h-b)/p;for(m=0;m<=f;m++){var F=[],z=m/f,P=z*(h-b)+b;for(g=0;g<=d;g++){var B=g/d,N=B*k+e,A=Math.sin(N),N=Math.cos(N);wa.x=P*A;wa.y=-z*p+D;wa.z=P*N;q.push(wa.x,
      wa.y,wa.z);l.set(A,y,N).normalize();u.push(l.x,l.y,l.z);v.push(B,1-z);F.push(t++)}w.push(F)}for(g=0;g<d;g++)for(m=0;m<f;m++)l=w[m+1][g],wa=w[m+1][g+1],y=w[m][g+1],r.push(w[m][g],l,y),r.push(l,wa,y),xb+=6;n.addGroup(x,xb,0);x+=xb})();!1===g&&(0<b&&m(!0),0<h&&m(!1));this.setIndex(r);this.addAttribute("position",new Y(q,3));this.addAttribute("normal",new Y(u,3));this.addAttribute("uv",new Y(v,2))}function Ld(b,h,p,a,d,f,g){nc.call(this,0,b,h,p,a,d,f,g);this.type="ConeGeometry";this.parameters={radius:b,
      height:h,radialSegments:p,heightSegments:a,openEnded:d,thetaStart:f,thetaLength:g}}function Md(b,h,p,a,d,f,g){Xb.call(this,0,b,h,p,a,d,f,g);this.type="ConeBufferGeometry";this.parameters={radius:b,height:h,radialSegments:p,heightSegments:a,openEnded:d,thetaStart:f,thetaLength:g}}function Nd(b,h,p,a){fa.call(this);this.type="CircleGeometry";this.parameters={radius:b,segments:h,thetaStart:p,thetaLength:a};this.fromBufferGeometry(new Rc(b,h,p,a));this.mergeVertices()}function Rc(b,h,p,d){N.call(this);
      this.type="CircleBufferGeometry";this.parameters={radius:b,segments:h,thetaStart:p,thetaLength:d};b=b||1;h=void 0!==h?Math.max(3,h):8;p=void 0!==p?p:0;d=void 0!==d?d:2*Math.PI;var f=[],g=[],e=[],k=[],m,n,r=new a,q=new l;g.push(0,0,0);e.push(0,0,1);k.push(.5,.5);n=0;for(m=3;n<=h;n++,m+=3){var u=p+n/h*d;r.x=b*Math.cos(u);r.y=b*Math.sin(u);g.push(r.x,r.y,r.z);e.push(0,0,1);q.x=(g[m]/b+1)/2;q.y=(g[m+1]/b+1)/2;k.push(q.x,q.y)}for(m=1;m<=h;m++)f.push(m,m+1,0);this.setIndex(f);this.addAttribute("position",
        new Y(g,3));this.addAttribute("normal",new Y(e,3));this.addAttribute("uv",new Y(k,2))}function Sc(b){ba.call(this);this.type="ShadowMaterial";this.color=new S(0);this.opacity=1;this.transparent=this.lights=!0;this.setValues(b)}function Tc(b){Na.call(this,b);this.type="RawShaderMaterial"}function Qb(b){ba.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new S(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=
      null;this.aoMapIntensity=1;this.emissive=new S(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new l(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=
      !1;this.setValues(b)}function oc(b){Qb.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(b)}function Fb(b){ba.call(this);this.type="MeshPhongMaterial";this.color=new S(16777215);this.specular=new S(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new S(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=
      1;this.normalMap=null;this.normalScale=new l(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(b)}function pc(b){Fb.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;
      this.setValues(b)}function qc(b){ba.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new l(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1;this.setValues(b)}function rc(b){ba.call(this);this.type="MeshLambertMaterial";this.color=new S(16777215);this.lightMap=this.map=null;this.lightMapIntensity=
      1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new S(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(b)}function sc(b){Ha.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(b)}
    function He(b,h,p){var a=this,d=!1,f=0,g=0,e=void 0;this.onStart=void 0;this.onLoad=b;this.onProgress=h;this.onError=p;this.itemStart=function(b){g++;if(!1===d&&void 0!==a.onStart)a.onStart(b,f,g);d=!0};this.itemEnd=function(b){f++;if(void 0!==a.onProgress)a.onProgress(b,f,g);if(f===g&&(d=!1,void 0!==a.onLoad))a.onLoad()};this.itemError=function(b){if(void 0!==a.onError)a.onError(b)};this.resolveURL=function(b){return e?e(b):b};this.setURLModifier=function(b){e=b;return this}}function Gb(b){this.manager=
      void 0!==b?b:ob}function Af(b){this.manager=void 0!==b?b:ob;this._parser=null}function Ie(b){this.manager=void 0!==b?b:ob;this._parser=null}function Od(b){this.manager=void 0!==b?b:ob}function Je(b){this.manager=void 0!==b?b:ob}function ie(b){this.manager=void 0!==b?b:ob}function ia(){this.type="Curve";this.arcLengthDivisions=200}function tb(b,h,p,a,d,f,g,e){ia.call(this);this.type="EllipseCurve";this.aX=b||0;this.aY=h||0;this.xRadius=p||1;this.yRadius=a||1;this.aStartAngle=d||0;this.aEndAngle=f||
      2*Math.PI;this.aClockwise=g||!1;this.aRotation=e||0}function Uc(b,h,p,a,d,f){tb.call(this,b,h,p,p,a,d,f);this.type="ArcCurve"}function Ke(){var b=0,h=0,p=0,a=0;return{initCatmullRom:function(d,f,g,e,k){d=k*(g-d);e=k*(e-f);b=f;h=d;p=-3*f+3*g-2*d-e;a=2*f-2*g+d+e},initNonuniformCatmullRom:function(d,f,g,e,k,m,l){d=((f-d)/k-(g-d)/(k+m)+(g-f)/m)*m;e=((g-f)/m-(e-f)/(m+l)+(e-g)/l)*m;m=d;b=f;h=m;p=-3*f+3*g-2*m-e;a=2*f-2*g+m+e},calc:function(d){var f=d*d;return b+h*d+p*f+a*f*d}}}function db(b,h,p,a){ia.call(this);
      this.type="CatmullRomCurve3";this.points=b||[];this.closed=h||!1;this.curveType=p||"centripetal";this.tension=a||.5}function Bf(b,h,p,a,d){h=.5*(a-h);d=.5*(d-p);var f=b*b;return(2*p-2*a+h+d)*b*f+(-3*p+3*a-2*h-d)*f+h*b+p}function Pd(b,h,p,a){var d=1-b;return d*d*h+2*(1-b)*b*p+b*b*a}function Qd(b,h,p,a,d){var f=1-b,g=1-b;return f*f*f*h+3*g*g*b*p+3*(1-b)*b*b*a+b*b*b*d}function Hb(b,h,p,a){ia.call(this);this.type="CubicBezierCurve";this.v0=b||new l;this.v1=h||new l;this.v2=p||new l;this.v3=a||new l}function Rb(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      h,p,d){ia.call(this);this.type="CubicBezierCurve3";this.v0=b||new a;this.v1=h||new a;this.v2=p||new a;this.v3=d||new a}function pb(b,h){ia.call(this);this.type="LineCurve";this.v1=b||new l;this.v2=h||new l}function Ib(b,h){ia.call(this);this.type="LineCurve3";this.v1=b||new a;this.v2=h||new a}function Jb(b,h,p){ia.call(this);this.type="QuadraticBezierCurve";this.v0=b||new l;this.v1=h||new l;this.v2=p||new l}function Sb(b,h,p){ia.call(this);this.type="QuadraticBezierCurve3";this.v0=b||new a;this.v1=
      h||new a;this.v2=p||new a}function Kb(b){ia.call(this);this.type="SplineCurve";this.points=b||[]}function Yb(){ia.call(this);this.type="CurvePath";this.curves=[];this.autoClose=!1}function Lb(b){Yb.call(this);this.type="Path";this.currentPoint=new l;b&&this.setFromPoints(b)}function ec(b){Lb.call(this,b);this.uuid=qa.generateUUID();this.type="Shape";this.holes=[]}function Ta(b,h){aa.call(this);this.type="Light";this.color=new S(b);this.intensity=void 0!==h?h:1;this.receiveShadow=void 0}function je(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             h,p){Ta.call(this,b,p);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(aa.DefaultUp);this.updateMatrix();this.groundColor=new S(h)}function tc(b){this.camera=b;this.bias=0;this.radius=1;this.mapSize=new l(512,512);this.map=null;this.matrix=new m}function ke(){tc.call(this,new ra(50,1,.5,500))}function le(b,h,p,a,d,f){Ta.call(this,b,h);this.type="SpotLight";this.position.copy(aa.DefaultUp);this.updateMatrix();this.target=new aa;Object.defineProperty(this,"power",{get:function(){return this.intensity*
        Math.PI},set:function(b){this.intensity=b/Math.PI}});this.distance=void 0!==p?p:0;this.angle=void 0!==a?a:Math.PI/3;this.penumbra=void 0!==d?d:0;this.decay=void 0!==f?f:1;this.shadow=new ke}function me(b,h,p,a){Ta.call(this,b,h);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(b){this.intensity=b/(4*Math.PI)}});this.distance=void 0!==p?p:0;this.decay=void 0!==a?a:1;this.shadow=new tc(new ra(90,1,.5,500))}function ne(){tc.call(this,
      new wb(-5,5,5,-5,.5,500))}function oe(b,h){Ta.call(this,b,h);this.type="DirectionalLight";this.position.copy(aa.DefaultUp);this.updateMatrix();this.target=new aa;this.shadow=new ne}function pe(b,h){Ta.call(this,b,h);this.type="AmbientLight";this.castShadow=void 0}function qe(b,h,p,a){Ta.call(this,b,h);this.type="RectAreaLight";this.width=void 0!==p?p:10;this.height=void 0!==a?a:10}function re(b,h,p,a){Xa.call(this,b,h,p,a)}function se(b,h,p){Xa.call(this,b,h,p)}function ub(b,h,p,a){this.parameterPositions=
      b;this._cachedIndex=0;this.resultBuffer=void 0!==a?a:new h.constructor(p);this.sampleValues=h;this.valueSize=p}function te(b,h,p,a){ub.call(this,b,h,p,a)}function Rd(b,h,p,a){Xa.call(this,b,h,p,a)}function ue(b,h,p,a){Xa.call(this,b,h,p,a)}function Vc(b,h,p,a){Xa.call(this,b,h,p,a)}function ve(b,h,p,a){ub.call(this,b,h,p,a);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Sd(b,h,p,a){ub.call(this,b,h,p,a)}function we(b,h,p,a){ub.call(this,b,h,p,a)}function Xa(b,h,p,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     a){if(void 0===b)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===h||0===h.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+b);this.name=b;this.times=eb.convertArray(h,this.TimeBufferType);this.values=eb.convertArray(p,this.ValueBufferType);this.setInterpolation(a||this.DefaultInterpolation);this.validate();this.optimize()}function Wc(b,h,p,a){Xa.call(this,b,h,p,a)}function Ab(b,h,p){this.name=b;this.tracks=p;this.duration=void 0!==h?h:-1;this.uuid=qa.generateUUID();
      0>this.duration&&this.resetDuration();this.optimize()}function xe(b){this.manager=void 0!==b?b:ob;this.textures={}}function Le(b){this.manager=void 0!==b?b:ob}function Xc(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}function Me(b){"boolean"===typeof b&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),b=void 0);this.manager=void 0!==b?b:ob;this.withCredentials=!1}function Cf(b){this.manager=void 0!==b?b:
      ob;this.texturePath=""}function Ne(b){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.manager=void 0!==b?b:ob;this.options=void 0}function Oe(){this.type="ShapePath";this.subPaths=[];this.currentPath=null}function Pe(b){this.type="Font";this.data=b}function Df(b){this.manager=void 0!==b?b:ob}function Qe(b){this.manager=void 0!==b?b:ob}
    function Ef(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new ra;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new ra;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function Td(b,h,p){aa.call(this);this.type="CubeCamera";var d=new ra(90,1,b,h);d.up.set(0,-1,0);d.lookAt(new a(1,0,0));this.add(d);var f=new ra(90,1,b,h);f.up.set(0,-1,0);f.lookAt(new a(-1,0,0));this.add(f);var g=new ra(90,1,b,h);g.up.set(0,0,1);g.lookAt(new a(0,1,
      0));this.add(g);var e=new ra(90,1,b,h);e.up.set(0,0,-1);e.lookAt(new a(0,-1,0));this.add(e);var k=new ra(90,1,b,h);k.up.set(0,-1,0);k.lookAt(new a(0,0,1));this.add(k);var m=new ra(90,1,b,h);m.up.set(0,-1,0);m.lookAt(new a(0,0,-1));this.add(m);this.renderTarget=new u(p,p,{format:1022,magFilter:1006,minFilter:1006});this.renderTarget.texture.name="CubeCamera";this.update=function(b,h){null===this.parent&&this.updateMatrixWorld();var p=this.renderTarget,a=p.texture.generateMipmaps;p.texture.generateMipmaps=
      !1;p.activeCubeFace=0;b.render(h,d,p);p.activeCubeFace=1;b.render(h,f,p);p.activeCubeFace=2;b.render(h,g,p);p.activeCubeFace=3;b.render(h,e,p);p.activeCubeFace=4;b.render(h,k,p);p.texture.generateMipmaps=a;p.activeCubeFace=5;b.render(h,m,p);b.setRenderTarget(null)};this.clear=function(b,h,p,a){for(var d=this.renderTarget,f=0;6>f;f++)d.activeCubeFace=f,b.setRenderTarget(d),b.clear(h,p,a);b.setRenderTarget(null)}}function Re(){aa.call(this);this.type="AudioListener";this.context=Se.getContext();this.gain=
      this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function Yc(b){aa.call(this);this.type="Audio";this.context=b.context;this.gain=this.context.createGain();this.gain.connect(b.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.offset=this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function Te(b){Yc.call(this,b);this.panner=this.context.createPanner();this.panner.connect(this.gain)}
    function Ue(b,h){this.analyser=b.context.createAnalyser();this.analyser.fftSize=void 0!==h?h:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);b.getOutput().connect(this.analyser)}function Ve(b,h,p){this.binding=b;this.valueSize=p;b=Float64Array;switch(h){case "quaternion":h=this._slerp;break;case "string":case "bool":b=Array;h=this._select;break;default:h=this._lerp}this.buffer=new b(4*p);this._mixBufferRegion=h;this.referenceCount=this.useCount=this.cumulativeWeight=0}function Ff(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        h,p){p=p||fb.parseTrackName(h);this._targetGroup=b;this._bindings=b.subscribe_(h,p)}function fb(b,h,p){this.path=h;this.parsedPath=p||fb.parseTrackName(h);this.node=fb.findNode(b,this.parsedPath.nodeName)||b;this.rootNode=b}function Gf(){this.uuid=qa.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var b={};this._indicesByUUID=b;for(var h=0,p=arguments.length;h!==p;++h)b[arguments[h].uuid]=h;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath=
      {};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}function Hf(b,h,p){this._mixer=b;this._clip=h;this._localRoot=p||null;b=h.tracks;h=b.length;p=Array(h);for(var a={endingStart:2400,endingEnd:2400},d=0;d!==h;++d){var f=b[d].createInterpolant(null);p[d]=f;f.settings=a}this._interpolantSettings=a;this._interpolants=p;this._propertyBindings=Array(h);this._weightInterpolant=this._timeScaleInterpolant=
      this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function We(b){this._root=b;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function ye(b,h){"string"===typeof b&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),
      b=h);this.value=b}function Xe(){N.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function Ye(b,h,p,a){this.uuid=qa.generateUUID();this.data=b;this.itemSize=h;this.offset=p;this.normalized=!0===a}function Zc(b,h){this.uuid=qa.generateUUID();this.array=b;this.stride=h;this.count=void 0!==b?b.length/h:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function Ze(b,h,p){Zc.call(this,b,h);this.meshPerAttribute=p||1}function $e(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     h,p){na.call(this,b,h);this.meshPerAttribute=p||1}function If(b,h,p,a){this.ray=new Cb(b,h);this.near=p||0;this.far=a||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function Jf(b,h){return b.distance-h.distance}function af(b,h,p,a){if(!1!==b.visible&&(b.raycast(h,p),!0===a)){b=b.children;a=0;for(var d=
      b.length;a<d;a++)af(b[a],h,p,!0)}}function Kf(b){this.autoStart=void 0!==b?b:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function Lf(b,h,p){this.radius=void 0!==b?b:1;this.phi=void 0!==h?h:0;this.theta=void 0!==p?p:0;return this}function Mf(b,h,p){this.radius=void 0!==b?b:1;this.theta=void 0!==h?h:0;this.y=void 0!==p?p:0;return this}function bf(b,h){this.min=void 0!==b?b:new l(Infinity,Infinity);this.max=void 0!==h?h:new l(-Infinity,-Infinity)}function Ud(b){aa.call(this);this.material=
      b;this.render=function(){}}function Vd(b,h,p,a){this.object=b;this.size=void 0!==h?h:1;b=void 0!==p?p:16711680;a=void 0!==a?a:1;h=0;(p=this.object.geometry)&&p.isGeometry?h=3*p.faces.length:p&&p.isBufferGeometry&&(h=p.attributes.normal.count);p=new N;h=new Y(6*h,3);p.addAttribute("position",h);Qa.call(this,p,new Ha({color:b,linewidth:a}));this.matrixAutoUpdate=!1;this.update()}function $c(b,h){aa.call(this);this.light=b;this.light.updateMatrixWorld();this.matrix=b.matrixWorld;this.matrixAutoUpdate=
      !1;this.color=h;for(var p=new N,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],d=0,f=1;32>d;d++,f++){var g=d/32*Math.PI*2,e=f/32*Math.PI*2;a.push(Math.cos(g),Math.sin(g),1,Math.cos(e),Math.sin(e),1)}p.addAttribute("position",new Y(a,3));a=new Ha({fog:!1});this.cone=new Qa(p,a);this.add(this.cone);this.update()}function Nf(b){var h=[];b&&b.isBone&&h.push(b);for(var p=0;p<b.children.length;p++)h.push.apply(h,Nf(b.children[p]));return h}function ad(b){for(var h=Nf(b),p=new N,a=[],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    d=[],f=new S(0,0,1),g=new S(0,1,0),e=0;e<h.length;e++){var k=h[e];k.parent&&k.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),d.push(f.r,f.g,f.b),d.push(g.r,g.g,g.b))}p.addAttribute("position",new Y(a,3));p.addAttribute("color",new Y(d,3));a=new Ha({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});Qa.call(this,p,a);this.root=b;this.bones=h;this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1}function bd(b,h,p){this.light=b;this.light.updateMatrixWorld();this.color=p;b=new kc(h,4,2);h=new Ka({wireframe:!0,
      fog:!1});cb.call(this,b,h);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function cd(b,h){aa.call(this);this.light=b;this.light.updateMatrixWorld();this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;this.color=h;var p=new Ha({fog:!1}),a=new N;a.addAttribute("position",new na(new Float32Array(15),3));this.line=new mb(a,p);this.add(this.line);this.update()}function dd(b,h,p){aa.call(this);this.light=b;this.light.updateMatrixWorld();this.matrix=b.matrixWorld;this.matrixAutoUpdate=
      !1;this.color=p;b=new ic(h);b.rotateY(.5*Math.PI);this.material=new Ka({wireframe:!0,fog:!1});void 0===this.color&&(this.material.vertexColors=2);h=b.getAttribute("position");h=new Float32Array(3*h.count);b.addAttribute("color",new na(h,3));this.add(new cb(b,this.material));this.update()}function Wd(b,h,p,a){b=b||10;h=h||10;p=new S(void 0!==p?p:4473924);a=new S(void 0!==a?a:8947848);var d=h/2,f=b/h,g=b/2;b=[];for(var e=[],k=0,m=0,l=-g;k<=h;k++,l+=f){b.push(-g,0,l,g,0,l);b.push(l,0,-g,l,0,g);var n=
      k===d?p:a;n.toArray(e,m);m+=3;n.toArray(e,m);m+=3;n.toArray(e,m);m+=3;n.toArray(e,m);m+=3}h=new N;h.addAttribute("position",new Y(b,3));h.addAttribute("color",new Y(e,3));p=new Ha({vertexColors:2});Qa.call(this,h,p)}function ze(b,h,p,a,d,f){b=b||10;h=h||16;p=p||8;a=a||64;d=new S(void 0!==d?d:4473924);f=new S(void 0!==f?f:8947848);var g=[],e=[],k,m,l,n,r;for(l=0;l<=h;l++)m=l/h*2*Math.PI,k=Math.sin(m)*b,m=Math.cos(m)*b,g.push(0,0,0),g.push(k,0,m),r=l&1?d:f,e.push(r.r,r.g,r.b),e.push(r.r,r.g,r.b);for(l=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               0;l<=p;l++)for(r=l&1?d:f,n=b-b/p*l,h=0;h<a;h++)m=h/a*2*Math.PI,k=Math.sin(m)*n,m=Math.cos(m)*n,g.push(k,0,m),e.push(r.r,r.g,r.b),m=(h+1)/a*2*Math.PI,k=Math.sin(m)*n,m=Math.cos(m)*n,g.push(k,0,m),e.push(r.r,r.g,r.b);b=new N;b.addAttribute("position",new Y(g,3));b.addAttribute("color",new Y(e,3));g=new Ha({vertexColors:2});Qa.call(this,b,g)}function Xd(b,h,p,a){this.object=b;this.size=void 0!==h?h:1;b=void 0!==p?p:16776960;a=void 0!==a?a:1;h=0;(p=this.object.geometry)&&p.isGeometry?h=p.faces.length:
      console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");p=new N;h=new Y(6*h,3);p.addAttribute("position",h);Qa.call(this,p,new Ha({color:b,linewidth:a}));this.matrixAutoUpdate=!1;this.update()}function ed(b,h,p){aa.call(this);this.light=b;this.light.updateMatrixWorld();this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;this.color=p;void 0===h&&(h=1);b=new N;b.addAttribute("position",new Y([-h,h,0,h,h,0,h,-h,0,-h,-h,0,-h,h,0],3));h=new Ha({fog:!1});
      this.lightPlane=new mb(b,h);this.add(this.lightPlane);b=new N;b.addAttribute("position",new Y([0,0,0,0,0,1],3));this.targetLine=new mb(b,h);this.add(this.targetLine);this.update()}function Yd(b){function h(b,h,a){p(b,a);p(h,a)}function p(b,h){f.push(0,0,0);g.push(h.r,h.g,h.b);void 0===e[b]&&(e[b]=[]);e[b].push(f.length/3-1)}var a=new N,d=new Ha({color:16777215,vertexColors:1}),f=[],g=[],e={},k=new S(16755200),m=new S(16711680),l=new S(43775),n=new S(16777215),r=new S(3355443);h("n1","n2",k);h("n2",
      "n4",k);h("n4","n3",k);h("n3","n1",k);h("f1","f2",k);h("f2","f4",k);h("f4","f3",k);h("f3","f1",k);h("n1","f1",k);h("n2","f2",k);h("n3","f3",k);h("n4","f4",k);h("p","n1",m);h("p","n2",m);h("p","n3",m);h("p","n4",m);h("u1","u2",l);h("u2","u3",l);h("u3","u1",l);h("c","t",n);h("p","c",r);h("cn1","cn2",r);h("cn3","cn4",r);h("cf1","cf2",r);h("cf3","cf4",r);a.addAttribute("position",new Y(f,3));a.addAttribute("color",new Y(g,3));Qa.call(this,a,d);this.camera=b;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();
      this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=e;this.update()}function uc(b,h){this.object=b;void 0===h&&(h=16776960);var p=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),d=new N;d.setIndex(new na(p,1));d.addAttribute("position",new na(a,3));Qa.call(this,d,new Ha({color:h}));this.matrixAutoUpdate=!1;this.update()}function Zd(b,h){this.type="Box3Helper";this.box=b;var p=void 0!==h?h:16776960,a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,
      7,7,4,0,4,1,5,2,6,3,7]),d=new N;d.setIndex(new na(a,1));d.addAttribute("position",new Y([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));Qa.call(this,d,new Ha({color:p}));this.geometry.computeBoundingSphere()}function $d(b,h,p){this.type="PlaneHelper";this.plane=b;this.size=void 0===h?1:h;b=void 0!==p?p:16776960;h=new N;h.addAttribute("position",new Y([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));h.computeBoundingSphere();mb.call(this,h,new Ha({color:b}));
      h=new N;h.addAttribute("position",new Y([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));h.computeBoundingSphere();this.add(new cb(h,new Ka({color:b,opacity:.2,transparent:!0,depthWrite:!1})))}function vc(b,h,p,a,d,f){aa.call(this);void 0===a&&(a=16776960);void 0===p&&(p=1);void 0===d&&(d=.2*p);void 0===f&&(f=.2*d);void 0===Ae&&(Ae=new N,Ae.addAttribute("position",new Y([0,0,0,0,1,0],3)),cf=new Xb(0,.5,1,5,1),cf.translate(0,-.5,0));this.position.copy(h);this.line=new mb(Ae,new Ha({color:a}));this.line.matrixAutoUpdate=
      !1;this.add(this.line);this.cone=new cb(cf,new Ka({color:a}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(b);this.setLength(p,d,f)}function ae(b){b=b||1;var h=[0,0,0,b,0,0,0,0,0,0,b,0,0,0,0,0,0,b];b=new N;b.addAttribute("position",new Y(h,3));b.addAttribute("color",new Y([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));h=new Ha({vertexColors:2});Qa.call(this,b,h)}function Of(b){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");db.call(this,
      b);this.type="catmullrom";this.closed=!0}function Pf(b){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");db.call(this,b);this.type="catmullrom"}function df(b){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");db.call(this,b);this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(b){return"number"===typeof b&&isFinite(b)&&Math.floor(b)===b});void 0===
    Math.sign&&(Math.sign=function(b){return 0>b?-1:0<b?1:+b});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(b){if(void 0===b||null===b)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(b),p=1;p<arguments.length;p++){var a=arguments[p];if(void 0!==a&&null!==a)for(var d in a)Object.prototype.hasOwnProperty.call(a,
      d)&&(h[d]=a[d])}return h}}();Object.assign(n.prototype,{addEventListener:function(b,h){void 0===this._listeners&&(this._listeners={});var p=this._listeners;void 0===p[b]&&(p[b]=[]);-1===p[b].indexOf(h)&&p[b].push(h)},hasEventListener:function(b,h){if(void 0===this._listeners)return!1;var p=this._listeners;return void 0!==p[b]&&-1!==p[b].indexOf(h)},removeEventListener:function(b,h){if(void 0!==this._listeners){var p=this._listeners[b];if(void 0!==p){var a=p.indexOf(h);-1!==a&&p.splice(a,1)}}},dispatchEvent:function(b){if(void 0!==
        this._listeners){var h=this._listeners[b.type];if(void 0!==h){b.target=this;for(var h=h.slice(0),p=0,a=h.length;p<a;p++)h[p].call(this,b)}}}});var qa={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var b=[],h=0;256>h;h++)b[h]=(16>h?"0":"")+h.toString(16).toUpperCase();return function(){var h=4294967295*Math.random()|0,a=4294967295*Math.random()|0,d=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return b[h&255]+b[h>>8&255]+b[h>>16&255]+b[h>>24&255]+"-"+b[a&255]+b[a>>8&
      255]+"-"+b[a>>16&15|64]+b[a>>24&255]+"-"+b[d&63|128]+b[d>>8&255]+"-"+b[d>>16&255]+b[d>>24&255]+b[f&255]+b[f>>8&255]+b[f>>16&255]+b[f>>24&255]}}(),clamp:function(b,h,p){return Math.max(h,Math.min(p,b))},euclideanModulo:function(b,h){return(b%h+h)%h},mapLinear:function(b,h,p,a,d){return a+(b-h)*(d-a)/(p-h)},lerp:function(b,h,p){return(1-p)*b+p*h},smoothstep:function(b,h,p){if(b<=h)return 0;if(b>=p)return 1;b=(b-h)/(p-h);return b*b*(3-2*b)},smootherstep:function(b,h,p){if(b<=h)return 0;if(b>=p)return 1;
        b=(b-h)/(p-h);return b*b*b*(b*(6*b-15)+10)},randInt:function(b,h){return b+Math.floor(Math.random()*(h-b+1))},randFloat:function(b,h){return b+Math.random()*(h-b)},randFloatSpread:function(b){return b*(.5-Math.random())},degToRad:function(b){return b*qa.DEG2RAD},radToDeg:function(b){return b*qa.RAD2DEG},isPowerOfTwo:function(b){return 0===(b&b-1)&&0!==b},ceilPowerOfTwo:function(b){return Math.pow(2,Math.ceil(Math.log(b)/Math.LN2))},floorPowerOfTwo:function(b){return Math.pow(2,Math.floor(Math.log(b)/
        Math.LN2))}};Object.defineProperties(l.prototype,{width:{get:function(){return this.x},set:function(b){this.x=b}},height:{get:function(){return this.y},set:function(b){this.y=b}}});Object.assign(l.prototype,{isVector2:!0,set:function(b,h){this.x=b;this.y=h;return this},setScalar:function(b){this.y=this.x=b;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setComponent:function(b,h){switch(b){case 0:this.x=h;break;case 1:this.y=h;break;default:throw Error("index is out of range: "+
        b);}return this},getComponent:function(b){switch(b){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+b);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(b){this.x=b.x;this.y=b.y;return this},add:function(b,h){if(void 0!==h)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(b,h);this.x+=b.x;this.y+=b.y;return this},addScalar:function(b){this.x+=b;this.y+=b;return this},
      addVectors:function(b,h){this.x=b.x+h.x;this.y=b.y+h.y;return this},addScaledVector:function(b,h){this.x+=b.x*h;this.y+=b.y*h;return this},sub:function(b,h){if(void 0!==h)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(b,h);this.x-=b.x;this.y-=b.y;return this},subScalar:function(b){this.x-=b;this.y-=b;return this},subVectors:function(b,h){this.x=b.x-h.x;this.y=b.y-h.y;return this},multiply:function(b){this.x*=b.x;this.y*=
        b.y;return this},multiplyScalar:function(b){this.x*=b;this.y*=b;return this},divide:function(b){this.x/=b.x;this.y/=b.y;return this},divideScalar:function(b){return this.multiplyScalar(1/b)},applyMatrix3:function(b){var h=this.x,p=this.y;b=b.elements;this.x=b[0]*h+b[3]*p+b[6];this.y=b[1]*h+b[4]*p+b[7];return this},min:function(b){this.x=Math.min(this.x,b.x);this.y=Math.min(this.y,b.y);return this},max:function(b){this.x=Math.max(this.x,b.x);this.y=Math.max(this.y,b.y);return this},clamp:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             h){this.x=Math.max(b.x,Math.min(h.x,this.x));this.y=Math.max(b.y,Math.min(h.y,this.y));return this},clampScalar:function(){var b=new l,h=new l;return function(p,a){b.set(p,p);h.set(a,a);return this.clamp(b,h)}}(),clampLength:function(b,h){var p=this.length();return this.divideScalar(p||1).multiplyScalar(Math.max(b,Math.min(h,p)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=
        Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(b){return this.x*b.x+this.y*b.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||
        1)},angle:function(){var b=Math.atan2(this.y,this.x);0>b&&(b+=2*Math.PI);return b},distanceTo:function(b){return Math.sqrt(this.distanceToSquared(b))},distanceToSquared:function(b){var h=this.x-b.x;b=this.y-b.y;return h*h+b*b},manhattanDistanceTo:function(b){return Math.abs(this.x-b.x)+Math.abs(this.y-b.y)},setLength:function(b){return this.normalize().multiplyScalar(b)},lerp:function(b,h){this.x+=(b.x-this.x)*h;this.y+=(b.y-this.y)*h;return this},lerpVectors:function(b,h,p){return this.subVectors(h,
        b).multiplyScalar(p).add(b)},equals:function(b){return b.x===this.x&&b.y===this.y},fromArray:function(b,h){void 0===h&&(h=0);this.x=b[h];this.y=b[h+1];return this},toArray:function(b,h){void 0===b&&(b=[]);void 0===h&&(h=0);b[h]=this.x;b[h+1]=this.y;return b},fromBufferAttribute:function(b,h,p){void 0!==p&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=b.getX(h);this.y=b.getY(h);return this},rotateAround:function(b,h){var p=Math.cos(h),a=Math.sin(h),d=this.x-
        b.x,f=this.y-b.y;this.x=d*p-f*a+b.x;this.y=d*a+f*p+b.y;return this}});Object.assign(m.prototype,{isMatrix4:!0,set:function(b,h,a,d,f,g,e,k,m,l,n,r,q,u,v,t){var w=this.elements;w[0]=b;w[4]=h;w[8]=a;w[12]=d;w[1]=f;w[5]=g;w[9]=e;w[13]=k;w[2]=m;w[6]=l;w[10]=n;w[14]=r;w[3]=q;w[7]=u;w[11]=v;w[15]=t;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new m).fromArray(this.elements)},copy:function(b){var h=this.elements;b=b.elements;h[0]=b[0];h[1]=
        b[1];h[2]=b[2];h[3]=b[3];h[4]=b[4];h[5]=b[5];h[6]=b[6];h[7]=b[7];h[8]=b[8];h[9]=b[9];h[10]=b[10];h[11]=b[11];h[12]=b[12];h[13]=b[13];h[14]=b[14];h[15]=b[15];return this},copyPosition:function(b){var h=this.elements;b=b.elements;h[12]=b[12];h[13]=b[13];h[14]=b[14];return this},extractBasis:function(b,h,a){b.setFromMatrixColumn(this,0);h.setFromMatrixColumn(this,1);a.setFromMatrixColumn(this,2);return this},makeBasis:function(b,h,a){this.set(b.x,h.x,a.x,0,b.y,h.y,a.y,0,b.z,h.z,a.z,0,0,0,0,1);return this},
      extractRotation:function(){var b=new a;return function(h){var a=this.elements,d=h.elements,f=1/b.setFromMatrixColumn(h,0).length(),g=1/b.setFromMatrixColumn(h,1).length();h=1/b.setFromMatrixColumn(h,2).length();a[0]=d[0]*f;a[1]=d[1]*f;a[2]=d[2]*f;a[4]=d[4]*g;a[5]=d[5]*g;a[6]=d[6]*g;a[8]=d[8]*h;a[9]=d[9]*h;a[10]=d[10]*h;return this}}(),makeRotationFromEuler:function(b){b&&b.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
        var h=this.elements,a=b.x,d=b.y,f=b.z,g=Math.cos(a),a=Math.sin(a),e=Math.cos(d),d=Math.sin(d),k=Math.cos(f),f=Math.sin(f);if("XYZ"===b.order){b=g*k;var m=g*f,l=a*k,n=a*f;h[0]=e*k;h[4]=-e*f;h[8]=d;h[1]=m+l*d;h[5]=b-n*d;h[9]=-a*e;h[2]=n-b*d;h[6]=l+m*d;h[10]=g*e}else"YXZ"===b.order?(b=e*k,m=e*f,l=d*k,n=d*f,h[0]=b+n*a,h[4]=l*a-m,h[8]=g*d,h[1]=g*f,h[5]=g*k,h[9]=-a,h[2]=m*a-l,h[6]=n+b*a,h[10]=g*e):"ZXY"===b.order?(b=e*k,m=e*f,l=d*k,n=d*f,h[0]=b-n*a,h[4]=-g*f,h[8]=l+m*a,h[1]=m+l*a,h[5]=g*k,h[9]=n-b*a,h[2]=
          -g*d,h[6]=a,h[10]=g*e):"ZYX"===b.order?(b=g*k,m=g*f,l=a*k,n=a*f,h[0]=e*k,h[4]=l*d-m,h[8]=b*d+n,h[1]=e*f,h[5]=n*d+b,h[9]=m*d-l,h[2]=-d,h[6]=a*e,h[10]=g*e):"YZX"===b.order?(b=g*e,m=g*d,l=a*e,n=a*d,h[0]=e*k,h[4]=n-b*f,h[8]=l*f+m,h[1]=f,h[5]=g*k,h[9]=-a*k,h[2]=-d*k,h[6]=m*f+l,h[10]=b-n*f):"XZY"===b.order&&(b=g*e,m=g*d,l=a*e,n=a*d,h[0]=e*k,h[4]=-f,h[8]=d*k,h[1]=b*f+n,h[5]=g*k,h[9]=m*f-l,h[2]=l*f-m,h[6]=a*k,h[10]=n*f+b);h[3]=0;h[7]=0;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return this},makeRotationFromQuaternion:function(b){var h=
        this.elements,a=b._x,d=b._y,f=b._z,g=b._w,e=a+a,k=d+d,m=f+f;b=a*e;var l=a*k,a=a*m,n=d*k,d=d*m,f=f*m,e=g*e,k=g*k,g=g*m;h[0]=1-(n+f);h[4]=l-g;h[8]=a+k;h[1]=l+g;h[5]=1-(b+f);h[9]=d-e;h[2]=a-k;h[6]=d+e;h[10]=1-(b+n);h[3]=0;h[7]=0;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return this},lookAt:function(){var b=new a,h=new a,p=new a;return function(a,d,f){var g=this.elements;p.subVectors(a,d);0===p.lengthSq()&&(p.z=1);p.normalize();b.crossVectors(f,p);0===b.lengthSq()&&(1===Math.abs(f.z)?p.x+=1E-4:p.z+=1E-4,
        p.normalize(),b.crossVectors(f,p));b.normalize();h.crossVectors(p,b);g[0]=b.x;g[4]=h.x;g[8]=p.x;g[1]=b.y;g[5]=h.y;g[9]=p.y;g[2]=b.z;g[6]=h.z;g[10]=p.z;return this}}(),multiply:function(b,h){return void 0!==h?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(b,h)):this.multiplyMatrices(this,b)},premultiply:function(b){return this.multiplyMatrices(b,this)},multiplyMatrices:function(b,h){var a=b.elements,d=h.elements,
        f=this.elements,g=a[0],e=a[4],k=a[8],m=a[12],l=a[1],n=a[5],r=a[9],q=a[13],u=a[2],v=a[6],t=a[10],w=a[14],D=a[3],x=a[7],y=a[11],a=a[15],F=d[0],z=d[4],P=d[8],B=d[12],N=d[1],A=d[5],C=d[9],Pa=d[13],ra=d[2],ma=d[6],O=d[10],X=d[14],L=d[3],oa=d[7],I=d[11],d=d[15];f[0]=g*F+e*N+k*ra+m*L;f[4]=g*z+e*A+k*ma+m*oa;f[8]=g*P+e*C+k*O+m*I;f[12]=g*B+e*Pa+k*X+m*d;f[1]=l*F+n*N+r*ra+q*L;f[5]=l*z+n*A+r*ma+q*oa;f[9]=l*P+n*C+r*O+q*I;f[13]=l*B+n*Pa+r*X+q*d;f[2]=u*F+v*N+t*ra+w*L;f[6]=u*z+v*A+t*ma+w*oa;f[10]=u*P+v*C+t*O+w*I;
        f[14]=u*B+v*Pa+t*X+w*d;f[3]=D*F+x*N+y*ra+a*L;f[7]=D*z+x*A+y*ma+a*oa;f[11]=D*P+x*C+y*O+a*I;f[15]=D*B+x*Pa+y*X+a*d;return this},multiplyScalar:function(b){var h=this.elements;h[0]*=b;h[4]*=b;h[8]*=b;h[12]*=b;h[1]*=b;h[5]*=b;h[9]*=b;h[13]*=b;h[2]*=b;h[6]*=b;h[10]*=b;h[14]*=b;h[3]*=b;h[7]*=b;h[11]*=b;h[15]*=b;return this},applyToBufferAttribute:function(){var b=new a;return function(h){for(var a=0,d=h.count;a<d;a++)b.x=h.getX(a),b.y=h.getY(a),b.z=h.getZ(a),b.applyMatrix4(this),h.setXYZ(a,b.x,b.y,b.z);
        return h}}(),determinant:function(){var b=this.elements,h=b[0],a=b[4],d=b[8],f=b[12],g=b[1],e=b[5],k=b[9],m=b[13],l=b[2],n=b[6],r=b[10],q=b[14];return b[3]*(+f*k*n-d*m*n-f*e*r+a*m*r+d*e*q-a*k*q)+b[7]*(+h*k*q-h*m*r+f*g*r-d*g*q+d*m*l-f*k*l)+b[11]*(+h*m*n-h*e*q-f*g*n+a*g*q+f*e*l-a*m*l)+b[15]*(-d*e*l-h*k*n+h*e*r+d*g*n-a*g*r+a*k*l)},transpose:function(){var b=this.elements,h;h=b[1];b[1]=b[4];b[4]=h;h=b[2];b[2]=b[8];b[8]=h;h=b[6];b[6]=b[9];b[9]=h;h=b[3];b[3]=b[12];b[12]=h;h=b[7];b[7]=b[13];b[13]=h;h=b[11];
        b[11]=b[14];b[14]=h;return this},setPosition:function(b){var h=this.elements;h[12]=b.x;h[13]=b.y;h[14]=b.z;return this},getInverse:function(b,h){var a=this.elements,d=b.elements,f=d[0],g=d[1],e=d[2],k=d[3],m=d[4],l=d[5],n=d[6],r=d[7],q=d[8],u=d[9],v=d[10],t=d[11],w=d[12],D=d[13],x=d[14],d=d[15],y=u*x*r-D*v*r+D*n*t-l*x*t-u*n*d+l*v*d,F=w*v*r-q*x*r-w*n*t+m*x*t+q*n*d-m*v*d,z=q*D*r-w*u*r+w*l*t-m*D*t-q*l*d+m*u*d,P=w*u*n-q*D*n-w*l*v+m*D*v+q*l*x-m*u*x,B=f*y+g*F+e*z+k*P;if(0===B){if(!0===h)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");
        console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}B=1/B;a[0]=y*B;a[1]=(D*v*k-u*x*k-D*e*t+g*x*t+u*e*d-g*v*d)*B;a[2]=(l*x*k-D*n*k+D*e*r-g*x*r-l*e*d+g*n*d)*B;a[3]=(u*n*k-l*v*k-u*e*r+g*v*r+l*e*t-g*n*t)*B;a[4]=F*B;a[5]=(q*x*k-w*v*k+w*e*t-f*x*t-q*e*d+f*v*d)*B;a[6]=(w*n*k-m*x*k-w*e*r+f*x*r+m*e*d-f*n*d)*B;a[7]=(m*v*k-q*n*k+q*e*r-f*v*r-m*e*t+f*n*t)*B;a[8]=z*B;a[9]=(w*u*k-q*D*k-w*g*t+f*D*t+q*g*d-f*u*d)*B;a[10]=(m*D*k-w*l*k+w*g*r-f*D*r-m*g*d+f*l*d)*B;a[11]=
        (q*l*k-m*u*k-q*g*r+f*u*r+m*g*t-f*l*t)*B;a[12]=P*B;a[13]=(q*D*e-w*u*e+w*g*v-f*D*v-q*g*x+f*u*x)*B;a[14]=(w*l*e-m*D*e-w*g*n+f*D*n+m*g*x-f*l*x)*B;a[15]=(m*u*e-q*l*e+q*g*n-f*u*n-m*g*v+f*l*v)*B;return this},scale:function(b){var h=this.elements,a=b.x,d=b.y;b=b.z;h[0]*=a;h[4]*=d;h[8]*=b;h[1]*=a;h[5]*=d;h[9]*=b;h[2]*=a;h[6]*=d;h[10]*=b;h[3]*=a;h[7]*=d;h[11]*=b;return this},getMaxScaleOnAxis:function(){var b=this.elements;return Math.sqrt(Math.max(b[0]*b[0]+b[1]*b[1]+b[2]*b[2],b[4]*b[4]+b[5]*b[5]+b[6]*b[6],
        b[8]*b[8]+b[9]*b[9]+b[10]*b[10]))},makeTranslation:function(b,h,a){this.set(1,0,0,b,0,1,0,h,0,0,1,a,0,0,0,1);return this},makeRotationX:function(b){var h=Math.cos(b);b=Math.sin(b);this.set(1,0,0,0,0,h,-b,0,0,b,h,0,0,0,0,1);return this},makeRotationY:function(b){var h=Math.cos(b);b=Math.sin(b);this.set(h,0,b,0,0,1,0,0,-b,0,h,0,0,0,0,1);return this},makeRotationZ:function(b){var h=Math.cos(b);b=Math.sin(b);this.set(h,-b,0,0,b,h,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(b,h){var a=
        Math.cos(h),d=Math.sin(h),f=1-a,g=b.x,e=b.y,k=b.z,m=f*g,l=f*e;this.set(m*g+a,m*e-d*k,m*k+d*e,0,m*e+d*k,l*e+a,l*k-d*g,0,m*k-d*e,l*k+d*g,f*k*k+a,0,0,0,0,1);return this},makeScale:function(b,h,a){this.set(b,0,0,0,0,h,0,0,0,0,a,0,0,0,0,1);return this},makeShear:function(b,h,a){this.set(1,h,a,0,b,1,a,0,b,h,1,0,0,0,0,1);return this},compose:function(b,h,a){this.makeRotationFromQuaternion(h);this.scale(a);this.setPosition(b);return this},decompose:function(){var b=new a,h=new m;return function(a,d,f){var g=
        this.elements,e=b.set(g[0],g[1],g[2]).length(),k=b.set(g[4],g[5],g[6]).length(),m=b.set(g[8],g[9],g[10]).length();0>this.determinant()&&(e=-e);a.x=g[12];a.y=g[13];a.z=g[14];h.copy(this);a=1/e;var g=1/k,l=1/m;h.elements[0]*=a;h.elements[1]*=a;h.elements[2]*=a;h.elements[4]*=g;h.elements[5]*=g;h.elements[6]*=g;h.elements[8]*=l;h.elements[9]*=l;h.elements[10]*=l;d.setFromRotationMatrix(h);f.x=e;f.y=k;f.z=m;return this}}(),makePerspective:function(b,h,a,d,f,g){void 0===g&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
        var e=this.elements;e[0]=2*f/(h-b);e[4]=0;e[8]=(h+b)/(h-b);e[12]=0;e[1]=0;e[5]=2*f/(a-d);e[9]=(a+d)/(a-d);e[13]=0;e[2]=0;e[6]=0;e[10]=-(g+f)/(g-f);e[14]=-2*g*f/(g-f);e[3]=0;e[7]=0;e[11]=-1;e[15]=0;return this},makeOrthographic:function(b,h,a,d,f,g){var e=this.elements,k=1/(h-b),m=1/(a-d),l=1/(g-f);e[0]=2*k;e[4]=0;e[8]=0;e[12]=-((h+b)*k);e[1]=0;e[5]=2*m;e[9]=0;e[13]=-((a+d)*m);e[2]=0;e[6]=0;e[10]=-2*l;e[14]=-((g+f)*l);e[3]=0;e[7]=0;e[11]=0;e[15]=1;return this},equals:function(b){var h=this.elements;
        b=b.elements;for(var a=0;16>a;a++)if(h[a]!==b[a])return!1;return!0},fromArray:function(b,h){void 0===h&&(h=0);for(var a=0;16>a;a++)this.elements[a]=b[a+h];return this},toArray:function(b,h){void 0===b&&(b=[]);void 0===h&&(h=0);var a=this.elements;b[h]=a[0];b[h+1]=a[1];b[h+2]=a[2];b[h+3]=a[3];b[h+4]=a[4];b[h+5]=a[5];b[h+6]=a[6];b[h+7]=a[7];b[h+8]=a[8];b[h+9]=a[9];b[h+10]=a[10];b[h+11]=a[11];b[h+12]=a[12];b[h+13]=a[13];b[h+14]=a[14];b[h+15]=a[15];return b}});Object.assign(d,{slerp:function(b,h,a,d){return a.copy(b).slerp(h,
        d)},slerpFlat:function(b,h,a,d,f,g,e){var k=a[d+0],m=a[d+1],l=a[d+2];a=a[d+3];d=f[g+0];var n=f[g+1],r=f[g+2];f=f[g+3];if(a!==f||k!==d||m!==n||l!==r){g=1-e;var q=k*d+m*n+l*r+a*f,u=0<=q?1:-1,v=1-q*q;v>Number.EPSILON&&(v=Math.sqrt(v),q=Math.atan2(v,q*u),g=Math.sin(g*q)/v,e=Math.sin(e*q)/v);u*=e;k=k*g+d*u;m=m*g+n*u;l=l*g+r*u;a=a*g+f*u;g===1-e&&(e=1/Math.sqrt(k*k+m*m+l*l+a*a),k*=e,m*=e,l*=e,a*=e)}b[h]=k;b[h+1]=m;b[h+2]=l;b[h+3]=a}});Object.defineProperties(d.prototype,{x:{get:function(){return this._x},
        set:function(b){this._x=b;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(b){this._y=b;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(b){this._z=b;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(b){this._w=b;this.onChangeCallback()}}});Object.assign(d.prototype,{set:function(b,h,a,d){this._x=b;this._y=h;this._z=a;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,
        this._w)},copy:function(b){this._x=b.x;this._y=b.y;this._z=b.z;this._w=b.w;this.onChangeCallback();return this},setFromEuler:function(b,h){if(!b||!b.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var a=b._x,d=b._y,f=b._z,g=b.order,e=Math.cos,k=Math.sin,m=e(a/2),l=e(d/2),e=e(f/2),a=k(a/2),d=k(d/2),f=k(f/2);"XYZ"===g?(this._x=a*l*e+m*d*f,this._y=m*d*e-a*l*f,this._z=m*l*f+a*d*e,this._w=m*l*e-a*d*f):"YXZ"===g?(this._x=a*l*e+m*d*
        f,this._y=m*d*e-a*l*f,this._z=m*l*f-a*d*e,this._w=m*l*e+a*d*f):"ZXY"===g?(this._x=a*l*e-m*d*f,this._y=m*d*e+a*l*f,this._z=m*l*f+a*d*e,this._w=m*l*e-a*d*f):"ZYX"===g?(this._x=a*l*e-m*d*f,this._y=m*d*e+a*l*f,this._z=m*l*f-a*d*e,this._w=m*l*e+a*d*f):"YZX"===g?(this._x=a*l*e+m*d*f,this._y=m*d*e+a*l*f,this._z=m*l*f-a*d*e,this._w=m*l*e-a*d*f):"XZY"===g&&(this._x=a*l*e-m*d*f,this._y=m*d*e-a*l*f,this._z=m*l*f+a*d*e,this._w=m*l*e+a*d*f);if(!1!==h)this.onChangeCallback();return this},setFromAxisAngle:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 h){var a=h/2,d=Math.sin(a);this._x=b.x*d;this._y=b.y*d;this._z=b.z*d;this._w=Math.cos(a);this.onChangeCallback();return this},setFromRotationMatrix:function(b){var h=b.elements,a=h[0];b=h[4];var d=h[8],f=h[1],g=h[5],e=h[9],k=h[2],m=h[6],h=h[10],l=a+g+h;0<l?(a=.5/Math.sqrt(l+1),this._w=.25/a,this._x=(m-e)*a,this._y=(d-k)*a,this._z=(f-b)*a):a>g&&a>h?(a=2*Math.sqrt(1+a-g-h),this._w=(m-e)/a,this._x=.25*a,this._y=(b+f)/a,this._z=(d+k)/a):g>h?(a=2*Math.sqrt(1+g-a-h),this._w=(d-k)/a,this._x=(b+f)/a,this._y=
        .25*a,this._z=(e+m)/a):(a=2*Math.sqrt(1+h-a-g),this._w=(f-b)/a,this._x=(d+k)/a,this._y=(e+m)/a,this._z=.25*a);this.onChangeCallback();return this},setFromUnitVectors:function(){var b=new a,h;return function(p,d){void 0===b&&(b=new a);h=p.dot(d)+1;1E-6>h?(h=0,Math.abs(p.x)>Math.abs(p.z)?b.set(-p.y,p.x,0):b.set(0,-p.z,p.y)):b.crossVectors(p,d);this._x=b.x;this._y=b.y;this._z=b.z;this._w=h;return this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=
        -1;this._z*=-1;this.onChangeCallback();return this},dot:function(b){return this._x*b._x+this._y*b._y+this._z*b._z+this._w*b._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var b=this.length();0===b?(this._z=this._y=this._x=0,this._w=1):(b=1/b,this._x*=b,this._y*=b,this._z*=b,this._w*=b);this.onChangeCallback();return this},multiply:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         h){return void 0!==h?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(b,h)):this.multiplyQuaternions(this,b)},premultiply:function(b){return this.multiplyQuaternions(b,this)},multiplyQuaternions:function(b,h){var a=b._x,d=b._y,f=b._z,g=b._w,e=h._x,k=h._y,m=h._z,l=h._w;this._x=a*l+g*e+d*m-f*k;this._y=d*l+g*k+f*e-a*m;this._z=f*l+g*m+a*k-d*e;this._w=g*l-a*e-d*k-f*m;this.onChangeCallback();return this},slerp:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          h){if(0===h)return this;if(1===h)return this.copy(b);var a=this._x,d=this._y,f=this._z,g=this._w,e=g*b._w+a*b._x+d*b._y+f*b._z;0>e?(this._w=-b._w,this._x=-b._x,this._y=-b._y,this._z=-b._z,e=-e):this.copy(b);if(1<=e)return this._w=g,this._x=a,this._y=d,this._z=f,this;var k=Math.sqrt(1-e*e);if(.001>Math.abs(k))return this._w=.5*(g+this._w),this._x=.5*(a+this._x),this._y=.5*(d+this._y),this._z=.5*(f+this._z),this;var m=Math.atan2(k,e),e=Math.sin((1-h)*m)/k,k=Math.sin(h*m)/k;this._w=g*e+this._w*k;this._x=
        a*e+this._x*k;this._y=d*e+this._y*k;this._z=f*e+this._z*k;this.onChangeCallback();return this},equals:function(b){return b._x===this._x&&b._y===this._y&&b._z===this._z&&b._w===this._w},fromArray:function(b,h){void 0===h&&(h=0);this._x=b[h];this._y=b[h+1];this._z=b[h+2];this._w=b[h+3];this.onChangeCallback();return this},toArray:function(b,h){void 0===b&&(b=[]);void 0===h&&(h=0);b[h]=this._x;b[h+1]=this._y;b[h+2]=this._z;b[h+3]=this._w;return b},onChange:function(b){this.onChangeCallback=b;return this},
      onChangeCallback:function(){}});Object.assign(a.prototype,{isVector3:!0,set:function(b,h,a){this.x=b;this.y=h;this.z=a;return this},setScalar:function(b){this.z=this.y=this.x=b;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setZ:function(b){this.z=b;return this},setComponent:function(b,h){switch(b){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;default:throw Error("index is out of range: "+b);}return this},getComponent:function(b){switch(b){case 0:return this.x;
        case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+b);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(b){this.x=b.x;this.y=b.y;this.z=b.z;return this},add:function(b,h){if(void 0!==h)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(b,h);this.x+=b.x;this.y+=b.y;this.z+=b.z;return this},addScalar:function(b){this.x+=b;this.y+=b;this.z+=b;return this},
      addVectors:function(b,h){this.x=b.x+h.x;this.y=b.y+h.y;this.z=b.z+h.z;return this},addScaledVector:function(b,h){this.x+=b.x*h;this.y+=b.y*h;this.z+=b.z*h;return this},sub:function(b,h){if(void 0!==h)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(b,h);this.x-=b.x;this.y-=b.y;this.z-=b.z;return this},subScalar:function(b){this.x-=b;this.y-=b;this.z-=b;return this},subVectors:function(b,h){this.x=b.x-h.x;this.y=b.y-h.y;this.z=
        b.z-h.z;return this},multiply:function(b,h){if(void 0!==h)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(b,h);this.x*=b.x;this.y*=b.y;this.z*=b.z;return this},multiplyScalar:function(b){this.x*=b;this.y*=b;this.z*=b;return this},multiplyVectors:function(b,h){this.x=b.x*h.x;this.y=b.y*h.y;this.z=b.z*h.z;return this},applyEuler:function(){var b=new d;return function(h){h&&h.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");
        return this.applyQuaternion(b.setFromEuler(h))}}(),applyAxisAngle:function(){var b=new d;return function(h,a){return this.applyQuaternion(b.setFromAxisAngle(h,a))}}(),applyMatrix3:function(b){var h=this.x,a=this.y,d=this.z;b=b.elements;this.x=b[0]*h+b[3]*a+b[6]*d;this.y=b[1]*h+b[4]*a+b[7]*d;this.z=b[2]*h+b[5]*a+b[8]*d;return this},applyMatrix4:function(b){var h=this.x,a=this.y,d=this.z;b=b.elements;var f=1/(b[3]*h+b[7]*a+b[11]*d+b[15]);this.x=(b[0]*h+b[4]*a+b[8]*d+b[12])*f;this.y=(b[1]*h+b[5]*a+b[9]*
        d+b[13])*f;this.z=(b[2]*h+b[6]*a+b[10]*d+b[14])*f;return this},applyQuaternion:function(b){var h=this.x,a=this.y,d=this.z,f=b.x,g=b.y,e=b.z;b=b.w;var k=b*h+g*d-e*a,m=b*a+e*h-f*d,l=b*d+f*a-g*h,h=-f*h-g*a-e*d;this.x=k*b+h*-f+m*-e-l*-g;this.y=m*b+h*-g+l*-f-k*-e;this.z=l*b+h*-e+k*-g-m*-f;return this},project:function(){var b=new m;return function(h){b.multiplyMatrices(h.projectionMatrix,b.getInverse(h.matrixWorld));return this.applyMatrix4(b)}}(),unproject:function(){var b=new m;return function(h){b.multiplyMatrices(h.matrixWorld,
        b.getInverse(h.projectionMatrix));return this.applyMatrix4(b)}}(),transformDirection:function(b){var h=this.x,a=this.y,d=this.z;b=b.elements;this.x=b[0]*h+b[4]*a+b[8]*d;this.y=b[1]*h+b[5]*a+b[9]*d;this.z=b[2]*h+b[6]*a+b[10]*d;return this.normalize()},divide:function(b){this.x/=b.x;this.y/=b.y;this.z/=b.z;return this},divideScalar:function(b){return this.multiplyScalar(1/b)},min:function(b){this.x=Math.min(this.x,b.x);this.y=Math.min(this.y,b.y);this.z=Math.min(this.z,b.z);return this},max:function(b){this.x=
        Math.max(this.x,b.x);this.y=Math.max(this.y,b.y);this.z=Math.max(this.z,b.z);return this},clamp:function(b,h){this.x=Math.max(b.x,Math.min(h.x,this.x));this.y=Math.max(b.y,Math.min(h.y,this.y));this.z=Math.max(b.z,Math.min(h.z,this.z));return this},clampScalar:function(){var b=new a,h=new a;return function(a,d){b.set(a,a,a);h.set(d,d,d);return this.clamp(b,h)}}(),clampLength:function(b,h){var a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(b,Math.min(h,a)))},floor:function(){this.x=
        Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=
        -this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(b){return this.x*b.x+this.y*b.y+this.z*b.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(b){return this.normalize().multiplyScalar(b)},lerp:function(b,h){this.x+=(b.x-
        this.x)*h;this.y+=(b.y-this.y)*h;this.z+=(b.z-this.z)*h;return this},lerpVectors:function(b,h,a){return this.subVectors(h,b).multiplyScalar(a).add(b)},cross:function(b,h){return void 0!==h?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(b,h)):this.crossVectors(this,b)},crossVectors:function(b,h){var a=b.x,d=b.y,f=b.z,g=h.x,e=h.y,k=h.z;this.x=d*k-f*e;this.y=f*g-a*k;this.z=a*e-d*g;return this},projectOnVector:function(b){var h=
        b.dot(this)/b.lengthSq();return this.copy(b).multiplyScalar(h)},projectOnPlane:function(){var b=new a;return function(h){b.copy(this).projectOnVector(h);return this.sub(b)}}(),reflect:function(){var b=new a;return function(h){return this.sub(b.copy(h).multiplyScalar(2*this.dot(h)))}}(),angleTo:function(b){b=this.dot(b)/Math.sqrt(this.lengthSq()*b.lengthSq());return Math.acos(qa.clamp(b,-1,1))},distanceTo:function(b){return Math.sqrt(this.distanceToSquared(b))},distanceToSquared:function(b){var h=
        this.x-b.x,a=this.y-b.y;b=this.z-b.z;return h*h+a*a+b*b},manhattanDistanceTo:function(b){return Math.abs(this.x-b.x)+Math.abs(this.y-b.y)+Math.abs(this.z-b.z)},setFromSpherical:function(b){var h=Math.sin(b.phi)*b.radius;this.x=h*Math.sin(b.theta);this.y=Math.cos(b.phi)*b.radius;this.z=h*Math.cos(b.theta);return this},setFromCylindrical:function(b){this.x=b.radius*Math.sin(b.theta);this.y=b.y;this.z=b.radius*Math.cos(b.theta);return this},setFromMatrixPosition:function(b){b=b.elements;this.x=b[12];
        this.y=b[13];this.z=b[14];return this},setFromMatrixScale:function(b){var h=this.setFromMatrixColumn(b,0).length(),a=this.setFromMatrixColumn(b,1).length();b=this.setFromMatrixColumn(b,2).length();this.x=h;this.y=a;this.z=b;return this},setFromMatrixColumn:function(b,h){return this.fromArray(b.elements,4*h)},equals:function(b){return b.x===this.x&&b.y===this.y&&b.z===this.z},fromArray:function(b,h){void 0===h&&(h=0);this.x=b[h];this.y=b[h+1];this.z=b[h+2];return this},toArray:function(b,h){void 0===
      b&&(b=[]);void 0===h&&(h=0);b[h]=this.x;b[h+1]=this.y;b[h+2]=this.z;return b},fromBufferAttribute:function(b,h,a){void 0!==a&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=b.getX(h);this.y=b.getY(h);this.z=b.getZ(h);return this}});Object.assign(k.prototype,{isMatrix3:!0,set:function(b,h,a,d,f,g,e,k,m){var l=this.elements;l[0]=b;l[1]=d;l[2]=e;l[3]=h;l[4]=f;l[5]=k;l[6]=a;l[7]=g;l[8]=m;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},
      clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(b){var h=this.elements;b=b.elements;h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];h[4]=b[4];h[5]=b[5];h[6]=b[6];h[7]=b[7];h[8]=b[8];return this},setFromMatrix4:function(b){b=b.elements;this.set(b[0],b[4],b[8],b[1],b[5],b[9],b[2],b[6],b[10]);return this},applyToBufferAttribute:function(){var b=new a;return function(h){for(var a=0,d=h.count;a<d;a++)b.x=h.getX(a),b.y=h.getY(a),b.z=h.getZ(a),b.applyMatrix3(this),h.setXYZ(a,
        b.x,b.y,b.z);return h}}(),multiply:function(b){return this.multiplyMatrices(this,b)},premultiply:function(b){return this.multiplyMatrices(b,this)},multiplyMatrices:function(b,h){var a=b.elements,d=h.elements,f=this.elements,g=a[0],e=a[3],k=a[6],m=a[1],l=a[4],n=a[7],r=a[2],q=a[5],a=a[8],u=d[0],v=d[3],t=d[6],w=d[1],D=d[4],x=d[7],y=d[2],F=d[5],d=d[8];f[0]=g*u+e*w+k*y;f[3]=g*v+e*D+k*F;f[6]=g*t+e*x+k*d;f[1]=m*u+l*w+n*y;f[4]=m*v+l*D+n*F;f[7]=m*t+l*x+n*d;f[2]=r*u+q*w+a*y;f[5]=r*v+q*D+a*F;f[8]=r*t+q*x+a*
        d;return this},multiplyScalar:function(b){var h=this.elements;h[0]*=b;h[3]*=b;h[6]*=b;h[1]*=b;h[4]*=b;h[7]*=b;h[2]*=b;h[5]*=b;h[8]*=b;return this},determinant:function(){var b=this.elements,h=b[0],a=b[1],d=b[2],f=b[3],g=b[4],e=b[5],k=b[6],m=b[7],b=b[8];return h*g*b-h*e*m-a*f*b+a*e*k+d*f*m-d*g*k},getInverse:function(b,h){b&&b.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var a=b.elements,d=this.elements,f=a[0],g=a[1],e=a[2],k=a[3],m=a[4],l=a[5],n=a[6],
        r=a[7],a=a[8],q=a*m-l*r,u=l*n-a*k,v=r*k-m*n,t=f*q+g*u+e*v;if(0===t){if(!0===h)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return this.identity()}t=1/t;d[0]=q*t;d[1]=(e*r-a*g)*t;d[2]=(l*g-e*m)*t;d[3]=u*t;d[4]=(a*f-e*n)*t;d[5]=(e*k-l*f)*t;d[6]=v*t;d[7]=(g*n-r*f)*t;d[8]=(m*f-g*k)*t;return this},transpose:function(){var b,h=this.elements;b=h[1];h[1]=h[3];h[3]=b;b=h[2];h[2]=h[6];h[6]=
        b;b=h[5];h[5]=h[7];h[7]=b;return this},getNormalMatrix:function(b){return this.setFromMatrix4(b).getInverse(this).transpose()},transposeIntoArray:function(b){var h=this.elements;b[0]=h[0];b[1]=h[3];b[2]=h[6];b[3]=h[1];b[4]=h[4];b[5]=h[7];b[6]=h[2];b[7]=h[5];b[8]=h[8];return this},setUvTransform:function(b,h,a,d,f,g,e){var k=Math.cos(f);f=Math.sin(f);this.set(a*k,a*f,-a*(k*g+f*e)+g+b,-d*f,d*k,-d*(-f*g+k*e)+e+h,0,0,1)},scale:function(b,h){var a=this.elements;a[0]*=b;a[3]*=b;a[6]*=b;a[1]*=h;a[4]*=h;
        a[7]*=h;return this},rotate:function(b){var h=Math.cos(b);b=Math.sin(b);var a=this.elements,d=a[0],f=a[3],g=a[6],e=a[1],k=a[4],m=a[7];a[0]=h*d+b*e;a[3]=h*f+b*k;a[6]=h*g+b*m;a[1]=-b*d+h*e;a[4]=-b*f+h*k;a[7]=-b*g+h*m;return this},translate:function(b,h){var a=this.elements;a[0]+=b*a[2];a[3]+=b*a[5];a[6]+=b*a[8];a[1]+=h*a[2];a[4]+=h*a[5];a[7]+=h*a[8];return this},equals:function(b){var h=this.elements;b=b.elements;for(var a=0;9>a;a++)if(h[a]!==b[a])return!1;return!0},fromArray:function(b,h){void 0===
      h&&(h=0);for(var a=0;9>a;a++)this.elements[a]=b[a+h];return this},toArray:function(b,h){void 0===b&&(b=[]);void 0===h&&(h=0);var a=this.elements;b[h]=a[0];b[h+1]=a[1];b[h+2]=a[2];b[h+3]=a[3];b[h+4]=a[4];b[h+5]=a[5];b[h+6]=a[6];b[h+7]=a[7];b[h+8]=a[8];return b}});var Tf=0;r.DEFAULT_IMAGE=void 0;r.DEFAULT_MAPPING=300;r.prototype=Object.assign(Object.create(n.prototype),{constructor:r,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.name=b.name;this.image=
        b.image;this.mipmaps=b.mipmaps.slice(0);this.mapping=b.mapping;this.wrapS=b.wrapS;this.wrapT=b.wrapT;this.magFilter=b.magFilter;this.minFilter=b.minFilter;this.anisotropy=b.anisotropy;this.format=b.format;this.type=b.type;this.offset.copy(b.offset);this.repeat.copy(b.repeat);this.center.copy(b.center);this.rotation=b.rotation;this.matrixAutoUpdate=b.matrixAutoUpdate;this.matrix.copy(b.matrix);this.generateMipmaps=b.generateMipmaps;this.premultiplyAlpha=b.premultiplyAlpha;this.flipY=b.flipY;this.unpackAlignment=
        b.unpackAlignment;this.encoding=b.encoding;return this},toJSON:function(b){var h=void 0===b||"string"===typeof b;if(!h&&void 0!==b.textures[this.uuid])return b.textures[this.uuid];var a={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,
        anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var d=this.image;void 0===d.uuid&&(d.uuid=qa.generateUUID());if(!h&&void 0===b.images[d.uuid]){var f=b.images,g=d.uuid,e=d.uuid,k;if(d instanceof HTMLCanvasElement)k=d;else{k=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");k.width=d.width;k.height=d.height;var m=k.getContext("2d");d instanceof ImageData?m.putImageData(d,0,0):m.drawImage(d,0,0,d.width,d.height)}k=2048<k.width||2048<k.height?k.toDataURL("image/jpeg",
        .6):k.toDataURL("image/png");f[g]={uuid:e,url:k}}a.image=d.uuid}h||(b.textures[this.uuid]=a);return a},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(b){if(300===this.mapping){b.applyMatrix3(this.matrix);if(0>b.x||1<b.x)switch(this.wrapS){case 1E3:b.x-=Math.floor(b.x);break;case 1001:b.x=0>b.x?0:1;break;case 1002:1===Math.abs(Math.floor(b.x)%2)?b.x=Math.ceil(b.x)-b.x:b.x-=Math.floor(b.x)}if(0>b.y||1<b.y)switch(this.wrapT){case 1E3:b.y-=Math.floor(b.y);break;case 1001:b.y=
        0>b.y?0:1;break;case 1002:1===Math.abs(Math.floor(b.y)%2)?b.y=Math.ceil(b.y)-b.y:b.y-=Math.floor(b.y)}this.flipY&&(b.y=1-b.y)}}});Object.defineProperty(r.prototype,"needsUpdate",{set:function(b){!0===b&&this.version++}});Object.assign(f.prototype,{isVector4:!0,set:function(b,h,a,d){this.x=b;this.y=h;this.z=a;this.w=d;return this},setScalar:function(b){this.w=this.z=this.y=this.x=b;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setZ:function(b){this.z=b;
        return this},setW:function(b){this.w=b;return this},setComponent:function(b,h){switch(b){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;case 3:this.w=h;break;default:throw Error("index is out of range: "+b);}return this},getComponent:function(b){switch(b){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+b);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(b){this.x=
        b.x;this.y=b.y;this.z=b.z;this.w=void 0!==b.w?b.w:1;return this},add:function(b,h){if(void 0!==h)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(b,h);this.x+=b.x;this.y+=b.y;this.z+=b.z;this.w+=b.w;return this},addScalar:function(b){this.x+=b;this.y+=b;this.z+=b;this.w+=b;return this},addVectors:function(b,h){this.x=b.x+h.x;this.y=b.y+h.y;this.z=b.z+h.z;this.w=b.w+h.w;return this},addScaledVector:function(b,h){this.x+=b.x*
        h;this.y+=b.y*h;this.z+=b.z*h;this.w+=b.w*h;return this},sub:function(b,h){if(void 0!==h)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(b,h);this.x-=b.x;this.y-=b.y;this.z-=b.z;this.w-=b.w;return this},subScalar:function(b){this.x-=b;this.y-=b;this.z-=b;this.w-=b;return this},subVectors:function(b,h){this.x=b.x-h.x;this.y=b.y-h.y;this.z=b.z-h.z;this.w=b.w-h.w;return this},multiplyScalar:function(b){this.x*=b;this.y*=b;this.z*=
        b;this.w*=b;return this},applyMatrix4:function(b){var h=this.x,a=this.y,d=this.z,f=this.w;b=b.elements;this.x=b[0]*h+b[4]*a+b[8]*d+b[12]*f;this.y=b[1]*h+b[5]*a+b[9]*d+b[13]*f;this.z=b[2]*h+b[6]*a+b[10]*d+b[14]*f;this.w=b[3]*h+b[7]*a+b[11]*d+b[15]*f;return this},divideScalar:function(b){return this.multiplyScalar(1/b)},setAxisAngleFromQuaternion:function(b){this.w=2*Math.acos(b.w);var h=Math.sqrt(1-b.w*b.w);1E-4>h?(this.x=1,this.z=this.y=0):(this.x=b.x/h,this.y=b.y/h,this.z=b.z/h);return this},setAxisAngleFromRotationMatrix:function(b){var h,
        a,d;b=b.elements;var f=b[0];d=b[4];var g=b[8],e=b[1],k=b[5],m=b[9];a=b[2];h=b[6];var l=b[10];if(.01>Math.abs(d-e)&&.01>Math.abs(g-a)&&.01>Math.abs(m-h)){if(.1>Math.abs(d+e)&&.1>Math.abs(g+a)&&.1>Math.abs(m+h)&&.1>Math.abs(f+k+l-3))return this.set(1,0,0,0),this;b=Math.PI;f=(f+1)/2;k=(k+1)/2;l=(l+1)/2;d=(d+e)/4;g=(g+a)/4;m=(m+h)/4;f>k&&f>l?.01>f?(h=0,d=a=.707106781):(h=Math.sqrt(f),a=d/h,d=g/h):k>l?.01>k?(h=.707106781,a=0,d=.707106781):(a=Math.sqrt(k),h=d/a,d=m/a):.01>l?(a=h=.707106781,d=0):(d=Math.sqrt(l),
        h=g/d,a=m/d);this.set(h,a,d,b);return this}b=Math.sqrt((h-m)*(h-m)+(g-a)*(g-a)+(e-d)*(e-d));.001>Math.abs(b)&&(b=1);this.x=(h-m)/b;this.y=(g-a)/b;this.z=(e-d)/b;this.w=Math.acos((f+k+l-1)/2);return this},min:function(b){this.x=Math.min(this.x,b.x);this.y=Math.min(this.y,b.y);this.z=Math.min(this.z,b.z);this.w=Math.min(this.w,b.w);return this},max:function(b){this.x=Math.max(this.x,b.x);this.y=Math.max(this.y,b.y);this.z=Math.max(this.z,b.z);this.w=Math.max(this.w,b.w);return this},clamp:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             h){this.x=Math.max(b.x,Math.min(h.x,this.x));this.y=Math.max(b.y,Math.min(h.y,this.y));this.z=Math.max(b.z,Math.min(h.z,this.z));this.w=Math.max(b.w,Math.min(h.w,this.w));return this},clampScalar:function(){var b,h;return function(a,d){void 0===b&&(b=new f,h=new f);b.set(a,a,a,a);h.set(d,d,d,d);return this.clamp(b,h)}}(),clampLength:function(b,h){var a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(b,Math.min(h,a)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);
        this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);
        this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(b){return this.x*b.x+this.y*b.y+this.z*b.z+this.w*b.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},
      normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(b){return this.normalize().multiplyScalar(b)},lerp:function(b,h){this.x+=(b.x-this.x)*h;this.y+=(b.y-this.y)*h;this.z+=(b.z-this.z)*h;this.w+=(b.w-this.w)*h;return this},lerpVectors:function(b,h,a){return this.subVectors(h,b).multiplyScalar(a).add(b)},equals:function(b){return b.x===this.x&&b.y===this.y&&b.z===this.z&&b.w===this.w},fromArray:function(b,h){void 0===h&&(h=0);this.x=b[h];this.y=b[h+1];this.z=b[h+2];this.w=
        b[h+3];return this},toArray:function(b,h){void 0===b&&(b=[]);void 0===h&&(h=0);b[h]=this.x;b[h+1]=this.y;b[h+2]=this.z;b[h+3]=this.w;return b},fromBufferAttribute:function(b,h,a){void 0!==a&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=b.getX(h);this.y=b.getY(h);this.z=b.getZ(h);this.w=b.getW(h);return this}});g.prototype=Object.assign(Object.create(n.prototype),{constructor:g,isWebGLRenderTarget:!0,setSize:function(b,h){if(this.width!==b||this.height!==
        h)this.width=b,this.height=h,this.dispose();this.viewport.set(0,0,b,h);this.scissor.set(0,0,b,h)},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.width=b.width;this.height=b.height;this.viewport.copy(b.viewport);this.texture=b.texture.clone();this.depthBuffer=b.depthBuffer;this.stencilBuffer=b.stencilBuffer;this.depthTexture=b.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});u.prototype=Object.create(g.prototype);u.prototype.constructor=
      u;u.prototype.isWebGLRenderTargetCube=!0;v.prototype=Object.create(r.prototype);v.prototype.constructor=v;v.prototype.isDataTexture=!0;q.prototype=Object.create(r.prototype);q.prototype.constructor=q;q.prototype.isCubeTexture=!0;Object.defineProperty(q.prototype,"images",{get:function(){return this.image},set:function(b){this.image=b}});var nf=new r,of=new q,jf=[],kf=[],mf=new Float32Array(16),lf=new Float32Array(9);Da.prototype.setValue=function(b,h){for(var a=this.seq,d=0,f=a.length;d!==f;++d){var g=
      a[d];g.setValue(b,h[g.id])}};var De=/([\w\d_]+)(\])?(\[|\.)?/g;ua.prototype.setValue=function(b,h,a){h=this.map[h];void 0!==h&&h.setValue(b,a,this.renderer)};ua.prototype.setOptional=function(b,h,a){h=h[a];void 0!==h&&this.setValue(b,a,h)};ua.upload=function(b,h,a,d){for(var f=0,g=h.length;f!==g;++f){var e=h[f],k=a[e.id];!1!==k.needsUpdate&&e.setValue(b,k.value,d)}};ua.seqWithValue=function(b,h){for(var a=[],d=0,f=b.length;d!==f;++d){var g=b[d];g.id in h&&a.push(g)}return a};var cg={aliceblue:15792383,
      antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,
      darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,
      indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,
      magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
      palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
      turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(S.prototype,{isColor:!0,r:1,g:1,b:1,set:function(b){b&&b.isColor?this.copy(b):"number"===typeof b?this.setHex(b):"string"===typeof b&&this.setStyle(b);return this},setScalar:function(b){this.b=this.g=this.r=b;return this},setHex:function(b){b=Math.floor(b);this.r=(b>>16&255)/255;this.g=(b>>8&255)/255;this.b=(b&255)/255;return this},setRGB:function(b,h,a){this.r=b;
        this.g=h;this.b=a;return this},setHSL:function(){function b(b,a,d){0>d&&(d+=1);1<d&&--d;return d<1/6?b+6*(a-b)*d:.5>d?a:d<2/3?b+6*(a-b)*(2/3-d):b}return function(h,a,d){h=qa.euclideanModulo(h,1);a=qa.clamp(a,0,1);d=qa.clamp(d,0,1);0===a?this.r=this.g=this.b=d:(a=.5>=d?d*(1+a):d+a-d*a,d=2*d-a,this.r=b(d,a,h+1/3),this.g=b(d,a,h),this.b=b(d,a,h-1/3));return this}}(),setStyle:function(b){function h(h){void 0!==h&&1>parseFloat(h)&&console.warn("THREE.Color: Alpha component of "+b+" will be ignored.")}
        var a;if(a=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var d=a[2];switch(a[1]){case "rgb":case "rgba":if(a=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,h(a[5]),this;if(a=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,
          this.b=Math.min(100,parseInt(a[3],10))/100,h(a[5]),this;break;case "hsl":case "hsla":if(a=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){var d=parseFloat(a[1])/360,f=parseInt(a[2],10)/100,g=parseInt(a[3],10)/100;h(a[5]);return this.setHSL(d,f,g)}}}else if(a=/^\#([A-Fa-f0-9]+)$/.exec(b)){a=a[1];d=a.length;if(3===d)return this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/
          255,this;if(6===d)return this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255,this}b&&0<b.length&&(a=cg[b],void 0!==a?this.setHex(a):console.warn("THREE.Color: Unknown color "+b));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(b){this.r=b.r;this.g=b.g;this.b=b.b;return this},copyGammaToLinear:function(b,h){void 0===h&&(h=2);this.r=Math.pow(b.r,h);this.g=Math.pow(b.g,
        h);this.b=Math.pow(b.b,h);return this},copyLinearToGamma:function(b,h){void 0===h&&(h=2);var a=0<h?1/h:1;this.r=Math.pow(b.r,a);this.g=Math.pow(b.g,a);this.b=Math.pow(b.b,a);return this},convertGammaToLinear:function(){var b=this.r,h=this.g,a=this.b;this.r=b*b;this.g=h*h;this.b=a*a;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+
        this.getHex().toString(16)).slice(-6)},getHSL:function(b){b=b||{h:0,s:0,l:0};var h=this.r,a=this.g,d=this.b,f=Math.max(h,a,d),g=Math.min(h,a,d),e,k=(g+f)/2;if(g===f)g=e=0;else{var m=f-g,g=.5>=k?m/(f+g):m/(2-f-g);switch(f){case h:e=(a-d)/m+(a<d?6:0);break;case a:e=(d-h)/m+2;break;case d:e=(h-a)/m+4}e/=6}b.h=e;b.s=g;b.l=k;return b},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(b,h,a){var d=this.getHSL();d.h+=b;d.s+=h;d.l+=a;this.setHSL(d.h,
        d.s,d.l);return this},add:function(b){this.r+=b.r;this.g+=b.g;this.b+=b.b;return this},addColors:function(b,h){this.r=b.r+h.r;this.g=b.g+h.g;this.b=b.b+h.b;return this},addScalar:function(b){this.r+=b;this.g+=b;this.b+=b;return this},sub:function(b){this.r=Math.max(0,this.r-b.r);this.g=Math.max(0,this.g-b.g);this.b=Math.max(0,this.b-b.b);return this},multiply:function(b){this.r*=b.r;this.g*=b.g;this.b*=b.b;return this},multiplyScalar:function(b){this.r*=b;this.g*=b;this.b*=b;return this},lerp:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   h){this.r+=(b.r-this.r)*h;this.g+=(b.g-this.g)*h;this.b+=(b.b-this.b)*h;return this},equals:function(b){return b.r===this.r&&b.g===this.g&&b.b===this.b},fromArray:function(b,h){void 0===h&&(h=0);this.r=b[h];this.g=b[h+1];this.b=b[h+2];return this},toArray:function(b,h){void 0===b&&(b=[]);void 0===h&&(h=0);b[h]=this.r;b[h+1]=this.g;b[h+2]=this.b;return b},toJSON:function(){return this.getHex()}});var ja={common:{diffuse:{value:new S(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new k},
          alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new l(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},
          displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new S(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},
              position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],
            properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new S(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new k}}},kb={merge:function(b){for(var h={},a=0;a<b.length;a++){var d=this.clone(b[a]),f;for(f in d)h[f]=d[f]}return h},clone:function(b){var h={},a;for(a in b){h[a]={};for(var d in b[a]){var f=b[a][d];f&&(f.isColor||f.isMatrix3||f.isMatrix4||f.isVector2||f.isVector3||f.isVector4||f.isTexture)?h[a][d]=f.clone():Array.isArray(f)?
        h[a][d]=f.slice():h[a][d]=f}}return h}},Ga={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",
        aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",
        bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",
        clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",
        clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",
        color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",
        cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",
        defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",
        emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",
        envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
        envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",
        envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",
        fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",
        gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",
        lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",
        lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",
        lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",
        lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",
        lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",
        lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",
        logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",
        map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",
        metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",
        morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",
        normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",
        normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",
        packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",
        premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",
        roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",
        shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",
        shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",
        shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",
        skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",
        skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",
        specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",
        uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",
        uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",
        uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",
        cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",
        depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",
        distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",
        distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",
        equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",
        linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
        linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",
        meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
        meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",
        meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
        meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
        meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
        meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
        meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
        meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
        normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",
        normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",
        points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
        points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
        shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},
      gc={basic:{uniforms:kb.merge([ja.common,ja.specularmap,ja.envmap,ja.aomap,ja.lightmap,ja.fog]),vertexShader:Ga.meshbasic_vert,fragmentShader:Ga.meshbasic_frag},lambert:{uniforms:kb.merge([ja.common,ja.specularmap,ja.envmap,ja.aomap,ja.lightmap,ja.emissivemap,ja.fog,ja.lights,{emissive:{value:new S(0)}}]),vertexShader:Ga.meshlambert_vert,fragmentShader:Ga.meshlambert_frag},phong:{uniforms:kb.merge([ja.common,ja.specularmap,ja.envmap,ja.aomap,ja.lightmap,ja.emissivemap,ja.bumpmap,ja.normalmap,ja.displacementmap,
            ja.gradientmap,ja.fog,ja.lights,{emissive:{value:new S(0)},specular:{value:new S(1118481)},shininess:{value:30}}]),vertexShader:Ga.meshphong_vert,fragmentShader:Ga.meshphong_frag},standard:{uniforms:kb.merge([ja.common,ja.envmap,ja.aomap,ja.lightmap,ja.emissivemap,ja.bumpmap,ja.normalmap,ja.displacementmap,ja.roughnessmap,ja.metalnessmap,ja.fog,ja.lights,{emissive:{value:new S(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Ga.meshphysical_vert,fragmentShader:Ga.meshphysical_frag},
        points:{uniforms:kb.merge([ja.points,ja.fog]),vertexShader:Ga.points_vert,fragmentShader:Ga.points_frag},dashed:{uniforms:kb.merge([ja.common,ja.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ga.linedashed_vert,fragmentShader:Ga.linedashed_frag},depth:{uniforms:kb.merge([ja.common,ja.displacementmap]),vertexShader:Ga.depth_vert,fragmentShader:Ga.depth_frag},normal:{uniforms:kb.merge([ja.common,ja.bumpmap,ja.normalmap,ja.displacementmap,{opacity:{value:1}}]),vertexShader:Ga.normal_vert,
          fragmentShader:Ga.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ga.cube_vert,fragmentShader:Ga.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ga.equirect_vert,fragmentShader:Ga.equirect_frag},distanceRGBA:{uniforms:kb.merge([ja.common,ja.displacementmap,{referencePosition:{value:new a},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:Ga.distanceRGBA_vert,fragmentShader:Ga.distanceRGBA_frag},shadow:{uniforms:kb.merge([ja.lights,
            ja.fog,{color:{value:new S(0)},opacity:{value:1}}]),vertexShader:Ga.shadow_vert,fragmentShader:Ga.shadow_frag}};gc.physical={uniforms:kb.merge([gc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ga.meshphysical_vert,fragmentShader:Ga.meshphysical_frag};ha.prototype=Object.create(r.prototype);ha.prototype.constructor=ha;var Uf=0;ba.prototype=Object.assign(Object.create(n.prototype),{constructor:ba,isMaterial:!0,onBeforeCompile:function(){},setValues:function(b){if(void 0!==
        b)for(var h in b){var a=b[h];if(void 0===a)console.warn("THREE.Material: '"+h+"' parameter is undefined.");else if("shading"===h)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===a?!0:!1;else{var d=this[h];void 0===d?console.warn("THREE."+this.type+": '"+h+"' is not a property of this material."):d&&d.isColor?d.set(a):d&&d.isVector3&&a&&a.isVector3?d.copy(a):this[h]="overdraw"===h?Number(a):a}}},toJSON:function(b){function h(b){var h=
        [],a;for(a in b){var d=b[a];delete d.metadata;h.push(d)}return h}var a=void 0===b||"string"===typeof b;a&&(b={textures:{},images:{}});var d={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());
        1!==this.emissiveIntensity&&(d.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearCoat&&(d.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(d.map=this.map.toJSON(b).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(b).uuid);this.lightMap&&this.lightMap.isTexture&&
        (d.lightMap=this.lightMap.toJSON(b).uuid);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(b).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(b).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(b).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&
        (d.roughnessMap=this.roughnessMap.toJSON(b).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(b).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(b).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(b).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(b).uuid,d.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=
          this.gradientMap.toJSON(b).uuid);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);!0===this.flatShading&&(d.flatShading=this.flatShading);0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=
          this.depthWrite;0!==this.rotation&&(d.rotation=this.rotation);1!==this.linewidth&&(d.linewidth=this.linewidth);void 0!==this.dashSize&&(d.dashSize=this.dashSize);void 0!==this.gapSize&&(d.gapSize=this.gapSize);void 0!==this.scale&&(d.scale=this.scale);!0===this.dithering&&(d.dithering=!0);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=
          this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData);a&&(a=h(b.textures),b=h(b.images),0<a.length&&(d.textures=a),0<b.length&&(d.images=b));return d},clone:function(){return(new this.constructor).copy(this)},
      copy:function(b){this.name=b.name;this.fog=b.fog;this.lights=b.lights;this.blending=b.blending;this.side=b.side;this.flatShading=b.flatShading;this.vertexColors=b.vertexColors;this.opacity=b.opacity;this.transparent=b.transparent;this.blendSrc=b.blendSrc;this.blendDst=b.blendDst;this.blendEquation=b.blendEquation;this.blendSrcAlpha=b.blendSrcAlpha;this.blendDstAlpha=b.blendDstAlpha;this.blendEquationAlpha=b.blendEquationAlpha;this.depthFunc=b.depthFunc;this.depthTest=b.depthTest;this.depthWrite=b.depthWrite;
        this.colorWrite=b.colorWrite;this.precision=b.precision;this.polygonOffset=b.polygonOffset;this.polygonOffsetFactor=b.polygonOffsetFactor;this.polygonOffsetUnits=b.polygonOffsetUnits;this.dithering=b.dithering;this.alphaTest=b.alphaTest;this.premultipliedAlpha=b.premultipliedAlpha;this.overdraw=b.overdraw;this.visible=b.visible;this.userData=JSON.parse(JSON.stringify(b.userData));this.clipShadows=b.clipShadows;this.clipIntersection=b.clipIntersection;var h=b.clippingPlanes,a=null;if(null!==h)for(var d=
          h.length,a=Array(d),f=0;f!==d;++f)a[f]=h[f].clone();this.clippingPlanes=a;this.shadowSide=b.shadowSide;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});xa.prototype=Object.create(ba.prototype);xa.prototype.constructor=xa;xa.prototype.isMeshDepthMaterial=!0;xa.prototype.copy=function(b){ba.prototype.copy.call(this,b);this.depthPacking=b.depthPacking;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.map=b.map;this.alphaMap=b.alphaMap;this.displacementMap=b.displacementMap;
      this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;return this};ka.prototype=Object.create(ba.prototype);ka.prototype.constructor=ka;ka.prototype.isMeshDistanceMaterial=!0;ka.prototype.copy=function(b){ba.prototype.copy.call(this,b);this.referencePosition.copy(b.referencePosition);this.nearDistance=b.nearDistance;this.farDistance=b.farDistance;this.skinning=b.skinning;this.morphTargets=b.morphTargets;
      this.map=b.map;this.alphaMap=b.alphaMap;this.displacementMap=b.displacementMap;this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;return this};Object.assign(Ra.prototype,{isBox3:!0,set:function(b,h){this.min.copy(b);this.max.copy(h);return this},setFromArray:function(b){for(var h=Infinity,a=Infinity,d=Infinity,f=-Infinity,g=-Infinity,e=-Infinity,k=0,m=b.length;k<m;k+=3){var l=b[k],n=b[k+1],r=b[k+2];l<h&&(h=l);n<a&&(a=n);r<d&&(d=r);l>f&&(f=l);n>g&&(g=n);r>e&&(e=r)}this.min.set(h,
        a,d);this.max.set(f,g,e);return this},setFromBufferAttribute:function(b){for(var h=Infinity,a=Infinity,d=Infinity,f=-Infinity,g=-Infinity,e=-Infinity,k=0,m=b.count;k<m;k++){var l=b.getX(k),n=b.getY(k),r=b.getZ(k);l<h&&(h=l);n<a&&(a=n);r<d&&(d=r);l>f&&(f=l);n>g&&(g=n);r>e&&(e=r)}this.min.set(h,a,d);this.max.set(f,g,e);return this},setFromPoints:function(b){this.makeEmpty();for(var h=0,a=b.length;h<a;h++)this.expandByPoint(b[h]);return this},setFromCenterAndSize:function(){var b=new a;return function(h,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                a){var d=b.copy(a).multiplyScalar(.5);this.min.copy(h).sub(d);this.max.copy(h).add(d);return this}}(),setFromObject:function(b){this.makeEmpty();return this.expandByObject(b)},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.min.copy(b.min);this.max.copy(b.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<
        this.min.z},getCenter:function(b){b=b||new a;return this.isEmpty()?b.set(0,0,0):b.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(b){b=b||new a;return this.isEmpty()?b.set(0,0,0):b.subVectors(this.max,this.min)},expandByPoint:function(b){this.min.min(b);this.max.max(b);return this},expandByVector:function(b){this.min.sub(b);this.max.add(b);return this},expandByScalar:function(b){this.min.addScalar(-b);this.max.addScalar(b);return this},expandByObject:function(){function b(b){var a=
        b.geometry;if(void 0!==a)if(a.isGeometry)for(a=a.vertices,d=0,f=a.length;d<f;d++)g.copy(a[d]),g.applyMatrix4(b.matrixWorld),h.expandByPoint(g);else if(a.isBufferGeometry&&(a=a.attributes.position,void 0!==a))for(d=0,f=a.count;d<f;d++)g.fromBufferAttribute(a,d).applyMatrix4(b.matrixWorld),h.expandByPoint(g)}var h,d,f,g=new a;return function(a){h=this;a.updateMatrixWorld(!0);a.traverse(b);return this}}(),containsPoint:function(b){return b.x<this.min.x||b.x>this.max.x||b.y<this.min.y||b.y>this.max.y||
      b.z<this.min.z||b.z>this.max.z?!1:!0},containsBox:function(b){return this.min.x<=b.min.x&&b.max.x<=this.max.x&&this.min.y<=b.min.y&&b.max.y<=this.max.y&&this.min.z<=b.min.z&&b.max.z<=this.max.z},getParameter:function(b,h){return(h||new a).set((b.x-this.min.x)/(this.max.x-this.min.x),(b.y-this.min.y)/(this.max.y-this.min.y),(b.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(b){return b.max.x<this.min.x||b.min.x>this.max.x||b.max.y<this.min.y||b.min.y>this.max.y||b.max.z<this.min.z||
      b.min.z>this.max.z?!1:!0},intersectsSphere:function(){var b=new a;return function(h){this.clampPoint(h.center,b);return b.distanceToSquared(h.center)<=h.radius*h.radius}}(),intersectsPlane:function(b){var h,a;0<b.normal.x?(h=b.normal.x*this.min.x,a=b.normal.x*this.max.x):(h=b.normal.x*this.max.x,a=b.normal.x*this.min.x);0<b.normal.y?(h+=b.normal.y*this.min.y,a+=b.normal.y*this.max.y):(h+=b.normal.y*this.max.y,a+=b.normal.y*this.min.y);0<b.normal.z?(h+=b.normal.z*this.min.z,a+=b.normal.z*this.max.z):
        (h+=b.normal.z*this.max.z,a+=b.normal.z*this.min.z);return h<=b.constant&&a>=b.constant},intersectsTriangle:function(){function b(b){var a,g;a=0;for(g=b.length-3;a<=g;a+=3){m.fromArray(b,a);var e=n.x*Math.abs(m.x)+n.y*Math.abs(m.y)+n.z*Math.abs(m.z),k=h.dot(m),l=d.dot(m),r=f.dot(m);if(Math.max(-Math.max(k,l,r),Math.min(k,l,r))>e)return!1}return!0}var h=new a,d=new a,f=new a,g=new a,e=new a,k=new a,m=new a,l=new a,n=new a,r=new a;return function(a){if(this.isEmpty())return!1;this.getCenter(l);n.subVectors(this.max,
        l);h.subVectors(a.a,l);d.subVectors(a.b,l);f.subVectors(a.c,l);g.subVectors(d,h);e.subVectors(f,d);k.subVectors(h,f);a=[0,-g.z,g.y,0,-e.z,e.y,0,-k.z,k.y,g.z,0,-g.x,e.z,0,-e.x,k.z,0,-k.x,-g.y,g.x,0,-e.y,e.x,0,-k.y,k.x,0];if(!b(a))return!1;a=[1,0,0,0,1,0,0,0,1];if(!b(a))return!1;r.crossVectors(g,e);a=[r.x,r.y,r.z];return b(a)}}(),clampPoint:function(b,h){return(h||new a).copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var b=new a;return function(h){return b.copy(h).clamp(this.min,this.max).sub(h).length()}}(),
      getBoundingSphere:function(){var b=new a;return function(h){h=h||new Q;this.getCenter(h.center);h.radius=.5*this.getSize(b).length();return h}}(),intersect:function(b){this.min.max(b.min);this.max.min(b.max);this.isEmpty()&&this.makeEmpty();return this},union:function(b){this.min.min(b.min);this.max.max(b.max);return this},applyMatrix4:function(){var b=[new a,new a,new a,new a,new a,new a,new a,new a];return function(h){if(this.isEmpty())return this;b[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(h);
        b[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(h);b[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(h);b[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(h);b[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(h);b[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(h);b[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(h);b[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(h);this.setFromPoints(b);return this}}(),translate:function(b){this.min.add(b);this.max.add(b);
        return this},equals:function(b){return b.min.equals(this.min)&&b.max.equals(this.max)}});Object.assign(Q.prototype,{set:function(b,h){this.center.copy(b);this.radius=h;return this},setFromPoints:function(){var b=new Ra;return function(h,a){var d=this.center;void 0!==a?d.copy(a):b.setFromPoints(h).getCenter(d);for(var f=0,g=0,e=h.length;g<e;g++)f=Math.max(f,d.distanceToSquared(h[g]));this.radius=Math.sqrt(f);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.center.copy(b.center);
        this.radius=b.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(b){return b.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(b){return b.distanceTo(this.center)-this.radius},intersectsSphere:function(b){var h=this.radius+b.radius;return b.center.distanceToSquared(this.center)<=h*h},intersectsBox:function(b){return b.intersectsSphere(this)},intersectsPlane:function(b){return Math.abs(b.distanceToPoint(this.center))<=this.radius},clampPoint:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              h){var d=this.center.distanceToSquared(b),f=h||new a;f.copy(b);d>this.radius*this.radius&&(f.sub(this.center).normalize(),f.multiplyScalar(this.radius).add(this.center));return f},getBoundingBox:function(b){b=b||new Ra;b.set(this.center,this.center);b.expandByScalar(this.radius);return b},applyMatrix4:function(b){this.center.applyMatrix4(b);this.radius*=b.getMaxScaleOnAxis();return this},translate:function(b){this.center.add(b);return this},equals:function(b){return b.center.equals(this.center)&&
        b.radius===this.radius}});Object.assign(Ma.prototype,{set:function(b,h){this.normal.copy(b);this.constant=h;return this},setComponents:function(b,h,a,d){this.normal.set(b,h,a);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(b,h){this.normal.copy(b);this.constant=-h.dot(this.normal);return this},setFromCoplanarPoints:function(){var b=new a,h=new a;return function(a,d,f){d=b.subVectors(f,d).cross(h.subVectors(a,d)).normalize();this.setFromNormalAndCoplanarPoint(d,a);return this}}(),
      clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.normal.copy(b.normal);this.constant=b.constant;return this},normalize:function(){var b=1/this.normal.length();this.normal.multiplyScalar(b);this.constant*=b;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(b){return this.normal.dot(b)+this.constant},distanceToSphere:function(b){return this.distanceToPoint(b.center)-b.radius},projectPoint:function(b,h){return(h||
        new a).copy(this.normal).multiplyScalar(-this.distanceToPoint(b)).add(b)},intersectLine:function(){var b=new a;return function(h,d){var f=d||new a,g=h.delta(b),e=this.normal.dot(g);if(0===e){if(0===this.distanceToPoint(h.start))return f.copy(h.start)}else return e=-(h.start.dot(this.normal)+this.constant)/e,0>e||1<e?void 0:f.copy(g).multiplyScalar(e).add(h.start)}}(),intersectsLine:function(b){var h=this.distanceToPoint(b.start);b=this.distanceToPoint(b.end);return 0>h&&0<b||0>b&&0<h},intersectsBox:function(b){return b.intersectsPlane(this)},
      intersectsSphere:function(b){return b.intersectsPlane(this)},coplanarPoint:function(b){return(b||new a).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var b=new a,h=new k;return function(a,d){var f=d||h.getNormalMatrix(a),g=this.coplanarPoint(b).applyMatrix4(a),f=this.normal.applyMatrix3(f).normalize();this.constant=-g.dot(f);return this}}(),translate:function(b){this.constant-=b.dot(this.normal);return this},equals:function(b){return b.normal.equals(this.normal)&&b.constant===
        this.constant}});Object.assign(pa.prototype,{set:function(b,h,a,d,f,g){var e=this.planes;e[0].copy(b);e[1].copy(h);e[2].copy(a);e[3].copy(d);e[4].copy(f);e[5].copy(g);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){for(var h=this.planes,a=0;6>a;a++)h[a].copy(b.planes[a]);return this},setFromMatrix:function(b){var h=this.planes,a=b.elements;b=a[0];var d=a[1],f=a[2],g=a[3],e=a[4],k=a[5],m=a[6],l=a[7],n=a[8],r=a[9],q=a[10],u=a[11],v=a[12],t=a[13],w=a[14],a=a[15];
        h[0].setComponents(g-b,l-e,u-n,a-v).normalize();h[1].setComponents(g+b,l+e,u+n,a+v).normalize();h[2].setComponents(g+d,l+k,u+r,a+t).normalize();h[3].setComponents(g-d,l-k,u-r,a-t).normalize();h[4].setComponents(g-f,l-m,u-q,a-w).normalize();h[5].setComponents(g+f,l+m,u+q,a+w).normalize();return this},intersectsObject:function(){var b=new Q;return function(h){var a=h.geometry;null===a.boundingSphere&&a.computeBoundingSphere();b.copy(a.boundingSphere).applyMatrix4(h.matrixWorld);return this.intersectsSphere(b)}}(),
      intersectsSprite:function(){var b=new Q;return function(h){b.center.set(0,0,0);b.radius=.7071067811865476;b.applyMatrix4(h.matrixWorld);return this.intersectsSphere(b)}}(),intersectsSphere:function(b){var h=this.planes,a=b.center;b=-b.radius;for(var d=0;6>d;d++)if(h[d].distanceToPoint(a)<b)return!1;return!0},intersectsBox:function(){var b=new a,h=new a;return function(a){for(var d=this.planes,f=0;6>f;f++){var g=d[f];b.x=0<g.normal.x?a.min.x:a.max.x;h.x=0<g.normal.x?a.max.x:a.min.x;b.y=0<g.normal.y?
        a.min.y:a.max.y;h.y=0<g.normal.y?a.max.y:a.min.y;b.z=0<g.normal.z?a.min.z:a.max.z;h.z=0<g.normal.z?a.max.z:a.min.z;var e=g.distanceToPoint(b),g=g.distanceToPoint(h);if(0>e&&0>g)return!1}return!0}}(),containsPoint:function(b){for(var h=this.planes,a=0;6>a;a++)if(0>h[a].distanceToPoint(b))return!1;return!0}});Ua.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");Ua.DefaultOrder="XYZ";Object.defineProperties(Ua.prototype,{x:{get:function(){return this._x},set:function(b){this._x=b;this.onChangeCallback()}},
      y:{get:function(){return this._y},set:function(b){this._y=b;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(b){this._z=b;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(b){this._order=b;this.onChangeCallback()}}});Object.assign(Ua.prototype,{isEuler:!0,set:function(b,h,a,d){this._x=b;this._y=h;this._z=a;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},
      copy:function(b){this._x=b._x;this._y=b._y;this._z=b._z;this._order=b._order;this.onChangeCallback();return this},setFromRotationMatrix:function(b,h,a){var d=qa.clamp,f=b.elements;b=f[0];var g=f[4],e=f[8],k=f[1],m=f[5],l=f[9],n=f[2],r=f[6],f=f[10];h=h||this._order;"XYZ"===h?(this._y=Math.asin(d(e,-1,1)),.99999>Math.abs(e)?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-g,b)):(this._x=Math.atan2(r,m),this._z=0)):"YXZ"===h?(this._x=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(e,f),this._z=
        Math.atan2(k,m)):(this._y=Math.atan2(-n,b),this._z=0)):"ZXY"===h?(this._x=Math.asin(d(r,-1,1)),.99999>Math.abs(r)?(this._y=Math.atan2(-n,f),this._z=Math.atan2(-g,m)):(this._y=0,this._z=Math.atan2(k,b))):"ZYX"===h?(this._y=Math.asin(-d(n,-1,1)),.99999>Math.abs(n)?(this._x=Math.atan2(r,f),this._z=Math.atan2(k,b)):(this._x=0,this._z=Math.atan2(-g,m))):"YZX"===h?(this._z=Math.asin(d(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(-l,m),this._y=Math.atan2(-n,b)):(this._x=0,this._y=Math.atan2(e,f))):"XZY"===
      h?(this._z=Math.asin(-d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(r,m),this._y=Math.atan2(e,b)):(this._x=Math.atan2(-l,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+h);this._order=h;if(!1!==a)this.onChangeCallback();return this},setFromQuaternion:function(){var b=new m;return function(h,a,d){b.makeRotationFromQuaternion(h);return this.setFromRotationMatrix(b,a,d)}}(),setFromVector3:function(b,h){return this.set(b.x,b.y,b.z,h||this._order)},reorder:function(){var b=
        new d;return function(h){b.setFromEuler(this);return this.setFromQuaternion(b,h)}}(),equals:function(b){return b._x===this._x&&b._y===this._y&&b._z===this._z&&b._order===this._order},fromArray:function(b){this._x=b[0];this._y=b[1];this._z=b[2];void 0!==b[3]&&(this._order=b[3]);this.onChangeCallback();return this},toArray:function(b,h){void 0===b&&(b=[]);void 0===h&&(h=0);b[h]=this._x;b[h+1]=this._y;b[h+2]=this._z;b[h+3]=this._order;return b},toVector3:function(b){return b?b.set(this._x,this._y,this._z):
        new a(this._x,this._y,this._z)},onChange:function(b){this.onChangeCallback=b;return this},onChangeCallback:function(){}});Object.assign($b.prototype,{set:function(b){this.mask=1<<b|0},enable:function(b){this.mask=this.mask|1<<b|0},toggle:function(b){this.mask^=1<<b|0},disable:function(b){this.mask&=~(1<<b|0)},test:function(b){return 0!==(this.mask&b.mask)}});var Vf=0;aa.DefaultUp=new a(0,1,0);aa.DefaultMatrixAutoUpdate=!0;aa.prototype=Object.assign(Object.create(n.prototype),{constructor:aa,isObject3D:!0,
      onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(b){this.matrix.multiplyMatrices(b,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(b){this.quaternion.premultiply(b);return this},setRotationFromAxisAngle:function(b,h){this.quaternion.setFromAxisAngle(b,h)},setRotationFromEuler:function(b){this.quaternion.setFromEuler(b,!0)},setRotationFromMatrix:function(b){this.quaternion.setFromRotationMatrix(b)},setRotationFromQuaternion:function(b){this.quaternion.copy(b)},
      rotateOnAxis:function(){var b=new d;return function(h,a){b.setFromAxisAngle(h,a);this.quaternion.multiply(b);return this}}(),rotateOnWorldAxis:function(){var b=new d;return function(h,a){b.setFromAxisAngle(h,a);this.quaternion.premultiply(b);return this}}(),rotateX:function(){var b=new a(1,0,0);return function(h){return this.rotateOnAxis(b,h)}}(),rotateY:function(){var b=new a(0,1,0);return function(h){return this.rotateOnAxis(b,h)}}(),rotateZ:function(){var b=new a(0,0,1);return function(h){return this.rotateOnAxis(b,
        h)}}(),translateOnAxis:function(){var b=new a;return function(h,a){b.copy(h).applyQuaternion(this.quaternion);this.position.add(b.multiplyScalar(a));return this}}(),translateX:function(){var b=new a(1,0,0);return function(h){return this.translateOnAxis(b,h)}}(),translateY:function(){var b=new a(0,1,0);return function(h){return this.translateOnAxis(b,h)}}(),translateZ:function(){var b=new a(0,0,1);return function(h){return this.translateOnAxis(b,h)}}(),localToWorld:function(b){return b.applyMatrix4(this.matrixWorld)},
      worldToLocal:function(){var b=new m;return function(h){return h.applyMatrix4(b.getInverse(this.matrixWorld))}}(),lookAt:function(){var b=new m,h=new a;return function(a,d,f){a.isVector3?h.copy(a):h.set(a,d,f);this.isCamera?b.lookAt(this.position,h,this.up):b.lookAt(h,this.position,this.up);this.quaternion.setFromRotationMatrix(b)}}(),add:function(b){if(1<arguments.length){for(var h=0;h<arguments.length;h++)this.add(arguments[h]);return this}if(b===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",
        b),this;b&&b.isObject3D?(null!==b.parent&&b.parent.remove(b),b.parent=this,b.dispatchEvent({type:"added"}),this.children.push(b)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",b);return this},remove:function(b){if(1<arguments.length){for(var h=0;h<arguments.length;h++)this.remove(arguments[h]);return this}h=this.children.indexOf(b);-1!==h&&(b.parent=null,b.dispatchEvent({type:"removed"}),this.children.splice(h,1));return this},getObjectById:function(b){return this.getObjectByProperty("id",
        b)},getObjectByName:function(b){return this.getObjectByProperty("name",b)},getObjectByProperty:function(b,h){if(this[b]===h)return this;for(var a=0,d=this.children.length;a<d;a++){var f=this.children[a].getObjectByProperty(b,h);if(void 0!==f)return f}},getWorldPosition:function(b){b=b||new a;this.updateMatrixWorld(!0);return b.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var b=new a,h=new a;return function(a){a=a||new d;this.updateMatrixWorld(!0);this.matrixWorld.decompose(b,
        a,h);return a}}(),getWorldRotation:function(){var b=new d;return function(h){h=h||new Ua;this.getWorldQuaternion(b);return h.setFromQuaternion(b,this.rotation.order,!1)}}(),getWorldScale:function(){var b=new a,h=new d;return function(d){d=d||new a;this.updateMatrixWorld(!0);this.matrixWorld.decompose(b,h,d);return d}}(),getWorldDirection:function(){var b=new d;return function(h){h=h||new a;this.getWorldQuaternion(b);return h.set(0,0,1).applyQuaternion(b)}}(),raycast:function(){},traverse:function(b){b(this);
        for(var h=this.children,a=0,d=h.length;a<d;a++)h[a].traverse(b)},traverseVisible:function(b){if(!1!==this.visible){b(this);for(var h=this.children,a=0,d=h.length;a<d;a++)h[a].traverseVisible(b)}},traverseAncestors:function(b){var h=this.parent;null!==h&&(b(h),h.traverseAncestors(b))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(b){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||
        b)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0;for(var h=this.children,a=0,d=h.length;a<d;a++)h[a].updateMatrixWorld(b)},toJSON:function(b){function h(h,a){void 0===h[a.uuid]&&(h[a.uuid]=a.toJSON(b));return a.uuid}function a(b){var h=[],d;for(d in b){var f=b[d];delete f.metadata;h.push(f)}return h}var d=void 0===b||"string"===typeof b,f={};d&&(b={geometries:{},materials:{},textures:{},
        images:{},shapes:{}},f.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var g={};g.uuid=this.uuid;g.type=this.type;""!==this.name&&(g.name=this.name);!0===this.castShadow&&(g.castShadow=!0);!0===this.receiveShadow&&(g.receiveShadow=!0);!1===this.visible&&(g.visible=!1);"{}"!==JSON.stringify(this.userData)&&(g.userData=this.userData);g.matrix=this.matrix.toArray();if(void 0!==this.geometry){g.geometry=h(b.geometries,this.geometry);var e=this.geometry.parameters;if(void 0!==e&&void 0!==
        e.shapes)if(e=e.shapes,Array.isArray(e))for(var k=0,m=e.length;k<m;k++)h(b.shapes,e[k]);else h(b.shapes,e)}if(void 0!==this.material)if(Array.isArray(this.material)){e=[];k=0;for(m=this.material.length;k<m;k++)e.push(h(b.materials,this.material[k]));g.material=e}else g.material=h(b.materials,this.material);if(0<this.children.length)for(g.children=[],k=0;k<this.children.length;k++)g.children.push(this.children[k].toJSON(b).object);if(d){var d=a(b.geometries),k=a(b.materials),m=a(b.textures),l=a(b.images),
        e=a(b.shapes);0<d.length&&(f.geometries=d);0<k.length&&(f.materials=k);0<m.length&&(f.textures=m);0<l.length&&(f.images=l);0<e.length&&(f.shapes=e)}f.object=g;return f},clone:function(b){return(new this.constructor).copy(this,b)},copy:function(b,h){void 0===h&&(h=!0);this.name=b.name;this.up.copy(b.up);this.position.copy(b.position);this.quaternion.copy(b.quaternion);this.scale.copy(b.scale);this.matrix.copy(b.matrix);this.matrixWorld.copy(b.matrixWorld);this.matrixAutoUpdate=b.matrixAutoUpdate;this.matrixWorldNeedsUpdate=
        b.matrixWorldNeedsUpdate;this.layers.mask=b.layers.mask;this.visible=b.visible;this.castShadow=b.castShadow;this.receiveShadow=b.receiveShadow;this.frustumCulled=b.frustumCulled;this.renderOrder=b.renderOrder;this.userData=JSON.parse(JSON.stringify(b.userData));if(!0===h)for(var a=0;a<b.children.length;a++)this.add(b.children[a].clone());return this}});ab.prototype=Object.assign(Object.create(aa.prototype),{constructor:ab,isCamera:!0,copy:function(b,h){aa.prototype.copy.call(this,b,h);this.matrixWorldInverse.copy(b.matrixWorldInverse);
        this.projectionMatrix.copy(b.projectionMatrix);return this},getWorldDirection:function(){var b=new d;return function(h){h=h||new a;this.getWorldQuaternion(b);return h.set(0,0,-1).applyQuaternion(b)}}(),updateMatrixWorld:function(b){aa.prototype.updateMatrixWorld.call(this,b);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});wb.prototype=Object.assign(Object.create(ab.prototype),{constructor:wb,isOrthographicCamera:!0,copy:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           h){ab.prototype.copy.call(this,b,h);this.left=b.left;this.right=b.right;this.top=b.top;this.bottom=b.bottom;this.near=b.near;this.far=b.far;this.zoom=b.zoom;this.view=null===b.view?null:Object.assign({},b.view);return this},setViewOffset:function(b,h,a,d,f,g){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=b;this.view.fullHeight=h;this.view.offsetX=a;this.view.offsetY=d;this.view.width=f;this.view.height=
        g;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var b=(this.right-this.left)/(2*this.zoom),h=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,d=(this.top+this.bottom)/2,f=a-b,a=a+b,b=d+h,h=d-h;if(null!==this.view&&this.view.enabled)var a=this.zoom/(this.view.width/this.view.fullWidth),h=this.zoom/(this.view.height/this.view.fullHeight),g=(this.right-this.left)/this.view.width,
        d=(this.top-this.bottom)/this.view.height,f=f+this.view.offsetX/a*g,a=f+this.view.width/a*g,b=b-this.view.offsetY/h*d,h=b-this.view.height/h*d;this.projectionMatrix.makeOrthographic(f,a,b,h,this.near,this.far)},toJSON:function(b){b=aa.prototype.toJSON.call(this,b);b.object.zoom=this.zoom;b.object.left=this.left;b.object.right=this.right;b.object.top=this.top;b.object.bottom=this.bottom;b.object.near=this.near;b.object.far=this.far;null!==this.view&&(b.object.view=Object.assign({},this.view));return b}});
    Object.assign(ib.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.a=b.a;this.b=b.b;this.c=b.c;this.normal.copy(b.normal);this.color.copy(b.color);this.materialIndex=b.materialIndex;for(var h=0,a=b.vertexNormals.length;h<a;h++)this.vertexNormals[h]=b.vertexNormals[h].clone();h=0;for(a=b.vertexColors.length;h<a;h++)this.vertexColors[h]=b.vertexColors[h].clone();return this}});var pf=0;fa.prototype=Object.assign(Object.create(n.prototype),{constructor:fa,isGeometry:!0,
      applyMatrix:function(b){for(var h=(new k).getNormalMatrix(b),a=0,d=this.vertices.length;a<d;a++)this.vertices[a].applyMatrix4(b);a=0;for(d=this.faces.length;a<d;a++){b=this.faces[a];b.normal.applyMatrix3(h).normalize();for(var f=0,g=b.vertexNormals.length;f<g;f++)b.vertexNormals[f].applyMatrix3(h).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var b=
        new m;return function(h){b.makeRotationX(h);this.applyMatrix(b);return this}}(),rotateY:function(){var b=new m;return function(h){b.makeRotationY(h);this.applyMatrix(b);return this}}(),rotateZ:function(){var b=new m;return function(h){b.makeRotationZ(h);this.applyMatrix(b);return this}}(),translate:function(){var b=new m;return function(h,a,d){b.makeTranslation(h,a,d);this.applyMatrix(b);return this}}(),scale:function(){var b=new m;return function(h,a,d){b.makeScale(h,a,d);this.applyMatrix(b);return this}}(),
      lookAt:function(){var b=new aa;return function(h){b.lookAt(h);b.updateMatrix();this.applyMatrix(b.matrix)}}(),fromBufferGeometry:function(b){function h(b,h,a,f){var g=void 0!==k?[q[b].clone(),q[h].clone(),q[a].clone()]:[],e=void 0!==m?[d.colors[b].clone(),d.colors[h].clone(),d.colors[a].clone()]:[];f=new ib(b,h,a,g,e,f);d.faces.push(f);void 0!==n&&d.faceVertexUvs[0].push([u[b].clone(),u[h].clone(),u[a].clone()]);void 0!==r&&d.faceVertexUvs[1].push([v[b].clone(),v[h].clone(),v[a].clone()])}var d=this,
        f=null!==b.index?b.index.array:void 0,g=b.attributes,e=g.position.array,k=void 0!==g.normal?g.normal.array:void 0,m=void 0!==g.color?g.color.array:void 0,n=void 0!==g.uv?g.uv.array:void 0,r=void 0!==g.uv2?g.uv2.array:void 0;void 0!==r&&(this.faceVertexUvs[1]=[]);for(var q=[],u=[],v=[],t=g=0;g<e.length;g+=3,t+=2)d.vertices.push(new a(e[g],e[g+1],e[g+2])),void 0!==k&&q.push(new a(k[g],k[g+1],k[g+2])),void 0!==m&&d.colors.push(new S(m[g],m[g+1],m[g+2])),void 0!==n&&u.push(new l(n[t],n[t+1])),void 0!==
      r&&v.push(new l(r[t],r[t+1]));var w=b.groups;if(0<w.length)for(g=0;g<w.length;g++)for(var e=w[g],D=e.start,x=e.count,t=D,D=D+x;t<D;t+=3)void 0!==f?h(f[t],f[t+1],f[t+2],e.materialIndex):h(t,t+1,t+2,e.materialIndex);else if(void 0!==f)for(g=0;g<f.length;g+=3)h(f[g],f[g+1],f[g+2]);else for(g=0;g<e.length/3;g+=3)h(g,g+1,g+2);this.computeFaceNormals();null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone());null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();
        var b=this.boundingBox.getCenter().negate();this.translate(b.x,b.y,b.z);return b},normalize:function(){this.computeBoundingSphere();var b=this.boundingSphere.center,h=this.boundingSphere.radius,h=0===h?1:1/h,a=new m;a.set(h,0,0,-h*b.x,0,h,0,-h*b.y,0,0,h,-h*b.z,0,0,0,1);this.applyMatrix(a);return this},computeFaceNormals:function(){for(var b=new a,h=new a,d=0,f=this.faces.length;d<f;d++){var g=this.faces[d],e=this.vertices[g.a],k=this.vertices[g.b];b.subVectors(this.vertices[g.c],k);h.subVectors(e,
        k);b.cross(h);b.normalize();g.normal.copy(b)}},computeVertexNormals:function(b){void 0===b&&(b=!0);var h,d,f;f=Array(this.vertices.length);h=0;for(d=this.vertices.length;h<d;h++)f[h]=new a;if(b){var g,e,k,m=new a,l=new a;b=0;for(h=this.faces.length;b<h;b++)d=this.faces[b],g=this.vertices[d.a],e=this.vertices[d.b],k=this.vertices[d.c],m.subVectors(k,e),l.subVectors(g,e),m.cross(l),f[d.a].add(m),f[d.b].add(m),f[d.c].add(m)}else for(this.computeFaceNormals(),b=0,h=this.faces.length;b<h;b++)d=this.faces[b],
        f[d.a].add(d.normal),f[d.b].add(d.normal),f[d.c].add(d.normal);h=0;for(d=this.vertices.length;h<d;h++)f[h].normalize();b=0;for(h=this.faces.length;b<h;b++)d=this.faces[b],g=d.vertexNormals,3===g.length?(g[0].copy(f[d.a]),g[1].copy(f[d.b]),g[2].copy(f[d.c])):(g[0]=f[d.a].clone(),g[1]=f[d.b].clone(),g[2]=f[d.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var b,h,a;this.computeFaceNormals();b=0;for(h=this.faces.length;b<h;b++){a=this.faces[b];var d=
        a.vertexNormals;3===d.length?(d[0].copy(a.normal),d[1].copy(a.normal),d[2].copy(a.normal)):(d[0]=a.normal.clone(),d[1]=a.normal.clone(),d[2]=a.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var b,h,d,f,g;d=0;for(f=this.faces.length;d<f;d++)for(g=this.faces[d],g.__originalFaceNormal?g.__originalFaceNormal.copy(g.normal):g.__originalFaceNormal=g.normal.clone(),g.__originalVertexNormals||(g.__originalVertexNormals=[]),b=0,h=g.vertexNormals.length;b<h;b++)g.__originalVertexNormals[b]?
        g.__originalVertexNormals[b].copy(g.vertexNormals[b]):g.__originalVertexNormals[b]=g.vertexNormals[b].clone();var e=new fa;e.faces=this.faces;b=0;for(h=this.morphTargets.length;b<h;b++){if(!this.morphNormals[b]){this.morphNormals[b]={};this.morphNormals[b].faceNormals=[];this.morphNormals[b].vertexNormals=[];g=this.morphNormals[b].faceNormals;var k=this.morphNormals[b].vertexNormals,m,l;d=0;for(f=this.faces.length;d<f;d++)m=new a,l={a:new a,b:new a,c:new a},g.push(m),k.push(l)}k=this.morphNormals[b];
        e.vertices=this.morphTargets[b].vertices;e.computeFaceNormals();e.computeVertexNormals();d=0;for(f=this.faces.length;d<f;d++)g=this.faces[d],m=k.faceNormals[d],l=k.vertexNormals[d],m.copy(g.normal),l.a.copy(g.vertexNormals[0]),l.b.copy(g.vertexNormals[1]),l.c.copy(g.vertexNormals[2])}d=0;for(f=this.faces.length;d<f;d++)g=this.faces[d],g.normal=g.__originalFaceNormal,g.vertexNormals=g.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ra);this.boundingBox.setFromPoints(this.vertices)},
      computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Q);this.boundingSphere.setFromPoints(this.vertices)},merge:function(b,h,a){if(b&&b.isGeometry){var d,f=this.vertices.length,g=this.vertices,e=b.vertices,m=this.faces,l=b.faces,n=this.faceVertexUvs[0],r=b.faceVertexUvs[0],q=this.colors,u=b.colors;void 0===a&&(a=0);void 0!==h&&(d=(new k).getNormalMatrix(h));b=0;for(var v=e.length;b<v;b++){var t=e[b].clone();void 0!==h&&t.applyMatrix4(h);g.push(t)}b=0;for(v=u.length;b<
      v;b++)q.push(u[b].clone());b=0;for(v=l.length;b<v;b++){var e=l[b],w=e.vertexNormals,u=e.vertexColors,q=new ib(e.a+f,e.b+f,e.c+f);q.normal.copy(e.normal);void 0!==d&&q.normal.applyMatrix3(d).normalize();h=0;for(g=w.length;h<g;h++)t=w[h].clone(),void 0!==d&&t.applyMatrix3(d).normalize(),q.vertexNormals.push(t);q.color.copy(e.color);h=0;for(g=u.length;h<g;h++)t=u[h],q.vertexColors.push(t.clone());q.materialIndex=e.materialIndex+a;m.push(q)}b=0;for(v=r.length;b<v;b++)if(a=r[b],d=[],void 0!==a){h=0;for(g=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               a.length;h<g;h++)d.push(a[h].clone());n.push(d)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",b)},mergeMesh:function(b){b&&b.isMesh?(b.matrixAutoUpdate&&b.updateMatrix(),this.merge(b.geometry,b.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",b)},mergeVertices:function(){var b={},h=[],a=[],d,f=Math.pow(10,4),g,e;g=0;for(e=this.vertices.length;g<e;g++)d=this.vertices[g],d=Math.round(d.x*f)+"_"+Math.round(d.y*f)+"_"+
        Math.round(d.z*f),void 0===b[d]?(b[d]=g,h.push(this.vertices[g]),a[g]=h.length-1):a[g]=a[b[d]];b=[];g=0;for(e=this.faces.length;g<e;g++)for(f=this.faces[g],f.a=a[f.a],f.b=a[f.b],f.c=a[f.c],f=[f.a,f.b,f.c],d=0;3>d;d++)if(f[d]===f[(d+1)%3]){b.push(g);break}for(g=b.length-1;0<=g;g--)for(f=b[g],this.faces.splice(f,1),a=0,e=this.faceVertexUvs.length;a<e;a++)this.faceVertexUvs[a].splice(f,1);g=this.vertices.length-h.length;this.vertices=h;return g},setFromPoints:function(b){this.vertices=[];for(var h=0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        d=b.length;h<d;h++){var f=b[h];this.vertices.push(new a(f.x,f.y,f.z||0))}return this},sortFacesByMaterialIndex:function(){for(var b=this.faces,h=b.length,a=0;a<h;a++)b[a]._id=a;b.sort(function(b,h){return b.materialIndex-h.materialIndex});var d=this.faceVertexUvs[0],f=this.faceVertexUvs[1],g,e;d&&d.length===h&&(g=[]);f&&f.length===h&&(e=[]);for(a=0;a<h;a++){var k=b[a]._id;g&&g.push(d[k]);e&&e.push(f[k])}g&&(this.faceVertexUvs[0]=g);e&&(this.faceVertexUvs[1]=e)},toJSON:function(){function b(b,h,a){return a?
        b|1<<h:b&~(1<<h)}function h(b){var h=b.x.toString()+b.y.toString()+b.z.toString();if(void 0!==l[h])return l[h];l[h]=m.length/3;m.push(b.x,b.y,b.z);return l[h]}function a(b){var h=b.r.toString()+b.g.toString()+b.b.toString();if(void 0!==r[h])return r[h];r[h]=n.length;n.push(b.getHex());return r[h]}function d(b){var h=b.x.toString()+b.y.toString();if(void 0!==u[h])return u[h];u[h]=q.length/2;q.push(b.x,b.y);return u[h]}var f={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};f.uuid=
        this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);if(void 0!==this.parameters){var g=this.parameters,e;for(e in g)void 0!==g[e]&&(f[e]=g[e]);return f}g=[];for(e=0;e<this.vertices.length;e++){var k=this.vertices[e];g.push(k.x,k.y,k.z)}var k=[],m=[],l={},n=[],r={},q=[],u={};for(e=0;e<this.faces.length;e++){var v=this.faces[e],t=void 0!==this.faceVertexUvs[0][e],w=0<v.normal.length(),D=0<v.vertexNormals.length,x=1!==v.color.r||1!==v.color.g||1!==v.color.b,y=0<v.vertexColors.length,F=0,F=
        b(F,0,0),F=b(F,1,!0),F=b(F,2,!1),F=b(F,3,t),F=b(F,4,w),F=b(F,5,D),F=b(F,6,x),F=b(F,7,y);k.push(F);k.push(v.a,v.b,v.c);k.push(v.materialIndex);t&&(t=this.faceVertexUvs[0][e],k.push(d(t[0]),d(t[1]),d(t[2])));w&&k.push(h(v.normal));D&&(w=v.vertexNormals,k.push(h(w[0]),h(w[1]),h(w[2])));x&&k.push(a(v.color));y&&(v=v.vertexColors,k.push(a(v[0]),a(v[1]),a(v[2])))}f.data={};f.data.vertices=g;f.data.normals=m;0<n.length&&(f.data.colors=n);0<q.length&&(f.data.uvs=[q]);f.data.faces=k;return f},clone:function(){return(new fa).copy(this)},
      copy:function(b){var h,a,d,f,g,e;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=b.name;d=b.vertices;h=0;for(a=d.length;h<a;h++)this.vertices.push(d[h].clone());d=b.colors;h=0;for(a=d.length;h<a;h++)this.colors.push(d[h].clone());d=b.faces;h=0;for(a=d.length;h<a;h++)this.faces.push(d[h].clone());h=0;for(a=b.faceVertexUvs.length;h<
      a;h++){var k=b.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);d=0;for(f=k.length;d<f;d++){var m=k[d],l=[];g=0;for(e=m.length;g<e;g++)l.push(m[g].clone());this.faceVertexUvs[h].push(l)}}g=b.morphTargets;h=0;for(a=g.length;h<a;h++){e={};e.name=g[h].name;if(void 0!==g[h].vertices)for(e.vertices=[],d=0,f=g[h].vertices.length;d<f;d++)e.vertices.push(g[h].vertices[d].clone());if(void 0!==g[h].normals)for(e.normals=[],d=0,f=g[h].normals.length;d<f;d++)e.normals.push(g[h].normals[d].clone());
        this.morphTargets.push(e)}g=b.morphNormals;h=0;for(a=g.length;h<a;h++){e={};if(void 0!==g[h].vertexNormals)for(e.vertexNormals=[],d=0,f=g[h].vertexNormals.length;d<f;d++)k=g[h].vertexNormals[d],m={},m.a=k.a.clone(),m.b=k.b.clone(),m.c=k.c.clone(),e.vertexNormals.push(m);if(void 0!==g[h].faceNormals)for(e.faceNormals=[],d=0,f=g[h].faceNormals.length;d<f;d++)e.faceNormals.push(g[h].faceNormals[d].clone());this.morphNormals.push(e)}d=b.skinWeights;h=0;for(a=d.length;h<a;h++)this.skinWeights.push(d[h].clone());
        d=b.skinIndices;h=0;for(a=d.length;h<a;h++)this.skinIndices.push(d[h].clone());d=b.lineDistances;h=0;for(a=d.length;h<a;h++)this.lineDistances.push(d[h]);h=b.boundingBox;null!==h&&(this.boundingBox=h.clone());h=b.boundingSphere;null!==h&&(this.boundingSphere=h.clone());this.elementsNeedUpdate=b.elementsNeedUpdate;this.verticesNeedUpdate=b.verticesNeedUpdate;this.uvsNeedUpdate=b.uvsNeedUpdate;this.normalsNeedUpdate=b.normalsNeedUpdate;this.colorsNeedUpdate=b.colorsNeedUpdate;this.lineDistancesNeedUpdate=
          b.lineDistancesNeedUpdate;this.groupsNeedUpdate=b.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(na.prototype,"needsUpdate",{set:function(b){!0===b&&this.version++}});Object.assign(na.prototype,{isBufferAttribute:!0,setArray:function(b){if(Array.isArray(b))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==b?b.length/this.itemSize:0;this.array=b},setDynamic:function(b){this.dynamic=b;return this},
      copy:function(b){this.array=new b.array.constructor(b.array);this.itemSize=b.itemSize;this.count=b.count;this.normalized=b.normalized;this.dynamic=b.dynamic;return this},copyAt:function(b,h,a){b*=this.itemSize;a*=h.itemSize;for(var d=0,f=this.itemSize;d<f;d++)this.array[b+d]=h.array[a+d];return this},copyArray:function(b){this.array.set(b);return this},copyColorsArray:function(b){for(var h=this.array,a=0,d=0,f=b.length;d<f;d++){var g=b[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",
        d),g=new S);h[a++]=g.r;h[a++]=g.g;h[a++]=g.b}return this},copyIndicesArray:function(b){for(var h=this.array,a=0,d=0,f=b.length;d<f;d++){var g=b[d];h[a++]=g.a;h[a++]=g.b;h[a++]=g.c}return this},copyVector2sArray:function(b){for(var h=this.array,a=0,d=0,f=b.length;d<f;d++){var g=b[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),g=new l);h[a++]=g.x;h[a++]=g.y}return this},copyVector3sArray:function(b){for(var h=this.array,d=0,f=0,g=b.length;f<g;f++){var e=
        b[f];void 0===e&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",f),e=new a);h[d++]=e.x;h[d++]=e.y;h[d++]=e.z}return this},copyVector4sArray:function(b){for(var h=this.array,a=0,d=0,g=b.length;d<g;d++){var e=b[d];void 0===e&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),e=new f);h[a++]=e.x;h[a++]=e.y;h[a++]=e.z;h[a++]=e.w}return this},set:function(b,h){void 0===h&&(h=0);this.array.set(b,h);return this},getX:function(b){return this.array[b*
      this.itemSize]},setX:function(b,h){this.array[b*this.itemSize]=h;return this},getY:function(b){return this.array[b*this.itemSize+1]},setY:function(b,h){this.array[b*this.itemSize+1]=h;return this},getZ:function(b){return this.array[b*this.itemSize+2]},setZ:function(b,h){this.array[b*this.itemSize+2]=h;return this},getW:function(b){return this.array[b*this.itemSize+3]},setW:function(b,h){this.array[b*this.itemSize+3]=h;return this},setXY:function(b,h,a){b*=this.itemSize;this.array[b+0]=h;this.array[b+
      1]=a;return this},setXYZ:function(b,h,a,d){b*=this.itemSize;this.array[b+0]=h;this.array[b+1]=a;this.array[b+2]=d;return this},setXYZW:function(b,h,a,d,f){b*=this.itemSize;this.array[b+0]=h;this.array[b+1]=a;this.array[b+2]=d;this.array[b+3]=f;return this},onUpload:function(b){this.onUploadCallback=b;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}});Sa.prototype=Object.create(na.prototype);Sa.prototype.constructor=Sa;Za.prototype=Object.create(na.prototype);
    Za.prototype.constructor=Za;yb.prototype=Object.create(na.prototype);yb.prototype.constructor=yb;Mb.prototype=Object.create(na.prototype);Mb.prototype.constructor=Mb;qb.prototype=Object.create(na.prototype);qb.prototype.constructor=qb;A.prototype=Object.create(na.prototype);A.prototype.constructor=A;$a.prototype=Object.create(na.prototype);$a.prototype.constructor=$a;Y.prototype=Object.create(na.prototype);Y.prototype.constructor=Y;Bb.prototype=Object.create(na.prototype);Bb.prototype.constructor=
      Bb;Object.assign(Va.prototype,{computeGroups:function(b){var h,a=[],d=void 0;b=b.faces;for(var f=0;f<b.length;f++){var g=b[f];g.materialIndex!==d&&(d=g.materialIndex,void 0!==h&&(h.count=3*f-h.start,a.push(h)),h={start:3*f,materialIndex:d})}void 0!==h&&(h.count=3*f-h.start,a.push(h));this.groups=a},fromGeometry:function(b){var h=b.faces,a=b.vertices,d=b.faceVertexUvs,f=d[0]&&0<d[0].length,g=d[1]&&0<d[1].length,e=b.morphTargets,k=e.length,m;if(0<k){m=[];for(var n=0;n<k;n++)m[n]=[];this.morphTargets.position=
        m}var r=b.morphNormals,q=r.length,u;if(0<q){u=[];for(n=0;n<q;n++)u[n]=[];this.morphTargets.normal=u}for(var v=b.skinIndices,t=b.skinWeights,w=v.length===a.length,D=t.length===a.length,n=0;n<h.length;n++){var x=h[n];this.vertices.push(a[x.a],a[x.b],a[x.c]);var y=x.vertexNormals;3===y.length?this.normals.push(y[0],y[1],y[2]):(y=x.normal,this.normals.push(y,y,y));y=x.vertexColors;3===y.length?this.colors.push(y[0],y[1],y[2]):(y=x.color,this.colors.push(y,y,y));!0===f&&(y=d[0][n],void 0!==y?this.uvs.push(y[0],
        y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",n),this.uvs.push(new l,new l,new l)));!0===g&&(y=d[1][n],void 0!==y?this.uvs2.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",n),this.uvs2.push(new l,new l,new l)));for(y=0;y<k;y++){var F=e[y].vertices;m[y].push(F[x.a],F[x.b],F[x.c])}for(y=0;y<q;y++)F=r[y].vertexNormals[n],u[y].push(F.a,F.b,F.c);w&&this.skinIndices.push(v[x.a],v[x.b],v[x.c]);D&&this.skinWeights.push(t[x.a],
        t[x.b],t[x.c])}this.computeGroups(b);this.verticesNeedUpdate=b.verticesNeedUpdate;this.normalsNeedUpdate=b.normalsNeedUpdate;this.colorsNeedUpdate=b.colorsNeedUpdate;this.uvsNeedUpdate=b.uvsNeedUpdate;this.groupsNeedUpdate=b.groupsNeedUpdate;return this}});var qf=1;N.prototype=Object.assign(Object.create(n.prototype),{constructor:N,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(b){Array.isArray(b)?this.index=new (65535<Nb(b)?$a:qb)(b,1):this.index=b},addAttribute:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   h,a){if(h&&h.isBufferAttribute||h&&h.isInterleavedBufferAttribute)if("index"===b)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(h);else return this.attributes[b]=h,this;else console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(b,new na(h,a))},getAttribute:function(b){return this.attributes[b]},removeAttribute:function(b){delete this.attributes[b];return this},addGroup:function(b,h,a){this.groups.push({start:b,
        count:h,materialIndex:void 0!==a?a:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(b,h){this.drawRange.start=b;this.drawRange.count=h},applyMatrix:function(b){var h=this.attributes.position;void 0!==h&&(b.applyToBufferAttribute(h),h.needsUpdate=!0);h=this.attributes.normal;void 0!==h&&((new k).getNormalMatrix(b).applyToBufferAttribute(h),h.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var b=
        new m;return function(h){b.makeRotationX(h);this.applyMatrix(b);return this}}(),rotateY:function(){var b=new m;return function(h){b.makeRotationY(h);this.applyMatrix(b);return this}}(),rotateZ:function(){var b=new m;return function(h){b.makeRotationZ(h);this.applyMatrix(b);return this}}(),translate:function(){var b=new m;return function(h,a,d){b.makeTranslation(h,a,d);this.applyMatrix(b);return this}}(),scale:function(){var b=new m;return function(h,a,d){b.makeScale(h,a,d);this.applyMatrix(b);return this}}(),
      lookAt:function(){var b=new aa;return function(h){b.lookAt(h);b.updateMatrix();this.applyMatrix(b.matrix)}}(),center:function(){this.computeBoundingBox();var b=this.boundingBox.getCenter().negate();this.translate(b.x,b.y,b.z);return b},setFromObject:function(b){var h=b.geometry;if(b.isPoints||b.isLine){b=new Y(3*h.vertices.length,3);var a=new Y(3*h.colors.length,3);this.addAttribute("position",b.copyVector3sArray(h.vertices));this.addAttribute("color",a.copyColorsArray(h.colors));h.lineDistances&&
      h.lineDistances.length===h.vertices.length&&(b=new Y(h.lineDistances.length,1),this.addAttribute("lineDistance",b.copyArray(h.lineDistances)));null!==h.boundingSphere&&(this.boundingSphere=h.boundingSphere.clone());null!==h.boundingBox&&(this.boundingBox=h.boundingBox.clone())}else b.isMesh&&h&&h.isGeometry&&this.fromGeometry(h);return this},setFromPoints:function(b){for(var h=[],a=0,d=b.length;a<d;a++){var f=b[a];h.push(f.x,f.y,f.z||0)}this.addAttribute("position",new Y(h,3));return this},updateFromObject:function(b){var h=
        b.geometry;if(b.isMesh){var a=h.__directGeometry;!0===h.elementsNeedUpdate&&(a=void 0,h.elementsNeedUpdate=!1);if(void 0===a)return this.fromGeometry(h);a.verticesNeedUpdate=h.verticesNeedUpdate;a.normalsNeedUpdate=h.normalsNeedUpdate;a.colorsNeedUpdate=h.colorsNeedUpdate;a.uvsNeedUpdate=h.uvsNeedUpdate;a.groupsNeedUpdate=h.groupsNeedUpdate;h.verticesNeedUpdate=!1;h.normalsNeedUpdate=!1;h.colorsNeedUpdate=!1;h.uvsNeedUpdate=!1;h.groupsNeedUpdate=!1;h=a}!0===h.verticesNeedUpdate&&(a=this.attributes.position,
      void 0!==a&&(a.copyVector3sArray(h.vertices),a.needsUpdate=!0),h.verticesNeedUpdate=!1);!0===h.normalsNeedUpdate&&(a=this.attributes.normal,void 0!==a&&(a.copyVector3sArray(h.normals),a.needsUpdate=!0),h.normalsNeedUpdate=!1);!0===h.colorsNeedUpdate&&(a=this.attributes.color,void 0!==a&&(a.copyColorsArray(h.colors),a.needsUpdate=!0),h.colorsNeedUpdate=!1);h.uvsNeedUpdate&&(a=this.attributes.uv,void 0!==a&&(a.copyVector2sArray(h.uvs),a.needsUpdate=!0),h.uvsNeedUpdate=!1);h.lineDistancesNeedUpdate&&
      (a=this.attributes.lineDistance,void 0!==a&&(a.copyArray(h.lineDistances),a.needsUpdate=!0),h.lineDistancesNeedUpdate=!1);h.groupsNeedUpdate&&(h.computeGroups(b.geometry),this.groups=h.groups,h.groupsNeedUpdate=!1);return this},fromGeometry:function(b){b.__directGeometry=(new Va).fromGeometry(b);return this.fromDirectGeometry(b.__directGeometry)},fromDirectGeometry:function(b){var h=new Float32Array(3*b.vertices.length);this.addAttribute("position",(new na(h,3)).copyVector3sArray(b.vertices));0<b.normals.length&&
      (h=new Float32Array(3*b.normals.length),this.addAttribute("normal",(new na(h,3)).copyVector3sArray(b.normals)));0<b.colors.length&&(h=new Float32Array(3*b.colors.length),this.addAttribute("color",(new na(h,3)).copyColorsArray(b.colors)));0<b.uvs.length&&(h=new Float32Array(2*b.uvs.length),this.addAttribute("uv",(new na(h,2)).copyVector2sArray(b.uvs)));0<b.uvs2.length&&(h=new Float32Array(2*b.uvs2.length),this.addAttribute("uv2",(new na(h,2)).copyVector2sArray(b.uvs2)));0<b.indices.length&&(h=new (65535<
      Nb(b.indices)?Uint32Array:Uint16Array)(3*b.indices.length),this.setIndex((new na(h,1)).copyIndicesArray(b.indices)));this.groups=b.groups;for(var a in b.morphTargets){for(var h=[],d=b.morphTargets[a],f=0,g=d.length;f<g;f++){var e=d[f],k=new Y(3*e.length,3);h.push(k.copyVector3sArray(e))}this.morphAttributes[a]=h}0<b.skinIndices.length&&(a=new Y(4*b.skinIndices.length,4),this.addAttribute("skinIndex",a.copyVector4sArray(b.skinIndices)));0<b.skinWeights.length&&(a=new Y(4*b.skinWeights.length,4),this.addAttribute("skinWeight",
        a.copyVector4sArray(b.skinWeights)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ra);var b=this.attributes.position;void 0!==b?this.boundingBox.setFromBufferAttribute(b):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
        this)},computeBoundingSphere:function(){var b=new Ra,h=new a;return function(){null===this.boundingSphere&&(this.boundingSphere=new Q);var a=this.attributes.position;if(a){var d=this.boundingSphere.center;b.setFromBufferAttribute(a);b.getCenter(d);for(var f=0,g=0,e=a.count;g<e;g++)h.x=a.getX(g),h.y=a.getY(g),h.z=a.getZ(g),f=Math.max(f,d.distanceToSquared(h));this.boundingSphere.radius=Math.sqrt(f);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
        this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var b=this.index,h=this.attributes,d=this.groups;if(h.position){var f=h.position.array;if(void 0===h.normal)this.addAttribute("normal",new na(new Float32Array(f.length),3));else for(var g=h.normal.array,e=0,k=g.length;e<k;e++)g[e]=0;var g=h.normal.array,m,l,n,r=new a,q=new a,u=new a,v=new a,t=new a;if(b){b=b.array;0===d.length&&this.addGroup(0,b.length);for(var w=0,D=d.length;w<D;++w)for(e=d[w],k=e.start,m=e.count,e=k,k+=m;e<
      k;e+=3)m=3*b[e+0],l=3*b[e+1],n=3*b[e+2],r.fromArray(f,m),q.fromArray(f,l),u.fromArray(f,n),v.subVectors(u,q),t.subVectors(r,q),v.cross(t),g[m]+=v.x,g[m+1]+=v.y,g[m+2]+=v.z,g[l]+=v.x,g[l+1]+=v.y,g[l+2]+=v.z,g[n]+=v.x,g[n+1]+=v.y,g[n+2]+=v.z}else for(e=0,k=f.length;e<k;e+=9)r.fromArray(f,e),q.fromArray(f,e+3),u.fromArray(f,e+6),v.subVectors(u,q),t.subVectors(r,q),v.cross(t),g[e]=v.x,g[e+1]=v.y,g[e+2]=v.z,g[e+3]=v.x,g[e+4]=v.y,g[e+5]=v.z,g[e+6]=v.x,g[e+7]=v.y,g[e+8]=v.z;this.normalizeNormals();h.normal.needsUpdate=
        !0}},merge:function(b,h){if(b&&b.isBufferGeometry){void 0===h&&(h=0);var a=this.attributes,d;for(d in a)if(void 0!==b.attributes[d])for(var f=a[d].array,g=b.attributes[d],e=g.array,k=0,g=g.itemSize*h;k<e.length;k++,g++)f[g]=e[k];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",b)},normalizeNormals:function(){var b=new a;return function(){for(var h=this.attributes.normal,a=0,d=h.count;a<d;a++)b.x=h.getX(a),b.y=h.getY(a),b.z=h.getZ(a),b.normalize(),
        h.setXYZ(a,b.x,b.y,b.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var b=new N,h=this.index.array,a=this.attributes,d;for(d in a){for(var f=a[d],g=f.array,f=f.itemSize,e=new g.constructor(h.length*f),k=0,m=0,l=0,n=h.length;l<n;l++)for(var k=h[l]*f,r=0;r<f;r++)e[m++]=g[k++];b.addAttribute(d,new na(e,f))}return b},toJSON:function(){var b={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};
        b.uuid=this.uuid;b.type=this.type;""!==this.name&&(b.name=this.name);if(void 0!==this.parameters){var h=this.parameters,a;for(a in h)void 0!==h[a]&&(b[a]=h[a]);return b}b.data={attributes:{}};var d=this.index;null!==d&&(h=Array.prototype.slice.call(d.array),b.data.index={type:d.array.constructor.name,array:h});d=this.attributes;for(a in d){var f=d[a],h=Array.prototype.slice.call(f.array);b.data.attributes[a]={itemSize:f.itemSize,type:f.array.constructor.name,array:h,normalized:f.normalized}}a=this.groups;
        0<a.length&&(b.data.groups=JSON.parse(JSON.stringify(a)));a=this.boundingSphere;null!==a&&(b.data.boundingSphere={center:a.center.toArray(),radius:a.radius});return b},clone:function(){return(new N).copy(this)},copy:function(b){var a,d,f;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=b.name;d=b.index;null!==d&&this.setIndex(d.clone());d=b.attributes;for(a in d)this.addAttribute(a,d[a].clone());var g=b.morphAttributes;for(a in g){var e=
        [],k=g[a];d=0;for(f=k.length;d<f;d++)e.push(k[d].clone());this.morphAttributes[a]=e}a=b.groups;d=0;for(f=a.length;d<f;d++)g=a[d],this.addGroup(g.start,g.count,g.materialIndex);a=b.boundingBox;null!==a&&(this.boundingBox=a.clone());a=b.boundingSphere;null!==a&&(this.boundingSphere=a.clone());this.drawRange.start=b.drawRange.start;this.drawRange.count=b.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});oa.prototype=Object.create(fa.prototype);oa.prototype.constructor=
      oa;X.prototype=Object.create(N.prototype);X.prototype.constructor=X;bb.prototype=Object.create(fa.prototype);bb.prototype.constructor=bb;Ca.prototype=Object.create(N.prototype);Ca.prototype.constructor=Ca;Ka.prototype=Object.create(ba.prototype);Ka.prototype.constructor=Ka;Ka.prototype.isMeshBasicMaterial=!0;Ka.prototype.copy=function(b){ba.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=
      b.aoMapIntensity;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;this.skinning=b.skinning;this.morphTargets=b.morphTargets;return this};Na.prototype=Object.create(ba.prototype);Na.prototype.constructor=Na;Na.prototype.isShaderMaterial=
      !0;Na.prototype.copy=function(b){ba.prototype.copy.call(this,b);this.fragmentShader=b.fragmentShader;this.vertexShader=b.vertexShader;this.uniforms=kb.clone(b.uniforms);this.defines=b.defines;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.lights=b.lights;this.clipping=b.clipping;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;this.extensions=b.extensions;return this};Na.prototype.toJSON=function(b){b=ba.prototype.toJSON.call(this,
      b);b.uniforms=this.uniforms;b.vertexShader=this.vertexShader;b.fragmentShader=this.fragmentShader;return b};Object.assign(Cb.prototype,{set:function(b,a){this.origin.copy(b);this.direction.copy(a);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.origin.copy(b.origin);this.direction.copy(b.direction);return this},at:function(b,h){return(h||new a).copy(this.direction).multiplyScalar(b).add(this.origin)},lookAt:function(b){this.direction.copy(b).sub(this.origin).normalize();
        return this},recast:function(){var b=new a;return function(a){this.origin.copy(this.at(a,b));return this}}(),closestPointToPoint:function(b,h){var d=h||new a;d.subVectors(b,this.origin);var f=d.dot(this.direction);return 0>f?d.copy(this.origin):d.copy(this.direction).multiplyScalar(f).add(this.origin)},distanceToPoint:function(b){return Math.sqrt(this.distanceSqToPoint(b))},distanceSqToPoint:function(){var b=new a;return function(a){var d=b.subVectors(a,this.origin).dot(this.direction);if(0>d)return this.origin.distanceToSquared(a);
        b.copy(this.direction).multiplyScalar(d).add(this.origin);return b.distanceToSquared(a)}}(),distanceSqToSegment:function(){var b=new a,h=new a,d=new a;return function(a,f,g,e){b.copy(a).add(f).multiplyScalar(.5);h.copy(f).sub(a).normalize();d.copy(this.origin).sub(b);var k=.5*a.distanceTo(f),m=-this.direction.dot(h),l=d.dot(this.direction),n=-d.dot(h),r=d.lengthSq(),q=Math.abs(1-m*m),u;0<q?(a=m*n-l,f=m*l-n,u=k*q,0<=a?f>=-u?f<=u?(k=1/q,a*=k,f*=k,m=a*(a+m*f+2*l)+f*(m*a+f+2*n)+r):(f=k,a=Math.max(0,-(m*
        f+l)),m=-a*a+f*(f+2*n)+r):(f=-k,a=Math.max(0,-(m*f+l)),m=-a*a+f*(f+2*n)+r):f<=-u?(a=Math.max(0,-(-m*k+l)),f=0<a?-k:Math.min(Math.max(-k,-n),k),m=-a*a+f*(f+2*n)+r):f<=u?(a=0,f=Math.min(Math.max(-k,-n),k),m=f*(f+2*n)+r):(a=Math.max(0,-(m*k+l)),f=0<a?k:Math.min(Math.max(-k,-n),k),m=-a*a+f*(f+2*n)+r)):(f=0<m?-k:k,a=Math.max(0,-(m*f+l)),m=-a*a+f*(f+2*n)+r);g&&g.copy(this.direction).multiplyScalar(a).add(this.origin);e&&e.copy(h).multiplyScalar(f).add(b);return m}}(),intersectSphere:function(){var b=new a;
        return function(a,d){b.subVectors(a.center,this.origin);var f=b.dot(this.direction),g=b.dot(b)-f*f,e=a.radius*a.radius;if(g>e)return null;e=Math.sqrt(e-g);g=f-e;f+=e;return 0>g&&0>f?null:0>g?this.at(f,d):this.at(g,d)}}(),intersectsSphere:function(b){return this.distanceToPoint(b.center)<=b.radius},distanceToPlane:function(b){var a=b.normal.dot(this.direction);if(0===a)return 0===b.distanceToPoint(this.origin)?0:null;b=-(this.origin.dot(b.normal)+b.constant)/a;return 0<=b?b:null},intersectPlane:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    a){var d=this.distanceToPlane(b);return null===d?null:this.at(d,a)},intersectsPlane:function(b){var a=b.distanceToPoint(this.origin);return 0===a||0>b.normal.dot(this.direction)*a?!0:!1},intersectBox:function(b,a){var d,f,g,e,k;f=1/this.direction.x;e=1/this.direction.y;k=1/this.direction.z;var m=this.origin;0<=f?(d=(b.min.x-m.x)*f,f*=b.max.x-m.x):(d=(b.max.x-m.x)*f,f*=b.min.x-m.x);0<=e?(g=(b.min.y-m.y)*e,e*=b.max.y-m.y):(g=(b.max.y-m.y)*e,e*=b.min.y-m.y);if(d>e||g>f)return null;if(g>d||d!==d)d=g;
        if(e<f||f!==f)f=e;0<=k?(g=(b.min.z-m.z)*k,k*=b.max.z-m.z):(g=(b.max.z-m.z)*k,k*=b.min.z-m.z);if(d>k||g>f)return null;if(g>d||d!==d)d=g;if(k<f||f!==f)f=k;return 0>f?null:this.at(0<=d?d:f,a)},intersectsBox:function(){var b=new a;return function(a){return null!==this.intersectBox(a,b)}}(),intersectTriangle:function(){var b=new a,h=new a,d=new a,f=new a;return function(a,g,e,k,m){h.subVectors(g,a);d.subVectors(e,a);f.crossVectors(h,d);g=this.direction.dot(f);if(0<g){if(k)return null;k=1}else if(0>g)k=
        -1,g=-g;else return null;b.subVectors(this.origin,a);a=k*this.direction.dot(d.crossVectors(b,d));if(0>a)return null;e=k*this.direction.dot(h.cross(b));if(0>e||a+e>g)return null;a=-k*b.dot(f);return 0>a?null:this.at(a/g,m)}}(),applyMatrix4:function(b){this.origin.applyMatrix4(b);this.direction.transformDirection(b);return this},equals:function(b){return b.origin.equals(this.origin)&&b.direction.equals(this.direction)}});Object.assign(Ob.prototype,{set:function(b,a){this.start.copy(b);this.end.copy(a);
        return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.start.copy(b.start);this.end.copy(b.end);return this},getCenter:function(b){return(b||new a).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(b){return(b||new a).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(b,h){var d=h||new a;return this.delta(d).multiplyScalar(b).add(this.start)},
      closestPointToPointParameter:function(){var b=new a,h=new a;return function(a,d){b.subVectors(a,this.start);h.subVectors(this.end,this.start);var f=h.dot(h),f=h.dot(b)/f;d&&(f=qa.clamp(f,0,1));return f}}(),closestPointToPoint:function(b,h,d){b=this.closestPointToPointParameter(b,h);d=d||new a;return this.delta(d).multiplyScalar(b).add(this.start)},applyMatrix4:function(b){this.start.applyMatrix4(b);this.end.applyMatrix4(b);return this},equals:function(b){return b.start.equals(this.start)&&b.end.equals(this.end)}});
    Object.assign(zb,{normal:function(){var b=new a;return function(h,d,f,g){g=g||new a;g.subVectors(f,d);b.subVectors(h,d);g.cross(b);h=g.lengthSq();return 0<h?g.multiplyScalar(1/Math.sqrt(h)):g.set(0,0,0)}}(),barycoordFromPoint:function(){var b=new a,h=new a,d=new a;return function(f,g,e,k,m){b.subVectors(k,g);h.subVectors(e,g);d.subVectors(f,g);f=b.dot(b);g=b.dot(h);e=b.dot(d);var l=h.dot(h);k=h.dot(d);var n=f*l-g*g;m=m||new a;if(0===n)return m.set(-2,-1,-1);n=1/n;l=(l*e-g*k)*n;f=(f*k-g*e)*n;return m.set(1-
        l-f,f,l)}}(),containsPoint:function(){var b=new a;return function(a,d,f,g){a=zb.barycoordFromPoint(a,d,f,g,b);return 0<=a.x&&0<=a.y&&1>=a.x+a.y}}()});Object.assign(zb.prototype,{set:function(b,a,d){this.a.copy(b);this.b.copy(a);this.c.copy(d);return this},setFromPointsAndIndices:function(b,a,d,f){this.a.copy(b[a]);this.b.copy(b[d]);this.c.copy(b[f]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.a.copy(b.a);this.b.copy(b.b);this.c.copy(b.c);return this},
      area:function(){var b=new a,h=new a;return function(){b.subVectors(this.c,this.b);h.subVectors(this.a,this.b);return.5*b.cross(h).length()}}(),midpoint:function(b){return(b||new a).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(b){return zb.normal(this.a,this.b,this.c,b)},plane:function(b){return(b||new Ma).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(b,a){return zb.barycoordFromPoint(b,this.a,this.b,this.c,a)},containsPoint:function(b){return zb.containsPoint(b,
        this.a,this.b,this.c)},intersectsBox:function(b){return b.intersectsTriangle(this)},closestPointToPoint:function(){var b=new Ma,h=[new Ob,new Ob,new Ob],d=new a,f=new a;return function(g,e){var k=e||new a,m=Infinity;b.setFromCoplanarPoints(this.a,this.b,this.c);b.projectPoint(g,d);if(!0===this.containsPoint(d))k.copy(d);else{h[0].set(this.a,this.b);h[1].set(this.b,this.c);h[2].set(this.c,this.a);for(var l=0;l<h.length;l++){h[l].closestPointToPoint(d,!0,f);var n=d.distanceToSquared(f);n<m&&(m=n,k.copy(f))}}return k}}(),
      equals:function(b){return b.a.equals(this.a)&&b.b.equals(this.b)&&b.c.equals(this.c)}});cb.prototype=Object.assign(Object.create(aa.prototype),{constructor:cb,isMesh:!0,setDrawMode:function(b){this.drawMode=b},copy:function(b){aa.prototype.copy.call(this,b);this.drawMode=b.drawMode;void 0!==b.morphTargetInfluences&&(this.morphTargetInfluences=b.morphTargetInfluences.slice());void 0!==b.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},b.morphTargetDictionary));return this},updateMorphTargets:function(){var b=
        this.geometry,a,d;if(b.isBufferGeometry){if(b=b.morphAttributes,a=Object.keys(b),0<a.length){var f=b[a[0]];if(void 0!==f)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},b=0,a=f.length;b<a;b++)d=f[b].name||String(b),this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=b}}else if(f=b.morphTargets,void 0!==f&&0<f.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},b=0,a=f.length;b<a;b++)d=f[b].name||String(b),this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=
        b},raycast:function(){function b(b,a,h,d,f,g,e){zb.barycoordFromPoint(b,a,h,d,x);f.multiplyScalar(x.x);g.multiplyScalar(x.y);e.multiplyScalar(x.z);f.add(g).add(e);return f.clone()}function h(b,a,h,d,f,g,e,p){if(null===(1===a.side?d.intersectTriangle(e,g,f,!0,p):d.intersectTriangle(f,g,e,2!==a.side,p)))return null;F.copy(p);F.applyMatrix4(b.matrixWorld);a=h.ray.origin.distanceTo(F);return a<h.near||a>h.far?null:{distance:a,point:F.clone(),object:b}}function d(a,f,g,e,p,m,l,q){k.fromBufferAttribute(e,
        m);n.fromBufferAttribute(e,l);r.fromBufferAttribute(e,q);if(a=h(a,a.material,f,g,k,n,r,y))p&&(t.fromBufferAttribute(p,m),w.fromBufferAttribute(p,l),D.fromBufferAttribute(p,q),a.uv=b(y,k,n,r,t,w,D)),a.face=new ib(m,l,q,zb.normal(k,n,r)),a.faceIndex=m;return a}var f=new m,g=new Cb,e=new Q,k=new a,n=new a,r=new a,q=new a,u=new a,v=new a,t=new l,w=new l,D=new l,x=new a,y=new a,F=new a;return function(a,m){var l=this.geometry,x=this.material,F=this.matrixWorld;if(void 0!==x&&(null===l.boundingSphere&&
      l.computeBoundingSphere(),e.copy(l.boundingSphere),e.applyMatrix4(F),!1!==a.ray.intersectsSphere(e)&&(f.getInverse(F),g.copy(a.ray).applyMatrix4(f),null===l.boundingBox||!1!==g.intersectsBox(l.boundingBox)))){var z;if(l.isBufferGeometry){var P,B,x=l.index,N=l.attributes.position,F=l.attributes.uv,A,C;if(null!==x)for(A=0,C=x.count;A<C;A+=3){if(l=x.getX(A),P=x.getX(A+1),B=x.getX(A+2),z=d(this,a,g,N,F,l,P,B))z.faceIndex=Math.floor(A/3),m.push(z)}else if(void 0!==N)for(A=0,C=N.count;A<C;A+=3)if(l=A,P=
        A+1,B=A+2,z=d(this,a,g,N,F,l,P,B))z.index=l,m.push(z)}else if(l.isGeometry){var Pa,F=Array.isArray(x);A=l.vertices;C=l.faces;P=l.faceVertexUvs[0];0<P.length&&(N=P);for(var ra=0,ma=C.length;ra<ma;ra++){var O=C[ra];z=F?x[O.materialIndex]:x;if(void 0!==z){P=A[O.a];B=A[O.b];Pa=A[O.c];if(!0===z.morphTargets){var X=l.morphTargets,L=this.morphTargetInfluences;k.set(0,0,0);n.set(0,0,0);r.set(0,0,0);for(var oa=0,I=X.length;oa<I;oa++){var E=L[oa];if(0!==E){var H=X[oa].vertices;k.addScaledVector(q.subVectors(H[O.a],
        P),E);n.addScaledVector(u.subVectors(H[O.b],B),E);r.addScaledVector(v.subVectors(H[O.c],Pa),E)}}k.add(P);n.add(B);r.add(Pa);P=k;B=n;Pa=r}if(z=h(this,z,a,g,P,B,Pa,y))N&&N[ra]&&(X=N[ra],t.copy(X[0]),w.copy(X[1]),D.copy(X[2]),z.uv=b(y,P,B,Pa,t,w,D)),z.face=O,z.faceIndex=ra,m.push(z)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});var Wf=0;ra.prototype=Object.assign(Object.create(ab.prototype),{constructor:ra,isPerspectiveCamera:!0,copy:function(b,a){ab.prototype.copy.call(this,
        b,a);this.fov=b.fov;this.zoom=b.zoom;this.near=b.near;this.far=b.far;this.focus=b.focus;this.aspect=b.aspect;this.view=null===b.view?null:Object.assign({},b.view);this.filmGauge=b.filmGauge;this.filmOffset=b.filmOffset;return this},setFocalLength:function(b){b=.5*this.getFilmHeight()/b;this.fov=2*qa.RAD2DEG*Math.atan(b);this.updateProjectionMatrix()},getFocalLength:function(){var b=Math.tan(.5*qa.DEG2RAD*this.fov);return.5*this.getFilmHeight()/b},getEffectiveFOV:function(){return 2*qa.RAD2DEG*Math.atan(Math.tan(.5*
        qa.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(b,a,d,f,g,e){this.aspect=b/a;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=b;this.view.fullHeight=a;this.view.offsetX=d;this.view.offsetY=f;this.view.width=g;this.view.height=e;this.updateProjectionMatrix()},
      clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var b=this.near,a=b*Math.tan(.5*qa.DEG2RAD*this.fov)/this.zoom,d=2*a,f=this.aspect*d,g=-.5*f,e=this.view;if(null!==this.view&&this.view.enabled)var k=e.fullWidth,m=e.fullHeight,g=g+e.offsetX*f/k,a=a-e.offsetY*d/m,f=e.width/k*f,d=e.height/m*d;e=this.filmOffset;0!==e&&(g+=b*e/this.getFilmWidth());this.projectionMatrix.makePerspective(g,g+f,a,a-d,b,this.far)},toJSON:function(b){b=
        aa.prototype.toJSON.call(this,b);b.object.fov=this.fov;b.object.zoom=this.zoom;b.object.near=this.near;b.object.far=this.far;b.object.focus=this.focus;b.object.aspect=this.aspect;null!==this.view&&(b.object.view=Object.assign({},this.view));b.object.filmGauge=this.filmGauge;b.object.filmOffset=this.filmOffset;return b}});za.prototype=Object.assign(Object.create(ra.prototype),{constructor:za,isArrayCamera:!0});var Yf=0;Vb.prototype.isFogExp2=!0;Vb.prototype.clone=function(){return new Vb(this.color.getHex(),
      this.density)};Vb.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};rb.prototype.isFog=!0;rb.prototype.clone=function(){return new rb(this.color.getHex(),this.near,this.far)};rb.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};bc.prototype=Object.assign(Object.create(aa.prototype),{constructor:bc,copy:function(b,a){aa.prototype.copy.call(this,b,a);null!==b.background&&(this.background=b.background.clone());
        null!==b.fog&&(this.fog=b.fog.clone());null!==b.overrideMaterial&&(this.overrideMaterial=b.overrideMaterial.clone());this.autoUpdate=b.autoUpdate;this.matrixAutoUpdate=b.matrixAutoUpdate;return this},toJSON:function(b){var a=aa.prototype.toJSON.call(this,b);null!==this.background&&(a.object.background=this.background.toJSON(b));null!==this.fog&&(a.object.fog=this.fog.toJSON());return a}});cc.prototype=Object.create(ba.prototype);cc.prototype.constructor=cc;cc.prototype.isSpriteMaterial=!0;cc.prototype.copy=
      function(b){ba.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.rotation=b.rotation;return this};rd.prototype=Object.assign(Object.create(aa.prototype),{constructor:rd,isSprite:!0,raycast:function(){var b=new a,h=new a,d=new a;return function(a,f){h.setFromMatrixPosition(this.matrixWorld);a.ray.closestPointToPoint(h,b);d.setFromMatrixScale(this.matrixWorld);var g=d.x*d.y/4;h.distanceToSquared(b)>g||(g=a.ray.origin.distanceTo(b),g<a.near||g>a.far||f.push({distance:g,point:b.clone(),
        face:null,object:this}))}}(),clone:function(){return(new this.constructor(this.material)).copy(this)},copy:function(b){aa.prototype.copy.call(this,b);void 0!==b.center&&this.center.copy(b.center);return this}});sd.prototype=Object.assign(Object.create(aa.prototype),{constructor:sd,copy:function(b){aa.prototype.copy.call(this,b,!1);b=b.levels;for(var a=0,d=b.length;a<d;a++){var f=b[a];this.addLevel(f.object.clone(),f.distance)}return this},addLevel:function(b,a){void 0===a&&(a=0);a=Math.abs(a);for(var d=
        this.levels,f=0;f<d.length&&!(a<d[f].distance);f++);d.splice(f,0,{distance:a,object:b});this.add(b)},getObjectForDistance:function(b){for(var a=this.levels,d=1,f=a.length;d<f&&!(b<a[d].distance);d++);return a[d-1].object},raycast:function(){var b=new a;return function(a,d){b.setFromMatrixPosition(this.matrixWorld);var f=a.ray.origin.distanceTo(b);this.getObjectForDistance(f).raycast(a,d)}}(),update:function(){var b=new a,h=new a;return function(a){var d=this.levels;if(1<d.length){b.setFromMatrixPosition(a.matrixWorld);
        h.setFromMatrixPosition(this.matrixWorld);a=b.distanceTo(h);d[0].object.visible=!0;for(var f=1,g=d.length;f<g;f++)if(a>=d[f].distance)d[f-1].object.visible=!1,d[f].object.visible=!0;else break;for(;f<g;f++)d[f].object.visible=!1}}}(),toJSON:function(b){b=aa.prototype.toJSON.call(this,b);b.object.levels=[];for(var a=this.levels,d=0,f=a.length;d<f;d++){var g=a[d];b.object.levels.push({object:g.object.uuid,distance:g.distance})}return b}});Object.assign(lb.prototype,{calculateInverses:function(){this.boneInverses=
        [];for(var b=0,a=this.bones.length;b<a;b++){var d=new m;this.bones[b]&&d.getInverse(this.bones[b].matrixWorld);this.boneInverses.push(d)}},pose:function(){var b,a,d;a=0;for(d=this.bones.length;a<d;a++)(b=this.bones[a])&&b.matrixWorld.getInverse(this.boneInverses[a]);a=0;for(d=this.bones.length;a<d;a++)if(b=this.bones[a])b.parent&&b.parent.isBone?(b.matrix.getInverse(b.parent.matrixWorld),b.matrix.multiply(b.matrixWorld)):b.matrix.copy(b.matrixWorld),b.matrix.decompose(b.position,b.quaternion,b.scale)},
      update:function(){var b=new m,a=new m;return function(){for(var d=this.bones,f=this.boneInverses,g=this.boneMatrices,e=this.boneTexture,k=0,m=d.length;k<m;k++)b.multiplyMatrices(d[k]?d[k].matrixWorld:a,f[k]),b.toArray(g,16*k);void 0!==e&&(e.needsUpdate=!0)}}(),clone:function(){return new lb(this.bones,this.boneInverses)},getBoneByName:function(b){for(var a=0,d=this.bones.length;a<d;a++){var f=this.bones[a];if(f.name===b)return f}}});sb.prototype=Object.assign(Object.create(aa.prototype),{constructor:sb,
      isBone:!0});ee.prototype=Object.assign(Object.create(cb.prototype),{constructor:ee,isSkinnedMesh:!0,initBones:function(){var b=[],a,d,f,g;if(this.geometry&&void 0!==this.geometry.bones){f=0;for(g=this.geometry.bones.length;f<g;f++)d=this.geometry.bones[f],a=new sb,b.push(a),a.name=d.name,a.position.fromArray(d.pos),a.quaternion.fromArray(d.rotq),void 0!==d.scl&&a.scale.fromArray(d.scl);f=0;for(g=this.geometry.bones.length;f<g;f++)d=this.geometry.bones[f],-1!==d.parent&&null!==d.parent&&void 0!==b[d.parent]?
        b[d.parent].add(b[f]):this.add(b[f])}this.updateMatrixWorld(!0);return b},bind:function(b,a){this.skeleton=b;void 0===a&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),a=this.matrixWorld);this.bindMatrix.copy(a);this.bindMatrixInverse.getInverse(a)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var b,a;if(this.geometry&&this.geometry.isGeometry)for(a=0;a<this.geometry.skinWeights.length;a++){var d=this.geometry.skinWeights[a];b=1/d.manhattanLength();Infinity!==
      b?d.multiplyScalar(b):d.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var d=new f,g=this.geometry.attributes.skinWeight;for(a=0;a<g.count;a++)d.x=g.getX(a),d.y=g.getY(a),d.z=g.getZ(a),d.w=g.getW(a),b=1/d.manhattanLength(),Infinity!==b?d.multiplyScalar(b):d.set(1,0,0,0),g.setXYZW(a,d.x,d.y,d.z,d.w)}},updateMatrixWorld:function(b){cb.prototype.updateMatrixWorld.call(this,b);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?
        this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Ha.prototype=Object.create(ba.prototype);Ha.prototype.constructor=Ha;Ha.prototype.isLineBasicMaterial=!0;Ha.prototype.copy=function(b){ba.prototype.copy.call(this,b);this.color.copy(b.color);this.linewidth=b.linewidth;this.linecap=b.linecap;this.linejoin=b.linejoin;return this};mb.prototype=
      Object.assign(Object.create(aa.prototype),{constructor:mb,isLine:!0,computeLineDistances:function(){var b=new a,h=new a;return function(){var a=this.geometry;if(a.isBufferGeometry)if(null===a.index){for(var d=a.attributes.position,f=[0],g=1,e=d.count;g<e;g++)b.fromBufferAttribute(d,g-1),h.fromBufferAttribute(d,g),f[g]=f[g-1],f[g]+=b.distanceTo(h);a.addAttribute("lineDistance",new THREE.Float32BufferAttribute(f,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
        else if(a.isGeometry)for(d=a.vertices,f=a.lineDistances,f[0]=0,g=1,e=d.length;g<e;g++)f[g]=f[g-1],f[g]+=d[g-1].distanceTo(d[g]);return this}}(),raycast:function(){var b=new m,h=new Cb,d=new Q;return function(f,g){var e=f.linePrecision,e=e*e,k=this.geometry,m=this.matrixWorld;null===k.boundingSphere&&k.computeBoundingSphere();d.copy(k.boundingSphere);d.applyMatrix4(m);if(!1!==f.ray.intersectsSphere(d)){b.getInverse(m);h.copy(f.ray).applyMatrix4(b);var l=new a,n=new a,m=new a,r=new a,q=this&&this.isLineSegments?
          2:1;if(k.isBufferGeometry){var u=k.index,v=k.attributes.position.array;if(null!==u)for(var u=u.array,k=0,t=u.length-1;k<t;k+=q){var w=u[k+1];l.fromArray(v,3*u[k]);n.fromArray(v,3*w);w=h.distanceSqToSegment(l,n,r,m);w>e||(r.applyMatrix4(this.matrixWorld),w=f.ray.origin.distanceTo(r),w<f.near||w>f.far||g.push({distance:w,point:m.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this}))}else for(k=0,t=v.length/3-1;k<t;k+=q)l.fromArray(v,3*k),n.fromArray(v,3*k+3),w=h.distanceSqToSegment(l,
          n,r,m),w>e||(r.applyMatrix4(this.matrixWorld),w=f.ray.origin.distanceTo(r),w<f.near||w>f.far||g.push({distance:w,point:m.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this}))}else if(k.isGeometry)for(l=k.vertices,n=l.length,k=0;k<n-1;k+=q)w=h.distanceSqToSegment(l[k],l[k+1],r,m),w>e||(r.applyMatrix4(this.matrixWorld),w=f.ray.origin.distanceTo(r),w<f.near||w>f.far||g.push({distance:w,point:m.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this}))}}}(),
        clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Qa.prototype=Object.assign(Object.create(mb.prototype),{constructor:Qa,isLineSegments:!0,computeLineDistances:function(){var b=new a,h=new a;return function(){var a=this.geometry;if(a.isBufferGeometry)if(null===a.index){for(var d=a.attributes.position,f=[],g=0,e=d.count;g<e;g+=2)b.fromBufferAttribute(d,g),h.fromBufferAttribute(d,g+1),f[g]=0===g?0:f[g-1],f[g+1]=f[g]+b.distanceTo(h);a.addAttribute("lineDistance",
        new THREE.Float32BufferAttribute(f,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(a.isGeometry)for(d=a.vertices,f=a.lineDistances,g=0,e=d.length;g<e;g+=2)b.copy(d[g]),h.copy(d[g+1]),f[g]=0===g?0:f[g-1],f[g+1]=f[g]+b.distanceTo(h);return this}}()});fe.prototype=Object.assign(Object.create(mb.prototype),{constructor:fe,isLineLoop:!0});Db.prototype=Object.create(ba.prototype);Db.prototype.constructor=Db;Db.prototype.isPointsMaterial=
      !0;Db.prototype.copy=function(b){ba.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.size=b.size;this.sizeAttenuation=b.sizeAttenuation;return this};Dc.prototype=Object.assign(Object.create(aa.prototype),{constructor:Dc,isPoints:!0,raycast:function(){var b=new m,h=new Cb,d=new Q;return function(f,g){function e(b,a){var d=h.distanceSqToPoint(b);if(d<r){var p=h.closestPointToPoint(b);p.applyMatrix4(l);var m=f.ray.origin.distanceTo(p);m<f.near||m>f.far||g.push({distance:m,distanceToRay:Math.sqrt(d),
        point:p.clone(),index:a,face:null,object:k})}}var k=this,m=this.geometry,l=this.matrixWorld,n=f.params.Points.threshold;null===m.boundingSphere&&m.computeBoundingSphere();d.copy(m.boundingSphere);d.applyMatrix4(l);d.radius+=n;if(!1!==f.ray.intersectsSphere(d)){b.getInverse(l);h.copy(f.ray).applyMatrix4(b);var n=n/((this.scale.x+this.scale.y+this.scale.z)/3),r=n*n,n=new a;if(m.isBufferGeometry){var q=m.index,m=m.attributes.position.array;if(null!==q)for(var u=q.array,q=0,v=u.length;q<v;q++){var t=
        u[q];n.fromArray(m,3*t);e(n,t)}else for(q=0,u=m.length/3;q<u;q++)n.fromArray(m,3*q),e(n,q)}else for(n=m.vertices,q=0,u=n.length;q<u;q++)e(n[q],q)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});ge.prototype=Object.assign(Object.create(aa.prototype),{constructor:ge,isGroup:!0});Ee.prototype=Object.assign(Object.create(r.prototype),{constructor:Ee,isVideoTexture:!0,update:function(){var b=this.image;b.readyState>=b.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});
    Ec.prototype=Object.create(r.prototype);Ec.prototype.constructor=Ec;Ec.prototype.isCompressedTexture=!0;td.prototype=Object.create(r.prototype);td.prototype.constructor=td;td.prototype.isDepthTexture=!0;Fc.prototype=Object.create(N.prototype);Fc.prototype.constructor=Fc;ud.prototype=Object.create(fa.prototype);ud.prototype.constructor=ud;Gc.prototype=Object.create(N.prototype);Gc.prototype.constructor=Gc;vd.prototype=Object.create(fa.prototype);vd.prototype.constructor=vd;nb.prototype=Object.create(N.prototype);
    nb.prototype.constructor=nb;wd.prototype=Object.create(fa.prototype);wd.prototype.constructor=wd;Hc.prototype=Object.create(nb.prototype);Hc.prototype.constructor=Hc;xd.prototype=Object.create(fa.prototype);xd.prototype.constructor=xd;ic.prototype=Object.create(nb.prototype);ic.prototype.constructor=ic;yd.prototype=Object.create(fa.prototype);yd.prototype.constructor=yd;Ic.prototype=Object.create(nb.prototype);Ic.prototype.constructor=Ic;zd.prototype=Object.create(fa.prototype);zd.prototype.constructor=
      zd;Jc.prototype=Object.create(nb.prototype);Jc.prototype.constructor=Jc;Ad.prototype=Object.create(fa.prototype);Ad.prototype.constructor=Ad;Kc.prototype=Object.create(N.prototype);Kc.prototype.constructor=Kc;Bd.prototype=Object.create(fa.prototype);Bd.prototype.constructor=Bd;Lc.prototype=Object.create(N.prototype);Lc.prototype.constructor=Lc;Cd.prototype=Object.create(fa.prototype);Cd.prototype.constructor=Cd;Mc.prototype=Object.create(N.prototype);Mc.prototype.constructor=Mc;var dg={triangulate:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      a,d){d=d||2;var f=a&&a.length,g=f?a[0]*d:b.length,e=tf(b,0,g,d,!0),k=[];if(!e)return k;var m,l,n,r;if(f){var q=d,f=[],u,v,t;r=0;for(u=a.length;r<u;r++)v=a[r]*q,t=r<u-1?a[r+1]*q:b.length,v=tf(b,v,t,q,!1),v===v.next&&(v.steiner=!0),f.push(bg(v));f.sort($f);for(r=0;r<f.length;r++){a=f[r];q=e;if(q=ag(a,q))a=wf(q,a),Ed(a,a.next);e=Ed(e,e.next)}}if(b.length>80*d){m=n=b[0];l=f=b[1];for(q=d;q<g;q+=d)r=b[q],a=b[q+1],r<m&&(m=r),a<l&&(l=a),r>n&&(n=r),a>f&&(f=a);n=Math.max(n-m,f-l);n=0!==n?1/n:0}Fd(e,k,d,m,l,
        n);return k}},Wb={area:function(b){for(var a=b.length,d=0,f=a-1,g=0;g<a;f=g++)d+=b[f].x*b[g].y-b[g].x*b[f].y;return.5*d},isClockWise:function(b){return 0>Wb.area(b)},triangulateShape:function(b,a){var d=[],f=[],g=[];xf(b);yf(d,b);var e=b.length;a.forEach(xf);for(var k=0;k<a.length;k++)f.push(e),e+=a[k].length,yf(d,a[k]);d=dg.triangulate(d,f);for(k=0;k<d.length;k+=3)g.push(d.slice(k,k+3));return g}};dc.prototype=Object.create(fa.prototype);dc.prototype.constructor=dc;Eb.prototype=Object.create(N.prototype);
    Eb.prototype.constructor=Eb;Eb.prototype.getArrays=function(){var b=this.getAttribute("position"),b=b?Array.prototype.slice.call(b.array):[],a=this.getAttribute("uv"),a=a?Array.prototype.slice.call(a.array):[],d=this.index,d=d?Array.prototype.slice.call(d.array):[];return{position:b,uv:a,index:d}};Eb.prototype.addShapeList=function(b,a){var d=b.length;a.arrays=this.getArrays();for(var f=0;f<d;f++)this.addShape(b[f],a);this.setIndex(a.arrays.index);this.addAttribute("position",new Y(a.arrays.position,
      3));this.addAttribute("uv",new Y(a.arrays.uv,2))};Eb.prototype.addShape=function(b,h){function d(b,a,h){a||console.error("THREE.ExtrudeGeometry: vec does not exist");return a.clone().multiplyScalar(h).add(b)}function f(b,a,h){var d,g,e;g=b.x-a.x;e=b.y-a.y;d=h.x-b.x;var k=h.y-b.y,p=g*g+e*e;if(Math.abs(g*k-e*d)>Number.EPSILON){var m=Math.sqrt(p),n=Math.sqrt(d*d+k*k),p=a.x-e/m;a=a.y+g/m;k=((h.x-k/n-p)*k-(h.y+d/n-a)*d)/(g*k-e*d);d=p+g*k-b.x;g=a+e*k-b.y;e=d*d+g*g;if(2>=e)return new l(d,g);e=Math.sqrt(e/
      2)}else b=!1,g>Number.EPSILON?d>Number.EPSILON&&(b=!0):g<-Number.EPSILON?d<-Number.EPSILON&&(b=!0):Math.sign(e)===Math.sign(k)&&(b=!0),b?(d=-e,e=Math.sqrt(p)):(d=g,g=e,e=Math.sqrt(p/2));return new l(d/e,g/e)}function g(b,a){var h,d;for(J=b.length;0<=--J;){h=J;d=J-1;0>d&&(d=b.length-1);for(var f=0,e=z+2*x,f=0;f<e;f++){var k=S*f,p=S*(f+1),l=a+d+k,r=a+d+p,p=a+h+p;m(a+h+k);m(l);m(p);m(l);m(r);m(p);k=q.length/3;k=A.generateSideWallUV(oa,q,k-6,k-3,k-2,k-1);n(k[0]);n(k[1]);n(k[3]);n(k[1]);n(k[2]);n(k[3])}}}
      function e(b,a,h){t.push(b);t.push(a);t.push(h)}function k(b,a,h){m(b);m(a);m(h);b=q.length/3;b=A.generateTopUV(oa,q,b-3,b-2,b-1);n(b[0]);n(b[1]);n(b[2])}function m(b){u.push(q.length/3);q.push(t[3*b+0]);q.push(t[3*b+1]);q.push(t[3*b+2])}function n(b){v.push(b.x);v.push(b.y)}var r=h.arrays?h.arrays:this.getArrays(),q=r.position,u=r.index,v=r.uv,t=[],r=void 0!==h.amount?h.amount:100,w=void 0!==h.bevelThickness?h.bevelThickness:6,D=void 0!==h.bevelSize?h.bevelSize:w-2,x=void 0!==h.bevelSegments?h.bevelSegments:
        3,y=void 0!==h.bevelEnabled?h.bevelEnabled:!0,F=void 0!==h.curveSegments?h.curveSegments:12,z=void 0!==h.steps?h.steps:1,P=h.extrudePath,B,N=!1,A=void 0!==h.UVGenerator?h.UVGenerator:dc.WorldUVGenerator,C,Pa,ra,O;P&&(B=P.getSpacedPoints(z),N=!0,y=!1,C=void 0!==h.frames?h.frames:P.computeFrenetFrames(z,!1),Pa=new a,ra=new a,O=new a);y||(D=w=x=0);var ma,X,L,oa=this,P=b.extractPoints(F),F=P.shape,I=P.holes;if(!Wb.isClockWise(F))for(F=F.reverse(),X=0,L=I.length;X<L;X++)ma=I[X],Wb.isClockWise(ma)&&(I[X]=
        ma.reverse());var E=Wb.triangulateShape(F,I),H=F;X=0;for(L=I.length;X<L;X++)ma=I[X],F=F.concat(ma);var za,R,K,W,G,S=F.length,Ya,da=E.length,P=[],J=0;K=H.length;za=K-1;for(R=J+1;J<K;J++,za++,R++)za===K&&(za=0),R===K&&(R=0),P[J]=f(H[J],H[za],H[R]);var ea=[],jb,Wa=P.concat();X=0;for(L=I.length;X<L;X++){ma=I[X];jb=[];J=0;K=ma.length;za=K-1;for(R=J+1;J<K;J++,za++,R++)za===K&&(za=0),R===K&&(R=0),jb[J]=f(ma[J],ma[za],ma[R]);ea.push(jb);Wa=Wa.concat(jb)}for(za=0;za<x;za++){K=za/x;W=w*Math.cos(K*Math.PI/2);
        R=D*Math.sin(K*Math.PI/2);J=0;for(K=H.length;J<K;J++)G=d(H[J],P[J],R),e(G.x,G.y,-W);X=0;for(L=I.length;X<L;X++)for(ma=I[X],jb=ea[X],J=0,K=ma.length;J<K;J++)G=d(ma[J],jb[J],R),e(G.x,G.y,-W)}R=D;for(J=0;J<S;J++)G=y?d(F[J],Wa[J],R):F[J],N?(ra.copy(C.normals[0]).multiplyScalar(G.x),Pa.copy(C.binormals[0]).multiplyScalar(G.y),O.copy(B[0]).add(ra).add(Pa),e(O.x,O.y,O.z)):e(G.x,G.y,0);for(K=1;K<=z;K++)for(J=0;J<S;J++)G=y?d(F[J],Wa[J],R):F[J],N?(ra.copy(C.normals[K]).multiplyScalar(G.x),Pa.copy(C.binormals[K]).multiplyScalar(G.y),
        O.copy(B[K]).add(ra).add(Pa),e(O.x,O.y,O.z)):e(G.x,G.y,r/z*K);for(za=x-1;0<=za;za--){K=za/x;W=w*Math.cos(K*Math.PI/2);R=D*Math.sin(K*Math.PI/2);J=0;for(K=H.length;J<K;J++)G=d(H[J],P[J],R),e(G.x,G.y,r+W);X=0;for(L=I.length;X<L;X++)for(ma=I[X],jb=ea[X],J=0,K=ma.length;J<K;J++)G=d(ma[J],jb[J],R),N?e(G.x,G.y+B[z-1].y,B[z-1].x+W):e(G.x,G.y,r+W)}(function(){var b=q.length/3;if(y){var a;a=0*S;for(J=0;J<da;J++)Ya=E[J],k(Ya[2]+a,Ya[1]+a,Ya[0]+a);a=z+2*x;a*=S;for(J=0;J<da;J++)Ya=E[J],k(Ya[0]+a,Ya[1]+a,Ya[2]+
        a)}else{for(J=0;J<da;J++)Ya=E[J],k(Ya[2],Ya[1],Ya[0]);for(J=0;J<da;J++)Ya=E[J],k(Ya[0]+S*z,Ya[1]+S*z,Ya[2]+S*z)}oa.addGroup(b,q.length/3-b,void 0!==h.material?h.material:0)})();(function(){var b=q.length/3,a=0;g(H,a);a+=H.length;X=0;for(L=I.length;X<L;X++)ma=I[X],g(ma,a),a+=ma.length;oa.addGroup(b,q.length/3-b,void 0!==h.extrudeMaterial?h.extrudeMaterial:1)})();h.arrays||(this.setIndex(u),this.addAttribute("position",new Y(q,3)),this.addAttribute("uv",new Y(v,2)))};dc.WorldUVGenerator={generateTopUV:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          a,d,f,g){b=a[3*f];f=a[3*f+1];var e=a[3*g];g=a[3*g+1];return[new l(a[3*d],a[3*d+1]),new l(b,f),new l(e,g)]},generateSideWallUV:function(b,a,d,f,g,e){b=a[3*d];var k=a[3*d+1];d=a[3*d+2];var m=a[3*f],n=a[3*f+1];f=a[3*f+2];var r=a[3*g],q=a[3*g+1];g=a[3*g+2];var u=a[3*e],v=a[3*e+1];a=a[3*e+2];return.01>Math.abs(k-n)?[new l(b,1-d),new l(m,1-f),new l(r,1-g),new l(u,1-a)]:[new l(k,1-d),new l(n,1-f),new l(q,1-g),new l(v,1-a)]}};Hd.prototype=Object.create(fa.prototype);Hd.prototype.constructor=Hd;Nc.prototype=
      Object.create(Eb.prototype);Nc.prototype.constructor=Nc;Id.prototype=Object.create(fa.prototype);Id.prototype.constructor=Id;kc.prototype=Object.create(N.prototype);kc.prototype.constructor=kc;Jd.prototype=Object.create(fa.prototype);Jd.prototype.constructor=Jd;Oc.prototype=Object.create(N.prototype);Oc.prototype.constructor=Oc;Kd.prototype=Object.create(fa.prototype);Kd.prototype.constructor=Kd;Pc.prototype=Object.create(N.prototype);Pc.prototype.constructor=Pc;lc.prototype=Object.create(fa.prototype);
    lc.prototype.constructor=lc;lc.prototype.toJSON=function(){var b=fa.prototype.toJSON.call(this);return zf(this.parameters.shapes,b)};mc.prototype=Object.create(N.prototype);mc.prototype.constructor=mc;mc.prototype.toJSON=function(){var b=N.prototype.toJSON.call(this);return zf(this.parameters.shapes,b)};Qc.prototype=Object.create(N.prototype);Qc.prototype.constructor=Qc;nc.prototype=Object.create(fa.prototype);nc.prototype.constructor=nc;Xb.prototype=Object.create(N.prototype);Xb.prototype.constructor=
      Xb;Ld.prototype=Object.create(nc.prototype);Ld.prototype.constructor=Ld;Md.prototype=Object.create(Xb.prototype);Md.prototype.constructor=Md;Nd.prototype=Object.create(fa.prototype);Nd.prototype.constructor=Nd;Rc.prototype=Object.create(N.prototype);Rc.prototype.constructor=Rc;var vb=Object.freeze({WireframeGeometry:Fc,ParametricGeometry:ud,ParametricBufferGeometry:Gc,TetrahedronGeometry:wd,TetrahedronBufferGeometry:Hc,OctahedronGeometry:xd,OctahedronBufferGeometry:ic,IcosahedronGeometry:yd,IcosahedronBufferGeometry:Ic,
      DodecahedronGeometry:zd,DodecahedronBufferGeometry:Jc,PolyhedronGeometry:vd,PolyhedronBufferGeometry:nb,TubeGeometry:Ad,TubeBufferGeometry:Kc,TorusKnotGeometry:Bd,TorusKnotBufferGeometry:Lc,TorusGeometry:Cd,TorusBufferGeometry:Mc,TextGeometry:Hd,TextBufferGeometry:Nc,SphereGeometry:Id,SphereBufferGeometry:kc,RingGeometry:Jd,RingBufferGeometry:Oc,PlaneGeometry:bb,PlaneBufferGeometry:Ca,LatheGeometry:Kd,LatheBufferGeometry:Pc,ShapeGeometry:lc,ShapeBufferGeometry:mc,ExtrudeGeometry:dc,ExtrudeBufferGeometry:Eb,
      EdgesGeometry:Qc,ConeGeometry:Ld,ConeBufferGeometry:Md,CylinderGeometry:nc,CylinderBufferGeometry:Xb,CircleGeometry:Nd,CircleBufferGeometry:Rc,BoxGeometry:oa,BoxBufferGeometry:X});Sc.prototype=Object.create(ba.prototype);Sc.prototype.constructor=Sc;Sc.prototype.isShadowMaterial=!0;Tc.prototype=Object.create(Na.prototype);Tc.prototype.constructor=Tc;Tc.prototype.isRawShaderMaterial=!0;Qb.prototype=Object.create(ba.prototype);Qb.prototype.constructor=Qb;Qb.prototype.isMeshStandardMaterial=!0;Qb.prototype.copy=
      function(b){ba.prototype.copy.call(this,b);this.defines={STANDARD:""};this.color.copy(b.color);this.roughness=b.roughness;this.metalness=b.metalness;this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.emissive.copy(b.emissive);this.emissiveMap=b.emissiveMap;this.emissiveIntensity=b.emissiveIntensity;this.bumpMap=b.bumpMap;this.bumpScale=b.bumpScale;this.normalMap=b.normalMap;this.normalScale.copy(b.normalScale);
        this.displacementMap=b.displacementMap;this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;this.roughnessMap=b.roughnessMap;this.metalnessMap=b.metalnessMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.envMapIntensity=b.envMapIntensity;this.refractionRatio=b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;this.skinning=b.skinning;this.morphTargets=
          b.morphTargets;this.morphNormals=b.morphNormals;return this};oc.prototype=Object.create(Qb.prototype);oc.prototype.constructor=oc;oc.prototype.isMeshPhysicalMaterial=!0;oc.prototype.copy=function(b){Qb.prototype.copy.call(this,b);this.defines={PHYSICAL:""};this.reflectivity=b.reflectivity;this.clearCoat=b.clearCoat;this.clearCoatRoughness=b.clearCoatRoughness;return this};Fb.prototype=Object.create(ba.prototype);Fb.prototype.constructor=Fb;Fb.prototype.isMeshPhongMaterial=!0;Fb.prototype.copy=function(b){ba.prototype.copy.call(this,
      b);this.color.copy(b.color);this.specular.copy(b.specular);this.shininess=b.shininess;this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.emissive.copy(b.emissive);this.emissiveMap=b.emissiveMap;this.emissiveIntensity=b.emissiveIntensity;this.bumpMap=b.bumpMap;this.bumpScale=b.bumpScale;this.normalMap=b.normalMap;this.normalScale.copy(b.normalScale);this.displacementMap=b.displacementMap;this.displacementScale=
      b.displacementScale;this.displacementBias=b.displacementBias;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;return this};pc.prototype=
      Object.create(Fb.prototype);pc.prototype.constructor=pc;pc.prototype.isMeshToonMaterial=!0;pc.prototype.copy=function(b){Fb.prototype.copy.call(this,b);this.gradientMap=b.gradientMap;return this};qc.prototype=Object.create(ba.prototype);qc.prototype.constructor=qc;qc.prototype.isMeshNormalMaterial=!0;qc.prototype.copy=function(b){ba.prototype.copy.call(this,b);this.bumpMap=b.bumpMap;this.bumpScale=b.bumpScale;this.normalMap=b.normalMap;this.normalScale.copy(b.normalScale);this.displacementMap=b.displacementMap;
      this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;return this};rc.prototype=Object.create(ba.prototype);rc.prototype.constructor=rc;rc.prototype.isMeshLambertMaterial=!0;rc.prototype.copy=function(b){ba.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=
      b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.emissive.copy(b.emissive);this.emissiveMap=b.emissiveMap;this.emissiveIntensity=b.emissiveIntensity;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;
      this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;return this};sc.prototype=Object.create(Ha.prototype);sc.prototype.constructor=sc;sc.prototype.isLineDashedMaterial=!0;sc.prototype.copy=function(b){Ha.prototype.copy.call(this,b);this.scale=b.scale;this.dashSize=b.dashSize;this.gapSize=b.gapSize;return this};var eg=Object.freeze({ShadowMaterial:Sc,SpriteMaterial:cc,RawShaderMaterial:Tc,ShaderMaterial:Na,PointsMaterial:Db,MeshPhysicalMaterial:oc,MeshStandardMaterial:Qb,
      MeshPhongMaterial:Fb,MeshToonMaterial:pc,MeshNormalMaterial:qc,MeshLambertMaterial:rc,MeshDepthMaterial:xa,MeshDistanceMaterial:ka,MeshBasicMaterial:Ka,LineDashedMaterial:sc,LineBasicMaterial:Ha,Material:ba}),wc={enabled:!1,files:{},add:function(b,a){!1!==this.enabled&&(this.files[b]=a)},get:function(b){if(!1!==this.enabled)return this.files[b]},remove:function(b){delete this.files[b]},clear:function(){this.files={}}},ob=new He,Zb={};Object.assign(Gb.prototype,{load:function(b,a,d,f){void 0===b&&
      (b="");void 0!==this.path&&(b=this.path+b);b=this.manager.resolveURL(b);var g=this,e=wc.get(b);if(void 0!==e)return g.manager.itemStart(b),setTimeout(function(){a&&a(e);g.manager.itemEnd(b)},0),e;if(void 0!==Zb[b])Zb[b].push({onLoad:a,onProgress:d,onError:f});else{var k=b.match(/^data:(.*?)(;base64)?,(.*)$/);if(k){d=k[1];var m=!!k[2],k=k[3],k=window.decodeURIComponent(k);m&&(k=window.atob(k));try{var l,n=(this.responseType||"").toLowerCase();switch(n){case "arraybuffer":case "blob":for(var r=new Uint8Array(k.length),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   m=0;m<k.length;m++)r[m]=k.charCodeAt(m);l="blob"===n?new Blob([r.buffer],{type:d}):r.buffer;break;case "document":l=(new DOMParser).parseFromString(k,d);break;case "json":l=JSON.parse(k);break;default:l=k}window.setTimeout(function(){a&&a(l);g.manager.itemEnd(b)},0)}catch(q){window.setTimeout(function(){f&&f(q);g.manager.itemEnd(b);g.manager.itemError(b)},0)}}else{Zb[b]=[];Zb[b].push({onLoad:a,onProgress:d,onError:f});var u=new XMLHttpRequest;u.open("GET",b,!0);u.addEventListener("load",function(a){var h=
        this.response;wc.add(b,h);var d=Zb[b];delete Zb[b];if(200===this.status){for(var f=0,e=d.length;f<e;f++){var k=d[f];if(k.onLoad)k.onLoad(h)}g.manager.itemEnd(b)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");f=0;for(e=d.length;f<e;f++)if(k=d[f],k.onLoad)k.onLoad(h);g.manager.itemEnd(b)}else{f=0;for(e=d.length;f<e;f++)if(k=d[f],k.onError)k.onError(a);g.manager.itemEnd(b);g.manager.itemError(b)}},!1);u.addEventListener("progress",function(a){for(var h=Zb[b],d=0,f=
        h.length;d<f;d++){var g=h[d];if(g.onProgress)g.onProgress(a)}},!1);u.addEventListener("error",function(a){var h=Zb[b];delete Zb[b];for(var d=0,f=h.length;d<f;d++){var e=h[d];if(e.onError)e.onError(a)}g.manager.itemEnd(b);g.manager.itemError(b)},!1);void 0!==this.responseType&&(u.responseType=this.responseType);void 0!==this.withCredentials&&(u.withCredentials=this.withCredentials);u.overrideMimeType&&u.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(m in this.requestHeader)u.setRequestHeader(m,
        this.requestHeader[m]);u.send(null)}g.manager.itemStart(b);return u}},setPath:function(b){this.path=b;return this},setResponseType:function(b){this.responseType=b;return this},setWithCredentials:function(b){this.withCredentials=b;return this},setMimeType:function(b){this.mimeType=b;return this},setRequestHeader:function(b){this.requestHeader=b;return this}});Object.assign(Af.prototype,{load:function(b,a,d,f){function g(r){l.load(b[r],function(b){b=e._parser(b,!0);k[r]={width:b.width,height:b.height,
        format:b.format,mipmaps:b.mipmaps};n+=1;6===n&&(1===b.mipmapCount&&(m.minFilter=1006),m.format=b.format,m.needsUpdate=!0,a&&a(m))},d,f)}var e=this,k=[],m=new Ec;m.image=k;var l=new Gb(this.manager);l.setPath(this.path);l.setResponseType("arraybuffer");if(Array.isArray(b))for(var n=0,r=0,q=b.length;r<q;++r)g(r);else l.load(b,function(b){b=e._parser(b,!0);if(b.isCubemap)for(var d=b.mipmaps.length/b.mipmapCount,f=0;f<d;f++){k[f]={mipmaps:[]};for(var g=0;g<b.mipmapCount;g++)k[f].mipmaps.push(b.mipmaps[f*
      b.mipmapCount+g]),k[f].format=b.format,k[f].width=b.width,k[f].height=b.height}else m.image.width=b.width,m.image.height=b.height,m.mipmaps=b.mipmaps;1===b.mipmapCount&&(m.minFilter=1006);m.format=b.format;m.needsUpdate=!0;a&&a(m)},d,f);return m},setPath:function(b){this.path=b;return this}});Object.assign(Ie.prototype,{load:function(b,a,d,f){var g=this,e=new v,k=new Gb(this.manager);k.setResponseType("arraybuffer");k.load(b,function(b){if(b=g._parser(b))void 0!==b.image?e.image=b.image:void 0!==
        b.data&&(e.image.width=b.width,e.image.height=b.height,e.image.data=b.data),e.wrapS=void 0!==b.wrapS?b.wrapS:1001,e.wrapT=void 0!==b.wrapT?b.wrapT:1001,e.magFilter=void 0!==b.magFilter?b.magFilter:1006,e.minFilter=void 0!==b.minFilter?b.minFilter:1008,e.anisotropy=void 0!==b.anisotropy?b.anisotropy:1,void 0!==b.format&&(e.format=b.format),void 0!==b.type&&(e.type=b.type),void 0!==b.mipmaps&&(e.mipmaps=b.mipmaps),1===b.mipmapCount&&(e.minFilter=1006),e.needsUpdate=!0,a&&a(e,b)},d,f);return e}});Object.assign(Od.prototype,
      {crossOrigin:"Anonymous",load:function(b,a,d,f){void 0===b&&(b="");void 0!==this.path&&(b=this.path+b);b=this.manager.resolveURL(b);var g=this,e=wc.get(b);if(void 0!==e)return g.manager.itemStart(b),setTimeout(function(){a&&a(e);g.manager.itemEnd(b)},0),e;d=document.createElementNS("http://www.w3.org/1999/xhtml","img");d.addEventListener("load",function(){wc.add(b,this);a&&a(this);g.manager.itemEnd(b)},!1);d.addEventListener("error",function(a){f&&f(a);g.manager.itemEnd(b);g.manager.itemError(b)},
          !1);"data:"!==b.substr(0,5)&&void 0!==this.crossOrigin&&(d.crossOrigin=this.crossOrigin);g.manager.itemStart(b);d.src=b;return d},setCrossOrigin:function(b){this.crossOrigin=b;return this},setPath:function(b){this.path=b;return this}});Object.assign(Je.prototype,{crossOrigin:"Anonymous",load:function(b,a,d,f){function g(d){k.load(b[d],function(b){e.images[d]=b;m++;6===m&&(e.needsUpdate=!0,a&&a(e))},void 0,f)}var e=new q,k=new Od(this.manager);k.setCrossOrigin(this.crossOrigin);k.setPath(this.path);
        var m=0;for(d=0;d<b.length;++d)g(d);return e},setCrossOrigin:function(b){this.crossOrigin=b;return this},setPath:function(b){this.path=b;return this}});Object.assign(ie.prototype,{crossOrigin:"Anonymous",load:function(b,a,d,f){var g=new r,e=new Od(this.manager);e.setCrossOrigin(this.crossOrigin);e.setPath(this.path);e.load(b,function(d){g.image=d;d=0<b.search(/\.(jpg|jpeg)$/)||0===b.search(/^data\:image\/jpeg/);g.format=d?1022:1023;g.needsUpdate=!0;void 0!==a&&a(g)},d,f);return g},setCrossOrigin:function(b){this.crossOrigin=
        b;return this},setPath:function(b){this.path=b;return this}});Object.assign(ia.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(b,a){var d=this.getUtoTmapping(b);return this.getPoint(d,a)},getPoints:function(b){void 0===b&&(b=5);for(var a=[],d=0;d<=b;d++)a.push(this.getPoint(d/b));return a},getSpacedPoints:function(b){void 0===b&&(b=5);for(var a=[],d=0;d<=b;d++)a.push(this.getPointAt(d/b));return a},getLength:function(){var b=
        this.getLengths();return b[b.length-1]},getLengths:function(b){void 0===b&&(b=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===b+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var a=[],d,f=this.getPoint(0),g,e=0;a.push(0);for(g=1;g<=b;g++)d=this.getPoint(g/b),e+=d.distanceTo(f),a.push(e),f=d;return this.cacheArcLengths=a},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(b,a){var d=this.getLengths(),f=0,
        g=d.length,e;e=a?a:b*d[g-1];for(var k=0,m=g-1,l;k<=m;)if(f=Math.floor(k+(m-k)/2),l=d[f]-e,0>l)k=f+1;else if(0<l)m=f-1;else{m=f;break}f=m;if(d[f]===e)return f/(g-1);k=d[f];return(f+(e-k)/(d[f+1]-k))/(g-1)},getTangent:function(b){var a=b-1E-4;b+=1E-4;0>a&&(a=0);1<b&&(b=1);a=this.getPoint(a);return this.getPoint(b).clone().sub(a).normalize()},getTangentAt:function(b){b=this.getUtoTmapping(b);return this.getTangent(b)},computeFrenetFrames:function(b,h){var d=new a,f=[],g=[],e=[],k=new a,l=new m,n,r;for(n=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0;n<=b;n++)r=n/b,f[n]=this.getTangentAt(r),f[n].normalize();g[0]=new a;e[0]=new a;n=Number.MAX_VALUE;r=Math.abs(f[0].x);var q=Math.abs(f[0].y),u=Math.abs(f[0].z);r<=n&&(n=r,d.set(1,0,0));q<=n&&(n=q,d.set(0,1,0));u<=n&&d.set(0,0,1);k.crossVectors(f[0],d).normalize();g[0].crossVectors(f[0],k);e[0].crossVectors(f[0],g[0]);for(n=1;n<=b;n++)g[n]=g[n-1].clone(),e[n]=e[n-1].clone(),k.crossVectors(f[n-1],f[n]),k.length()>Number.EPSILON&&(k.normalize(),d=Math.acos(qa.clamp(f[n-1].dot(f[n]),-1,1)),g[n].applyMatrix4(l.makeRotationAxis(k,
        d))),e[n].crossVectors(f[n],g[n]);if(!0===h)for(d=Math.acos(qa.clamp(g[0].dot(g[b]),-1,1)),d/=b,0<f[0].dot(k.crossVectors(g[0],g[b]))&&(d=-d),n=1;n<=b;n++)g[n].applyMatrix4(l.makeRotationAxis(f[n],d*n)),e[n].crossVectors(f[n],g[n]);return{tangents:f,normals:g,binormals:e}},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.arcLengthDivisions=b.arcLengthDivisions;return this},toJSON:function(){var b={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};b.arcLengthDivisions=
        this.arcLengthDivisions;b.type=this.type;return b},fromJSON:function(b){this.arcLengthDivisions=b.arcLengthDivisions;return this}});tb.prototype=Object.create(ia.prototype);tb.prototype.constructor=tb;tb.prototype.isEllipseCurve=!0;tb.prototype.getPoint=function(b,a){for(var d=a||new l,f=2*Math.PI,g=this.aEndAngle-this.aStartAngle,e=Math.abs(g)<Number.EPSILON;0>g;)g+=f;for(;g>f;)g-=f;g<Number.EPSILON&&(g=e?0:f);!0!==this.aClockwise||e||(g=g===f?-f:g-f);var g=this.aStartAngle+b*g,f=this.aX+this.xRadius*
      Math.cos(g),k=this.aY+this.yRadius*Math.sin(g);if(0!==this.aRotation)var g=Math.cos(this.aRotation),e=Math.sin(this.aRotation),m=f-this.aX,k=k-this.aY,f=m*g-k*e+this.aX,k=m*e+k*g+this.aY;return d.set(f,k)};tb.prototype.copy=function(b){ia.prototype.copy.call(this,b);this.aX=b.aX;this.aY=b.aY;this.xRadius=b.xRadius;this.yRadius=b.yRadius;this.aStartAngle=b.aStartAngle;this.aEndAngle=b.aEndAngle;this.aClockwise=b.aClockwise;this.aRotation=b.aRotation;return this};tb.prototype.toJSON=function(){var b=
      ia.prototype.toJSON.call(this);b.aX=this.aX;b.aY=this.aY;b.xRadius=this.xRadius;b.yRadius=this.yRadius;b.aStartAngle=this.aStartAngle;b.aEndAngle=this.aEndAngle;b.aClockwise=this.aClockwise;b.aRotation=this.aRotation;return b};tb.prototype.fromJSON=function(b){ia.prototype.fromJSON.call(this,b);this.aX=b.aX;this.aY=b.aY;this.xRadius=b.xRadius;this.yRadius=b.yRadius;this.aStartAngle=b.aStartAngle;this.aEndAngle=b.aEndAngle;this.aClockwise=b.aClockwise;this.aRotation=b.aRotation;return this};Uc.prototype=
      Object.create(tb.prototype);Uc.prototype.constructor=Uc;Uc.prototype.isArcCurve=!0;var Be=new a,ef=new Ke,ff=new Ke,gf=new Ke;db.prototype=Object.create(ia.prototype);db.prototype.constructor=db;db.prototype.isCatmullRomCurve3=!0;db.prototype.getPoint=function(b,h){var d=h||new a,f=this.points,g=f.length,e=(g-(this.closed?0:1))*b,k=Math.floor(e),e=e-k;this.closed?k+=0<k?0:(Math.floor(Math.abs(k)/f.length)+1)*f.length:0===e&&k===g-1&&(k=g-2,e=1);var m,l,n;this.closed||0<k?m=f[(k-1)%g]:(Be.subVectors(f[0],
      f[1]).add(f[0]),m=Be);l=f[k%g];n=f[(k+1)%g];this.closed||k+2<g?f=f[(k+2)%g]:(Be.subVectors(f[g-1],f[g-2]).add(f[g-1]),f=Be);if("centripetal"===this.curveType||"chordal"===this.curveType){var r="chordal"===this.curveType?.5:.25,g=Math.pow(m.distanceToSquared(l),r),k=Math.pow(l.distanceToSquared(n),r),r=Math.pow(n.distanceToSquared(f),r);1E-4>k&&(k=1);1E-4>g&&(g=k);1E-4>r&&(r=k);ef.initNonuniformCatmullRom(m.x,l.x,n.x,f.x,g,k,r);ff.initNonuniformCatmullRom(m.y,l.y,n.y,f.y,g,k,r);gf.initNonuniformCatmullRom(m.z,
      l.z,n.z,f.z,g,k,r)}else"catmullrom"===this.curveType&&(ef.initCatmullRom(m.x,l.x,n.x,f.x,this.tension),ff.initCatmullRom(m.y,l.y,n.y,f.y,this.tension),gf.initCatmullRom(m.z,l.z,n.z,f.z,this.tension));d.set(ef.calc(e),ff.calc(e),gf.calc(e));return d};db.prototype.copy=function(b){ia.prototype.copy.call(this,b);this.points=[];for(var a=0,d=b.points.length;a<d;a++)this.points.push(b.points[a].clone());this.closed=b.closed;this.curveType=b.curveType;this.tension=b.tension;return this};db.prototype.toJSON=
      function(){var b=ia.prototype.toJSON.call(this);b.points=[];for(var a=0,d=this.points.length;a<d;a++)b.points.push(this.points[a].toArray());b.closed=this.closed;b.curveType=this.curveType;b.tension=this.tension;return b};db.prototype.fromJSON=function(b){ia.prototype.fromJSON.call(this,b);this.points=[];for(var h=0,d=b.points.length;h<d;h++){var f=b.points[h];this.points.push((new a).fromArray(f))}this.closed=b.closed;this.curveType=b.curveType;this.tension=b.tension;return this};Hb.prototype=Object.create(ia.prototype);
    Hb.prototype.constructor=Hb;Hb.prototype.isCubicBezierCurve=!0;Hb.prototype.getPoint=function(b,a){var d=a||new l,f=this.v0,g=this.v1,e=this.v2,k=this.v3;d.set(Qd(b,f.x,g.x,e.x,k.x),Qd(b,f.y,g.y,e.y,k.y));return d};Hb.prototype.copy=function(b){ia.prototype.copy.call(this,b);this.v0.copy(b.v0);this.v1.copy(b.v1);this.v2.copy(b.v2);this.v3.copy(b.v3);return this};Hb.prototype.toJSON=function(){var b=ia.prototype.toJSON.call(this);b.v0=this.v0.toArray();b.v1=this.v1.toArray();b.v2=this.v2.toArray();
      b.v3=this.v3.toArray();return b};Hb.prototype.fromJSON=function(b){ia.prototype.fromJSON.call(this,b);this.v0.fromArray(b.v0);this.v1.fromArray(b.v1);this.v2.fromArray(b.v2);this.v3.fromArray(b.v3);return this};Rb.prototype=Object.create(ia.prototype);Rb.prototype.constructor=Rb;Rb.prototype.isCubicBezierCurve3=!0;Rb.prototype.getPoint=function(b,h){var d=h||new a,f=this.v0,g=this.v1,e=this.v2,k=this.v3;d.set(Qd(b,f.x,g.x,e.x,k.x),Qd(b,f.y,g.y,e.y,k.y),Qd(b,f.z,g.z,e.z,k.z));return d};Rb.prototype.copy=
      function(b){ia.prototype.copy.call(this,b);this.v0.copy(b.v0);this.v1.copy(b.v1);this.v2.copy(b.v2);this.v3.copy(b.v3);return this};Rb.prototype.toJSON=function(){var b=ia.prototype.toJSON.call(this);b.v0=this.v0.toArray();b.v1=this.v1.toArray();b.v2=this.v2.toArray();b.v3=this.v3.toArray();return b};Rb.prototype.fromJSON=function(b){ia.prototype.fromJSON.call(this,b);this.v0.fromArray(b.v0);this.v1.fromArray(b.v1);this.v2.fromArray(b.v2);this.v3.fromArray(b.v3);return this};pb.prototype=Object.create(ia.prototype);
    pb.prototype.constructor=pb;pb.prototype.isLineCurve=!0;pb.prototype.getPoint=function(b,a){var d=a||new l;1===b?d.copy(this.v2):(d.copy(this.v2).sub(this.v1),d.multiplyScalar(b).add(this.v1));return d};pb.prototype.getPointAt=function(b,a){return this.getPoint(b,a)};pb.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};pb.prototype.copy=function(b){ia.prototype.copy.call(this,b);this.v1.copy(b.v1);this.v2.copy(b.v2);return this};pb.prototype.toJSON=function(){var b=
      ia.prototype.toJSON.call(this);b.v1=this.v1.toArray();b.v2=this.v2.toArray();return b};pb.prototype.fromJSON=function(b){ia.prototype.fromJSON.call(this,b);this.v1.fromArray(b.v1);this.v2.fromArray(b.v2);return this};Ib.prototype=Object.create(ia.prototype);Ib.prototype.constructor=Ib;Ib.prototype.isLineCurve3=!0;Ib.prototype.getPoint=function(b,h){var d=h||new a;1===b?d.copy(this.v2):(d.copy(this.v2).sub(this.v1),d.multiplyScalar(b).add(this.v1));return d};Ib.prototype.getPointAt=function(b,a){return this.getPoint(b,
      a)};Ib.prototype.copy=function(b){ia.prototype.copy.call(this,b);this.v1.copy(b.v1);this.v2.copy(b.v2);return this};Ib.prototype.toJSON=function(){var b=ia.prototype.toJSON.call(this);b.v1=this.v1.toArray();b.v2=this.v2.toArray();return b};Ib.prototype.fromJSON=function(b){ia.prototype.fromJSON.call(this,b);this.v1.fromArray(b.v1);this.v2.fromArray(b.v2);return this};Jb.prototype=Object.create(ia.prototype);Jb.prototype.constructor=Jb;Jb.prototype.isQuadraticBezierCurve=!0;Jb.prototype.getPoint=function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   a){var d=a||new l,f=this.v0,g=this.v1,e=this.v2;d.set(Pd(b,f.x,g.x,e.x),Pd(b,f.y,g.y,e.y));return d};Jb.prototype.copy=function(b){ia.prototype.copy.call(this,b);this.v0.copy(b.v0);this.v1.copy(b.v1);this.v2.copy(b.v2);return this};Jb.prototype.toJSON=function(){var b=ia.prototype.toJSON.call(this);b.v0=this.v0.toArray();b.v1=this.v1.toArray();b.v2=this.v2.toArray();return b};Jb.prototype.fromJSON=function(b){ia.prototype.fromJSON.call(this,b);this.v0.fromArray(b.v0);this.v1.fromArray(b.v1);this.v2.fromArray(b.v2);
      return this};Sb.prototype=Object.create(ia.prototype);Sb.prototype.constructor=Sb;Sb.prototype.isQuadraticBezierCurve3=!0;Sb.prototype.getPoint=function(b,h){var d=h||new a,f=this.v0,g=this.v1,e=this.v2;d.set(Pd(b,f.x,g.x,e.x),Pd(b,f.y,g.y,e.y),Pd(b,f.z,g.z,e.z));return d};Sb.prototype.copy=function(b){ia.prototype.copy.call(this,b);this.v0.copy(b.v0);this.v1.copy(b.v1);this.v2.copy(b.v2);return this};Sb.prototype.toJSON=function(){var b=ia.prototype.toJSON.call(this);b.v0=this.v0.toArray();b.v1=
      this.v1.toArray();b.v2=this.v2.toArray();return b};Sb.prototype.fromJSON=function(b){ia.prototype.fromJSON.call(this,b);this.v0.fromArray(b.v0);this.v1.fromArray(b.v1);this.v2.fromArray(b.v2);return this};Kb.prototype=Object.create(ia.prototype);Kb.prototype.constructor=Kb;Kb.prototype.isSplineCurve=!0;Kb.prototype.getPoint=function(b,a){var d=a||new l,f=this.points,g=(f.length-1)*b,e=Math.floor(g),g=g-e,k=f[0===e?e:e-1],m=f[e],n=f[e>f.length-2?f.length-1:e+1],f=f[e>f.length-3?f.length-1:e+2];d.set(Bf(g,
      k.x,m.x,n.x,f.x),Bf(g,k.y,m.y,n.y,f.y));return d};Kb.prototype.copy=function(b){ia.prototype.copy.call(this,b);this.points=[];for(var a=0,d=b.points.length;a<d;a++)this.points.push(b.points[a].clone());return this};Kb.prototype.toJSON=function(){var b=ia.prototype.toJSON.call(this);b.points=[];for(var a=0,d=this.points.length;a<d;a++)b.points.push(this.points[a].toArray());return b};Kb.prototype.fromJSON=function(b){ia.prototype.fromJSON.call(this,b);this.points=[];for(var a=0,d=b.points.length;a<
    d;a++){var f=b.points[a];this.points.push((new l).fromArray(f))}return this};var fg=Object.freeze({ArcCurve:Uc,CatmullRomCurve3:db,CubicBezierCurve:Hb,CubicBezierCurve3:Rb,EllipseCurve:tb,LineCurve:pb,LineCurve3:Ib,QuadraticBezierCurve:Jb,QuadraticBezierCurve3:Sb,SplineCurve:Kb});Yb.prototype=Object.assign(Object.create(ia.prototype),{constructor:Yb,add:function(b){this.curves.push(b)},closePath:function(){var b=this.curves[0].getPoint(0),a=this.curves[this.curves.length-1].getPoint(1);b.equals(a)||
      this.curves.push(new pb(a,b))},getPoint:function(b){var a=b*this.getLength(),d=this.getCurveLengths();for(b=0;b<d.length;){if(d[b]>=a)return a=d[b]-a,b=this.curves[b],d=b.getLength(),b.getPointAt(0===d?0:1-a/d);b++}return null},getLength:function(){var b=this.getCurveLengths();return b[b.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;
        for(var b=[],a=0,d=0,f=this.curves.length;d<f;d++)a+=this.curves[d].getLength(),b.push(a);return this.cacheLengths=b},getSpacedPoints:function(b){void 0===b&&(b=40);for(var a=[],d=0;d<=b;d++)a.push(this.getPoint(d/b));this.autoClose&&a.push(a[0]);return a},getPoints:function(b){b=b||12;for(var a=[],d,f=0,g=this.curves;f<g.length;f++)for(var e=g[f],e=e.getPoints(e&&e.isEllipseCurve?2*b:e&&e.isLineCurve?1:e&&e.isSplineCurve?b*e.points.length:b),k=0;k<e.length;k++){var m=e[k];d&&d.equals(m)||(a.push(m),
        d=m)}this.autoClose&&1<a.length&&!a[a.length-1].equals(a[0])&&a.push(a[0]);return a},copy:function(b){ia.prototype.copy.call(this,b);this.curves=[];for(var a=0,d=b.curves.length;a<d;a++)this.curves.push(b.curves[a].clone());this.autoClose=b.autoClose;return this},toJSON:function(){var b=ia.prototype.toJSON.call(this);b.autoClose=this.autoClose;b.curves=[];for(var a=0,d=this.curves.length;a<d;a++)b.curves.push(this.curves[a].toJSON());return b},fromJSON:function(b){ia.prototype.fromJSON.call(this,
        b);this.autoClose=b.autoClose;this.curves=[];for(var a=0,d=b.curves.length;a<d;a++){var f=b.curves[a];this.curves.push((new fg[f.type]).fromJSON(f))}return this}});Lb.prototype=Object.assign(Object.create(Yb.prototype),{constructor:Lb,setFromPoints:function(b){this.moveTo(b[0].x,b[0].y);for(var a=1,d=b.length;a<d;a++)this.lineTo(b[a].x,b[a].y)},moveTo:function(b,a){this.currentPoint.set(b,a)},lineTo:function(b,a){var d=new pb(this.currentPoint.clone(),new l(b,a));this.curves.push(d);this.currentPoint.set(b,
        a)},quadraticCurveTo:function(b,a,d,f){b=new Jb(this.currentPoint.clone(),new l(b,a),new l(d,f));this.curves.push(b);this.currentPoint.set(d,f)},bezierCurveTo:function(b,a,d,f,g,e){b=new Hb(this.currentPoint.clone(),new l(b,a),new l(d,f),new l(g,e));this.curves.push(b);this.currentPoint.set(g,e)},splineThru:function(b){var a=[this.currentPoint.clone()].concat(b),a=new Kb(a);this.curves.push(a);this.currentPoint.copy(b[b.length-1])},arc:function(b,a,d,f,g,e){this.absarc(b+this.currentPoint.x,a+this.currentPoint.y,
        d,f,g,e)},absarc:function(b,a,d,f,g,e){this.absellipse(b,a,d,d,f,g,e)},ellipse:function(b,a,d,f,g,e,k,m){this.absellipse(b+this.currentPoint.x,a+this.currentPoint.y,d,f,g,e,k,m)},absellipse:function(b,a,d,f,g,e,k,m){b=new tb(b,a,d,f,g,e,k,m);0<this.curves.length&&(a=b.getPoint(0),a.equals(this.currentPoint)||this.lineTo(a.x,a.y));this.curves.push(b);b=b.getPoint(1);this.currentPoint.copy(b)},copy:function(b){Yb.prototype.copy.call(this,b);this.currentPoint.copy(b.currentPoint);return this},toJSON:function(){var b=
        Yb.prototype.toJSON.call(this);b.currentPoint=this.currentPoint.toArray();return b},fromJSON:function(b){Yb.prototype.fromJSON.call(this,b);this.currentPoint.fromArray(b.currentPoint);return this}});ec.prototype=Object.assign(Object.create(Lb.prototype),{constructor:ec,getPointsHoles:function(b){for(var a=[],d=0,f=this.holes.length;d<f;d++)a[d]=this.holes[d].getPoints(b);return a},extractPoints:function(b){return{shape:this.getPoints(b),holes:this.getPointsHoles(b)}},copy:function(b){Lb.prototype.copy.call(this,
        b);this.holes=[];for(var a=0,d=b.holes.length;a<d;a++)this.holes.push(b.holes[a].clone());return this},toJSON:function(){var b=Lb.prototype.toJSON.call(this);b.uuid=this.uuid;b.holes=[];for(var a=0,d=this.holes.length;a<d;a++)b.holes.push(this.holes[a].toJSON());return b},fromJSON:function(b){Lb.prototype.fromJSON.call(this,b);this.uuid=b.uuid;this.holes=[];for(var a=0,d=b.holes.length;a<d;a++){var f=b.holes[a];this.holes.push((new Lb).fromJSON(f))}return this}});Ta.prototype=Object.assign(Object.create(aa.prototype),
      {constructor:Ta,isLight:!0,copy:function(b){aa.prototype.copy.call(this,b);this.color.copy(b.color);this.intensity=b.intensity;return this},toJSON:function(b){b=aa.prototype.toJSON.call(this,b);b.object.color=this.color.getHex();b.object.intensity=this.intensity;void 0!==this.groundColor&&(b.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(b.object.distance=this.distance);void 0!==this.angle&&(b.object.angle=this.angle);void 0!==this.decay&&(b.object.decay=this.decay);void 0!==
        this.penumbra&&(b.object.penumbra=this.penumbra);void 0!==this.shadow&&(b.object.shadow=this.shadow.toJSON());return b}});je.prototype=Object.assign(Object.create(Ta.prototype),{constructor:je,isHemisphereLight:!0,copy:function(b){Ta.prototype.copy.call(this,b);this.groundColor.copy(b.groundColor);return this}});Object.assign(tc.prototype,{copy:function(b){this.camera=b.camera.clone();this.bias=b.bias;this.radius=b.radius;this.mapSize.copy(b.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},
      toJSON:function(){var b={};0!==this.bias&&(b.bias=this.bias);1!==this.radius&&(b.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)b.mapSize=this.mapSize.toArray();b.camera=this.camera.toJSON(!1).object;delete b.camera.matrix;return b}});ke.prototype=Object.assign(Object.create(tc.prototype),{constructor:ke,isSpotLightShadow:!0,update:function(b){var a=this.camera,d=2*qa.RAD2DEG*b.angle,f=this.mapSize.width/this.mapSize.height;b=b.distance||a.far;if(d!==a.fov||f!==a.aspect||b!==a.far)a.fov=
        d,a.aspect=f,a.far=b,a.updateProjectionMatrix()}});le.prototype=Object.assign(Object.create(Ta.prototype),{constructor:le,isSpotLight:!0,copy:function(b){Ta.prototype.copy.call(this,b);this.distance=b.distance;this.angle=b.angle;this.penumbra=b.penumbra;this.decay=b.decay;this.target=b.target.clone();this.shadow=b.shadow.clone();return this}});me.prototype=Object.assign(Object.create(Ta.prototype),{constructor:me,isPointLight:!0,copy:function(b){Ta.prototype.copy.call(this,b);this.distance=b.distance;
        this.decay=b.decay;this.shadow=b.shadow.clone();return this}});ne.prototype=Object.assign(Object.create(tc.prototype),{constructor:ne});oe.prototype=Object.assign(Object.create(Ta.prototype),{constructor:oe,isDirectionalLight:!0,copy:function(b){Ta.prototype.copy.call(this,b);this.target=b.target.clone();this.shadow=b.shadow.clone();return this}});pe.prototype=Object.assign(Object.create(Ta.prototype),{constructor:pe,isAmbientLight:!0});qe.prototype=Object.assign(Object.create(Ta.prototype),{constructor:qe,
      isRectAreaLight:!0,copy:function(b){Ta.prototype.copy.call(this,b);this.width=b.width;this.height=b.height;return this},toJSON:function(b){b=Ta.prototype.toJSON.call(this,b);b.object.width=this.width;b.object.height=this.height;return b}});re.prototype=Object.assign(Object.create(Xa.prototype),{constructor:re,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});se.prototype=Object.assign(Object.create(Xa.prototype),
      {constructor:se,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Object.assign(ub.prototype,{evaluate:function(b){var a=this.parameterPositions,d=this._cachedIndex,f=a[d],g=a[d-1];a:{b:{c:{d:if(!(b<f)){for(var e=d+2;;){if(void 0===f){if(b<g)break d;this._cachedIndex=d=a.length;return this.afterEnd_(d-1,b,g)}if(d===e)break;g=f;f=a[++d];if(b<f)break b}f=a.length;break c}if(b>=g)break a;else{e=a[1];b<e&&
      (d=2,g=e);for(e=d-2;;){if(void 0===g)return this._cachedIndex=0,this.beforeStart_(0,b,f);if(d===e)break;f=g;g=a[--d-1];if(b>=g)break b}f=d;d=0}}for(;d<f;)g=d+f>>>1,b<a[g]?f=g:d=g+1;f=a[d];g=a[d-1];if(void 0===g)return this._cachedIndex=0,this.beforeStart_(0,b,f);if(void 0===f)return this._cachedIndex=d=a.length,this.afterEnd_(d-1,g,b)}this._cachedIndex=d;this.intervalChanged_(d,g,f)}return this.interpolate_(d,g,b,f)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||
        this.DefaultSettings_},copySampleValue_:function(b){var a=this.resultBuffer,d=this.sampleValues,f=this.valueSize;b*=f;for(var g=0;g!==f;++g)a[g]=d[b+g];return a},interpolate_:function(){throw Error("call to abstract method");},intervalChanged_:function(){}});Object.assign(ub.prototype,{beforeStart_:ub.prototype.copySampleValue_,afterEnd_:ub.prototype.copySampleValue_});te.prototype=Object.assign(Object.create(ub.prototype),{constructor:te,interpolate_:function(b,a,f,g){var e=this.resultBuffer,k=this.sampleValues,
        m=this.valueSize;b*=m;a=(f-a)/(g-a);for(f=b+m;b!==f;b+=4)d.slerpFlat(e,0,k,b-m,k,b,a);return e}});Rd.prototype=Object.assign(Object.create(Xa.prototype),{constructor:Rd,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(b){return new te(this.times,this.values,this.getValueSize(),b)},InterpolantFactoryMethodSmooth:void 0});ue.prototype=Object.assign(Object.create(Xa.prototype),{constructor:ue,ValueTypeName:"color"});Vc.prototype=Object.assign(Object.create(Xa.prototype),
      {constructor:Vc,ValueTypeName:"number"});ve.prototype=Object.assign(Object.create(ub.prototype),{constructor:ve,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(b,a,d){var f=this.parameterPositions,g=b-2,e=b+1,k=f[g],m=f[e];if(void 0===k)switch(this.getSettings_().endingStart){case 2401:g=b;k=2*a-d;break;case 2402:g=f.length-2;k=a+f[g]-f[g+1];break;default:g=b,k=d}if(void 0===m)switch(this.getSettings_().endingEnd){case 2401:e=b;m=2*d-a;break;case 2402:e=1;m=d+f[1]-f[0];
        break;default:e=b-1,m=a}b=.5*(d-a);f=this.valueSize;this._weightPrev=b/(a-k);this._weightNext=b/(m-d);this._offsetPrev=g*f;this._offsetNext=e*f},interpolate_:function(b,a,d,f){var g=this.resultBuffer,e=this.sampleValues,k=this.valueSize;b*=k;var m=b-k,l=this._offsetPrev,n=this._offsetNext,r=this._weightPrev,q=this._weightNext,u=(d-a)/(f-a);d=u*u;f=d*u;a=-r*f+2*r*d-r*u;r=(1+r)*f+(-1.5-2*r)*d+(-.5+r)*u+1;u=(-1-q)*f+(1.5+q)*d+.5*u;q=q*f-q*d;for(d=0;d!==k;++d)g[d]=a*e[l+d]+r*e[m+d]+u*e[b+d]+q*e[n+d];
        return g}});Sd.prototype=Object.assign(Object.create(ub.prototype),{constructor:Sd,interpolate_:function(b,a,d,f){var g=this.resultBuffer,e=this.sampleValues,k=this.valueSize;b*=k;var m=b-k;a=(d-a)/(f-a);d=1-a;for(f=0;f!==k;++f)g[f]=e[m+f]*d+e[b+f]*a;return g}});we.prototype=Object.assign(Object.create(ub.prototype),{constructor:we,interpolate_:function(b){return this.copySampleValue_(b-1)}});var eb={arraySlice:function(b,a,d){return eb.isTypedArray(b)?new b.constructor(b.subarray(a,void 0!==d?d:
        b.length)):b.slice(a,d)},convertArray:function(b,a,d){return!b||!d&&b.constructor===a?b:"number"===typeof a.BYTES_PER_ELEMENT?new a(b):Array.prototype.slice.call(b)},isTypedArray:function(b){return ArrayBuffer.isView(b)&&!(b instanceof DataView)},getKeyframeOrder:function(b){for(var a=b.length,d=Array(a),f=0;f!==a;++f)d[f]=f;d.sort(function(a,h){return b[a]-b[h]});return d},sortedArray:function(b,a,d){for(var f=b.length,g=new b.constructor(f),e=0,k=0;k!==f;++e)for(var m=d[e]*a,l=0;l!==a;++l)g[k++]=
        b[m+l];return g},flattenJSON:function(b,a,d,f){for(var g=1,e=b[0];void 0!==e&&void 0===e[f];)e=b[g++];if(void 0!==e){var k=e[f];if(void 0!==k)if(Array.isArray(k)){do k=e[f],void 0!==k&&(a.push(e.time),d.push.apply(d,k)),e=b[g++];while(void 0!==e)}else if(void 0!==k.toArray){do k=e[f],void 0!==k&&(a.push(e.time),k.toArray(d,d.length)),e=b[g++];while(void 0!==e)}else{do k=e[f],void 0!==k&&(a.push(e.time),d.push(k)),e=b[g++];while(void 0!==e)}}}};Object.assign(Xa,{parse:function(b){if(void 0===b.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");
        var a=Xa._getTrackTypeForValueTypeName(b.type);if(void 0===b.times){var d=[],f=[];eb.flattenJSON(b.keys,d,f,"value");b.times=d;b.values=f}return void 0!==a.parse?a.parse(b):new a(b.name,b.times,b.values,b.interpolation)},toJSON:function(b){var a=b.constructor;if(void 0!==a.toJSON)a=a.toJSON(b);else{var a={name:b.name,times:eb.convertArray(b.times,Array),values:eb.convertArray(b.values,Array)},d=b.getInterpolation();d!==b.DefaultInterpolation&&(a.interpolation=d)}a.type=b.ValueTypeName;return a},_getTrackTypeForValueTypeName:function(b){switch(b.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return Vc;
        case "vector":case "vector2":case "vector3":case "vector4":return Wc;case "color":return ue;case "quaternion":return Rd;case "bool":case "boolean":return se;case "string":return re}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+b);}});Object.assign(Xa.prototype,{constructor:Xa,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(b){return new we(this.times,this.values,this.getValueSize(),b)},InterpolantFactoryMethodLinear:function(b){return new Sd(this.times,
        this.values,this.getValueSize(),b)},InterpolantFactoryMethodSmooth:function(b){return new ve(this.times,this.values,this.getValueSize(),b)},setInterpolation:function(b){var a;switch(b){case 2300:a=this.InterpolantFactoryMethodDiscrete;break;case 2301:a=this.InterpolantFactoryMethodLinear;break;case 2302:a=this.InterpolantFactoryMethodSmooth}if(void 0===a){a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(b!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);
      else throw Error(a);console.warn("THREE.KeyframeTrack:",a)}else this.createInterpolant=a},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(b){if(0!==b)for(var a=this.times,d=0,f=a.length;d!==f;++d)a[d]+=b;return this},scale:function(b){if(1!==b)for(var a=
        this.times,d=0,f=a.length;d!==f;++d)a[d]*=b;return this},trim:function(b,a){for(var d=this.times,f=d.length,g=0,e=f-1;g!==f&&d[g]<b;)++g;for(;-1!==e&&d[e]>a;)--e;++e;if(0!==g||e!==f)g>=e&&(e=Math.max(e,1),g=e-1),f=this.getValueSize(),this.times=eb.arraySlice(d,g,e),this.values=eb.arraySlice(this.values,g*f,e*f);return this},validate:function(){var b=!0,a=this.getValueSize();0!==a-Math.floor(a)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),b=!1);var d=this.times,a=this.values,
        f=d.length;0===f&&(console.error("THREE.KeyframeTrack: Track is empty.",this),b=!1);for(var g=null,e=0;e!==f;e++){var k=d[e];if("number"===typeof k&&isNaN(k)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,k);b=!1;break}if(null!==g&&g>k){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,k,g);b=!1;break}g=k}if(void 0!==a&&eb.isTypedArray(a))for(e=0,d=a.length;e!==d;++e)if(f=a[e],isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,
        f);b=!1;break}return b},optimize:function(){for(var b=this.times,a=this.values,d=this.getValueSize(),f=2302===this.getInterpolation(),g=1,e=b.length-1,k=1;k<e;++k){var m=!1,l=b[k];if(l!==b[k+1]&&(1!==k||l!==l[0]))if(f)m=!0;else for(var n=k*d,r=n-d,q=n+d,l=0;l!==d;++l){var u=a[n+l];if(u!==a[r+l]||u!==a[q+l]){m=!0;break}}if(m){if(k!==g)for(b[g]=b[k],m=k*d,n=g*d,l=0;l!==d;++l)a[n+l]=a[m+l];++g}}if(0<e){b[g]=b[e];m=e*d;n=g*d;for(l=0;l!==d;++l)a[n+l]=a[m+l];++g}g!==b.length&&(this.times=eb.arraySlice(b,
        0,g),this.values=eb.arraySlice(a,0,g*d));return this}});Wc.prototype=Object.assign(Object.create(Xa.prototype),{constructor:Wc,ValueTypeName:"vector"});Object.assign(Ab,{parse:function(b){for(var a=[],d=b.tracks,f=1/(b.fps||1),g=0,e=d.length;g!==e;++g)a.push(Xa.parse(d[g]).scale(f));return new Ab(b.name,b.duration,a)},toJSON:function(b){var a=[],d=b.tracks;b={name:b.name,duration:b.duration,tracks:a};for(var f=0,g=d.length;f!==g;++f)a.push(Xa.toJSON(d[f]));return b},CreateFromMorphTargetSequence:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      a,d,f){for(var g=a.length,e=[],k=0;k<g;k++){var m=[],l=[];m.push((k+g-1)%g,k,(k+1)%g);l.push(0,1,0);var n=eb.getKeyframeOrder(m),m=eb.sortedArray(m,1,n),l=eb.sortedArray(l,1,n);f||0!==m[0]||(m.push(g),l.push(l[0]));e.push((new Vc(".morphTargetInfluences["+a[k].name+"]",m,l)).scale(1/d))}return new Ab(b,-1,e)},findByName:function(b,a){var d=b;Array.isArray(b)||(d=b.geometry&&b.geometry.animations||b.animations);for(var f=0;f<d.length;f++)if(d[f].name===a)return d[f];return null},CreateClipsFromMorphTargetSequences:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      a,d){for(var f={},g=/^([\w-]*?)([\d]+)$/,e=0,k=b.length;e<k;e++){var m=b[e],l=m.name.match(g);if(l&&1<l.length){var n=l[1];(l=f[n])||(f[n]=l=[]);l.push(m)}}b=[];for(n in f)b.push(Ab.CreateFromMorphTargetSequence(n,f[n],a,d));return b},parseAnimation:function(b,a){if(!b)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var d=function(b,a,d,h,f){if(0!==d.length){var g=[],e=[];eb.flattenJSON(d,g,e,h);0!==g.length&&f.push(new b(a,g,e))}},f=[],g=b.name||"default",e=
        b.length||-1,k=b.fps||30,m=b.hierarchy||[],l=0;l<m.length;l++){var n=m[l].keys;if(n&&0!==n.length)if(n[0].morphTargets){for(var e={},r=0;r<n.length;r++)if(n[r].morphTargets)for(var q=0;q<n[r].morphTargets.length;q++)e[n[r].morphTargets[q]]=-1;for(var u in e){for(var v=[],t=[],q=0;q!==n[r].morphTargets.length;++q){var w=n[r];v.push(w.time);t.push(w.morphTarget===u?1:0)}f.push(new Vc(".morphTargetInfluence["+u+"]",v,t))}e=e.length*(k||1)}else r=".bones["+a[l].name+"]",d(Wc,r+".position",n,"pos",f),
        d(Rd,r+".quaternion",n,"rot",f),d(Wc,r+".scale",n,"scl",f)}return 0===f.length?null:new Ab(g,e,f)}});Object.assign(Ab.prototype,{resetDuration:function(){for(var b=0,a=0,d=this.tracks.length;a!==d;++a)var f=this.tracks[a],b=Math.max(b,f.times[f.times.length-1]);this.duration=b},trim:function(){for(var b=0;b<this.tracks.length;b++)this.tracks[b].trim(0,this.duration);return this},optimize:function(){for(var b=0;b<this.tracks.length;b++)this.tracks[b].optimize();return this}});Object.assign(xe.prototype,
      {load:function(b,a,d,f){var g=this;(new Gb(g.manager)).load(b,function(b){a(g.parse(JSON.parse(b)))},d,f)},setTextures:function(b){this.textures=b},parse:function(b){function a(b){void 0===d[b]&&console.warn("THREE.MaterialLoader: Undefined texture",b);return d[b]}var d=this.textures,f=new eg[b.type];void 0!==b.uuid&&(f.uuid=b.uuid);void 0!==b.name&&(f.name=b.name);void 0!==b.color&&f.color.setHex(b.color);void 0!==b.roughness&&(f.roughness=b.roughness);void 0!==b.metalness&&(f.metalness=b.metalness);
          void 0!==b.emissive&&f.emissive.setHex(b.emissive);void 0!==b.specular&&f.specular.setHex(b.specular);void 0!==b.shininess&&(f.shininess=b.shininess);void 0!==b.clearCoat&&(f.clearCoat=b.clearCoat);void 0!==b.clearCoatRoughness&&(f.clearCoatRoughness=b.clearCoatRoughness);void 0!==b.uniforms&&(f.uniforms=b.uniforms);void 0!==b.vertexShader&&(f.vertexShader=b.vertexShader);void 0!==b.fragmentShader&&(f.fragmentShader=b.fragmentShader);void 0!==b.vertexColors&&(f.vertexColors=b.vertexColors);void 0!==
          b.fog&&(f.fog=b.fog);void 0!==b.flatShading&&(f.flatShading=b.flatShading);void 0!==b.blending&&(f.blending=b.blending);void 0!==b.side&&(f.side=b.side);void 0!==b.opacity&&(f.opacity=b.opacity);void 0!==b.transparent&&(f.transparent=b.transparent);void 0!==b.alphaTest&&(f.alphaTest=b.alphaTest);void 0!==b.depthTest&&(f.depthTest=b.depthTest);void 0!==b.depthWrite&&(f.depthWrite=b.depthWrite);void 0!==b.colorWrite&&(f.colorWrite=b.colorWrite);void 0!==b.wireframe&&(f.wireframe=b.wireframe);void 0!==
          b.wireframeLinewidth&&(f.wireframeLinewidth=b.wireframeLinewidth);void 0!==b.wireframeLinecap&&(f.wireframeLinecap=b.wireframeLinecap);void 0!==b.wireframeLinejoin&&(f.wireframeLinejoin=b.wireframeLinejoin);void 0!==b.rotation&&(f.rotation=b.rotation);1!==b.linewidth&&(f.linewidth=b.linewidth);void 0!==b.dashSize&&(f.dashSize=b.dashSize);void 0!==b.gapSize&&(f.gapSize=b.gapSize);void 0!==b.scale&&(f.scale=b.scale);void 0!==b.skinning&&(f.skinning=b.skinning);void 0!==b.morphTargets&&(f.morphTargets=
            b.morphTargets);void 0!==b.dithering&&(f.dithering=b.dithering);void 0!==b.visible&&(f.visible=b.visible);void 0!==b.userData&&(f.userData=b.userData);void 0!==b.shading&&(f.flatShading=1===b.shading);void 0!==b.size&&(f.size=b.size);void 0!==b.sizeAttenuation&&(f.sizeAttenuation=b.sizeAttenuation);void 0!==b.map&&(f.map=a(b.map));void 0!==b.alphaMap&&(f.alphaMap=a(b.alphaMap),f.transparent=!0);void 0!==b.bumpMap&&(f.bumpMap=a(b.bumpMap));void 0!==b.bumpScale&&(f.bumpScale=b.bumpScale);void 0!==b.normalMap&&
          (f.normalMap=a(b.normalMap));if(void 0!==b.normalScale){var g=b.normalScale;!1===Array.isArray(g)&&(g=[g,g]);f.normalScale=(new l).fromArray(g)}void 0!==b.displacementMap&&(f.displacementMap=a(b.displacementMap));void 0!==b.displacementScale&&(f.displacementScale=b.displacementScale);void 0!==b.displacementBias&&(f.displacementBias=b.displacementBias);void 0!==b.roughnessMap&&(f.roughnessMap=a(b.roughnessMap));void 0!==b.metalnessMap&&(f.metalnessMap=a(b.metalnessMap));void 0!==b.emissiveMap&&(f.emissiveMap=
            a(b.emissiveMap));void 0!==b.emissiveIntensity&&(f.emissiveIntensity=b.emissiveIntensity);void 0!==b.specularMap&&(f.specularMap=a(b.specularMap));void 0!==b.envMap&&(f.envMap=a(b.envMap));void 0!==b.reflectivity&&(f.reflectivity=b.reflectivity);void 0!==b.lightMap&&(f.lightMap=a(b.lightMap));void 0!==b.lightMapIntensity&&(f.lightMapIntensity=b.lightMapIntensity);void 0!==b.aoMap&&(f.aoMap=a(b.aoMap));void 0!==b.aoMapIntensity&&(f.aoMapIntensity=b.aoMapIntensity);void 0!==b.gradientMap&&(f.gradientMap=
            a(b.gradientMap));return f}});Object.assign(Le.prototype,{load:function(b,a,d,f){var g=this;(new Gb(g.manager)).load(b,function(b){a(g.parse(JSON.parse(b)))},d,f)},parse:function(b){var d=new N,f=b.data.index;void 0!==f&&(f=new Qf[f.type](f.array),d.setIndex(new na(f,1)));var g=b.data.attributes,e;for(e in g){var k=g[e],f=new Qf[k.type](k.array);d.addAttribute(e,new na(f,k.itemSize,k.normalized))}e=b.data.groups||b.data.drawcalls||b.data.offsets;if(void 0!==e)for(f=0,g=e.length;f!==g;++f)k=e[f],d.addGroup(k.start,
        k.count,k.materialIndex);b=b.data.boundingSphere;void 0!==b&&(e=new a,void 0!==b.center&&e.fromArray(b.center),d.boundingSphere=new Q(e,b.radius));return d}});var Qf={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Xc.Handlers={handlers:[],add:function(b,a){this.handlers.push(b,
        a)},get:function(b){for(var a=this.handlers,d=0,f=a.length;d<f;d+=2){var g=a[d+1];if(a[d].test(b))return g}return null}};Object.assign(Xc.prototype,{crossOrigin:void 0,initMaterials:function(b,a,d){for(var f=[],g=0;g<b.length;++g)f[g]=this.createMaterial(b[g],a,d);return f},createMaterial:function(){var b={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},a=new S,d=new ie,f=new xe;return function(g,e,k){function m(b,a,h,f,g){b=e+b;var n=Xc.Handlers.get(b);
        null!==n?b=n.load(b):(d.setCrossOrigin(k),b=d.load(b));void 0!==a&&(b.repeat.fromArray(a),1!==a[0]&&(b.wrapS=1E3),1!==a[1]&&(b.wrapT=1E3));void 0!==h&&b.offset.fromArray(h);void 0!==f&&("repeat"===f[0]&&(b.wrapS=1E3),"mirror"===f[0]&&(b.wrapS=1002),"repeat"===f[1]&&(b.wrapT=1E3),"mirror"===f[1]&&(b.wrapT=1002));void 0!==g&&(b.anisotropy=g);a=qa.generateUUID();l[a]=b;return a}var l={},n={uuid:qa.generateUUID(),type:"MeshLambertMaterial"},r;for(r in g){var q=g[r];switch(r){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;
        case "DbgName":n.name=q;break;case "blending":n.blending=b[q];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",r,"is no longer supported.");break;case "colorDiffuse":n.color=a.fromArray(q).getHex();break;case "colorSpecular":n.specular=a.fromArray(q).getHex();break;case "colorEmissive":n.emissive=a.fromArray(q).getHex();break;case "specularCoef":n.shininess=q;break;case "shading":"basic"===q.toLowerCase()&&(n.type="MeshBasicMaterial");"phong"===q.toLowerCase()&&
        (n.type="MeshPhongMaterial");"standard"===q.toLowerCase()&&(n.type="MeshStandardMaterial");break;case "mapDiffuse":n.map=m(q,g.mapDiffuseRepeat,g.mapDiffuseOffset,g.mapDiffuseWrap,g.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;case "mapEmissive":n.emissiveMap=m(q,g.mapEmissiveRepeat,g.mapEmissiveOffset,g.mapEmissiveWrap,g.mapEmissiveAnisotropy);break;case "mapEmissiveRepeat":case "mapEmissiveOffset":case "mapEmissiveWrap":case "mapEmissiveAnisotropy":break;
        case "mapLight":n.lightMap=m(q,g.mapLightRepeat,g.mapLightOffset,g.mapLightWrap,g.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":n.aoMap=m(q,g.mapAORepeat,g.mapAOOffset,g.mapAOWrap,g.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;case "mapBump":n.bumpMap=m(q,g.mapBumpRepeat,g.mapBumpOffset,g.mapBumpWrap,g.mapBumpAnisotropy);break;case "mapBumpScale":n.bumpScale=
          q;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;case "mapNormal":n.normalMap=m(q,g.mapNormalRepeat,g.mapNormalOffset,g.mapNormalWrap,g.mapNormalAnisotropy);break;case "mapNormalFactor":n.normalScale=[q,q];break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":n.specularMap=m(q,g.mapSpecularRepeat,g.mapSpecularOffset,g.mapSpecularWrap,g.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;
        case "mapMetalness":n.metalnessMap=m(q,g.mapMetalnessRepeat,g.mapMetalnessOffset,g.mapMetalnessWrap,g.mapMetalnessAnisotropy);break;case "mapMetalnessRepeat":case "mapMetalnessOffset":case "mapMetalnessWrap":case "mapMetalnessAnisotropy":break;case "mapRoughness":n.roughnessMap=m(q,g.mapRoughnessRepeat,g.mapRoughnessOffset,g.mapRoughnessWrap,g.mapRoughnessAnisotropy);break;case "mapRoughnessRepeat":case "mapRoughnessOffset":case "mapRoughnessWrap":case "mapRoughnessAnisotropy":break;case "mapAlpha":n.alphaMap=
          m(q,g.mapAlphaRepeat,g.mapAlphaOffset,g.mapAlphaWrap,g.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":n.side=1;break;case "doubleSided":n.side=2;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");n.opacity=q;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":n[r]=
          q;break;case "vertexColors":!0===q&&(n.vertexColors=2);"face"===q&&(n.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",r,q)}}"MeshBasicMaterial"===n.type&&delete n.emissive;"MeshPhongMaterial"!==n.type&&delete n.specular;1>n.opacity&&(n.transparent=!0);f.setTextures(l);return f.parse(n)}}()});var hf={decodeText:function(b){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(b);for(var a="",d=0,f=b.length;d<f;d++)a+=String.fromCharCode(b[d]);return decodeURIComponent(escape(a))},
      extractUrlBase:function(b){b=b.split("/");if(1===b.length)return"./";b.pop();return b.join("/")+"/"}};Object.assign(Me.prototype,{load:function(b,a,d,f){var g=this,e=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:hf.extractUrlBase(b),k=new Gb(this.manager);k.setWithCredentials(this.withCredentials);k.load(b,function(d){d=JSON.parse(d);var f=d.metadata;if(void 0!==f&&(f=f.type,void 0!==f)){if("object"===f.toLowerCase()){console.error("THREE.JSONLoader: "+b+" should be loaded with THREE.ObjectLoader instead.");
        return}if("scene"===f.toLowerCase()){console.error("THREE.JSONLoader: "+b+" should be loaded with THREE.SceneLoader instead.");return}}d=g.parse(d,e);a(d.geometry,d.materials)},d,f)},setTexturePath:function(b){this.texturePath=b},parse:function(){return function(b,d){void 0!==b.data&&(b=b.data);b.scale=void 0!==b.scale?1/b.scale:1;var g=new fa,e=b,k,m,n,r,q,u,v,t,w,D,x,y,F,z,P=e.faces;w=e.vertices;var B=e.normals,N=e.colors;u=e.scale;var A=0;if(void 0!==e.uvs){for(k=0;k<e.uvs.length;k++)e.uvs[k].length&&
      A++;for(k=0;k<A;k++)g.faceVertexUvs[k]=[]}r=0;for(q=w.length;r<q;)k=new a,k.x=w[r++]*u,k.y=w[r++]*u,k.z=w[r++]*u,g.vertices.push(k);r=0;for(q=P.length;r<q;)if(w=P[r++],D=w&1,n=w&2,k=w&8,v=w&16,x=w&32,u=w&64,w&=128,D){D=new ib;D.a=P[r];D.b=P[r+1];D.c=P[r+3];y=new ib;y.a=P[r+1];y.b=P[r+2];y.c=P[r+3];r+=4;n&&(n=P[r++],D.materialIndex=n,y.materialIndex=n);n=g.faces.length;if(k)for(k=0;k<A;k++)for(F=e.uvs[k],g.faceVertexUvs[k][n]=[],g.faceVertexUvs[k][n+1]=[],m=0;4>m;m++)t=P[r++],z=F[2*t],t=F[2*t+1],z=
        new l(z,t),2!==m&&g.faceVertexUvs[k][n].push(z),0!==m&&g.faceVertexUvs[k][n+1].push(z);v&&(v=3*P[r++],D.normal.set(B[v++],B[v++],B[v]),y.normal.copy(D.normal));if(x)for(k=0;4>k;k++)v=3*P[r++],x=new a(B[v++],B[v++],B[v]),2!==k&&D.vertexNormals.push(x),0!==k&&y.vertexNormals.push(x);u&&(u=P[r++],u=N[u],D.color.setHex(u),y.color.setHex(u));if(w)for(k=0;4>k;k++)u=P[r++],u=N[u],2!==k&&D.vertexColors.push(new S(u)),0!==k&&y.vertexColors.push(new S(u));g.faces.push(D);g.faces.push(y)}else{D=new ib;D.a=P[r++];
        D.b=P[r++];D.c=P[r++];n&&(n=P[r++],D.materialIndex=n);n=g.faces.length;if(k)for(k=0;k<A;k++)for(F=e.uvs[k],g.faceVertexUvs[k][n]=[],m=0;3>m;m++)t=P[r++],z=F[2*t],t=F[2*t+1],z=new l(z,t),g.faceVertexUvs[k][n].push(z);v&&(v=3*P[r++],D.normal.set(B[v++],B[v++],B[v]));if(x)for(k=0;3>k;k++)v=3*P[r++],x=new a(B[v++],B[v++],B[v]),D.vertexNormals.push(x);u&&(u=P[r++],D.color.setHex(N[u]));if(w)for(k=0;3>k;k++)u=P[r++],D.vertexColors.push(new S(N[u]));g.faces.push(D)}e=b;r=void 0!==e.influencesPerVertex?e.influencesPerVertex:
        2;if(e.skinWeights)for(q=0,P=e.skinWeights.length;q<P;q+=r)g.skinWeights.push(new f(e.skinWeights[q],1<r?e.skinWeights[q+1]:0,2<r?e.skinWeights[q+2]:0,3<r?e.skinWeights[q+3]:0));if(e.skinIndices)for(q=0,P=e.skinIndices.length;q<P;q+=r)g.skinIndices.push(new f(e.skinIndices[q],1<r?e.skinIndices[q+1]:0,2<r?e.skinIndices[q+2]:0,3<r?e.skinIndices[q+3]:0));g.bones=e.bones;g.bones&&0<g.bones.length&&(g.skinWeights.length!==g.skinIndices.length||g.skinIndices.length!==g.vertices.length)&&console.warn("When skinning, number of vertices ("+
        g.vertices.length+"), skinIndices ("+g.skinIndices.length+"), and skinWeights ("+g.skinWeights.length+") should match.");q=b;P=q.scale;if(void 0!==q.morphTargets)for(e=0,r=q.morphTargets.length;e<r;e++)for(g.morphTargets[e]={},g.morphTargets[e].name=q.morphTargets[e].name,g.morphTargets[e].vertices=[],B=g.morphTargets[e].vertices,N=q.morphTargets[e].vertices,A=0,w=N.length;A<w;A+=3)u=new a,u.x=N[A]*P,u.y=N[A+1]*P,u.z=N[A+2]*P,B.push(u);if(void 0!==q.morphColors&&0<q.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        P=g.faces,q=q.morphColors[0].colors,e=0,r=P.length;e<r;e++)P[e].color.fromArray(q,3*e);q=b;e=[];r=[];void 0!==q.animation&&r.push(q.animation);void 0!==q.animations&&(q.animations.length?r=r.concat(q.animations):r.push(q.animations));for(q=0;q<r.length;q++)(P=Ab.parseAnimation(r[q],g.bones))&&e.push(P);g.morphTargets&&(r=Ab.CreateClipsFromMorphTargetSequences(g.morphTargets,10),e=e.concat(r));0<e.length&&(g.animations=e);g.computeFaceNormals();g.computeBoundingSphere();if(void 0===b.materials||0===
        b.materials.length)return{geometry:g};e=Xc.prototype.initMaterials(b.materials,d,this.crossOrigin);return{geometry:g,materials:e}}}()});Object.assign(Cf.prototype,{load:function(b,a,d,f){""===this.texturePath&&(this.texturePath=b.substring(0,b.lastIndexOf("/")+1));var g=this;(new Gb(g.manager)).load(b,function(d){var e=null;try{e=JSON.parse(d)}catch(k){void 0!==f&&f(k);console.error("THREE:ObjectLoader: Can't parse "+b+".",k.message);return}d=e.metadata;void 0===d||void 0===d.type||"geometry"===d.type.toLowerCase()?
        console.error("THREE.ObjectLoader: Can't load "+b+". Use THREE.JSONLoader instead."):g.parse(e,a)},d,f)},setTexturePath:function(b){this.texturePath=b},setCrossOrigin:function(b){this.crossOrigin=b},parse:function(b,a){var d=this.parseShape(b.shapes),d=this.parseGeometries(b.geometries,d),f=this.parseImages(b.images,function(){void 0!==a&&a(g)}),f=this.parseTextures(b.textures,f),f=this.parseMaterials(b.materials,f),g=this.parseObject(b.object,d,f);b.animations&&(g.animations=this.parseAnimations(b.animations));
        void 0!==b.images&&0!==b.images.length||void 0===a||a(g);return g},parseShape:function(b){var a={};if(void 0!==b)for(var d=0,f=b.length;d<f;d++){var g=(new ec).fromJSON(b[d]);a[g.uuid]=g}return a},parseGeometries:function(b,a){var d={};if(void 0!==b)for(var f=new Me,g=new Le,e=0,k=b.length;e<k;e++){var m,l=b[e];switch(l.type){case "PlaneGeometry":case "PlaneBufferGeometry":m=new vb[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":m=
        new vb[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":m=new vb[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":m=new vb[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":m=new vb[l.type](l.radius,l.height,l.radialSegments,
        l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":m=new vb[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":m=new vb[l.type](l.radius,l.detail);
        break;case "RingGeometry":case "RingBufferGeometry":m=new vb[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":m=new vb[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":m=new vb[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case "LatheGeometry":case "LatheBufferGeometry":m=new vb[l.type](l.points,
        l.segments,l.phiStart,l.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":m=new vb[l.type](l.vertices,l.indices,l.radius,l.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":m=[];e=0;for(k=l.shapes.length;e<k;e++)m.push(a[l.shapes[e]]);m=new vb[l.type](m,l.curveSegments);break;case "BufferGeometry":m=g.parse(l);break;case "Geometry":m=f.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}m.uuid=
        l.uuid;void 0!==l.name&&(m.name=l.name);d[l.uuid]=m}return d},parseMaterials:function(b,a){var d={};if(void 0!==b){var f=new xe;f.setTextures(a);for(var g=0,e=b.length;g<e;g++){var k=b[g];if("MultiMaterial"===k.type){for(var m=[],l=0;l<k.materials.length;l++)m.push(f.parse(k.materials[l]));d[k.uuid]=m}else d[k.uuid]=f.parse(k)}}return d},parseAnimations:function(b){for(var a=[],d=0;d<b.length;d++){var f=Ab.parse(b[d]);a.push(f)}return a},parseImages:function(b,a){function d(b){f.manager.itemStart(b);
        return k.load(b,function(){f.manager.itemEnd(b)},void 0,function(){f.manager.itemEnd(b);f.manager.itemError(b)})}var f=this,g={};if(void 0!==b&&0<b.length){var e=new He(a),k=new Od(e);k.setCrossOrigin(this.crossOrigin);for(var e=0,m=b.length;e<m;e++){var l=b[e],n=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:f.texturePath+l.url;g[l.uuid]=d(n)}}return g},parseTextures:function(b,a){function d(b,a){if("number"===typeof b)return b;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",
        b);return a[b]}var f={};if(void 0!==b)for(var g=0,e=b.length;g<e;g++){var k=b[g];void 0===k.image&&console.warn('THREE.ObjectLoader: No "image" specified for',k.uuid);void 0===a[k.image]&&console.warn("THREE.ObjectLoader: Undefined image",k.image);var m=new r(a[k.image]);m.needsUpdate=!0;m.uuid=k.uuid;void 0!==k.name&&(m.name=k.name);void 0!==k.mapping&&(m.mapping=d(k.mapping,gg));void 0!==k.offset&&m.offset.fromArray(k.offset);void 0!==k.repeat&&m.repeat.fromArray(k.repeat);void 0!==k.center&&m.center.fromArray(k.center);
        void 0!==k.rotation&&(m.rotation=k.rotation);void 0!==k.wrap&&(m.wrapS=d(k.wrap[0],Rf),m.wrapT=d(k.wrap[1],Rf));void 0!==k.minFilter&&(m.minFilter=d(k.minFilter,Sf));void 0!==k.magFilter&&(m.magFilter=d(k.magFilter,Sf));void 0!==k.anisotropy&&(m.anisotropy=k.anisotropy);void 0!==k.flipY&&(m.flipY=k.flipY);f[k.uuid]=m}return f},parseObject:function(b,a,d){function f(b){void 0===a[b]&&console.warn("THREE.ObjectLoader: Undefined geometry",b);return a[b]}function g(b){if(void 0!==b){if(Array.isArray(b)){for(var a=
        [],h=0,f=b.length;h<f;h++){var e=b[h];void 0===d[e]&&console.warn("THREE.ObjectLoader: Undefined material",e);a.push(d[e])}return a}void 0===d[b]&&console.warn("THREE.ObjectLoader: Undefined material",b);return d[b]}}var e;switch(b.type){case "Scene":e=new bc;void 0!==b.background&&Number.isInteger(b.background)&&(e.background=new S(b.background));void 0!==b.fog&&("Fog"===b.fog.type?e.fog=new rb(b.fog.color,b.fog.near,b.fog.far):"FogExp2"===b.fog.type&&(e.fog=new Vb(b.fog.color,b.fog.density)));break;
        case "PerspectiveCamera":e=new ra(b.fov,b.aspect,b.near,b.far);void 0!==b.focus&&(e.focus=b.focus);void 0!==b.zoom&&(e.zoom=b.zoom);void 0!==b.filmGauge&&(e.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(e.filmOffset=b.filmOffset);void 0!==b.view&&(e.view=Object.assign({},b.view));break;case "OrthographicCamera":e=new wb(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":e=new pe(b.color,b.intensity);break;case "DirectionalLight":e=new oe(b.color,b.intensity);break;case "PointLight":e=
          new me(b.color,b.intensity,b.distance,b.decay);break;case "RectAreaLight":e=new qe(b.color,b.intensity,b.width,b.height);break;case "SpotLight":e=new le(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case "HemisphereLight":e=new je(b.color,b.groundColor,b.intensity);break;case "SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case "Mesh":e=f(b.geometry);var k=g(b.material);e=e.bones&&0<e.bones.length?new ee(e,k):new cb(e,k);break;case "LOD":e=
          new sd;break;case "Line":e=new mb(f(b.geometry),g(b.material),b.mode);break;case "LineLoop":e=new fe(f(b.geometry),g(b.material));break;case "LineSegments":e=new Qa(f(b.geometry),g(b.material));break;case "PointCloud":case "Points":e=new Dc(f(b.geometry),g(b.material));break;case "Sprite":e=new rd(g(b.material));break;case "Group":e=new ge;break;default:e=new aa}e.uuid=b.uuid;void 0!==b.name&&(e.name=b.name);void 0!==b.matrix?(e.matrix.fromArray(b.matrix),e.matrix.decompose(e.position,e.quaternion,
        e.scale)):(void 0!==b.position&&e.position.fromArray(b.position),void 0!==b.rotation&&e.rotation.fromArray(b.rotation),void 0!==b.quaternion&&e.quaternion.fromArray(b.quaternion),void 0!==b.scale&&e.scale.fromArray(b.scale));void 0!==b.castShadow&&(e.castShadow=b.castShadow);void 0!==b.receiveShadow&&(e.receiveShadow=b.receiveShadow);b.shadow&&(void 0!==b.shadow.bias&&(e.shadow.bias=b.shadow.bias),void 0!==b.shadow.radius&&(e.shadow.radius=b.shadow.radius),void 0!==b.shadow.mapSize&&e.shadow.mapSize.fromArray(b.shadow.mapSize),
      void 0!==b.shadow.camera&&(e.shadow.camera=this.parseObject(b.shadow.camera)));void 0!==b.visible&&(e.visible=b.visible);void 0!==b.userData&&(e.userData=b.userData);if(void 0!==b.children)for(var k=b.children,m=0;m<k.length;m++)e.add(this.parseObject(k[m],a,d));if("LOD"===b.type)for(b=b.levels,k=0;k<b.length;k++){var m=b[k],l=e.getObjectByProperty("uuid",m.object);void 0!==l&&e.addLevel(l,m.distance)}return e}});var gg={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,
      EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Rf={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Sf={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};Ne.prototype={constructor:Ne,setOptions:function(b){this.options=b;return this},load:function(b,a,d,f){void 0===b&&(b="");void 0!==this.path&&
      (b=this.path+b);var g=this,e=wc.get(b);if(void 0!==e)return g.manager.itemStart(b),setTimeout(function(){a&&a(e);g.manager.itemEnd(b)},0),e;fetch(b).then(function(b){return b.blob()}).then(function(b){return createImageBitmap(b,g.options)}).then(function(d){wc.add(b,d);a&&a(d);g.manager.itemEnd(b)}).catch(function(a){f&&f(a);g.manager.itemEnd(b);g.manager.itemError(b)})},setCrossOrigin:function(){return this},setPath:function(b){this.path=b;return this}};Object.assign(Oe.prototype,{moveTo:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             a){this.currentPath=new Lb;this.subPaths.push(this.currentPath);this.currentPath.moveTo(b,a)},lineTo:function(b,a){this.currentPath.lineTo(b,a)},quadraticCurveTo:function(b,a,d,f){this.currentPath.quadraticCurveTo(b,a,d,f)},bezierCurveTo:function(b,a,d,f,g,e){this.currentPath.bezierCurveTo(b,a,d,f,g,e)},splineThru:function(b){this.currentPath.splineThru(b)},toShapes:function(b,a){function d(b){for(var a=[],h=0,f=b.length;h<f;h++){var g=b[h],e=new ec;e.curves=g.curves;a.push(e)}return a}function f(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   a){for(var d=a.length,h=!1,g=d-1,e=0;e<d;g=e++){var k=a[g],m=a[e],l=m.x-k.x,p=m.y-k.y;if(Math.abs(p)>Number.EPSILON){if(0>p&&(k=a[e],l=-l,m=a[g],p=-p),!(b.y<k.y||b.y>m.y))if(b.y===k.y){if(b.x===k.x)return!0}else{g=p*(b.x-k.x)-l*(b.y-k.y);if(0===g)return!0;0>g||(h=!h)}}else if(b.y===k.y&&(m.x<=b.x&&b.x<=k.x||k.x<=b.x&&b.x<=m.x))return!0}return h}var g=Wb.isClockWise,e=this.subPaths;if(0===e.length)return[];if(!0===a)return d(e);var k,m,l,n=[];if(1===e.length)return m=e[0],l=new ec,l.curves=m.curves,
        n.push(l),n;var r=!g(e[0].getPoints()),r=b?!r:r;l=[];var q=[],u=[],v=0,t;q[v]=void 0;u[v]=[];for(var w=0,D=e.length;w<D;w++)m=e[w],t=m.getPoints(),k=g(t),(k=b?!k:k)?(!r&&q[v]&&v++,q[v]={s:new ec,p:t},q[v].s.curves=m.curves,r&&v++,u[v]=[]):u[v].push({h:m,p:t[0]});if(!q[0])return d(e);if(1<q.length){w=!1;m=[];g=0;for(e=q.length;g<e;g++)l[g]=[];g=0;for(e=q.length;g<e;g++)for(k=u[g],r=0;r<k.length;r++){v=k[r];t=!0;for(D=0;D<q.length;D++)f(v.p,q[D].p)&&(g!==D&&m.push({froms:g,tos:D,hole:r}),t?(t=!1,l[D].push(v)):
        w=!0);t&&l[g].push(v)}0<m.length&&(w||(u=l))}w=0;for(g=q.length;w<g;w++)for(l=q[w].s,n.push(l),m=u[w],e=0,k=m.length;e<k;e++)l.holes.push(m[e].h);return n}});Object.assign(Pe.prototype,{isFont:!0,generateShapes:function(b,a,d){void 0===a&&(a=100);d=[];var f=a;a=this.data;var g=String(b).split(""),f=f/a.resolution,e=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*f;b=[];for(var k=0,m=0,l=0;l<g.length;l++){var n=g[l];if("\n"===n)k=0,m-=e;else{var r;r=f;var q=k,u=m;if(n=a.glyphs[n]||a.glyphs["?"]){var v=
        new Oe,t=void 0,w=void 0,D=w=t=void 0,x=void 0,y=void 0,F=void 0;if(n.o)for(var z=n._cachedOutline||(n._cachedOutline=n.o.split(" ")),P=0,B=z.length;P<B;)switch(z[P++]){case "m":t=z[P++]*r+q;w=z[P++]*r+u;v.moveTo(t,w);break;case "l":t=z[P++]*r+q;w=z[P++]*r+u;v.lineTo(t,w);break;case "q":t=z[P++]*r+q;w=z[P++]*r+u;D=z[P++]*r+q;x=z[P++]*r+u;v.quadraticCurveTo(D,x,t,w);break;case "b":t=z[P++]*r+q,w=z[P++]*r+u,D=z[P++]*r+q,x=z[P++]*r+u,y=z[P++]*r+q,F=z[P++]*r+u,v.bezierCurveTo(D,x,y,F,t,w)}r={offsetX:n.ha*
        r,path:v}}else r=void 0;k+=r.offsetX;b.push(r.path)}}a=0;for(g=b.length;a<g;a++)Array.prototype.push.apply(d,b[a].toShapes());return d}});Object.assign(Df.prototype,{load:function(b,a,d,f){var g=this,e=new Gb(this.manager);e.setPath(this.path);e.load(b,function(b){var d;try{d=JSON.parse(b)}catch(f){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),d=JSON.parse(b.substring(65,b.length-2))}b=g.parse(d);a&&a(b)},d,f)},parse:function(b){return new Pe(b)},
      setPath:function(b){this.path=b;return this}});var Ce,Se={getContext:function(){void 0===Ce&&(Ce=new (window.AudioContext||window.webkitAudioContext));return Ce},setContext:function(b){Ce=b}};Object.assign(Qe.prototype,{load:function(b,a,d,f){var g=new Gb(this.manager);g.setResponseType("arraybuffer");g.load(b,function(b){Se.getContext().decodeAudioData(b,function(b){a(b)})},d,f)}});Object.assign(Ef.prototype,{update:function(){var b,a,d,f,g,e,k,l,n=new m,r=new m;return function(m){if(b!==this||a!==
        m.focus||d!==m.fov||f!==m.aspect*this.aspect||g!==m.near||e!==m.far||k!==m.zoom||l!==this.eyeSep){b=this;a=m.focus;d=m.fov;f=m.aspect*this.aspect;g=m.near;e=m.far;k=m.zoom;var q=m.projectionMatrix.clone();l=this.eyeSep/2;var u=l*g/a,v=g*Math.tan(qa.DEG2RAD*d*.5)/k,t,w;r.elements[12]=-l;n.elements[12]=l;t=-v*f+u;w=v*f+u;q.elements[0]=2*g/(w-t);q.elements[8]=(w+t)/(w-t);this.cameraL.projectionMatrix.copy(q);t=-v*f-u;w=v*f-u;q.elements[0]=2*g/(w-t);q.elements[8]=(w+t)/(w-t);this.cameraR.projectionMatrix.copy(q)}this.cameraL.matrixWorld.copy(m.matrixWorld).multiply(r);
        this.cameraR.matrixWorld.copy(m.matrixWorld).multiply(n)}}()});Td.prototype=Object.create(aa.prototype);Td.prototype.constructor=Td;Re.prototype=Object.assign(Object.create(aa.prototype),{constructor:Re,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(b){null!==
      this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=b;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(b){this.gain.gain.value=b},updateMatrixWorld:function(){var b=new a,h=new d,f=new a,g=new a;return function(a){aa.prototype.updateMatrixWorld.call(this,a);a=this.context.listener;var d=
        this.up;this.matrixWorld.decompose(b,h,f);g.set(0,0,-1).applyQuaternion(h);a.positionX?(a.positionX.setValueAtTime(b.x,this.context.currentTime),a.positionY.setValueAtTime(b.y,this.context.currentTime),a.positionZ.setValueAtTime(b.z,this.context.currentTime),a.forwardX.setValueAtTime(g.x,this.context.currentTime),a.forwardY.setValueAtTime(g.y,this.context.currentTime),a.forwardZ.setValueAtTime(g.z,this.context.currentTime),a.upX.setValueAtTime(d.x,this.context.currentTime),a.upY.setValueAtTime(d.y,
        this.context.currentTime),a.upZ.setValueAtTime(d.z,this.context.currentTime)):(a.setPosition(b.x,b.y,b.z),a.setOrientation(g.x,g.y,g.z,d.x,d.y,d.z))}}()});Yc.prototype=Object.assign(Object.create(aa.prototype),{constructor:Yc,getOutput:function(){return this.gain},setNodeSource:function(b){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=b;this.connect();return this},setBuffer:function(b){this.buffer=b;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(!0===
        this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else{var b=this.context.createBufferSource();b.buffer=this.buffer;b.loop=this.loop;b.onended=this.onEnded.bind(this);b.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;b.start(this.startTime,this.offset);this.isPlaying=!0;this.source=b;return this.connect()}},pause:function(){if(!1===
        this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.offset=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);
        for(var b=1,a=this.filters.length;b<a;b++)this.filters[b-1].connect(this.filters[b]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var b=1,a=this.filters.length;b<a;b++)this.filters[b-1].disconnect(this.filters[b]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},
      getFilters:function(){return this.filters},setFilters:function(b){b||(b=[]);!0===this.isPlaying?(this.disconnect(),this.filters=b,this.connect()):this.filters=b;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(b){return this.setFilters(b?[b]:[])},setPlaybackRate:function(b){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=b,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,
        this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(b){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=b,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},
      setVolume:function(b){this.gain.gain.value=b;return this}});Te.prototype=Object.assign(Object.create(Yc.prototype),{constructor:Te,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(b){this.panner.refDistance=b},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(b){this.panner.rolloffFactor=b},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(b){this.panner.distanceModel=
        b},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(b){this.panner.maxDistance=b},updateMatrixWorld:function(){var b=new a;return function(a){aa.prototype.updateMatrixWorld.call(this,a);b.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(b.x,b.y,b.z)}}()});Object.assign(Ue.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var b=0,a=this.getFrequencyData(),d=0;d<a.length;d++)b+=
        a[d];return b/a.length}});Object.assign(Ve.prototype,{accumulate:function(b,a){var d=this.buffer,f=this.valueSize,g=b*f+f,e=this.cumulativeWeight;if(0===e){for(e=0;e!==f;++e)d[g+e]=d[e];e=a}else e+=a,this._mixBufferRegion(d,g,0,a/e,f);this.cumulativeWeight=e},apply:function(b){var a=this.valueSize,d=this.buffer;b=b*a+a;var f=this.cumulativeWeight,g=this.binding;this.cumulativeWeight=0;1>f&&this._mixBufferRegion(d,b,3*a,1-f,a);for(var f=a,e=a+a;f!==e;++f)if(d[f]!==d[f+a]){g.setValue(d,b);break}},saveOriginalState:function(){var b=
        this.buffer,a=this.valueSize,d=3*a;this.binding.getValue(b,d);for(var f=a;f!==d;++f)b[f]=b[d+f%a];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(b,a,d,f,g){if(.5<=f)for(f=0;f!==g;++f)b[a+f]=b[d+f]},_slerp:function(b,a,f,g){d.slerpFlat(b,a,b,a,b,f,g)},_lerp:function(b,a,d,f,g){for(var e=1-f,k=0;k!==g;++k){var m=a+k;b[m]=b[m]*e+b[d+k]*f}}});Object.assign(Ff.prototype,{getValue:function(b,a){this.bind();var d=this._bindings[this._targetGroup.nCachedObjects_];
        void 0!==d&&d.getValue(b,a)},setValue:function(b,a){for(var d=this._bindings,f=this._targetGroup.nCachedObjects_,g=d.length;f!==g;++f)d[f].setValue(b,a)},bind:function(){for(var b=this._bindings,a=this._targetGroup.nCachedObjects_,d=b.length;a!==d;++a)b[a].bind()},unbind:function(){for(var b=this._bindings,a=this._targetGroup.nCachedObjects_,d=b.length;a!==d;++a)b[a].unbind()}});Object.assign(fb,{Composite:Ff,create:function(b,a,d){return b&&b.isAnimationObjectGroup?new fb.Composite(b,a,d):new fb(b,
        a,d)},sanitizeNodeName:function(){var b=/[\[\]\.:\/]/g;return function(a){return a.replace(/\s/g,"_").replace(b,"")}}(),parseTrackName:function(){var b="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",a=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),b=/(WCOD+)?/.source.replace("WCOD",b),d=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),f=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),g=new RegExp("^"+a+b+d+f+"$"),e=["material","materials","bones"];return function(b){var a=
        g.exec(b);if(!a)throw Error("PropertyBinding: Cannot parse trackName: "+b);var a={nodeName:a[2],objectName:a[3],objectIndex:a[4],propertyName:a[5],propertyIndex:a[6]},d=a.nodeName&&a.nodeName.lastIndexOf(".");if(void 0!==d&&-1!==d){var h=a.nodeName.substring(d+1);-1!==e.indexOf(h)&&(a.nodeName=a.nodeName.substring(0,d),a.objectName=h)}if(null===a.propertyName||0===a.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+b);return a}}(),findNode:function(b,a){if(!a||
        ""===a||"root"===a||"."===a||-1===a||a===b.name||a===b.uuid)return b;if(b.skeleton){var d=b.skeleton.getBoneByName(a);if(void 0!==d)return d}if(b.children){var f=function(b){for(var d=0;d<b.length;d++){var g=b[d];if(g.name===a||g.uuid===a||(g=f(g.children)))return g}return null};if(d=f(b.children))return d}return null}});Object.assign(fb.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,
        NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(b,a){b[a]=this.node[this.propertyName]},function(b,a){for(var d=this.resolvedProperty,f=0,g=d.length;f!==g;++f)b[a++]=d[f]},function(b,a){b[a]=this.resolvedProperty[this.propertyIndex]},function(b,a){this.resolvedProperty.toArray(b,a)}],SetterByBindingTypeAndVersioning:[[function(b,a){this.targetObject[this.propertyName]=b[a]},function(b,a){this.targetObject[this.propertyName]=b[a];this.targetObject.needsUpdate=!0},function(b,a){this.targetObject[this.propertyName]=
        b[a];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(b,a){for(var d=this.resolvedProperty,f=0,g=d.length;f!==g;++f)d[f]=b[a++]},function(b,a){for(var d=this.resolvedProperty,f=0,g=d.length;f!==g;++f)d[f]=b[a++];this.targetObject.needsUpdate=!0},function(b,a){for(var d=this.resolvedProperty,f=0,g=d.length;f!==g;++f)d[f]=b[a++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(b,a){this.resolvedProperty[this.propertyIndex]=b[a]},function(b,a){this.resolvedProperty[this.propertyIndex]=
        b[a];this.targetObject.needsUpdate=!0},function(b,a){this.resolvedProperty[this.propertyIndex]=b[a];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(b,a){this.resolvedProperty.fromArray(b,a)},function(b,a){this.resolvedProperty.fromArray(b,a);this.targetObject.needsUpdate=!0},function(b,a){this.resolvedProperty.fromArray(b,a);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(b,a){this.bind();this.getValue(b,a)},setValue:function(b,a){this.bind();this.setValue(b,a)},bind:function(){var b=
        this.node,a=this.parsedPath,d=a.objectName,f=a.propertyName,g=a.propertyIndex;b||(this.node=b=fb.findNode(this.rootNode,a.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(b){if(d){var e=a.objectIndex;switch(d){case "materials":if(!b.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!b.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
        this);return}b=b.material.materials;break;case "bones":if(!b.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}b=b.skeleton.bones;for(d=0;d<b.length;d++)if(b[d].name===e){e=d;break}break;default:if(void 0===b[d]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}b=b[d]}if(void 0!==e){if(void 0===b[e]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
        this,b);return}b=b[e]}}e=b[f];if(void 0===e)console.error("THREE.PropertyBinding: Trying to update property for track: "+a.nodeName+"."+f+" but it wasn't found.",b);else{a=this.Versioning.None;void 0!==b.needsUpdate?(a=this.Versioning.NeedsUpdate,this.targetObject=b):void 0!==b.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=b);d=this.BindingType.Direct;if(void 0!==g){if("morphTargetInfluences"===f){if(!b.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
        this);return}if(b.geometry.isBufferGeometry){if(!b.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(d=0;d<this.node.geometry.morphAttributes.position.length;d++)if(b.geometry.morphAttributes.position[d].name===g){g=d;break}}else{if(!b.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",
        this);return}for(d=0;d<this.node.geometry.morphTargets.length;d++)if(b.geometry.morphTargets[d].name===g){g=d;break}}}d=this.BindingType.ArrayElement;this.resolvedProperty=e;this.propertyIndex=g}else void 0!==e.fromArray&&void 0!==e.toArray?(d=this.BindingType.HasFromToArray,this.resolvedProperty=e):Array.isArray(e)?(d=this.BindingType.EntireArray,this.resolvedProperty=e):this.propertyName=f;this.getValue=this.GetterByBindingType[d];this.setValue=this.SetterByBindingTypeAndVersioning[d][a]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+
        this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(fb.prototype,{_getValue_unbound:fb.prototype.getValue,_setValue_unbound:fb.prototype.setValue});Object.assign(Gf.prototype,{isAnimationObjectGroup:!0,add:function(){for(var b=this._objects,a=b.length,d=this.nCachedObjects_,f=this._indicesByUUID,g=this._paths,e=this._parsedPaths,k=this._bindings,m=k.length,l=void 0,n=0,r=arguments.length;n!==
      r;++n){var q=arguments[n],u=q.uuid,v=f[u];if(void 0===v){v=a++;f[u]=v;b.push(q);for(var u=0,t=m;u!==t;++u)k[u].push(new fb(q,g[u],e[u]))}else if(v<d){var l=b[v],w=--d,t=b[w];f[t.uuid]=v;b[v]=t;f[u]=w;b[w]=q;u=0;for(t=m;u!==t;++u){var D=k[u],x=D[v];D[v]=D[w];void 0===x&&(x=new fb(q,g[u],e[u]));D[w]=x}}else b[v]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=
        d},remove:function(){for(var b=this._objects,a=this.nCachedObjects_,d=this._indicesByUUID,f=this._bindings,g=f.length,e=0,k=arguments.length;e!==k;++e){var m=arguments[e],l=m.uuid,n=d[l];if(void 0!==n&&n>=a){var r=a++,q=b[r];d[q.uuid]=n;b[n]=q;d[l]=r;b[r]=m;m=0;for(l=g;m!==l;++m){var q=f[m],u=q[n];q[n]=q[r];q[r]=u}}}this.nCachedObjects_=a},uncache:function(){for(var b=this._objects,a=b.length,d=this.nCachedObjects_,f=this._indicesByUUID,g=this._bindings,e=g.length,k=0,m=arguments.length;k!==m;++k){var l=
        arguments[k].uuid,n=f[l];if(void 0!==n)if(delete f[l],n<d){var l=--d,r=b[l],q=--a,u=b[q];f[r.uuid]=n;b[n]=r;f[u.uuid]=l;b[l]=u;b.pop();r=0;for(u=e;r!==u;++r){var v=g[r],t=v[q];v[n]=v[l];v[l]=t;v.pop()}}else for(q=--a,u=b[q],f[u.uuid]=n,b[n]=u,b.pop(),r=0,u=e;r!==u;++r)v=g[r],v[n]=v[q],v.pop()}this.nCachedObjects_=d},subscribe_:function(b,a){var d=this._bindingsIndicesByPath,f=d[b],g=this._bindings;if(void 0!==f)return g[f];var e=this._paths,k=this._parsedPaths,m=this._objects,l=this.nCachedObjects_,
        n=Array(m.length),f=g.length;d[b]=f;e.push(b);k.push(a);g.push(n);d=l;for(f=m.length;d!==f;++d)n[d]=new fb(m[d],b,a);return n},unsubscribe_:function(b){var a=this._bindingsIndicesByPath,d=a[b];if(void 0!==d){var f=this._paths,g=this._parsedPaths,e=this._bindings,k=e.length-1,m=e[k];a[b[k]]=d;e[d]=m;e.pop();g[d]=g[k];g.pop();f[d]=f[k];f.pop()}}});Object.assign(Hf.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},
      reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(b){this._startTime=b;return this},setLoop:function(b,a){this.loop=b;this.repetitions=a;return this},setEffectiveWeight:function(b){this.weight=b;
        this._effectiveWeight=this.enabled?b:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(b){return this._scheduleFading(b,0,1)},fadeOut:function(b){return this._scheduleFading(b,1,0)},crossFadeFrom:function(b,a,d){b.fadeOut(a);this.fadeIn(a);if(d){d=this._clip.duration;var f=b._clip.duration,g=d/f;b.warp(1,f/d,a);this.warp(g,1,a)}return this},crossFadeTo:function(b,a,d){return b.crossFadeFrom(this,a,d)},stopFading:function(){var b=this._weightInterpolant;
        null!==b&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(b));return this},setEffectiveTimeScale:function(b){this.timeScale=b;this._effectiveTimeScale=this.paused?0:b;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(b){this.timeScale=this._clip.duration/b;return this.stopWarping()},syncWith:function(b){this.time=b.time;this.timeScale=b.timeScale;return this.stopWarping()},halt:function(b){return this.warp(this._effectiveTimeScale,
        0,b)},warp:function(b,a,d){var f=this._mixer,g=f.time,e=this._timeScaleInterpolant,k=this.timeScale;null===e&&(this._timeScaleInterpolant=e=f._lendControlInterpolant());f=e.parameterPositions;e=e.sampleValues;f[0]=g;f[1]=g+d;e[0]=b/k;e[1]=a/k;return this},stopWarping:function(){var b=this._timeScaleInterpolant;null!==b&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(b));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||
        this._mixer._root},_update:function(b,a,d,f){if(this.enabled){var g=this._startTime;if(null!==g){a=(b-g)*d;if(0>a||0===d)return;this._startTime=null;a*=d}a*=this._updateTimeScale(b);d=this._updateTime(a);b=this._updateWeight(b);if(0<b){a=this._interpolants;for(var g=this._propertyBindings,e=0,k=a.length;e!==k;++e)a[e].evaluate(d),g[e].accumulate(f,b)}}else this._updateWeight(b)},_updateWeight:function(b){var a=0;if(this.enabled){var a=this.weight,d=this._weightInterpolant;if(null!==d){var f=d.evaluate(b)[0],
        a=a*f;b>d.parameterPositions[1]&&(this.stopFading(),0===f&&(this.enabled=!1))}}return this._effectiveWeight=a},_updateTimeScale:function(b){var a=0;if(!this.paused){var a=this.timeScale,d=this._timeScaleInterpolant;if(null!==d){var f=d.evaluate(b)[0],a=a*f;b>d.parameterPositions[1]&&(this.stopWarping(),0===a?this.paused=!0:this.timeScale=a)}}return this._effectiveTimeScale=a},_updateTime:function(b){var a=this.time+b;if(0===b)return a;var d=this._clip.duration,f=this.loop,g=this._loopCount;if(2200===
        f)a:{if(-1===g&&(this._loopCount=0,this._setEndings(!0,!0,!1)),a>=d)a=d;else if(0>a)a=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>b?-1:1})}else{f=2202===f;-1===g&&(0<=b?(g=0,this._setEndings(!0,0===this.repetitions,f)):this._setEndings(0===this.repetitions,!0,f));if(a>=d||0>a){var e=Math.floor(a/d),a=a-d*e,g=g+Math.abs(e),k=this.repetitions-g;0>k?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=0<b?
        d:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<b?1:-1})):(0===k?(b=0>b,this._setEndings(b,!b,f)):this._setEndings(!1,!1,f),this._loopCount=g,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:e}))}if(f&&1===(g&1))return this.time=a,d-a}return this.time=a},_setEndings:function(b,a,d){var f=this._interpolantSettings;d?(f.endingStart=2401,f.endingEnd=2401):(f.endingStart=b?this.zeroSlopeAtStart?2401:2400:2402,f.endingEnd=a?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                a,d){var f=this._mixer,g=f.time,e=this._weightInterpolant;null===e&&(this._weightInterpolant=e=f._lendControlInterpolant());f=e.parameterPositions;e=e.sampleValues;f[0]=g;e[0]=a;f[1]=g+b;e[1]=d;return this}});We.prototype=Object.assign(Object.create(n.prototype),{constructor:We,_bindAction:function(b,a){var d=b._localRoot||this._root,f=b._clip.tracks,g=f.length,e=b._propertyBindings,k=b._interpolants,m=d.uuid,l=this._bindingsByRootAndName,n=l[m];void 0===n&&(n={},l[m]=n);for(l=0;l!==g;++l){var r=
        f[l],q=r.name,u=n[q];if(void 0===u){u=e[l];if(void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,m,q));continue}u=new Ve(fb.create(d,q,a&&a._propertyBindings[l].binding.parsedPath),r.ValueTypeName,r.getValueSize());++u.referenceCount;this._addInactiveBinding(u,m,q)}e[l]=u;k[l].resultBuffer=u.buffer}},_activateAction:function(b){if(!this._isActiveAction(b)){if(null===b._cacheIndex){var a=(b._localRoot||this._root).uuid,d=b._clip.uuid,f=this._actionsByClip[d];this._bindAction(b,
        f&&f.knownActions[0]);this._addInactiveAction(b,d,a)}a=b._propertyBindings;d=0;for(f=a.length;d!==f;++d){var g=a[d];0===g.useCount++&&(this._lendBinding(g),g.saveOriginalState())}this._lendAction(b)}},_deactivateAction:function(b){if(this._isActiveAction(b)){for(var a=b._propertyBindings,d=0,f=a.length;d!==f;++d){var g=a[d];0===--g.useCount&&(g.restoreOriginalState(),this._takeBackBinding(g))}this._takeBackAction(b)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip=
        {};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var b=this;this.stats={actions:{get total(){return b._actions.length},get inUse(){return b._nActiveActions}},bindings:{get total(){return b._bindings.length},get inUse(){return b._nActiveBindings}},controlInterpolants:{get total(){return b._controlInterpolants.length},get inUse(){return b._nActiveControlInterpolants}}}},_isActiveAction:function(b){b=b._cacheIndex;
        return null!==b&&b<this._nActiveActions},_addInactiveAction:function(b,a,d){var f=this._actions,g=this._actionsByClip,e=g[a];void 0===e?(e={knownActions:[b],actionByRoot:{}},b._byClipCacheIndex=0,g[a]=e):(a=e.knownActions,b._byClipCacheIndex=a.length,a.push(b));b._cacheIndex=f.length;f.push(b);e.actionByRoot[d]=b},_removeInactiveAction:function(b){var a=this._actions,d=a[a.length-1],f=b._cacheIndex;d._cacheIndex=f;a[f]=d;a.pop();b._cacheIndex=null;var a=b._clip.uuid,d=this._actionsByClip,f=d[a],g=
        f.knownActions,e=g[g.length-1],k=b._byClipCacheIndex;e._byClipCacheIndex=k;g[k]=e;g.pop();b._byClipCacheIndex=null;delete f.actionByRoot[(b._localRoot||this._root).uuid];0===g.length&&delete d[a];this._removeInactiveBindingsForAction(b)},_removeInactiveBindingsForAction:function(b){b=b._propertyBindings;for(var a=0,d=b.length;a!==d;++a){var f=b[a];0===--f.referenceCount&&this._removeInactiveBinding(f)}},_lendAction:function(b){var a=this._actions,d=b._cacheIndex,f=this._nActiveActions++,g=a[f];b._cacheIndex=
        f;a[f]=b;g._cacheIndex=d;a[d]=g},_takeBackAction:function(b){var a=this._actions,d=b._cacheIndex,f=--this._nActiveActions,g=a[f];b._cacheIndex=f;a[f]=b;g._cacheIndex=d;a[d]=g},_addInactiveBinding:function(b,a,d){var f=this._bindingsByRootAndName,g=f[a],e=this._bindings;void 0===g&&(g={},f[a]=g);g[d]=b;b._cacheIndex=e.length;e.push(b)},_removeInactiveBinding:function(b){var a=this._bindings,d=b.binding,f=d.rootNode.uuid,d=d.path,g=this._bindingsByRootAndName,e=g[f],k=a[a.length-1];b=b._cacheIndex;
        k._cacheIndex=b;a[b]=k;a.pop();delete e[d];a:{for(var m in e)break a;delete g[f]}},_lendBinding:function(b){var a=this._bindings,d=b._cacheIndex,f=this._nActiveBindings++,g=a[f];b._cacheIndex=f;a[f]=b;g._cacheIndex=d;a[d]=g},_takeBackBinding:function(b){var a=this._bindings,d=b._cacheIndex,f=--this._nActiveBindings,g=a[f];b._cacheIndex=f;a[f]=b;g._cacheIndex=d;a[d]=g},_lendControlInterpolant:function(){var b=this._controlInterpolants,a=this._nActiveControlInterpolants++,d=b[a];void 0===d&&(d=new Sd(new Float32Array(2),
        new Float32Array(2),1,this._controlInterpolantsResultBuffer),d.__cacheIndex=a,b[a]=d);return d},_takeBackControlInterpolant:function(b){var a=this._controlInterpolants,d=b.__cacheIndex,f=--this._nActiveControlInterpolants,g=a[f];b.__cacheIndex=f;a[f]=b;g.__cacheIndex=d;a[d]=g},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(b,a){var d=a||this._root,f=d.uuid,g="string"===typeof b?Ab.findByName(d,b):b,d=null!==g?g.uuid:b,e=this._actionsByClip[d],k=null;if(void 0!==e){k=e.actionByRoot[f];
        if(void 0!==k)return k;k=e.knownActions[0];null===g&&(g=k._clip)}if(null===g)return null;g=new Hf(this,g,a);this._bindAction(g,k);this._addInactiveAction(g,d,f);return g},existingAction:function(b,a){var d=a||this._root,f=d.uuid,d="string"===typeof b?Ab.findByName(d,b):b,d=this._actionsByClip[d?d.uuid:b];return void 0!==d?d.actionByRoot[f]||null:null},stopAllAction:function(){for(var b=this._actions,a=this._nActiveActions,d=this._bindings,f=this._nActiveBindings,g=this._nActiveBindings=this._nActiveActions=
        0;g!==a;++g)b[g].reset();for(g=0;g!==f;++g)d[g].useCount=0;return this},update:function(b){b*=this.timeScale;for(var a=this._actions,d=this._nActiveActions,f=this.time+=b,g=Math.sign(b),e=this._accuIndex^=1,k=0;k!==d;++k)a[k]._update(f,b,g,e);b=this._bindings;a=this._nActiveBindings;for(k=0;k!==a;++k)b[k].apply(e);return this},getRoot:function(){return this._root},uncacheClip:function(b){var a=this._actions;b=b.uuid;var d=this._actionsByClip,f=d[b];if(void 0!==f){for(var f=f.knownActions,g=0,e=f.length;g!==
      e;++g){var k=f[g];this._deactivateAction(k);var m=k._cacheIndex,l=a[a.length-1];k._cacheIndex=null;k._byClipCacheIndex=null;l._cacheIndex=m;a[m]=l;a.pop();this._removeInactiveBindingsForAction(k)}delete d[b]}},uncacheRoot:function(b){b=b.uuid;var a=this._actionsByClip,d;for(d in a){var f=a[d].actionByRoot[b];void 0!==f&&(this._deactivateAction(f),this._removeInactiveAction(f))}d=this._bindingsByRootAndName[b];if(void 0!==d)for(var g in d)b=d[g],b.restoreOriginalState(),this._removeInactiveBinding(b)},
      uncacheAction:function(b,a){var d=this.existingAction(b,a);null!==d&&(this._deactivateAction(d),this._removeInactiveAction(d))}});ye.prototype.clone=function(){return new ye(void 0===this.value.clone?this.value:this.value.clone())};Xe.prototype=Object.assign(Object.create(N.prototype),{constructor:Xe,isInstancedBufferGeometry:!0,copy:function(b){N.prototype.copy.call(this,b);this.maxInstancedCount=b.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});Object.defineProperties(Ye.prototype,
      {count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(Ye.prototype,{isInterleavedBufferAttribute:!0,setX:function(b,a){this.data.array[b*this.data.stride+this.offset]=a;return this},setY:function(b,a){this.data.array[b*this.data.stride+this.offset+1]=a;return this},setZ:function(b,a){this.data.array[b*this.data.stride+this.offset+2]=a;return this},setW:function(b,a){this.data.array[b*this.data.stride+this.offset+3]=a;return this},getX:function(b){return this.data.array[b*
      this.data.stride+this.offset]},getY:function(b){return this.data.array[b*this.data.stride+this.offset+1]},getZ:function(b){return this.data.array[b*this.data.stride+this.offset+2]},getW:function(b){return this.data.array[b*this.data.stride+this.offset+3]},setXY:function(b,a,d){b=b*this.data.stride+this.offset;this.data.array[b+0]=a;this.data.array[b+1]=d;return this},setXYZ:function(b,a,d,f){b=b*this.data.stride+this.offset;this.data.array[b+0]=a;this.data.array[b+1]=d;this.data.array[b+2]=f;return this},
      setXYZW:function(b,a,d,f,g){b=b*this.data.stride+this.offset;this.data.array[b+0]=a;this.data.array[b+1]=d;this.data.array[b+2]=f;this.data.array[b+3]=g;return this}});Object.defineProperty(Zc.prototype,"needsUpdate",{set:function(b){!0===b&&this.version++}});Object.assign(Zc.prototype,{isInterleavedBuffer:!0,setArray:function(b){if(Array.isArray(b))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==b?b.length/this.stride:0;this.array=b},setDynamic:function(b){this.dynamic=
        b;return this},copy:function(b){this.array=new b.array.constructor(b.array);this.count=b.count;this.stride=b.stride;this.dynamic=b.dynamic;return this},copyAt:function(b,a,d){b*=this.stride;d*=a.stride;for(var f=0,g=this.stride;f<g;f++)this.array[b+f]=a.array[d+f];return this},set:function(b,a){void 0===a&&(a=0);this.array.set(b,a);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(b){this.onUploadCallback=b;return this}});Ze.prototype=Object.assign(Object.create(Zc.prototype),
      {constructor:Ze,isInstancedInterleavedBuffer:!0,copy:function(b){Zc.prototype.copy.call(this,b);this.meshPerAttribute=b.meshPerAttribute;return this}});$e.prototype=Object.assign(Object.create(na.prototype),{constructor:$e,isInstancedBufferAttribute:!0,copy:function(b){na.prototype.copy.call(this,b);this.meshPerAttribute=b.meshPerAttribute;return this}});Object.assign(If.prototype,{linePrecision:1,set:function(b,a){this.ray.set(b,a)},setFromCamera:function(b,a){a&&a.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(a.matrixWorld),
        this.ray.direction.set(b.x,b.y,.5).unproject(a).sub(this.ray.origin).normalize()):a&&a.isOrthographicCamera?(this.ray.origin.set(b.x,b.y,(a.near+a.far)/(a.near-a.far)).unproject(a),this.ray.direction.set(0,0,-1).transformDirection(a.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(b,a){var d=[];af(b,this,d,a);d.sort(Jf);return d},intersectObjects:function(b,a){var d=[];if(!1===Array.isArray(b))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),
        d;for(var f=0,g=b.length;f<g;f++)af(b[f],this,d,a);d.sort(Jf);return d}});Object.assign(Kf.prototype,{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var b=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var a=("undefined"===typeof performance?
        Date:performance).now(),b=(a-this.oldTime)/1E3;this.oldTime=a;this.elapsedTime+=b}return b}});Object.assign(Lf.prototype,{set:function(b,a,d){this.radius=b;this.phi=a;this.theta=d;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.radius=b.radius;this.phi=b.phi;this.theta=b.theta;return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this},setFromVector3:function(b){this.radius=b.length();0===this.radius?this.phi=this.theta=
        0:(this.theta=Math.atan2(b.x,b.z),this.phi=Math.acos(qa.clamp(b.y/this.radius,-1,1)));return this}});Object.assign(Mf.prototype,{set:function(b,a,d){this.radius=b;this.theta=a;this.y=d;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.radius=b.radius;this.theta=b.theta;this.y=b.y;return this},setFromVector3:function(b){this.radius=Math.sqrt(b.x*b.x+b.z*b.z);this.theta=Math.atan2(b.x,b.z);this.y=b.y;return this}});Object.assign(bf.prototype,{set:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             a){this.min.copy(b);this.max.copy(a);return this},setFromPoints:function(b){this.makeEmpty();for(var a=0,d=b.length;a<d;a++)this.expandByPoint(b[a]);return this},setFromCenterAndSize:function(){var b=new l;return function(a,d){var f=b.copy(d).multiplyScalar(.5);this.min.copy(a).sub(f);this.max.copy(a).add(f);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.min.copy(b.min);this.max.copy(b.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;
        this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(b){b=b||new l;return this.isEmpty()?b.set(0,0):b.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(b){b=b||new l;return this.isEmpty()?b.set(0,0):b.subVectors(this.max,this.min)},expandByPoint:function(b){this.min.min(b);this.max.max(b);return this},expandByVector:function(b){this.min.sub(b);this.max.add(b);return this},expandByScalar:function(b){this.min.addScalar(-b);
        this.max.addScalar(b);return this},containsPoint:function(b){return b.x<this.min.x||b.x>this.max.x||b.y<this.min.y||b.y>this.max.y?!1:!0},containsBox:function(b){return this.min.x<=b.min.x&&b.max.x<=this.max.x&&this.min.y<=b.min.y&&b.max.y<=this.max.y},getParameter:function(b,a){return(a||new l).set((b.x-this.min.x)/(this.max.x-this.min.x),(b.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(b){return b.max.x<this.min.x||b.min.x>this.max.x||b.max.y<this.min.y||b.min.y>this.max.y?!1:!0},
      clampPoint:function(b,a){return(a||new l).copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var b=new l;return function(a){return b.copy(a).clamp(this.min,this.max).sub(a).length()}}(),intersect:function(b){this.min.max(b.min);this.max.min(b.max);return this},union:function(b){this.min.min(b.min);this.max.max(b.max);return this},translate:function(b){this.min.add(b);this.max.add(b);return this},equals:function(b){return b.min.equals(this.min)&&b.max.equals(this.max)}});Ud.prototype=Object.create(aa.prototype);
    Ud.prototype.constructor=Ud;Ud.prototype.isImmediateRenderObject=!0;Vd.prototype=Object.create(Qa.prototype);Vd.prototype.constructor=Vd;Vd.prototype.update=function(){var b=new a,d=new a,f=new k;return function(){var a=["a","b","c"];this.object.updateMatrixWorld(!0);f.getNormalMatrix(this.object.matrixWorld);var g=this.object.matrixWorld,e=this.geometry.attributes.position,k=this.object.geometry;if(k&&k.isGeometry)for(var m=k.vertices,l=k.faces,n=k=0,r=l.length;n<r;n++)for(var q=l[n],u=0,v=q.vertexNormals.length;u<
    v;u++){var t=q.vertexNormals[u];b.copy(m[q[a[u]]]).applyMatrix4(g);d.copy(t).applyMatrix3(f).normalize().multiplyScalar(this.size).add(b);e.setXYZ(k,b.x,b.y,b.z);k+=1;e.setXYZ(k,d.x,d.y,d.z);k+=1}else if(k&&k.isBufferGeometry)for(a=k.attributes.position,m=k.attributes.normal,u=k=0,v=a.count;u<v;u++)b.set(a.getX(u),a.getY(u),a.getZ(u)).applyMatrix4(g),d.set(m.getX(u),m.getY(u),m.getZ(u)),d.applyMatrix3(f).normalize().multiplyScalar(this.size).add(b),e.setXYZ(k,b.x,b.y,b.z),k+=1,e.setXYZ(k,d.x,d.y,
      d.z),k+=1;e.needsUpdate=!0}}();$c.prototype=Object.create(aa.prototype);$c.prototype.constructor=$c;$c.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};$c.prototype.update=function(){var b=new a,d=new a;return function(){this.light.updateMatrixWorld();var a=this.light.distance?this.light.distance:1E3,f=a*Math.tan(this.light.angle);this.cone.scale.set(f,f,a);b.setFromMatrixPosition(this.light.matrixWorld);d.setFromMatrixPosition(this.light.target.matrixWorld);
      this.cone.lookAt(d.sub(b));void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();ad.prototype=Object.create(Qa.prototype);ad.prototype.constructor=ad;ad.prototype.updateMatrixWorld=function(){var b=new a,d=new m,f=new m;return function(a){var g=this.bones,e=this.geometry,k=e.getAttribute("position");f.getInverse(this.root.matrixWorld);for(var m=0,l=0;m<g.length;m++){var n=g[m];n.parent&&n.parent.isBone&&(d.multiplyMatrices(f,n.matrixWorld),
      b.setFromMatrixPosition(d),k.setXYZ(l,b.x,b.y,b.z),d.multiplyMatrices(f,n.parent.matrixWorld),b.setFromMatrixPosition(d),k.setXYZ(l+1,b.x,b.y,b.z),l+=2)}e.getAttribute("position").needsUpdate=!0;aa.prototype.updateMatrixWorld.call(this,a)}}();bd.prototype=Object.create(cb.prototype);bd.prototype.constructor=bd;bd.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};bd.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};
    cd.prototype=Object.create(aa.prototype);cd.prototype.constructor=cd;cd.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};cd.prototype.update=function(){var b=.5*this.light.width,a=.5*this.light.height,d=this.line.geometry.attributes.position,f=d.array;f[0]=b;f[1]=-a;f[2]=0;f[3]=b;f[4]=a;f[5]=0;f[6]=-b;f[7]=a;f[8]=0;f[9]=-b;f[10]=-a;f[11]=0;f[12]=b;f[13]=-a;f[14]=0;d.needsUpdate=!0;void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};
    dd.prototype=Object.create(aa.prototype);dd.prototype.constructor=dd;dd.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};dd.prototype.update=function(){var b=new a,d=new S,f=new S;return function(){var a=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var g=a.geometry.getAttribute("color");d.copy(this.light.color);f.copy(this.light.groundColor);for(var e=0,k=g.count;e<k;e++){var m=e<k/2?d:f;g.setXYZ(e,m.r,m.g,m.b)}g.needsUpdate=
      !0}a.lookAt(b.setFromMatrixPosition(this.light.matrixWorld).negate())}}();Wd.prototype=Object.create(Qa.prototype);Wd.prototype.constructor=Wd;ze.prototype=Object.create(Qa.prototype);ze.prototype.constructor=ze;Xd.prototype=Object.create(Qa.prototype);Xd.prototype.constructor=Xd;Xd.prototype.update=function(){var b=new a,d=new a,f=new k;return function(){this.object.updateMatrixWorld(!0);f.getNormalMatrix(this.object.matrixWorld);for(var a=this.object.matrixWorld,g=this.geometry.attributes.position,
                                                                                                                                                                                                                                                                                                                                                                                                                                                               e=this.object.geometry,k=e.vertices,e=e.faces,m=0,l=0,n=e.length;l<n;l++){var r=e[l],q=r.normal;b.copy(k[r.a]).add(k[r.b]).add(k[r.c]).divideScalar(3).applyMatrix4(a);d.copy(q).applyMatrix3(f).normalize().multiplyScalar(this.size).add(b);g.setXYZ(m,b.x,b.y,b.z);m+=1;g.setXYZ(m,d.x,d.y,d.z);m+=1}g.needsUpdate=!0}}();ed.prototype=Object.create(aa.prototype);ed.prototype.constructor=ed;ed.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();
      this.targetLine.material.dispose()};ed.prototype.update=function(){var b=new a,d=new a,f=new a;return function(){b.setFromMatrixPosition(this.light.matrixWorld);d.setFromMatrixPosition(this.light.target.matrixWorld);f.subVectors(d,b);this.lightPlane.lookAt(f);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(f);
      this.targetLine.scale.z=f.length()}}();Yd.prototype=Object.create(Qa.prototype);Yd.prototype.constructor=Yd;Yd.prototype.update=function(){function b(b,a,k,m){g.set(a,k,m).unproject(e);b=f[b];if(void 0!==b)for(a=d.getAttribute("position"),k=0,m=b.length;k<m;k++)a.setXYZ(b[k],g.x,g.y,g.z)}var d,f,g=new a,e=new ab;return function(){d=this.geometry;f=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);b("c",0,0,-1);b("t",0,0,1);b("n1",-1,-1,-1);b("n2",1,-1,-1);b("n3",-1,1,-1);b("n4",
      1,1,-1);b("f1",-1,-1,1);b("f2",1,-1,1);b("f3",-1,1,1);b("f4",1,1,1);b("u1",.7,1.1,-1);b("u2",-.7,1.1,-1);b("u3",0,2,-1);b("cf1",-1,0,1);b("cf2",1,0,1);b("cf3",0,-1,1);b("cf4",0,1,1);b("cn1",-1,0,-1);b("cn2",1,0,-1);b("cn3",0,-1,-1);b("cn4",0,1,-1);d.getAttribute("position").needsUpdate=!0}}();uc.prototype=Object.create(Qa.prototype);uc.prototype.constructor=uc;uc.prototype.update=function(){var b=new Ra;return function(a){void 0!==a&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");
      void 0!==this.object&&b.setFromObject(this.object);if(!b.isEmpty()){a=b.min;var d=b.max,f=this.geometry.attributes.position,g=f.array;g[0]=d.x;g[1]=d.y;g[2]=d.z;g[3]=a.x;g[4]=d.y;g[5]=d.z;g[6]=a.x;g[7]=a.y;g[8]=d.z;g[9]=d.x;g[10]=a.y;g[11]=d.z;g[12]=d.x;g[13]=d.y;g[14]=a.z;g[15]=a.x;g[16]=d.y;g[17]=a.z;g[18]=a.x;g[19]=a.y;g[20]=a.z;g[21]=d.x;g[22]=a.y;g[23]=a.z;f.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();uc.prototype.setFromObject=function(b){this.object=b;this.update();return this};
    Zd.prototype=Object.create(Qa.prototype);Zd.prototype.constructor=Zd;Zd.prototype.updateMatrixWorld=function(b){var a=this.box;a.isEmpty()||(a.getCenter(this.position),a.getSize(this.scale),this.scale.multiplyScalar(.5),aa.prototype.updateMatrixWorld.call(this,b))};$d.prototype=Object.create(mb.prototype);$d.prototype.constructor=$d;$d.prototype.updateMatrixWorld=function(b){var a=-this.plane.constant;1E-8>Math.abs(a)&&(a=1E-8);this.scale.set(.5*this.size,.5*this.size,a);this.lookAt(this.plane.normal);
      aa.prototype.updateMatrixWorld.call(this,b)};var Ae,cf;vc.prototype=Object.create(aa.prototype);vc.prototype.constructor=vc;vc.prototype.setDirection=function(){var b=new a,d;return function(a){.99999<a.y?this.quaternion.set(0,0,0,1):-.99999>a.y?this.quaternion.set(1,0,0,0):(b.set(a.z,0,-a.x).normalize(),d=Math.acos(a.y),this.quaternion.setFromAxisAngle(b,d))}}();vc.prototype.setLength=function(b,a,d){void 0===a&&(a=.2*b);void 0===d&&(d=.2*a);this.line.scale.set(1,Math.max(0,b-a),1);this.line.updateMatrix();
      this.cone.scale.set(d,a,d);this.cone.position.y=b;this.cone.updateMatrix()};vc.prototype.setColor=function(b){this.line.material.color.copy(b);this.cone.material.color.copy(b)};ae.prototype=Object.create(Qa.prototype);ae.prototype.constructor=ae;ia.create=function(b,a){console.log("THREE.Curve.create() has been deprecated");b.prototype=Object.create(ia.prototype);b.prototype.constructor=b;b.prototype.getPoint=a;return b};Object.assign(Yb.prototype,{createPointsGeometry:function(b){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
        b=this.getPoints(b);return this.createGeometry(b)},createSpacedPointsGeometry:function(b){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");b=this.getSpacedPoints(b);return this.createGeometry(b)},createGeometry:function(b){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var d=new fa,f=0,g=b.length;f<g;f++){var e=b[f];d.vertices.push(new a(e.x,
        e.y,e.z||0))}return d}});Object.assign(Lb.prototype,{fromPoints:function(b){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(b)}});Of.prototype=Object.create(db.prototype);Pf.prototype=Object.create(db.prototype);df.prototype=Object.create(db.prototype);Object.assign(df.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},
      reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});Wd.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};ad.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Xc.prototype,{extractUrlBase:function(b){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");
        return hf.extractUrlBase(b)}});Object.assign(bf.prototype,{center:function(b){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(b)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(b){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(b)},size:function(b){console.warn("THREE.Box2: .size() has been renamed to .getSize().");
        return this.getSize(b)}});Object.assign(Ra.prototype,{center:function(b){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(b)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(b){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(b)},isIntersectionSphere:function(b){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");
        return this.intersectsSphere(b)},size:function(b){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(b)}});Ob.prototype.center=function(b){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(b)};Object.assign(qa,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(b){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");
        return qa.floorPowerOfTwo(b)},nextPowerOfTwo:function(b){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return qa.ceilPowerOfTwo(b)}});Object.assign(k.prototype,{flattenToArrayOffset:function(b,a){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(b,a)},multiplyVector3:function(b){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return b.applyMatrix3(this)},
      multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(b){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(b)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(m.prototype,{extractPosition:function(b){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");
        return this.copyPosition(b)},flattenToArrayOffset:function(b,a){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(b,a)},getPosition:function(){var b;return function(){void 0===b&&(b=new a);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return b.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(b){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");
        return this.makeRotationFromQuaternion(b)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(b){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return b.applyMatrix4(this)},multiplyVector4:function(b){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return b.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},
      rotateAxis:function(b){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");b.transformDirection(this)},crossVector:function(b){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return b.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},
      rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(b){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(b)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(b,a,d,f,g,e){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");
        return this.makePerspective(b,a,f,d,g,e)}});Ma.prototype.isIntersectionLine=function(b){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(b)};d.prototype.multiplyVector3=function(b){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return b.applyQuaternion(this)};Object.assign(Cb.prototype,{isIntersectionBox:function(b){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");
        return this.intersectsBox(b)},isIntersectionPlane:function(b){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(b)},isIntersectionSphere:function(b){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(b)}});Object.assign(ec.prototype,{extractAllPoints:function(b){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(b)},
      extrude:function(b){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new dc(this,b)},makeGeometry:function(b){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new lc(this,b)}});Object.assign(l.prototype,{fromAttribute:function(b,a,d){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(b,a,d)},distanceToManhattan:function(b){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");
        return this.manhattanDistanceTo(b)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(a.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},
      getPositionFromMatrix:function(b){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(b)},getScaleFromMatrix:function(b){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(b)},getColumnFromMatrix:function(b,a){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,
        b)},applyProjection:function(b){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(b)},fromAttribute:function(b,a,d){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(b,a,d)},distanceToManhattan:function(b){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(b)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");
        return this.manhattanLength()}});Object.assign(f.prototype,{fromAttribute:function(b,a,d){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(b,a,d)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(fa.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}});
    Object.assign(aa.prototype,{getChildByName:function(b){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(b)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(b,a){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(a,b)}});Object.defineProperties(aa.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");
          return this.rotation.order},set:function(b){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=b}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(sd.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");
          return this.levels}}});Object.defineProperty(lb.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(ia.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(b){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");
        this.arcLengthDivisions=b}});ra.prototype.setLens=function(b,a){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==a&&(this.filmGauge=a);this.setFocalLength(b)};Object.defineProperties(Ta.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(b){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=b}},
      shadowCameraLeft:{set:function(b){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=b}},shadowCameraRight:{set:function(b){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=b}},shadowCameraTop:{set:function(b){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=b}},shadowCameraBottom:{set:function(b){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");
          this.shadow.camera.bottom=b}},shadowCameraNear:{set:function(b){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=b}},shadowCameraFar:{set:function(b){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=b}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(b){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");
          this.shadow.bias=b}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(b){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=b}},shadowMapHeight:{set:function(b){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=b}}});Object.defineProperties(na.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");
          return this.array.length}}});Object.assign(N.prototype,{addIndex:function(b){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(b)},addDrawCall:function(b,a,d){void 0!==d&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(b,a)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");
        this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(N.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});
    Object.defineProperties(ye.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(ba.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},
      wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new S}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(b){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===b}}});Object.defineProperties(Fb.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");
          return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Na.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(b){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=b}}});Object.assign(Cc.prototype,
      {getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");
          return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");
          return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},
        supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");
          return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(b){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(b)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},
        setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}});Object.defineProperties(Cc.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(b){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=b}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(b){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=b}},
      shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(gb.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},
      renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});
    Object.defineProperties(g.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(b){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=b}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(b){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=b}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");
          return this.texture.magFilter},set:function(b){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=b}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(b){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=b}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");
          return this.texture.anisotropy},set:function(b){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=b}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(b){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=b}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},
        set:function(b){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=b}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(b){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=b}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(b){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");
          this.texture.type=b}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(b){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=b}}});Object.defineProperties(rf.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}});Yc.prototype.load=function(b){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");
      var a=this;(new Qe).load(b,function(b){a.setBuffer(b)});return this};Ue.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};Td.prototype.updateCubeMap=function(b,a){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(b,a)};e.WebGLRenderTargetCube=u;e.WebGLRenderTarget=g;e.WebGLRenderer=Cc;e.ShaderLib=gc;e.UniformsLib=ja;e.UniformsUtils=kb;e.ShaderChunk=Ga;e.FogExp2=Vb;e.Fog=rb;
    e.Scene=bc;e.Sprite=rd;e.LOD=sd;e.SkinnedMesh=ee;e.Skeleton=lb;e.Bone=sb;e.Mesh=cb;e.LineSegments=Qa;e.LineLoop=fe;e.Line=mb;e.Points=Dc;e.Group=ge;e.VideoTexture=Ee;e.DataTexture=v;e.CompressedTexture=Ec;e.CubeTexture=q;e.CanvasTexture=ha;e.DepthTexture=td;e.Texture=r;e.CompressedTextureLoader=Af;e.DataTextureLoader=Ie;e.CubeTextureLoader=Je;e.TextureLoader=ie;e.ObjectLoader=Cf;e.MaterialLoader=xe;e.BufferGeometryLoader=Le;e.DefaultLoadingManager=ob;e.LoadingManager=He;e.JSONLoader=Me;e.ImageLoader=
      Od;e.ImageBitmapLoader=Ne;e.FontLoader=Df;e.FileLoader=Gb;e.Loader=Xc;e.LoaderUtils=hf;e.Cache=wc;e.AudioLoader=Qe;e.SpotLightShadow=ke;e.SpotLight=le;e.PointLight=me;e.RectAreaLight=qe;e.HemisphereLight=je;e.DirectionalLightShadow=ne;e.DirectionalLight=oe;e.AmbientLight=pe;e.LightShadow=tc;e.Light=Ta;e.StereoCamera=Ef;e.PerspectiveCamera=ra;e.OrthographicCamera=wb;e.CubeCamera=Td;e.ArrayCamera=za;e.Camera=ab;e.AudioListener=Re;e.PositionalAudio=Te;e.AudioContext=Se;e.AudioAnalyser=Ue;e.Audio=Yc;
    e.VectorKeyframeTrack=Wc;e.StringKeyframeTrack=re;e.QuaternionKeyframeTrack=Rd;e.NumberKeyframeTrack=Vc;e.ColorKeyframeTrack=ue;e.BooleanKeyframeTrack=se;e.PropertyMixer=Ve;e.PropertyBinding=fb;e.KeyframeTrack=Xa;e.AnimationUtils=eb;e.AnimationObjectGroup=Gf;e.AnimationMixer=We;e.AnimationClip=Ab;e.Uniform=ye;e.InstancedBufferGeometry=Xe;e.BufferGeometry=N;e.Geometry=fa;e.InterleavedBufferAttribute=Ye;e.InstancedInterleavedBuffer=Ze;e.InterleavedBuffer=Zc;e.InstancedBufferAttribute=$e;e.Face3=ib;
    e.Object3D=aa;e.Raycaster=If;e.Layers=$b;e.EventDispatcher=n;e.Clock=Kf;e.QuaternionLinearInterpolant=te;e.LinearInterpolant=Sd;e.DiscreteInterpolant=we;e.CubicInterpolant=ve;e.Interpolant=ub;e.Triangle=zb;e.Math=qa;e.Spherical=Lf;e.Cylindrical=Mf;e.Plane=Ma;e.Frustum=pa;e.Sphere=Q;e.Ray=Cb;e.Matrix4=m;e.Matrix3=k;e.Box3=Ra;e.Box2=bf;e.Line3=Ob;e.Euler=Ua;e.Vector4=f;e.Vector3=a;e.Vector2=l;e.Quaternion=d;e.Color=S;e.ImmediateRenderObject=Ud;e.VertexNormalsHelper=Vd;e.SpotLightHelper=$c;e.SkeletonHelper=
      ad;e.PointLightHelper=bd;e.RectAreaLightHelper=cd;e.HemisphereLightHelper=dd;e.GridHelper=Wd;e.PolarGridHelper=ze;e.FaceNormalsHelper=Xd;e.DirectionalLightHelper=ed;e.CameraHelper=Yd;e.BoxHelper=uc;e.Box3Helper=Zd;e.PlaneHelper=$d;e.ArrowHelper=vc;e.AxesHelper=ae;e.Shape=ec;e.Path=Lb;e.ShapePath=Oe;e.Font=Pe;e.CurvePath=Yb;e.Curve=ia;e.ShapeUtils=Wb;e.WebGLUtils=sf;e.WireframeGeometry=Fc;e.ParametricGeometry=ud;e.ParametricBufferGeometry=Gc;e.TetrahedronGeometry=wd;e.TetrahedronBufferGeometry=Hc;
    e.OctahedronGeometry=xd;e.OctahedronBufferGeometry=ic;e.IcosahedronGeometry=yd;e.IcosahedronBufferGeometry=Ic;e.DodecahedronGeometry=zd;e.DodecahedronBufferGeometry=Jc;e.PolyhedronGeometry=vd;e.PolyhedronBufferGeometry=nb;e.TubeGeometry=Ad;e.TubeBufferGeometry=Kc;e.TorusKnotGeometry=Bd;e.TorusKnotBufferGeometry=Lc;e.TorusGeometry=Cd;e.TorusBufferGeometry=Mc;e.TextGeometry=Hd;e.TextBufferGeometry=Nc;e.SphereGeometry=Id;e.SphereBufferGeometry=kc;e.RingGeometry=Jd;e.RingBufferGeometry=Oc;e.PlaneGeometry=
      bb;e.PlaneBufferGeometry=Ca;e.LatheGeometry=Kd;e.LatheBufferGeometry=Pc;e.ShapeGeometry=lc;e.ShapeBufferGeometry=mc;e.ExtrudeGeometry=dc;e.ExtrudeBufferGeometry=Eb;e.EdgesGeometry=Qc;e.ConeGeometry=Ld;e.ConeBufferGeometry=Md;e.CylinderGeometry=nc;e.CylinderBufferGeometry=Xb;e.CircleGeometry=Nd;e.CircleBufferGeometry=Rc;e.BoxGeometry=oa;e.BoxBufferGeometry=X;e.ShadowMaterial=Sc;e.SpriteMaterial=cc;e.RawShaderMaterial=Tc;e.ShaderMaterial=Na;e.PointsMaterial=Db;e.MeshPhysicalMaterial=oc;e.MeshStandardMaterial=
      Qb;e.MeshPhongMaterial=Fb;e.MeshToonMaterial=pc;e.MeshNormalMaterial=qc;e.MeshLambertMaterial=rc;e.MeshDepthMaterial=xa;e.MeshDistanceMaterial=ka;e.MeshBasicMaterial=Ka;e.LineDashedMaterial=sc;e.LineBasicMaterial=Ha;e.Material=ba;e.Float64BufferAttribute=Bb;e.Float32BufferAttribute=Y;e.Uint32BufferAttribute=$a;e.Int32BufferAttribute=A;e.Uint16BufferAttribute=qb;e.Int16BufferAttribute=Mb;e.Uint8ClampedBufferAttribute=yb;e.Uint8BufferAttribute=Za;e.Int8BufferAttribute=Sa;e.BufferAttribute=na;e.ArcCurve=
      Uc;e.CatmullRomCurve3=db;e.CubicBezierCurve=Hb;e.CubicBezierCurve3=Rb;e.EllipseCurve=tb;e.LineCurve=pb;e.LineCurve3=Ib;e.QuadraticBezierCurve=Jb;e.QuadraticBezierCurve3=Sb;e.SplineCurve=Kb;e.REVISION="90";e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};e.CullFaceNone=0;e.CullFaceBack=1;e.CullFaceFront=2;e.CullFaceFrontBack=3;e.FrontFaceDirectionCW=0;e.FrontFaceDirectionCCW=1;e.BasicShadowMap=0;e.PCFShadowMap=1;e.PCFSoftShadowMap=2;e.FrontSide=0;e.BackSide=1;e.DoubleSide=2;e.FlatShading=1;e.SmoothShading=2;e.NoColors=
      0;e.FaceColors=1;e.VertexColors=2;e.NoBlending=0;e.NormalBlending=1;e.AdditiveBlending=2;e.SubtractiveBlending=3;e.MultiplyBlending=4;e.CustomBlending=5;e.AddEquation=100;e.SubtractEquation=101;e.ReverseSubtractEquation=102;e.MinEquation=103;e.MaxEquation=104;e.ZeroFactor=200;e.OneFactor=201;e.SrcColorFactor=202;e.OneMinusSrcColorFactor=203;e.SrcAlphaFactor=204;e.OneMinusSrcAlphaFactor=205;e.DstAlphaFactor=206;e.OneMinusDstAlphaFactor=207;e.DstColorFactor=208;e.OneMinusDstColorFactor=209;e.SrcAlphaSaturateFactor=
      210;e.NeverDepth=0;e.AlwaysDepth=1;e.LessDepth=2;e.LessEqualDepth=3;e.EqualDepth=4;e.GreaterEqualDepth=5;e.GreaterDepth=6;e.NotEqualDepth=7;e.MultiplyOperation=0;e.MixOperation=1;e.AddOperation=2;e.NoToneMapping=0;e.LinearToneMapping=1;e.ReinhardToneMapping=2;e.Uncharted2ToneMapping=3;e.CineonToneMapping=4;e.UVMapping=300;e.CubeReflectionMapping=301;e.CubeRefractionMapping=302;e.EquirectangularReflectionMapping=303;e.EquirectangularRefractionMapping=304;e.SphericalReflectionMapping=305;e.CubeUVReflectionMapping=
      306;e.CubeUVRefractionMapping=307;e.RepeatWrapping=1E3;e.ClampToEdgeWrapping=1001;e.MirroredRepeatWrapping=1002;e.NearestFilter=1003;e.NearestMipMapNearestFilter=1004;e.NearestMipMapLinearFilter=1005;e.LinearFilter=1006;e.LinearMipMapNearestFilter=1007;e.LinearMipMapLinearFilter=1008;e.UnsignedByteType=1009;e.ByteType=1010;e.ShortType=1011;e.UnsignedShortType=1012;e.IntType=1013;e.UnsignedIntType=1014;e.FloatType=1015;e.HalfFloatType=1016;e.UnsignedShort4444Type=1017;e.UnsignedShort5551Type=1018;
    e.UnsignedShort565Type=1019;e.UnsignedInt248Type=1020;e.AlphaFormat=1021;e.RGBFormat=1022;e.RGBAFormat=1023;e.LuminanceFormat=1024;e.LuminanceAlphaFormat=1025;e.RGBEFormat=1023;e.DepthFormat=1026;e.DepthStencilFormat=1027;e.RGB_S3TC_DXT1_Format=33776;e.RGBA_S3TC_DXT1_Format=33777;e.RGBA_S3TC_DXT3_Format=33778;e.RGBA_S3TC_DXT5_Format=33779;e.RGB_PVRTC_4BPPV1_Format=35840;e.RGB_PVRTC_2BPPV1_Format=35841;e.RGBA_PVRTC_4BPPV1_Format=35842;e.RGBA_PVRTC_2BPPV1_Format=35843;e.RGB_ETC1_Format=36196;e.RGBA_ASTC_4x4_Format=
      37808;e.RGBA_ASTC_5x4_Format=37809;e.RGBA_ASTC_5x5_Format=37810;e.RGBA_ASTC_6x5_Format=37811;e.RGBA_ASTC_6x6_Format=37812;e.RGBA_ASTC_8x5_Format=37813;e.RGBA_ASTC_8x6_Format=37814;e.RGBA_ASTC_8x8_Format=37815;e.RGBA_ASTC_10x5_Format=37816;e.RGBA_ASTC_10x6_Format=37817;e.RGBA_ASTC_10x8_Format=37818;e.RGBA_ASTC_10x10_Format=37819;e.RGBA_ASTC_12x10_Format=37820;e.RGBA_ASTC_12x12_Format=37821;e.LoopOnce=2200;e.LoopRepeat=2201;e.LoopPingPong=2202;e.InterpolateDiscrete=2300;e.InterpolateLinear=2301;e.InterpolateSmooth=
      2302;e.ZeroCurvatureEnding=2400;e.ZeroSlopeEnding=2401;e.WrapAroundEnding=2402;e.TrianglesDrawMode=0;e.TriangleStripDrawMode=1;e.TriangleFanDrawMode=2;e.LinearEncoding=3E3;e.sRGBEncoding=3001;e.GammaEncoding=3007;e.RGBEEncoding=3002;e.LogLuvEncoding=3003;e.RGBM7Encoding=3004;e.RGBM16Encoding=3005;e.RGBDEncoding=3006;e.BasicDepthPacking=3200;e.RGBADepthPacking=3201;e.CubeGeometry=oa;e.Face4=function(b,a,d,f,g,e,k){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");
      return new ib(b,a,d,g,e,k)};e.LineStrip=0;e.LinePieces=1;e.MeshFaceMaterial=function(b){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return b};e.MultiMaterial=function(b){void 0===b&&(b=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");b.isMultiMaterial=!0;b.materials=b;b.clone=function(){return b.slice()};return b};e.PointCloud=function(b,a){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new Dc(b,a)};e.Particle=
      function(b){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new rd(b)};e.ParticleSystem=function(b,a){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new Dc(b,a)};e.PointCloudMaterial=function(b){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new Db(b)};e.ParticleBasicMaterial=function(b){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new Db(b)};e.ParticleSystemMaterial=
      function(b){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new Db(b)};e.Vertex=function(b,d,f){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new a(b,d,f)};e.DynamicBufferAttribute=function(b,a){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new na(b,a)).setDynamic(!0)};e.Int8Attribute=function(b,a){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");
      return new Sa(b,a)};e.Uint8Attribute=function(b,a){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new Za(b,a)};e.Uint8ClampedAttribute=function(b,a){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new yb(b,a)};e.Int16Attribute=function(b,a){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new Mb(b,a)};e.Uint16Attribute=
      function(b,a){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new qb(b,a)};e.Int32Attribute=function(b,a){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new A(b,a)};e.Uint32Attribute=function(b,a){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new $a(b,a)};e.Float32Attribute=function(b,a){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");
      return new Y(b,a)};e.Float64Attribute=function(b,a){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new Bb(b,a)};e.ClosedSplineCurve3=Of;e.SplineCurve3=Pf;e.Spline=df;e.AxisHelper=function(b){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new ae(b)};e.BoundingBoxHelper=function(b,a){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new uc(b,a)};e.EdgesHelper=
      function(b,a){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new Qa(new Qc(b.geometry),new Ha({color:void 0!==a?a:16777215}))};e.WireframeHelper=function(b,a){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new Qa(new Fc(b.geometry),new Ha({color:void 0!==a?a:16777215}))};e.XHRLoader=function(b){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new Gb(b)};e.BinaryTextureLoader=
      function(b){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new Ie(b)};e.GeometryUtils={merge:function(b,a,d){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var f;a.isMesh&&(a.matrixAutoUpdate&&a.updateMatrix(),f=a.matrix,a=a.geometry);b.merge(a,f,d)},center:function(b){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");
        return b.center()}};e.ImageUtils={crossOrigin:void 0,loadTexture:function(b,a,d,f){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var g=new ie;g.setCrossOrigin(this.crossOrigin);b=g.load(b,d,void 0,f);a&&(b.mapping=a);return b},loadTextureCube:function(b,a,d,f){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var g=new Je;g.setCrossOrigin(this.crossOrigin);b=g.load(b,d,void 0,f);a&&(b.mapping=
        a);return b},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(b,a){console.warn("THREE.Projector: .projectVector() is now vector.project().");
      b.project(a)};this.unprojectVector=function(b,a){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");b.unproject(a)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};
      this.setClearColor=function(){};this.setSize=function(){}};e.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")};
    Object.defineProperty(e,"__esModule",{value:!0})});
  define("com/visioglobe/web/helpers/CachedTexture",["three"],function(e){return function(n,l,m,d){"undefined"===typeof m&&(m=!0);var a,k;"undefined"===typeof n.textures[l]?(k={loaded:!1,postFunctions:[],debugURL:l},n.textures[l]=k,d&&k.postFunctions.push(d),m||(a=new e.Texture,a.vg={nbRefs:1},k.pending=[a]),n.loaderStatistics.textures++,k.texture=n.textureLoader.load(l,function(a){n.loaderStatistics.textures--;m||Object.keys(k.pending).forEach(function(d){k.pending[d].image=a.image;k.pending[d].needsUpdate=
    !0});k.loaded=!0;Object.keys(k.postFunctions).forEach(function(a){k.postFunctions[a](k)});k.postFunctions=null;n.requestRedraw()},void 0,function(){n.loaderStatistics.textures--}),k.texture.needsUpdate=!0,m&&(a=k.texture,a.vg={nbRefs:1})):(k=n.textures[l],m||(a=new e.Texture,a.vg={nbRefs:1}),m?(a=k.texture,a.vg.nbRefs++,d&&(k.loaded?(d(k),d=null):k.postFunctions.push(d))):k.loaded?(a.image=k.texture.image,a.needsUpdate=!0):k.pending.push(a));return a}});
  define("com/visioglobe/web/Camera",["com/visioglobe/web/helpers/MathUtils","bluebird","three"],function(e,n,l){function m(d){0>d&&(d+=360*(-d/360+1|0));return d%360}return function(d){var a=!1,k=!1;n.config({cancellation:!0});Object.defineProperty(this,"pitch",{get:function(){return d.manipulator.orientation.x*e.RAD2DEG},set:function(a){a=l.Math.clamp(a*e.DEG2RAD,d.manipulator.rotationXMin,d.manipulator.rotationXMax);d.manipulator.orientation.x!=a&&(d.manipulator.orientation.x=a,d.manipulator.update())}});
    Object.defineProperty(this,"minPitch",{get:function(){return d.manipulator.rotationXMin*e.RAD2DEG},set:function(a){d.manipulator.rotationXMin=a*e.DEG2RAD;a=l.Math.clamp(d.manipulator.orientation.x,d.manipulator.rotationXMin,d.manipulator.rotationXMax);d.manipulator.orientation.x!=a&&(d.manipulator.orientation.x=a,d.manipulator.update())}});Object.defineProperty(this,"maxPitch",{get:function(){return d.manipulator.rotationXMax*e.RAD2DEG},set:function(a){d.manipulator.rotationXMax=a*e.DEG2RAD;a=l.Math.clamp(d.manipulator.orientation.x,
        d.manipulator.rotationXMin,d.manipulator.rotationXMax);d.manipulator.orientation.x!=a&&(d.manipulator.orientation.x=a,d.manipulator.update())}});Object.defineProperty(this,"minRadius",{get:function(){return d.manipulator.minRadius},set:function(a){d.manipulator.minRadius=a;d.manipulator.update()}});Object.defineProperty(this,"maxRadius",{get:function(){return d.manipulator.maxRadius},set:function(a){d.manipulator.maxRadius=a;d.manipulator.update()}});Object.defineProperty(this,"position",{get:function(){return{x:d.manipulator.target.x,
        y:d.manipulator.target.y,radius:d.manipulator.radius}},set:function(a){if(!1!==a){var f=!1;if(d.manipulator.target.x!=a.x||d.manipulator.target.y!=a.y)d.manipulator.target.x=a.x,d.manipulator.target.y=a.y,f=!0;"undefined"!==typeof a.radius&&d.manipulator.radius!=a.radius&&(d.manipulator.radius=a.radius,f=!0);f&&(d.manipulator.update(),d.manipulator.track&&void 0!==d.statistics&&d.statistics.logStat("position",{id:"camera",position:a}))}}});Object.defineProperty(this,"track",{get:function(){return d.manipulator.track},
      set:function(a){d.manipulator.track=a}});Object.defineProperty(this,"rotation",{get:function(){return m(d.manipulator.orientation.z*e.RAD2DEG+90)},set:function(a){a=(a-90)*e.DEG2RAD;d.manipulator.orientation.z!=a&&(d.manipulator.orientation.z=a,d.manipulator.update())}});Object.defineProperty(this,"heading",{get:function(){return m((d.cameraNorthRotation?d.cameraNorthRotation:0)-this.rotation)},set:function(a){this.rotation=(d.cameraNorthRotation?d.cameraNorthRotation:0)-a}});Object.defineProperty(this,
      "pitchManipulatorEnabled",{get:function(){return d.manipulator.pitchManipulatorEnabled},set:function(a){d.manipulator.pitchManipulatorEnabled=a?!0:!1}});Object.defineProperty(this,"rotationManipulatorEnabled",{get:function(){return d.manipulator.rotationManipulatorEnabled},set:function(a){d.manipulator.rotationManipulatorEnabled=a?!0:!1}});Object.defineProperty(this,"zoomManipulatorEnabled",{get:function(){return d.manipulator.zoomManipulatorEnabled},set:function(a){d.manipulator.zoomManipulatorEnabled=
        a?!0:!1}});Object.defineProperty(this,"panManipulatorEnabled",{get:function(){return d.manipulator.panManipulatorEnabled},set:function(a){d.manipulator.panManipulatorEnabled=a?!0:!1}});this.getBoundary=function(){return d.manipulator.boundary};this.setBoundary=function(a){a&&3<a.length&&(d.manipulator.boundary=a,d.manipulator.update())};this.setManipulator=function(a){switch(a){case "map":case "trackball":case "none":d.manipulatorTypeName=a}};this.getManipulator=function(){return d.manipulatorTypeName};
    this.setCustomPreManipulatorListener=function(a){d.customPreManipulatorListener="function"==typeof a?a:!1};this.getCustomPreManipulatorListener=function(){return d.customPreManipulatorListener};this.setCustomPostManipulatorListener=function(a){d.customPostManipulatorListener="function"==typeof a?a:!1};this.getCustomPostManipulatorListener=function(){return d.customPostManipulatorListener};this.removeCustomPreManipulatorListener=function(){d.customPreManipulatorListener=!1};this.removeCustomPostManipulatorListener=
      function(){d.customPostManipulatorListener=!1};this.goTo=function(e,f){!1!==k&&k.isPending()&&(clearTimeout(-1),k.cancel());var g=500;f&&"undefined"!==typeof f.animationDuration&&(g=f.animationDuration,0>g&&(g=0));if("undefined"===typeof e||"string"===typeof e&&(e=d.getPlace(e),!1===e))return n.reject();var m=new l.Vector3,v=d.manipulator.radius;if("object"===typeof e&&"object"===typeof e.vg&&"object"===typeof e.vg.position&&"undefined"!==typeof e.vg.position.x&&"undefined"!==typeof e.vg.position.y&&
      "undefined"!==typeof e.vg.radius)v=e.vg.radius,m.x=e.vg.position.x,m.y=e.vg.position.y;else if("object"===typeof e&&"undefined"!==typeof e.x&&"undefined"!==typeof e.y)m.x=e.x,m.y=e.y,"undefined"!==typeof e.radius&&(v=e.radius);else return n.reject();!1!==a&&(a.stop(),a=!1);if(0===g)this.position={x:m.x,y:m.y,radius:v},k=n.delay(0);else{var q=d.manipulator.radius,t=d.manipulator.target.x,x=d.manipulator.target.y,w=Math.max(d.manipulator.minRadius,v),y=m.x,z=m.y;k=new n(function(f,e){a=d.animateValue(0,
      1,{duration:g,easing:"linear",step:function(a){d.publicCamera.position={x:t+a*(y-t),y:x+a*(z-x),radius:q+a*(w-q)}},complete:function(){a=!1;d.publicCamera.position={x:y,y:z,radius:w};f()}})})}return k}}});
  define("com/visioglobe/web/helpers/ExtrudeGeometry",["com/visioglobe/web/helpers/MathUtils","three"],function(e,n){var l=function(d,a){n.Geometry.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:d,options:a};this.fromBufferGeometry(new m(d,a));this.mergeVertices()};l.prototype=Object.create(n.ExtrudeGeometry.prototype);l.prototype.constructor=l;var m=function(d,a){n.ExtrudeBufferGeometry.call(this,d,a)};m.prototype=Object.create(n.ExtrudeBufferGeometry.prototype);m.prototype.constructor=
    m;m.prototype.addShape=function(d,a){function k(a,d,f){d||console.error("THREE.ExtrudeGeometry: vec does not exist");return d.clone().multiplyScalar(f).add(a)}function m(a,d,f){var g=1,g=a.x-d.x,k=a.y-d.y,l=f.x-a.x,r=f.y-a.y,q=g*g+k*k;if(Math.abs(g*r-k*l)>Number.EPSILON){var u=Math.sqrt(q),v=Math.sqrt(l*l+r*r),q=d.x-k/u;d=d.y+g/u;l=((f.x-r/v-q)*r-(f.y+l/v-d)*l)/(g*r-k*l);f=q+g*l-a.x;a=d+k*l-a.y;g=f*f+a*a;if(2>=g)return new n.Vector2(f,a);g=Math.sqrt(g/2)}else a=!1,g>Number.EPSILON?l>Number.EPSILON&&
    (a=!0):g<-Number.EPSILON?l<-Number.EPSILON&&(a=!0):e.sign(k)===e.sign(r)&&(a=!0),a?(f=-k,a=g,g=Math.sqrt(q)):(f=g,a=k,g=Math.sqrt(q/2));return new n.Vector2(f/g,a/g)}function f(){var d=w.length/3,f=0;g(Da,f);f+=Da.length;ga=0;for(sa=ta.length;ga<sa;ga++)va=ta[ga],g(va,f),f+=va.length;ca.addGroup(d,w.length/3-d,void 0!==a.extrudeMaterial?a.extrudeMaterial:1)}function g(a,d){var f,g;for(Q=a.length;0<=--Q;){f=Q;g=Q-1;0>g&&(g=a.length-1);for(var e=0,k=O+2*H,e=0;e<k;e++){var m=xa*e,l=xa*(e+1),n=d+g+m,
    r=d+g+l,l=d+f+l;q(d+f+m);q(n);q(l);q(n);q(r);q(l);m=w.length/3;m=ea.generateSideWallUV(ca,w,m-6,m-3,m-2,m-1);t(m[0]);t(m[1]);t(m[3]);t(m[1]);t(m[2]);t(m[3])}}}function l(a,d,f){B.push(a);B.push(d);B.push(f)}function v(a,d,f){q(a);q(d);q(f);a=w.length/3;a=ea.generateTopUV(ca,w,a-3,a-2,a-1);t(a[0]);t(a[1]);t(a[2])}function q(a){y.push(w.length/3);w.push(B[3*a+0]);w.push(B[3*a+1]);w.push(B[3*a+2])}function t(a){z.push(a.x);z.push(a.y)}var x=a.arrays?a.arrays:this.getArrays(),w=x.position,y=x.index,z=
      x.uv,B=[],x=void 0!==a.amount?a.amount:100,C=void 0!==a.bevelThickness?a.bevelThickness:6,E=void 0!==a.bevelSize?a.bevelSize:C-2,H=void 0!==a.bevelSegments?a.bevelSegments:3,K=void 0!==a.bevelEnabled?a.bevelEnabled:!0,J=void 0!==a.curveSegments?a.curveSegments:12,O=void 0!==a.steps?a.steps:1,L=a.extrudePath,R,W=!1,I=void 0!==a.generateTop?a.generateTop:!0,da=void 0!==a.generateBottom?a.generateBottom:!0,ya=void 0!==a.generateSides?a.generateSides:!0,ea=void 0!==a.UVGenerator?a.UVGenerator:n.ExtrudeGeometry.WorldUVGenerator,
    Fa,G,Aa,Z;L&&(R=L.getSpacedPoints(O),W=!0,K=!1,Fa=void 0!==a.frames?a.frames:L.computeFrenetFrames(O,!1),G=new n.Vector3,Aa=new n.Vector3,Z=new n.Vector3);K||(E=C=H=0);var va,ga,sa,ca=this,L=d.extractPoints(J),J=L.shape,ta=L.holes;if(L=!n.ShapeUtils.isClockWise(J)){J=J.reverse();ga=0;for(sa=ta.length;ga<sa;ga++)va=ta[ga],n.ShapeUtils.isClockWise(va)&&(ta[ga]=va.reverse());L=!1}var Ba=n.ShapeUtils.triangulateShape(J,ta),Da=J;ga=0;for(sa=ta.length;ga<sa;ga++)va=ta[ga],J=J.concat(va);var ua,S,ha,Ia,
    ba,xa=J.length,ka,Ra=Ba.length,L=[],Q=0;ha=Da.length;ua=ha-1;for(S=Q+1;Q<ha;Q++,ua++,S++)ua===ha&&(ua=0),S===ha&&(S=0),L[Q]=m(Da[Q],Da[ua],Da[S]);var Ma=[],pa,gb=L.concat();ga=0;for(sa=ta.length;ga<sa;ga++){va=ta[ga];pa=[];Q=0;ha=va.length;ua=ha-1;for(S=Q+1;Q<ha;Q++,ua++,S++)ua===ha&&(ua=0),S===ha&&(S=0),pa[Q]=m(va[Q],va[ua],va[S]);Ma.push(pa);gb=gb.concat(pa)}for(ua=0;ua<H;ua++){ha=ua/H;Ia=C*Math.cos(ha*Math.PI/2);S=E*Math.sin(ha*Math.PI/2);Q=0;for(ha=Da.length;Q<ha;Q++)ba=k(Da[Q],L[Q],S),l(ba.x,
    ba.y,-Ia);ga=0;for(sa=ta.length;ga<sa;ga++)for(va=ta[ga],pa=Ma[ga],Q=0,ha=va.length;Q<ha;Q++)ba=k(va[Q],pa[Q],S),l(ba.x,ba.y,-Ia)}S=E;for(Q=0;Q<xa;Q++)ba=K?k(J[Q],gb[Q],S):J[Q],W?(Aa.copy(Fa.normals[0]).multiplyScalar(ba.x),G.copy(Fa.binormals[0]).multiplyScalar(ba.y),Z.copy(R[0]).add(Aa).add(G),l(Z.x,Z.y,Z.z)):l(ba.x,ba.y,0);for(ha=1;ha<=O;ha++)for(Q=0;Q<xa;Q++)ba=K?k(J[Q],gb[Q],S):J[Q],W?(Aa.copy(Fa.normals[ha]).multiplyScalar(ba.x),G.copy(Fa.binormals[ha]).multiplyScalar(ba.y),Z.copy(R[ha]).add(Aa).add(G),
    l(Z.x,Z.y,Z.z)):l(ba.x,ba.y,x/O*ha);for(ua=H-1;0<=ua;ua--){ha=ua/H;Ia=C*Math.cos(ha*Math.PI/2);S=E*Math.sin(ha*Math.PI/2);Q=0;for(ha=Da.length;Q<ha;Q++)ba=k(Da[Q],L[Q],S),l(ba.x,ba.y,x+Ia);ga=0;for(sa=ta.length;ga<sa;ga++)for(va=ta[ga],pa=Ma[ga],Q=0,ha=va.length;Q<ha;Q++)ba=k(va[Q],pa[Q],S),W?l(ba.x,ba.y+R[O-1].y,R[O-1].x+Ia):l(ba.x,ba.y,x+Ia)}(function(){var d=w.length/3;if(K){var f;f=0*xa;if(da)for(Q=0;Q<Ra;Q++)ka=Ba[Q],v(ka[2]+f,ka[1]+f,ka[0]+f);f=O+2*H;f*=xa;if(I)for(Q=0;Q<Ra;Q++)ka=Ba[Q],v(ka[0]+
    f,ka[1]+f,ka[2]+f)}else{if(da)for(Q=0;Q<Ra;Q++)ka=Ba[Q],v(ka[2],ka[1],ka[0]);if(I)for(Q=0;Q<Ra;Q++)ka=Ba[Q],v(ka[0]+xa*O,ka[1]+xa*O,ka[2]+xa*O)}ca.addGroup(d,w.length/3-d,void 0!==a.material?a.material:0)})();ya&&f();a.arrays||(this.setIndex(y),this.addAttribute("position",new Float32BufferAttribute(w,3)),this.addAttribute("uv",new Float32BufferAttribute(a.arrays.uv,2)))};return l});
  define("com/visioglobe/common/PublicInterface",[],function(){function e(){}e.create=function(e,l,m,d,a){e=e||{};m=m||[];d=d||[];a=a||[];Object.keys(m).forEach(function(a){var d=m[a];"undefined"!==typeof l[d]&&Object.defineProperty(this,d,{get:function(){return l[d]},set:function(a){l[d]=a}})},e);Object.keys(d).forEach(function(a){var e=d[a];"undefined"!==typeof l[e]&&Object.defineProperty(this,e,{get:function(){return l[e]}})},e);Object.keys(a).forEach(function(d){var e=a[d];"undefined"!==typeof l[e]&&
  (this[e]=function(){return l[e].apply(l,arguments)})},e)};return e});
  define("com/visioglobe/web/LOD",["com/visioglobe/common/PublicInterface","three"],function(e,n){function l(m){e.create(this,m,d,a,k)}function m(a,d,g){this.index=g;this.mapviewer=a;this.node=new n.Object3D;this.node.visible=!1;this.node.matrixAutoUpdate=!1;this.contentNode=new n.Object3D;this.contentNode.matrixAutoUpdate=!1;this.floor=d;this.pickables=[];this.cameraUpdatableObjects=[];this.pathObjects=[];this.animatedObjects=[];this.rampObjects=[];this.groundObjects=[];this.layers={};this.publicLOD=
    this.active=!1;this.node.add(this.contentNode);d.node.add(this.node)}var d=[],a=[],k=["setEnabled","isEnabled"];m.prototype.constructor=m;m.prototype.getPublicLOD=function(){return this.publicLOD=this.publicLOD||new l(this)};m.prototype.setContentEnabled=function(a){this.contentNode.visible!=a&&(this.contentNode.visible=a,this.mapviewer.requestRedraw())};m.prototype.isContentEnabled=function(){return this.contentNode.visible};m.prototype.setEnabled=function(a){this.node.visible!=a&&(this.node.visible=
    a,this.setActive(a),this.mapviewer.requestRedraw())};m.prototype.isEnabled=function(){return this.node.visible};m.prototype.getOrCreateLayer=function(a){if("undefined"===typeof this.layers[a]){var d=new n.Object3D;d.matrixAutoUpdate=!1;this.layers[a]=d;this.node.add(d)}return this.layers[a]};m.prototype.setActive=function(a){this.active===a||a&&!1===this.floor.isEnabled()||(a?this.mapviewer.addActiveLOD(this):this.mapviewer.removeActiveLOD(this),this.active=a,this.mapviewer.mustUpdateCameraObjects=
    !0,this.mapviewer.requestRedraw())};m.prototype.isActive=function(){return this.active};return m});
  define("com/visioglobe/web/Floor",["com/visioglobe/common/PublicInterface","com/visioglobe/web/LOD","com/visioglobe/web/helpers/MathUtils","three"],function(e,n,l,m){function d(a){e.create(this,a,k,r,f)}function a(a,d){this.name=d;this.lods=[];this.node=new m.Object3D;this.node.visible=!1;this.node.matrixAutoUpdate=!1;this.mapviewer=a;this.floorContentLOD=new n(a,this,-1);this.floorContentLOD.setEnabled(!0);this.positionUpdatableLinks=[];this.publicLODs=this.publicFloor=!1;this.autoUpdateLOD=!0;this.setContentEnabled(!0)}
    var k=[],r=["name","index","heightMin","heightMax"],f="setEnabled isEnabled setContentEnabled isContentEnabled getPosition setPosition getLODs setAutoUpdateLOD isAutoUpdateLOD fadeIn fadeOut".split(" ");a.prototype.constructor=a;a.prototype.getPublicFloor=function(){return this.publicFloor=this.publicFloor||new d(this)};a.prototype.getLODs=function(){if(!this.publicLODs){this.publicLODs=[];for(var a=0,d=this.lods.length;a<d;a++)this.publicLODs.push(this.lods[a].getPublicLOD())}return this.publicLODs};
    a.prototype.createLOD=function(a){var d=new n(this.mapviewer,this,a,this.name);return this.lods[a]=d};a.prototype.getLOD=function(a){for(var d=null,f=0;f<this.lods.length;++f){var e=this.lods[f];if(void 0!==e&&e.index===a){d=e;break}}return d};a.prototype.info=function(){var a=this.node.position;console.log("==============");console.log("Floor "+this.name+" visible "+this.node.visible+" content "+this.floorContentLOD.node.visible+" pos("+a.x+","+a.y+","+a.z+")");for(var a=0,d=this.lods.length;a<d;++a){var f=
      this.lods[a].node.position;console.log("  LOD  "+a+" visible "+this.lods[a].node.visible+" pos ("+f.x+","+f.y+","+f.z+")")}console.log("this.positionUpdatableLinks.length: "+this.positionUpdatableLinks.length)};a.prototype.fadeOut=function(a){var d=this;return this.mapviewer.animateValue(0,1,{duration:a,step:function(a){d.setOpacity(1-l.easeOut(a))}})};a.prototype.fadeIn=function(a){var d=this;return this.mapviewer.animateValue(0,1,{duration:a,step:function(a){d.setOpacity(l.easeIn(a))},complete:function(){d.setContentEnabled(!0)}})};
    a.prototype.setOpacity=function(a,d){0<a?this.setEnabled(!0):this.setEnabled(!1);0<a&&1>a?(this.node.traverse(function(d){"undefined"!==typeof d.material&&(Array.isArray(d.material)?("undefined"===typeof d.originalMaterials&&(d.originalMaterials=[],d.material.forEach(function(a,f){d.originalMaterials[f]=a;d.material[f]=d.originalMaterials[f].clone()})),d.material.forEach(function(f,e){f.opacity=a*d.originalMaterials[e].opacity;f.transparent=!0})):d.material instanceof m.MeshBasicMaterial?("undefined"===
    typeof d.originalMaterial&&(d.originalMaterial=d.material,d.material=d.originalMaterial.clone()),d.material.opacity=a*d.originalMaterial.opacity,d.material.transparent=!0):d.material instanceof m.ShaderMaterial&&("undefined"===typeof d.material.originalOpacity&&(d.material.originalOpacity=d.material.uniforms.opacity.value),d.material.uniforms.opacity.value=a*d.material.originalOpacity))}),this.floorContentLOD.node.traverse(function(a){"undefined"===typeof a.originalRenderOrder&&(a.originalRenderOrder=
      a.renderOrder);a.renderOrder=1})):(this.node.traverse(function(a){"undefined"!==typeof a.material&&(Array.isArray(a.material)?"undefined"!==typeof a.originalMaterials&&a.material.forEach(function(d,f){a.material[f]=a.originalMaterials[f].clone()}):a.material instanceof m.MeshBasicMaterial?"undefined"!==typeof a.originalMaterial&&(a.material=a.originalMaterial.clone()):a.material instanceof m.ShaderMaterial&&"undefined"!==typeof a.material.originalOpacity&&(a.material.uniforms.opacity.value=a.material.originalOpacity))}),
      this.floorContentLOD.node.traverse(function(a){a.renderOrder=a.originalRenderOrder}));this.mapviewer.requestRedraw()};a.prototype.setEnabled=function(a){if(this.node.visible!==a){this.node.visible=a;this.floorContentLOD.isEnabled()&&this.floorContentLOD.setActive(a);for(var d=0;d<this.lods.length;++d){var f=this.lods[d];f.isEnabled()&&f.setActive(a)}this.mapviewer.requestRedraw()}};a.prototype.isEnabled=function(){return this.node.visible};a.prototype.setContentEnabled=function(a){this.floorContentLOD.setContentEnabled(a);
      for(var d=0;d<this.lods.length;++d)this.lods[d].setContentEnabled(a)};a.prototype.isContentEnabled=function(){return this.floorContentLOD.isContentEnabled()};a.prototype.getPosition=function(){var a=this.node.position;return{x:a.x,y:a.y,z:a.z}};a.prototype.setPosition=function(a){var d=this.node.position;if(d.x!=a.x||d.y!=a.y||d.z!=a.z){a.z=a.z||0;this.node.position.copy(a);a=0;for(d=this.positionUpdatableLinks.length;a<d;a++){var f=this.positionUpdatableLinks[a],e=!1;if(f.linkOptions.startFloor===
      this||f.linkOptions.endFloor===this)var e=f.linkOptions.endPoint,k=f.linkOptions.startFloor.getPosition(),m=f.linkOptions.endFloor.getPosition(),e={x:m.x-k.x+e.x,y:m.y-k.y+e.y,z:m.z-k.z+e.z};e&&f.updateEndPoints(!1,e)}this.mapviewer.mustUpdateCameraObjects=!0;this.node.updateMatrix();this.node.updateMatrixWorld(!0);this.mapviewer.requestRedraw()}};a.prototype.removeLink=function(a){for(var d=0,f=this.positionUpdatableLinks.length;d<f;d++)if(this.positionUpdatableLinks[d]===a)return this.positionUpdatableLinks.splice(d,
      1),!0;return!1};a.prototype.addLink=function(a){this.positionUpdatableLinks.push(a)};a.prototype.isAutoUpdateLOD=function(){return this.autoUpdateLOD};a.prototype.setAutoUpdateLOD=function(a){if(this.autoUpdateLOD=a)this.mapviewer.mustUpdateCameraObjects=!0,this.mapviewer.requestRedraw()};return a});
  define("com/visioglobe/web/Path",["com/visioglobe/common/PublicInterface","three"],function(e,n){function l(m){e.create(this,m,d,a,k);Object.defineProperty(this,"visible",{get:function(){return m.getVisible()},set:function(a){m.setVisible(a)}})}function m(a){l.apply(this,[a])}var d=[],a=[],k="show hide remove getLength getInterpolatedPosition setInterpolatedStartEnd getVisible options updateEndPoints".split(" ");return function(a,d,g,e,k,q,t){this.mesh=k;k.traverse(function(a){a.visible=d.visible});
    k=null;this.lod=t;this.pathGeometry=q;this.spline=g;this.meshParent=this.mesh.parent;this.previousRight=new n.Vector3;this.publicLink=this.publicPath=!1;this.getPublicPath=function(){return this.publicPath=this.publicPath||new l(this)};this.getPublicLink=function(){return this.publicLink=this.publicLink||new m(this)};this.setVisible=function(g){this.mesh&&d&&d.visible!==g&&(0!==d.speed&&(g?a.incrementUpdatableObjects():a.decrementUpdatableObjects()),d.visible=g,this.mesh.traverse(function(a){a.visible=
      g}),a.requestRedraw())};this.getVisible=function(){return d&&d.visible};this.show=function(){this.setVisible(!0)};this.hide=function(){this.setVisible(!1)};this.remove=function(){if(this.mesh){var g=this.mesh;"undefined"!==typeof g.parent&&(g.parent.remove(g),d.visible&&0!==d.speed&&a.decrementUpdatableObjects(),a.requestRedraw());this.linkOptions&&(a.removeLink(this),this.linkOptions.startFloor.removeLink(this),this.linkOptions.endFloor.removeLink(this));this.mesh&&(this.mesh.geometry.dispose(),
      this.mesh=null);a.removePath(this)}};this.getLength=function(){return e};this.getInterpolatedPosition=function(a){return g?(0>a?a=0:1<a&&(a=1),a=g.getPoint(a),{x:a.x,y:a.y,z:a.z}):!1};this.setInterpolatedStartEnd=function(g,e){g=g||0;0>g?g=0:1<g&&(g=1);e="undefined"===typeof e?1:e;0>e?e=0:1<e&&(e=1);d.interpolationStart=g;d.interpolationEnd=e;q.interpolationStart=g;q.interpolationEnd=e;q.recalculate();this.mesh=a.recreateAndUpdateMeshFromPathGeometry(q.getGeometry(),this.mesh,d.visible);this.isCameraFacing&&
    this.updateCamerafacing(!0)};this.updateEndPoints=function(d,f){if(this.mesh){var k=this.mesh.vg&&this.mesh.vg.path||{};if(k.points&&2!=k.points.length)return!1;k.points[0]=d||g.getPoint(0);k.points[1]=f||g.getPoint(1);if(k.points[0].x===k.points[1].x&&k.points[0].y===k.points[1].y&&k.points[0].z===k.points[1].z)return void 0!==this.mesh.parent&&this.mesh.parent.remove(this.mesh),!1;g=new n.CurvePath;g.add(new n.LineCurve3(new n.Vector3(k.points[0].x,k.points[0].y,k.points[0].z),new n.Vector3(k.points[1].x,
      k.points[1].y,k.points[1].z)));e=g.getLength();q.updatePath(g);void 0===this.mesh.parent&&(this.meshParent.add(this.mesh),this.mesh.updateMatrixWorld());var m=k.repeat;0>k.repeat&&k.url&&(m*=-e/k.thickness,this.mesh.material.map.repeat.x=m);this.mesh=a.recreateAndUpdateMeshFromPathGeometry(q.getGeometry(),this.mesh,k.visible);this.isCameraFacing&&this.updateCamerafacing(!0)}};this.setLinkOptions=function(a){this.isCameraFacing=a.cameraFacing||!1;this.linkOptions=a;this.linkOptions.startFloor.addLink(this);
      this.linkOptions.endFloor.addLink(this)};this.updateCamerafacing=function(d){var f={x:a.camera.matrix.elements[0],y:a.camera.matrix.elements[1],z:a.camera.matrix.elements[2]};if(!this.previousRight.equals(f)||d){this.previousRight.copy(f);d=this.mesh.vg&&this.mesh.vg.path||{};if(d.points&&2!=d.points.length)return!1;var g=d.points[1].z<d.points[0].z;q.recalculate({binormal:f});this.mesh=a.recreateAndUpdateMeshFromPathGeometry(q.getGeometry(),this.mesh,d.visible);this.mesh.material.side=g?n.FrontSide:
      n.BackSide}};this.options=function(g,e){if("undefined"===typeof g)return d;if("undefined"===typeof e)return"interpolationTextureLikeWindow"===g?q.interpolationTextureLikeWindow:d[g];if("speed"===g)this.mesh.vg&&this.mesh.vg.path&&"undefined"!==typeof this.mesh.vg.path.speed&&(0!==this.mesh.vg.path.speed&&a.decrementUpdatableObjects(),d.speed=e,this.mesh.vg.path.speed=e,0!=e&&d.visible&&a.incrementUpdatableObjects());else if("interpolationTextureLikeWindow"===g)q.interpolationTextureLikeWindow!=e&&
    (q.interpolationTextureLikeWindow=e,d.interpolationTextureLikeWindow=e,this.setInterpolatedStartEnd(d.interpolationStart,d.interpolationEnd));else if("interpolationStart"===g||"interpolationEnd"===g)"interpolationStart"===g?d.interpolationStart=e:"interpolationEnd"===g&&(d.interpolationEnd=e),this.setInterpolatedStartEnd(d.interpolationStart,d.interpolationEnd)}}});
  define("com/visioglobe/web/helpers/PathGeometry",["three"],function(e){var n=function(l,m){this.segments=m.segments||64;this.radius=m.radius||1;this.segmentsRadius=m.segmentsRadius||8;this.closed=m.closed||!1;this.interpolationStart=m.interpolationStart||0;this.interpolationEnd=m.interpolationEnd||1;this.interpolationTextureLikeWindow="undefined"===typeof m.interpolationTextureLikeWindow?!0:m.interpolationTextureLikeWindow;this.zOffset=m.zOffset||0;m.debug&&(this.debug=new e.Object3D);this.updatePath(l)};
    n.prototype.updatePath=function(e){this.path=e;this.frames=e.computeFrenetFrames(this.segments,this.closed);this.recalculate()};n.prototype.recalculate=function(l){l=l||{};this.geometry=new e.Geometry;this.grid=[];var m=this.frames,d=m.tangents,a=m.normals,k=m.binormals,n,f,g,m=1/this.segments,u,v,q,t,x,w,y;x=l.binormal;l=0;0!=this.interpolationStart&&(l=Math.floor(this.interpolationStart/m));var z=this.segments-1;1!=this.interpolationEnd&&(q=this.interpolationEnd/m,z=Math.floor(q),q===z&&z--);var B=
      1/(this.segmentsRadius-1),C=this.path,E=this.zOffset;q=l;for(t=z+2;q<t;q++)for(n=q*m,q===l&&0!=this.interpolationStart&&(n=this.interpolationStart),q===z+1&&1!=this.interpolationEnd&&(n=this.interpolationEnd),this.grid[q]=[],v=C.getPointAt(n),f=a[q],g=x||k[q],this.debug&&(n=d[q],this.debug.add(new e.ArrowHelper(n,v,this.radius,255)),this.debug.add(new e.ArrowHelper(f,v,this.radius,16711680)),this.debug.add(new e.ArrowHelper(g,v,this.radius,65280))),n=0,f=this.segmentsRadius;n<f;n++)u=n*B-.5,u*=this.radius,
      this.grid[q][n]=this.geometry.vertices.push(new e.Vector3(v.x+u*g.x,v.y+u*g.y,v.z+u*g.z+E))-1;B=this.interpolationTextureLikeWindow?0:this.interpolationStart;C=1/(this.segmentsRadius-1);q=l;for(t=z+1;q<t;q++)for(d=this.closed?(q+1)%this.segments:q+1,E=q*m-B,g=E+m,q===l&&0!=this.interpolationStart&&(E=this.interpolationStart-B),q===z&&1!=this.interpolationEnd&&(g=this.interpolationEnd-B),n=0;n<this.segmentsRadius-1;n++)v=(n+1)%this.segmentsRadius,a=this.grid[q][n],k=this.grid[d][n],x=this.grid[d][v],
      v=this.grid[q][v],u=n*C,y=u+C,f=new e.Vector2(E,u),u=new e.Vector2(g,u),w=new e.Vector2(g,y),y=new e.Vector2(E,y),this.geometry.faces.push(new e.Face3(a,k,v)),this.geometry.faceVertexUvs[0].push([f,u,y]),this.geometry.faces.push(new e.Face3(k,x,v)),this.geometry.faceVertexUvs[0].push([u.clone(),w,y.clone()]);this.geometry.computeFaceNormals();this.geometry.computeVertexNormals()};n.prototype.constructor=n;n.prototype.getGeometry=function(){return this.geometry};return n});
  define("com/visioglobe/web/Place",["three"],function(e){var n={};return function(l,m,d,a){"undefined"!==typeof d&&("undefined"===typeof l.places[d]?l.places[d]=this:console.log("ERROR: Should have one place per ID: "+d));this.vg={id:d,floor:null,originalColor:null,position:null,radius:null};var k=new e.Vector3,r=new e.Box3;Object.keys(m).forEach(function(a){var d=m[a],l;for(l in this.vg)if("id"!==l)if(null===this.vg[l]&&"radius"===l){if(d.geometry.boundingBox)d.geometry.boundingBox.getSize(k);else{r.makeEmpty();
    if(d.geometry instanceof e.Geometry){var v=d.geometry.vertices,q=d.geometry.faces;a=d.vg.faces_offset;for(var t=d.vg.faces_offset+d.vg.nb_faces,x=q.length;a<x&&a<t;a++){var w=q[a];r.expandByPoint(v[w.a]);r.expandByPoint(v[w.b]);r.expandByPoint(v[w.c])}}else if(d.geometry instanceof e.BufferGeometry)for(v=d.geometry.getAttribute("position"),a=d.vg.faces_offset,t=d.vg.faces_offset+d.vg.nb_faces;a<t;a++)for(x=q=3*a;x<q+3;x++)w=new e.Vector3(v.getX(x),v.getY(x),v.getZ(x)),r.expandByPoint(w);r.getSize(k)}this.vg[l]=
    2*k.length()}else null===this.vg[l]?this.vg[l]=d.vg[l]:this.vg[l]===d.vg[l]||-1!==["position","radius"].indexOf(l)||n[l]||(console.log("ERROR: Several element with same ID but different "+l+" are present"),n[l]=!0)},this);this.setColor=function(a){Object.keys(m).forEach(function(d){l.setShapeColor(m[d],a)});l.requestRedraw();return!0};this.resetColor=function(){Object.keys(m).forEach(function(a){l.setShapeColor(m[a],m[a].vg.originalColor)});l.requestRedraw();return!0}}});
  define("com/visioglobe/web/poi/PublicPOI",[],function(){function e(n){this.proxy=n;this.count=e.counter++;this.vg={poi:!0}}e.counter=0;e.prototype.constructor=e;e.prototype.show=function(){return this.proxy.setVisible(!0)};e.prototype.hide=function(){return this.proxy.setVisible(!1)};e.prototype.remove=function(){return this.proxy.remove.apply(this.proxy,arguments)};e.prototype.options=function(){return this.proxy.options.apply(this.proxy,arguments)};Object.defineProperty(e.prototype,"visible",{get:function(){return this.proxy.getVisible()},
    set:function(e){this.proxy.setVisible(e)}});Object.defineProperty(e.prototype,"opacity",{get:function(){return this.proxy.getOpacity()},set:function(e){this.proxy.setOpacity(e)}});return e});
  define("com/visioglobe/web/poi/POIProxy",["com/visioglobe/common/PublicInterface"],function(e){function n(a){this.publicPOI=null;this.count=n.counter++;e.create(this,a,l,m,d)}var l=[],m=[],d="getVisible setVisible getOpacity setOpacity remove options".split(" "),a="text url model selector textTextureHeight family color position alignment scale zoomScaleFactor zoomScaleFast iconScale angle heading floor lod visible opacity id visibilityRampStartVisible visibilityRampFullyVisible visibilityRampStartInvisible visibilityRampFullyInvisible clickable fixed width height overlay flip face2d image onObjectMouseOver onObjectMouseOut onObjectMouseUp multiline track animationNames".split(" ");n.isPublicParameter=
    function(d){return-1!==a.indexOf(d)};n.getPublicParameters=function(a){var d={};Object.keys(a).map(function(f){n.isPublicParameter(f)&&(d[f]=a[f])});return d};n.counter=1E3;return n.prototype.constructor=n});
  define("com/visioglobe/web/helpers/Billboard",["three"],function(e){e.Billboard=function(d,a){this.mapviewer=a;this.constraints="undefined"!==typeof d.constraints?d.constraints:[e.Billboard.CAMERA_FACING,e.Billboard.FIXED,e.Billboard.CAMERA_FACING];"undefined"!==typeof d.face2d&&!0===d.face2d&&(this.constraints=[e.Billboard.FIXED,e.Billboard.FIXED,e.Billboard.CAMERA_FACING]);this.face2d=this.constraints[0]==e.Billboard.FIXED&&this.constraints[1]==e.Billboard.FIXED&&this.constraints[2]==e.Billboard.CAMERA_FACING;
    this.lastCameraOrientationZ=!1;e.Object3D.call(this)};e.Billboard.CAMERA_FACING=0;e.Billboard.FIXED_MODULO_PI=1;e.Billboard.FIXED=2;e.Billboard.prototype=new e.Object3D;e.Billboard.prototype.constructor=e.Billboard;var n=new e.Matrix4,l=new e.Matrix4,m=new e.Matrix4;e.Billboard.prototype.updateMatrix=function(){if(this.face2d){if(!this._dirty&&!1!==this.lastCameraOrientationZ&&this.mapviewer.manipulator.orientation.z==this.lastCameraOrientationZ)return;this.lastCameraOrientationZ=this.mapviewer.manipulator.orientation.z;
    if(this.mapviewer.manipulator.cachedMatrixOrientationZ===this.mapviewer.manipulator.orientation.z){this.matrix.copy(this.mapviewer.manipulator.cachedMatrixForOrientation);this.matrix.setPosition(this.position);this.matrixWorldNeedsUpdate=!0;return}}if(this.mapviewer.camera.vg){var d=this.mapviewer.camera.vg.cameraComponents;this.rotation.set(0,0,0);for(var a=this.rotation.toArray(),k=0;3>k;++k){switch(this.constraints[k]){case e.Billboard.CAMERA_FACING:a[k]=d[k]}switch(k){case 0:l.makeRotationX(-a[0]);
    break;case 1:m.makeRotationY(a[1]);break;case 2:n.makeRotationZ(-a[2])}}this.rotation.fromArray(a);this.matrix.identity();this.matrix.multiply(n);this.matrix.multiply(l);this.matrix.multiply(m);this.face2d&&(this.mapviewer.manipulator.cachedMatrixOrientationZ=this.mapviewer.manipulator.orientation.z,this.mapviewer.manipulator.cachedMatrixForOrientation=this.matrix.clone());this.matrix.setPosition(this.position);this.matrixWorldNeedsUpdate=!0;this._dirty=!1}};return e.Billboard});
  define("underscoretiny",[],function(){var e={isObject:function(e){var l=typeof e;return"function"===l||"object"===l&&!!e},indexOf:function(e,l){if(null==e)return-1;for(var m=0,d=e.length;m<d;m++)if(e[m]===l)return m;return-1},has:function(e,l){return null!=e&&Object.prototype.hasOwnProperty.call(e,l)},keys:function(n){if(!e.isObject(n))return[];if(Object.keys)return Object.keys(n);var l=[],m;for(m in n)e.has(n,m)&&l.push(m);return l},extend:function(n){if(!e.isObject(n))return n;for(var l,m,d=1,a=
      arguments.length;d<a;d++)for(m in l=arguments[d],l)hasOwnProperty.call(l,m)&&(n[m]=l[m]);return n},each:function(n,l){if(null==n)return n;var m,d=n.length;if(d===+d)for(m=0;m<d;m++)l(n[m],m,n);else{var a=e.keys(n);m=0;for(d=a.length;m<d;m++)l(n[a[m]],a[m],n)}return n},filter:function(n,l){var m=[];if(null==n)return m;e.each(n,function(d,a,e){l(d,a,e)&&m.push(d)});return m},isMatch:function(n,l){var m=e.keys(l),d=m.length;if(null==n)return!d;for(var a=Object(n),k=0;k<d;k++){var r=m[k];if(l[r]!==a[r]||
      !(r in a))return!1}return!0}};return e});
  define("com/visioglobe/web/poi/POI","com/visioglobe/web/poi/POIProxy com/visioglobe/web/helpers/CachedTexture com/visioglobe/web/helpers/Billboard com/visioglobe/common/utils/Utils three underscoretiny".split(" "),function(e,n,l,m,d,a){function k(f,g,k,m,r,t,x,w){this.mapviewer=f._mapviewer;this.proxy=new e(this);this.addPoiVariables=f;this.parameters=g;if("undefined"!==typeof k&&"undefined"!==typeof m){var y=f.MapviewerPrivate,z=new d.Euler;this.rotationObject=new d.Object3D;this.rotationObject.name=
    "rotationObject";this.rotationObject.matrixAutoUpdate=!1;g.fixed?(this.positionObject=new d.Object3D,this.positionObject.name="options fixed",x?z.set(-Math.PI/2,g.angle*Math.PI/180,0):z.set(0,0,-g.angle*Math.PI/180),this.rotationObject.rotation.copy(z),this.rotationObject.updateMatrix()):(this.positionObject=new l({face2d:g.face2d},this.mapviewer),this.positionObject.name="options !fixed",(r||t||x)&&k.cameraUpdatableObjects.push(this.positionObject));this.positionObject.matrixAutoUpdate=!1;g.position.z=
    g.position.z||0;this.positionObject.position.copy(g.position);this.positionObject.position.add({x:0,y:0,z:y.zOffsetPOI});this.positionObject.add(this.rotationObject);this.positionObject.vg={poi:g,meshes:{},opacity:C};this.rotationObject.current_alignment=g.alignment;this.rotationObject.current_aspect=0!==g.scale.y?g.scale.x/g.scale.y:1;this.rotationObject.lastCameraOrientationZ=!1;this.rotationObject.dirty=!1;this.rotationObject._isFlipped=void 0;var B=this;this.rotationObject.updateMatrix=function(){a:{var g=
    f._mapviewer.manipulator.radius,e=f._mapviewer.manipulator.orientationNormalized.z,k=B.parameters,m=0,m=k.zoomScaleFast?.02*g*k.zoomScaleFactor:.15*Math.sqrt(g)*k.zoomScaleFactor,l=m!==k._zoomScale,n=e!==this.lastCameraOrientationZ;if(this.dirty||n||0!==k.zoomScaleFactor&&l){0!==k.zoomScaleFactor&&(this.dirty||l)&&(k._zoomScale=m,m={x:k._zoomScale,y:k._zoomScale,z:1},-1!==k.width&&-1!==k.height?("undefined"!==typeof k.text&&""!==k.text&&k.multiline&&(l||B.shouldRecomputeLines(g))&&B.createMultiLineText(),
    B.getBoxScale()>k._zoomScale?this.visible=!0:this.visible=!1):this.visible=!0,this.lastCameraRadius=g,"undefined"!==typeof B.positionObject.vg.meshes.poi_text&&0<B.positionObject.vg.meshes.poi_text.length?this.current_position=B.updateTextMeshes():"undefined"!==typeof B.positionObject.vg.meshes.poi_url&&(this.current_position=a.extend({},B.positionObject.vg.meshes.poi_url.position)),this.current_position.x*=m.x,this.position.copy(new d.Vector3),this.position.x=-this.current_position.x/2,this.position.x+=
    k.alignment.x*this.current_position.x/2,this.dirty=!0,this.scale.copy(m));if(k.fixed&&k.flip&&(this.dirty||n)){this.lastCameraOrientationZ=e;g=k._inverseAngleInRadians-this.lastCameraOrientationZ;l=g>Math.PI||0>g&&g>-Math.PI;if(!this.dirty&&l===this._isFlipped)break a;this.dirty=!1;this._isFlipped=l;g=-this.current_position.x;e=this.current_alignment;l?(l=0,"undefined"!==typeof k.text&&""!==k.text&&(l=k._textAspectRatio),"undefined"!==typeof k.url&&""!==k.url&&(l+=this.current_aspect),0===l&&(l=1),
    this.position.set(.5*g*(e.x+1),g*e.y/l,0),this.rotation.set(0,0,-(k.angle+180)*Math.PI/180)):(this.position.set(.5*g*(1-e.x),0,0),this.rotation.set(0,0,-k.angle*Math.PI/180));k=new d.Matrix4;k.makeRotationFromEuler(this.rotation);this.position.applyMatrix4(k)}this.dirty=!1}d.Object3D.prototype.updateMatrix.apply(this)}};if(g.fixed&&g.flip||0<g.zoomScaleFactor)this.rotationObject.matrixAutoUpdate=!1,(r||t||x)&&k.cameraUpdatableObjects.push(this.rotationObject);var C="undefined"!==typeof this.parameters.opacity?
    this.parameters.opacity:this.mapviewer.computeOpacity(this.positionObject.position,this.parameters,this.mapviewer.camera.position),y=new d.Vector3;if(x)this.setModel(g.model);else{if(r){var E=new n(this.mapviewer,g.url,!0),H=this.mapviewer.plane_geometry,C=new d.MeshBasicMaterial({map:E,color:16777215,side:d.FrontSide,transparent:!0,depthWrite:!1,depthTest:g.overlay?!1:this.mapviewer.useDepthWriteForPOIs,opacity:C}),C=new d.Mesh(H,C);C.name="poi_url";C.matrixAutoUpdate=!1;C.renderOrder=-f.MapviewerPrivate.renderDepthPOI;
    g.overlay&&(C.renderOrder=-f.MapviewerPrivate.renderDepthPOIOverlay);this.positionObject.vg.meshes.poi_url=C;null!==k&&g.clickable&&(C.vg={id:g.id,poi:g,originalColor:16777215},k.pickables.push(C));H=g.scale;0<g.zoomScaleFactor&&(H={x:1,y:1,z:1});y.x+=.5*H.x;y.y+=.5*H.y*g.alignment.y;C.position.copy(y);y.x+=.5*H.x;C.scale.set(H.x,H.y,1);C.updateMatrix();this.rotationObject.add(C)}t&&(g.multiline?this.createMultiLineText():(y=this.initText(g.text),this.parameters._textAspectRatio=y.aspectRatio,C=this.createTextMesh(this.parameters.text,
    y,0,0),this.rotationObject.add(C),this.positionObject.vg.meshes.poi_text=[],this.positionObject.vg.meshes.poi_text.push(C)),y=this.updateTextMeshes())}-1!==g.width&&-1!==g.height&&(C=this.getBoxScale(),this.rotationObject.scale.copy({x:C,y:C,z:1}),y.x*=this.rotationObject.scale.x);C=new d.Matrix4;C.makeRotationFromEuler(z);this.rotationObject.current_position=y;this.rotationObject.position.x=-y.x/2;this.rotationObject.position.x+=g.alignment.x*y.x/2;this.rotationObject.position.applyMatrix4(C);"undefined"!==
  typeof g.selector&&""!==g.selector&&this.setSelector(g.selector);this.positionObject.updateMatrix();this.rotationObject.updateMatrix();m.add(this.positionObject);this.positionObject.updateMatrixWorld(!0);(r||x||t||w)&&k.rampObjects.push(this.positionObject);this.updateVisibleObject();this.mapviewer.mustUpdateCameraObjects=!0;this.mapviewer.requestRedraw()}}k.prototype.constructor=k;k.prototype.vg={poi:!0};k.prototype.updateVisibleObject=function(){this.visibleObject="undefined"!==typeof this.rotationObject?
    this.rotationObject:this.positionObject;var a=this.parameters;!1===this.parameters.visible&&this.visibleObject&&this.visibleObject.traverse(function(d){d.visible=a.visible})};k.prototype.getOpacity=function(){return this.parameters&&this.parameters.opacity};k.prototype.setOpacity=function(a){var d=this.parameters,e=this.mapviewer;d.opacity=a;if("number"!==typeof a){a=this.mapviewer.computeOpacity(this.positionObject.position,this.parameters,this.mapviewer.camera.position);delete d.opacity;var k=this.mapviewer.getFloor(this.parameters.floor),
    d=k.getLOD(this.parameters.lod);d||(d=k.floorContentLOD);k=d.rampObjects.indexOf(this.positionObject);-1===k&&d.rampObjects.push(this.positionObject)}else k=this.mapviewer.getFloor(this.parameters.floor),d=k.getLOD(this.parameters.lod),d||(d=k.floorContentLOD),k=d.rampObjects.indexOf(this.positionObject),-1!==k&&d.rampObjects.splice(k,1);this.positionObject.traverse(function(d){if(d.material&&(d.material.opacity=a,1>a&&!d.material.transparent&&(d.material.transparent=!0),d=d.material.materials))for(var g=
    0,e=d.length;g<e;++g)d[g].opacity=a,1>a&&!d[g].transparent&&(d[g].transparent=!0)});e.requestRedraw()};k.prototype.getVisible=function(){return this.parameters&&this.parameters.visible};k.prototype.setVisible=function(a){var d=this.parameters,e=this.visibleObject,k=this.mapviewer;null!==d&&d.visible!==a&&(d.visible=a,e&&e.traverse(function(a){a.visible=d.visible}),k.mustUpdateCameraObjects=!0,k.requestRedraw())};k.prototype.realRemove=function(a){var d=this.proxy.publicPOI,e=this.mapviewer,k=this.parameters,
    m=this.positionObject,l=this.rotationObject;a&&this.addPoiVariables.POIFactory.removeFromPois(e,k.id,d);if(m||l){"undefined"!==typeof k._measuringCanvas&&(k._measuringCanvas=null);var n=e.getFloor(k.floor),d=n.getLOD(k.lod);null===d&&(d=n.floorContentLOD);var n=m.vg.meshes,r=d.pickables,y,z;for(z in n)if("poi_text"===z)n[z].forEach(function(a){y=r.indexOf(a);-1!==y&&r.splice(y,1);a.geometry&&a.geometry.vg&&a.geometry.vg.permanent||a.geometry.dispose()});else{var B=n[z];y=r.indexOf(B);-1!==y&&r.splice(y,
    1);B.geometry&&B.geometry.vg&&B.geometry.vg.permanent||B.geometry.dispose()}y=e.pois_with_selector.indexOf(k);-1!==y&&(z=document.querySelector(e.pois_with_selector[y].selector),null!==z&&(z.style.display="none"),e.pois_with_selector.splice(y,1));if("undefined"===typeof k.model&&a){var C=this.addPoiVariables;setTimeout(function(a,d,f){return function(){C.POIFactory.removeMaterial(a,d,f)}}(e,k,m),0)}"undefined"!==typeof k.model&&(e.models[k.model].nbRefs--,0===e.models[k.model].nbRefs&&this.addPoiVariables.POIFactory.removeModel(e,
    k.model));"undefined"!==typeof m.parent&&m.parent.remove(m);void 0!==l&&("undefined"!==typeof l.parent&&l.parent.remove(m),y=d.cameraUpdatableObjects.indexOf(l),-1!==y&&d.cameraUpdatableObjects.splice(y,1),l.children.length&&(B=l.children[0],this.animations&&this.animations.length&&(Object.keys(this.animations).forEach(function(a){this.animations[a].action&&this.animations[a].action.stop();this.mixer.uncacheClip(this.animations[a].clip)},this),y=d.animatedObjects.indexOf(B),-1!==y&&d.animatedObjects.splice(y,
    1),this.mapviewer.decrementUpdatableObjects())));y=d.cameraUpdatableObjects.indexOf(m);-1!==y&&d.cameraUpdatableObjects.splice(y,1);y=d.rampObjects.indexOf(m);-1!==y&&d.rampObjects.splice(y,1);this.positionObject=null}};k.prototype.remove=function(){null!==this.parameters&&(this.realRemove(!0),this.mapviewer.requestRedraw(),this.parameters=this.mapviewer=null)};k.prototype.options=function(d,g,k){if(null!==this.parameters){if("undefined"===typeof d)return e.getPublicParameters(this.parameters);if("object"===
    typeof d)if(this.parameters._empty){var m=a.extend({},this.parameters);Object.keys(d).forEach(function(a){"undefined"===typeof d[a]?delete m[a]:m[a]=d[a]});this.addPoiVariables.POIFactory.createPOI(this.addPoiVariables,m,this.proxy.publicPOI);this.realRemove(!1)}else Object.keys(d).forEach(function(a){this.setParameter(a,d[a])},this);else if("string"===typeof d){if("undefined"===typeof g&&e.isPublicParameter(d))return"animationNames"===d?this.getAnimationNames():this.getParameter(d);this.parameters._empty?
    (m=a.extend({},this.parameters),m[d]=g,this.realRemove(!1),this.addPoiVariables.POIFactory.createPOI(this.addPoiVariables,m,this.proxy.publicPOI)):this.setParameter(d,g)}}};k.prototype.setParameter=function(a,d){switch(a){case "position":this.setPosition(d);break;case "text":this.setText(d);break;case "multiline":this.setMultiline(d);break;case "visible":this.setVisible(d);break;case "opacity":this.setOpacity(d);break;case "textTextureHeight":this.setTextTextureHeight(d);break;case "color":this.setColor(d);
    break;case "family":this.setFamily(d);break;case "url":this.setURL(d);break;case "model":this.setModel(d);break;case "startAnimation":this.startAnimation(d);break;case "stopAnimation":this.stopAnimation(d);break;case "selector":this.setSelector(d);break;case "alignment":this.setAlignment(d);break;case "scale":this.setScale(d);break;case "zoomScaleFactor":this.setZoomScaleFactor(d);break;case "zoomScaleFast":this.setZoomScaleFast(d);break;case "iconScale":case "icon_scale":console.log('Deprecated option. It will be taken into account if there is no text. Otherwise, "scale" option will be used.');
    "undefined"!==typeof this.parameters.text&&""!==this.parameters.text||this.setScale(d);break;case "floor":this.setFloor(d);break;case "id":this.setID(d);break;case "visibilityRampStartVisible":this.parameters.visibilityRampStartVisible=d;break;case "visibilityRampFullyVisible":this.parameters.visibilityRampFullyVisible=d;break;case "visibilityRampStartInvisible":this.parameters.visibilityRampStartInvisible=d;break;case "visibilityRampFullyInvisible":this.parameters.visibilityRampFullyInvisible=d;
    break;case "onObjectMouseOver":this.parameters.onObjectMouseOver=d;break;case "onObjectMouseOut":this.parameters.onObjectMouseOut=d;break;case "onObjectMouseUp":this.parameters.onObjectMouseUp=d;break;case "clickable":this.setClickable(d);break;case "fixed":this.setFixed(d);break;case "angle":this.setAngle(d);break;case "heading":this.setHeading(d);break;case "width":this.setWidth(d);break;case "height":this.setHeight(d);break;case "overlay":this.setOverlay(d);break;case "flip":this.setFlip(d);break;
    case "face2d":this.setFace2d(d);break;case "track":this.setTrack(d)}};k.prototype.getParameter=function(a){return this.parameters&&this.parameters[a]};k.prototype.setPosition=function(a){var d=a||{x:0,y:0,z:0};d.z=a.z||0;this.parameters.position=d;"undefined"!==typeof this.positionObject&&(this.positionObject.position.copy(d),this.positionObject._dirty=!0,this.positionObject.updateMatrix(),this.positionObject.updateMatrixWorld(),this.mapviewer.requestRedraw());void 0!==this.parameters.track&&this.parameters.track&&
  void 0!==this.mapviewer.statistics&&this.mapviewer.statistics.logStat("position",{id:this.parameters.id,position:d})};k.prototype.initText=function(a){a=this.mapviewer.textGenerator.generateTextNoAtlas(a,this.parameters);a.texture.vg.nbRefs++;var g="undefined"!==typeof this.parameters.opacity?this.parameters.opacity:this.mapviewer.computeOpacity(this.positionObject.position,this.parameters,this.mapviewer.camera.position);a.material=new d.MeshBasicMaterial({map:a.texture,color:16777215,side:d.FrontSide,
    transparent:!0,depthWrite:!1,depthTest:this.parameters.overlay?!1:this.mapviewer.useDepthWriteForPOIs,opacity:g});a.texture=null;return a};k.prototype.pushToLists=function(){var a=this.mapviewer.getFloor(this.parameters.floor);if(a){var d=a.getLOD(this.parameters.lod);d||(d=a.floorContentLOD);this.parameters.fixed||-1===d.cameraUpdatableObjects.indexOf(this.positionObject)&&d.cameraUpdatableObjects.push(this.positionObject);(this.parameters.fixed&&this.parameters.flip||0<this.parameters.zoomScaleFactor)&&
  -1===d.cameraUpdatableObjects.indexOf(this.rotationObject)&&d.cameraUpdatableObjects.push(this.rotationObject);("undefined"!==typeof this.parameters.text&&""!==this.parameters.text||"undefined"!==typeof this.parameters.url&&""!==this.parameters.url)&&-1===d.rampObjects.indexOf(this.positionObject)&&d.rampObjects.push(this.positionObject)}};k.prototype.getBoxScale=function(){var a=this.parameters._textAspectRatio,d=1;"undefined"!==typeof this.positionObject.vg.meshes.poi_text&&1<this.positionObject.vg.meshes.poi_text.length&&
  (d=this.positionObject.vg.meshes.poi_text.length,this.positionObject.vg.meshes.poi_text.forEach(function(d){a=Math.max(a,d.userData.aspectRatio)}));var e=d,k=d=0;"undefined"!==typeof this.parameters.url&&""!==this.parameters.url&&(k=d=1,0===this.parameters.zoomScaleFactor&&(d=this.parameters.scale.x,k=this.parameters.scale.y));"undefined"!==typeof this.parameters.text&&""!==this.parameters.text&&(0===this.parameters.zoomScaleFactor&&(a*=this.parameters.scale.x,e*=this.parameters.scale.y),d+=a,k=Math.max(k,
    e));e=1;0<d&&(e=this.parameters.width/d);0<k&&k*e>this.parameters.height&&(e=this.parameters.height/k);return e};k.prototype.shouldRecomputeLines=function(a){var d=this.parameters.text.split(" ").length;if(2>d||"undefined"===typeof this.positionObject.vg.meshes.poi_text)return!1;var e=this.positionObject.vg.meshes.poi_text.length;if(a===this.rotationObject.lastCameraRadius||a>this.rotationObject.lastCameraRadius&&e===d||a<this.rotationObject.lastCameraRadius&&1===e)return!1;var k=0;this.positionObject.vg.meshes.poi_text.forEach(function(a){a.userData.aspectRatio>
  k&&(k=a.userData.aspectRatio,currentLongestLine=a.userData.text)});this.parameters.url&&(k+=this.parameters.scale.x/this.parameters.scale.y);d=this.getBoxScale();0!==this.parameters.zoomScaleFactor&&(d=this.parameters._zoomScale);return k*d<this.parameters.width&&a>this.rotationObject.lastCameraRadius?!1:!0};var r=function(a,d){var e=a.split(" ");if(2>d||e.length<d)return[];for(var k=[],m=a.length/d,l=e[0],n=1;n<e.length;n++){var r=l.length+e[n].length+1;l.length>m||r>1.5*m?(k.push(l),l=e[n]):l+=
    " "+e[n]}k.push(l);return k};k.prototype.createMultiLineText=function(){var a=0;this.parameters.url&&(a+=this.parameters.scale.x/this.parameters.scale.y);var d=this.mapviewer.textGenerator.measureText(this.parameters.text,this.parameters),e=a+d.width/d.height,k=[this.parameters.text],m=this.parameters.text.split(" ").length,l=1,n=d.width,w=this.parameters.scale.x;0!==this.parameters.zoomScaleFactor&&(w=this.parameters._zoomScale);for(var y=e;w*y>this.parameters.width&&l<m;){var z=r(this.parameters.text,
    ++l);if(0===z.length)break;y=e=n=0;k.splice(0,k.length);for(var B=0;B<z.length;B++)d=this.mapviewer.textGenerator.measureText(z[B],this.parameters),y=Math.max(y,a+d.width/d.height),n=Math.max(n,d.width),e+=d.height,k.push(z[B]);e=(a+n)/e}m=!0;if("undefined"!==typeof this.positionObject.vg.meshes.poi_text&&0<this.positionObject.vg.meshes.poi_text.length){if(this.positionObject.vg.meshes.poi_text.length===k.length)for(m=!1,a=0;a<k.length;a++)if(this.positionObject.vg.meshes.poi_text[a].userData.text!==
    k[a]){m=!0;break}m&&(this.positionObject.vg.meshes.poi_text.forEach(function(a){a.material.map.vg.nbRefs--;this.mapviewer.textGenerator.disposeTexture(a.material.map);this.rotationObject.remove(a)},this),this.positionObject.vg.meshes.poi_text.splice(0,this.positionObject.vg.meshes.poi_text.length))}else this.positionObject.vg.meshes.poi_text=[];if(m){for(a=0;a<k.length;a++)d=this.initText(k[a]),d.text=k[a],m=this.createTextMesh(d.text,d,0,.5*(k.length-1)-a),this.rotationObject.add(m),this.positionObject.vg.meshes.poi_text.push(m);
    this.parameters._textAspectRatio=e}};k.prototype.createTextMesh=function(a,g,e,k){var m=new d.Mesh(g.geometry,g.material);m.name="poi_text";m.userData={text:a,width:g.width,height:g.height,aspectRatio:g.aspectRatio,horizontalOffset:e,verticalOffset:k};m.matrixAutoUpdate=!1;m.renderOrder=-this.addPoiVariables.MapviewerPrivate.renderDepthPOI;this.parameters.overlay&&(m.renderOrder=-this.addPoiVariables.MapviewerPrivate.renderDepthPOIOverlay);a=this.mapviewer.getFloor(this.parameters.floor);g=a.getLOD(this.parameters.lod);
    g||(g=a.floorContentLOD);null!==g&&this.parameters.clickable&&(m.vg={id:this.parameters.id,poi:this.parameters,originalColor:16777215},g.pickables.push(m));return m};k.prototype.updateTextMeshes=function(){var f=new d.Vector3,g=this.parameters._textAspectRatio;1<this.positionObject.vg.meshes.poi_text.length&&this.positionObject.vg.meshes.poi_text.forEach(function(a){g=Math.max(g,a.userData.aspectRatio)});0===this.parameters.zoomScaleFactor?(f.x+=.5*this.parameters.scale.x*g,f.y+=.5*this.parameters.scale.y*
    this.parameters.alignment.y,"undefined"!==typeof this.parameters.url&&""!==this.parameters.url&&(f.x+=this.parameters.scale.x),this.positionObject.vg.meshes.poi_text.forEach(function(d){var g=a.extend({},f);g.x+=this.parameters.scale.x*d.userData.horizontalOffset;g.y+=this.parameters.scale.y*d.userData.verticalOffset;d.position.copy(g);d.scale.copy({x:d.userData.aspectRatio*this.parameters.scale.x,y:this.parameters.scale.y,z:1});d.updateMatrix()},this),f.x+=.5*this.parameters.scale.x*g):(f.x+=.5*
    g,f.y+=.5*this.parameters.alignment.y,"undefined"!==typeof this.parameters.url&&""!==this.parameters.url&&(f.x+=1),this.positionObject.vg.meshes.poi_text.forEach(function(d){var g=a.extend({},f);g.x+=d.userData.horizontalOffset;g.y+=d.userData.verticalOffset;d.position.copy(g);d.scale.copy({x:d.userData.aspectRatio,y:1,z:1});d.updateMatrix()},this),f.x+=.5*g);return f};k.prototype.setText=function(a,g){if(("string"!==typeof a||""===a)&&"undefined"!==typeof this.positionObject.vg.meshes.poi_text&&
    0<this.positionObject.vg.meshes.poi_text.length){if(delete this.parameters.text,this.positionObject.vg.meshes.poi_text.forEach(function(a){this.rotationObject.remove(a)},this),this.positionObject.vg.meshes.poi_text.splice(0,this.positionObject.vg.meshes.poi_text.length),delete this.positionObject.vg.meshes.poi_text,"undefined"!==typeof this.parameters.url&&""!==this.parameters.url)if(this.mapviewer.vgnobatch||this.mapviewer.vgnobatchicon||this.mapviewer.vgnobatchfacing&&!this.parameters.fixed)this.rotationObject.dirty=
    !0,this.setURL(this.parameters.url);else{this.realRemove(!1);this.addPoiVariables.POIFactory.createPOI(this.addPoiVariables,this.parameters,this.proxy.publicPOI);return}}else{if("undefined"!==typeof this.parameters.model&&""!==this.parameters.model){console.log("Cannot set text on a POI initialized with a model.");return}if(this.parameters.multiline)this.parameters.text=a.replace(/\s+/g," ").trim(),this.createMultiLineText(),"undefined"!==typeof this.positionObject.vg.meshes.poi_text&&0<this.positionObject.vg.meshes.poi_text.length&&
  this.pushToLists();else if(this.parameters.text!==a||!this.parameters.multiline&&"undefined"!==typeof this.positionObject.vg.meshes.poi_text&&1<this.positionObject.vg.meshes.poi_text.length){this.parameters.text=a;var e=this.initText(this.parameters.text);this.parameters._textAspectRatio=e.aspectRatio;"undefined"!==typeof this.positionObject.vg.meshes.poi_text&&0<this.positionObject.vg.meshes.poi_text.length&&(this.positionObject.vg.meshes.poi_text.forEach(function(a){a.material.map.vg.nbRefs--;this.mapviewer.textGenerator.disposeTexture(a.material.map);
    this.rotationObject.remove(a)},this),this.positionObject.vg.meshes.poi_text.splice(0,this.positionObject.vg.meshes.poi_text.length));e=this.createTextMesh(this.parameters.text,e,0,0);this.rotationObject.add(e);this.positionObject.vg.meshes.poi_text=[];this.positionObject.vg.meshes.poi_text.push(e);this.pushToLists()}e=this.updateTextMeshes();if(0===this.parameters.zoomScaleFactor){if(-1!==this.parameters.width&&-1!==this.parameters.height){var k=this.getBoxScale();this.rotationObject.scale.copy({x:k,
    y:k,z:1});e.x*=this.rotationObject.scale.x}this.rotationObject.current_position=e;this.rotationObject.position.copy(new d.Vector3);this.rotationObject.position.x=-this.rotationObject.current_position.x/2;this.rotationObject.position.x+=this.parameters.alignment.x*this.rotationObject.current_position.x/2}this.rotationObject.dirty=!0;this.rotationObject.updateMatrix()}this.positionObject.updateMatrix();this.positionObject.updateMatrixWorld(!0);this.mapviewer.mustUpdateCameraObjects=!0;this.mapviewer.requestRedraw()};
    k.prototype.setMultiline=function(a){"boolean"===typeof a&&this.parameters.multiline!==a&&(this.parameters.multiline=a,"undefined"!==typeof this.parameters.text&&""!==this.parameters.text&&this.setText(this.parameters.text))};k.prototype.setTextTextureHeight=function(a){"number"===typeof a&&this.parameters.textTextureHeight!==a&&(this.parameters.textTextureHeight=a,"undefined"!==typeof this.parameters.text&&""!==this.parameters.text&&(this.positionObject.vg.meshes.poi_text.forEach(function(a){var d=
      this.initText(a.userData.text);a.material.map.vg.nbRefs--;this.mapviewer.textGenerator.disposeTexture(a.material.map);"undefined"!==typeof a&&(a.material=d.material)},this),this.mapviewer.requestRedraw()))};k.prototype.setColor=function(a){"string"===typeof a&&this.parameters.color!==a&&null!==a.match("#[0-9A-Fa-f]{6}")&&(this.parameters.color=a,"undefined"!==typeof this.parameters.text&&""!==this.parameters.text&&(this.positionObject.vg.meshes.poi_text.forEach(function(a){var d=this.initText(a.userData.text);
      a.material.map.vg.nbRefs--;this.mapviewer.textGenerator.disposeTexture(a.material.map);"undefined"!==typeof a&&(a.material=d.material)},this),this.mapviewer.requestRedraw()))};k.prototype.setFamily=function(a){"string"===typeof a&&this.parameters.family!==a&&(this.parameters.family=a,"undefined"!==typeof this.parameters.text&&""!==this.parameters.text&&(this.positionObject.vg.meshes.poi_text.forEach(function(a){var d=this.initText(a.userData.text);a.material.map.vg.nbRefs--;this.mapviewer.textGenerator.disposeTexture(a.material.map);
      "undefined"!==typeof a&&(a.material=d.material)},this),this.mapviewer.requestRedraw()))};k.prototype.setURL=function(a){if("undefined"!==typeof a&&""!==a||"undefined"===typeof this.positionObject.vg.meshes.poi_url){if("undefined"!==typeof this.parameters.model&&""!==this.parameters.model){console.log("Cannot set image on a POI initialized with a model.");return}var g=new d.Vector3,e=this.rotationObject.getObjectByName("poi_url"),k="undefined"!==typeof e;if(!k||this.parameters.url!==a){if((e=this.mapviewer.textures[a])&&
      e.loaded)this.parameters.url=a,e=new n(this.mapviewer,this.parameters.url,!0);else{new n(this.mapviewer,a,!0,function(a,d){return function(f){d.options("url",a)}}(a,this));return}var m="undefined"!==typeof this.parameters.opacity?this.parameters.opacity:this.mapviewer.computeOpacity(this.positionObject.position,this.parameters,this.mapviewer.camera.position);a=this.mapviewer.plane_geometry;m=new d.MeshBasicMaterial({map:e,color:16777215,side:d.FrontSide,transparent:!0,depthWrite:!1,depthTest:this.parameters.overlay?
        !1:this.mapviewer.useDepthWriteForPOIs,opacity:m});e=this.positionObject.vg.meshes.poi_url;"undefined"===typeof e?(e=new d.Mesh(a,m),e.name="poi_url",e.matrixAutoUpdate=!1,e.renderOrder=-this.addPoiVariables.MapviewerPrivate.renderDepthPOI,this.parameters.overlay&&(e.renderOrder=-this.addPoiVariables.MapviewerPrivate.renderDepthPOIOverlay),this.parameters.clickable&&(e.vg={id:this.parameters.id,poi:this.parameters,originalColor:16777215},a=this.mapviewer.getFloor(this.parameters.floor),m=a.getLOD(this.parameters.lod),
    m||(m=a.floorContentLOD),m.pickables.push(e)),this.positionObject.vg.meshes.poi_url=e,this.rotationObject.add(e)):e.material=m;k||this.pushToLists()}k=this.parameters.scale;0<this.parameters.zoomScaleFactor&&(k={x:1,y:1,z:1});g.x+=.5*k.x;g.y+=.5*k.y*this.parameters.alignment.y;e.position.copy(g);g.x+=.5*k.x;e.scale.set(k.x,k.y,1);e.updateMatrix();"undefined"!==typeof this.positionObject.vg.meshes.poi_text&&0<this.positionObject.vg.meshes.poi_text.length&&(g=this.updateTextMeshes());0===this.parameters.zoomScaleFactor&&
    (-1!==this.parameters.width&&-1!==this.parameters.height&&(k=this.getBoxScale(),this.rotationObject.scale.copy({x:k,y:k,z:1}),g.x*=this.rotationObject.scale.x),this.rotationObject.current_position=g,this.rotationObject.position.x=-g.x/2,this.rotationObject.position.x+=this.parameters.alignment.x*g.x/2);this.rotationObject.dirty=!0;this.rotationObject.updateMatrix()}else if(this.rotationObject.remove(this.positionObject.vg.meshes.poi_url),delete this.parameters.url,delete this.positionObject.vg.meshes.poi_url,
    "undefined"!==typeof this.parameters.text&&""!==this.parameters.text)if(this.mapviewer.vgnobatch||this.parameters._vgnobatch)this.rotationObject.dirty=!0,this.setText(this.parameters.text);else{this.realRemove(!1);this.addPoiVariables.POIFactory.createPOI(this.addPoiVariables,this.parameters,this.proxy.publicPOI);return}this.positionObject.updateMatrix();this.positionObject.updateMatrixWorld(!0);this.mapviewer.mustUpdateCameraObjects=!0;this.mapviewer.requestRedraw()};k.prototype.setSelector=function(a){if("string"!==
      typeof a||""===a)document.querySelector(this.parameters.selector).remove();else{this.parameters.selector=a;a=document.querySelector(this.parameters.selector);var d="undefined"!==typeof this.parameters.opacity?this.parameters.opacity:this.mapviewer.computeOpacity(this.positionObject.position,this.parameters,this.mapviewer.camera.position);0===d?a.style.display="none":(a.style.opacity=d,a.style.display="");this.addPoiVariables.container.appendChild(a);a.style.position="absolute";a.style.left="0px";
      a.style.top="0px";this.mapviewer.pois_with_selector.push(this.parameters)}};k.animationLoopModes={once:d.LoopOnce,repeat:d.LoopRepeat,pingpong:d.LoopPingPong};k.prototype.getAnimationNames=function(){if("undefined"===typeof this.rotationObject.getObjectByName("poi_model"))return console.log("Warning: this POI is not a 3D model, animation was not started."),[];if("undefined"===typeof this.animations)return[];var a=[];Object.keys(this.animations).forEach(function(d){a.push(this.animations[d].clip.name)},
      this);return a};k.prototype.startAnimation=function(a){var g=this.rotationObject.getObjectByName("poi_model");if("undefined"===typeof g||"undefined"===typeof this.animations)return console.log("Warning: this POI is not an animated 3D model."),!1;var e="",m=d.LoopRepeat;if("number"===typeof a)e=a;else if("string"===typeof a)var l=a,e=this.animations.findIndex(function(a){return l===a.clip.name});else if("object"===typeof a){e=a.index;if("undefined"===typeof e){l=a.name;if("undefined"===typeof l)return console.log("No animation index or name was provided."),
      !1;e=this.animations.findIndex(function(a){return l===a.clip.name})}"undefined"!==typeof a.loopMode&&"undefined"!==typeof k.animationLoopModes[a.loopMode]&&(m=k.animationLoopModes[a.loopMode])}else return!1;g=this.rotationObject.getObjectByName("poi_model");if("undefined"===typeof this.animations[e])return console.log("Warning: requested animation does not exist."),!1;(!this.animations[e].action||!this.animations[e].action.isRunning()&&this.animations[e].action.enabled)&&this.nbAnimationPlaying++;
      this.animations[e].action?this.animations[e].action.reset():this.animations[e].action=this.mixer.clipAction(this.animations[e].clip);this.animations[e].action.setLoop(m,Infinity);this.animations[e].action.play();1===this.nbAnimationPlaying&&(a=this.mapviewer.getFloor(this.parameters.floor),e=a.getLOD(this.parameters.lod),null===e&&(e=a.floorContentLOD),e.animatedObjects.push(g),this.mapviewer.incrementUpdatableObjects(),g.matrixAutoUpdate=!0,g.traverse(function(a){a.matrixAutoUpdate=!0}));return!0};
    k.prototype.stopAnimation=function(a){var d=this.rotationObject.getObjectByName("poi_model");if("undefined"===typeof d||"undefined"===typeof this.animations)return console.log("Warning: this POI is not an animated 3D model."),!1;if("string"===typeof a){var e=a;a=this.animations.findIndex(function(a){return e===a.clip.name})}if("undefined"===typeof this.animations[a]||"undefined"===typeof this.animations[a].action||"undefined"!==typeof this.animations[a].action&&!this.animations[a].action.isRunning())return console.log("Warning: requested animation does not exist or it is not running."),
      !1;this.animations[a].action.stop();this.nbAnimationPlaying--;if(0===this.nbAnimationPlaying){a=this.mapviewer.getFloor(this.parameters.floor);var k=a.getLOD(this.parameters.lod);null===k&&(k=a.floorContentLOD);a=k.animatedObjects.indexOf(d);-1!==a&&k.animatedObjects.splice(a,1);this.mapviewer.decrementUpdatableObjects();d.traverse(function(a){a.matrixAutoUpdate=!1})}return!0};k.prototype.initAnimations=function(a,g){var e=[];3.2===a.version?e=a.result.scene.animations:4.4<=a.version&&(e=a.scene.animations);
      if("undefined"!==typeof e&&0<e.length){var k=[];g.forEach(function(a){k[a.name]={loopMode:a.loopMode}});var m=this.rotationObject.getObjectByName("poi_model");this.mixer=new d.AnimationMixer(m);m.vg=m.vg||{};m.vg.mixer=this.mixer;this.animations=[];this.nbAnimationPlaying=0;Object.keys(e).forEach(function(a){var d=e[a],f=d.name;this.animations[a]={clip:d,action:!1};"undefined"!==typeof k[f]&&this.startAnimation({index:a,loopMode:k[f].loopMode})},this)}};k.prototype.setModel=function(a){if("string"!==
      typeof a||""===a)this.rotationObject.remove(this.rotationObject.getObjectByName("poi_model")),delete this.parameters.model;else{"undefined"!==typeof this.parameters.url&&""!==this.parameters.url&&this.setURL("");"undefined"!==typeof this.parameters.text&&""!==this.parameters.text&&this.setText("");var g=this.rotationObject.getObjectByName("poi_model"),e="undefined"!==typeof g;if(!e||this.parameters.model!==a){e&&(this.rotationObject.remove(g),this.mapviewer.models[this.parameters.model].nbRefs--,
    0===this.mapviewer.models[this.parameters.model].nbRefs&&this.addPoiVariables.POIFactory.removeModel(this.mapviewer,this.parameters.model));this.parameters.model=a;var k=this.mapviewer;if("undefined"===typeof this.mapviewer.models[this.parameters.model]){var l={url:this.parameters.model,loaded:!1,geometry:null,materials:null,bbox:null,pending:[],nbRefs:1};this.mapviewer.models[this.parameters.model]=l;this.mapviewer.loaderStatistics.models++;m.request(this.parameters.model,"GET",null,{crossDomain:!0}).then(function(g){var e=
      JSON.parse(g.response);k.loaderStatistics.models--;if("undefined"!==typeof e.metadata&&"Object"===e.metadata.type){g=new d.ObjectLoader;g.crossOrigin="";l.version=e.metadata.version;var m=d.LoaderUtils.extractUrlBase(a);g.texturePath=m;g.parse(e,function(a){a.updateMatrix();l.loaded=!0;l.scene=a;Object.keys(l.pending).forEach(function(a){l.pending[a](l)});k.requestRedraw()})}else"undefined"===typeof e.metadata||"undefined"!==typeof e.metadata.formatVersion&&3.1===e.metadata.formatVersion?(g=new d.JSONLoader,
        g.crossOrigin="",m=d.LoaderUtils.extractUrlBase(a),"undefined"!==typeof e.materials&&e.materials.forEach(function(a){"undefined"!==typeof a.colorAmbient&&delete a.colorAmbient;"undefined"!==typeof a.transparency&&(a.opacity=a.transparency,delete a.transparency)}),g=g.parse(e,m),l.loaded=!0,l.geometry=g.geometry,l.materials=g.materials,l.version=e.metadata.formatVersion,Object.keys(l.materials).forEach(function(a){l.materials[a].map.image.addEventListener("load",function(){k.requestRedraw()})}),Object.keys(l.pending).forEach(function(a){l.pending[a](l)})):
      (g=new d.SceneLoader,g.crossOrigin="",g.parse(e,function(a){l.loaded=!0;l.result=a;l.version=e.metadata.version?e.metadata.version:e.metadata.formatVersion;a=l.result.scene;a.updateMatrix();a.matrixAutoUpdate=!1;a.traverse(function(a){a.updateMatrix();a.matrixAutoUpdate=!1});Object.keys(l.pending).forEach(function(a){l.pending[a](l)})},a))}).catch(function(){k.loaderStatistics.models--})}else this.mapviewer.models[this.parameters.model].nbRefs++;var n=this.mapviewer.getFloor(this.parameters.floor),
      g=n.getLOD(this.parameters.lod);null===g&&(g=n.floorContentLOD);n="undefined"!==typeof this.parameters.opacity?this.parameters.opacity:this.mapviewer.computeOpacity(this.positionObject.position,this.parameters,this.mapviewer.camera.position);l=this.mapviewer.models[this.parameters.model];if(l.loaded)this.addPoiVariables.POIFactory.onModelLoaded(this.mapviewer,l,this.parameters,n,this.rotationObject,g),this.initAnimations(l,this.parameters.startAnimations);else{var r=this;l.pending.push(function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          d,f,g,e){return function(){r.addPoiVariables.POIFactory.onModelLoaded(k,a,d,f,g,e);r.initAnimations(a,r.parameters.startAnimations)}}(l,this.parameters,n,this.rotationObject,g))}e||this.pushToLists()}e=new d.Vector3;-1!==this.parameters.width&&-1!==this.parameters.height&&(g=this.getBoxScale(),this.rotationObject.scale.copy({x:g,y:1,z:g}));this.rotationObject.current_position=e;this.rotationObject.position.x=-e.x/2;this.rotationObject.position.x+=this.parameters.alignment.x*e.x/2;this.rotationObject.dirty=
      !0;this.rotationObject.updateMatrix()}this.positionObject.updateMatrix();this.positionObject.updateMatrixWorld(!0);this.mapviewer.mustUpdateCameraObjects=!0;this.mapviewer.requestRedraw()};k.prototype.setAlignment=function(a){"object"===typeof a&&a.hasOwnProperty("x")&&a.hasOwnProperty("y")&&(this.parameters.alignment=a,this.rotationObject.current_alignment=a,"undefined"!==typeof this.parameters.model&&""!==this.parameters.model?this.setModel(this.parameters.model):("undefined"!==typeof this.parameters.url&&
    ""!==this.parameters.url&&this.setURL(this.parameters.url),"undefined"!==typeof this.parameters.text&&""!==this.parameters.text&&this.setText(this.parameters.text)))};k.prototype.setScale=function(a){var d=a;"number"===typeof a&&(d={x:a,y:a,z:a});"object"===typeof d&&this.parameters.scale!==d&&(this.parameters.scale=d,"undefined"!==typeof this.parameters.url&&""!==this.parameters.url&&this.setURL(this.parameters.url),"undefined"!==typeof this.parameters.text&&""!==this.parameters.text&&this.setText(this.parameters.text))};
    k.prototype.setZoomScaleFactor=function(a){if(!("number"!==typeof a||this.parameters.zoomScaleFactor===a||0>a)){this.parameters.zoomScaleFactor=a;var d=this.mapviewer.getFloor(this.parameters.floor);a=d.getLOD(this.parameters.lod);a||(a=d.floorContentLOD);0<this.parameters.zoomScaleFactor?-1===a.cameraUpdatableObjects.indexOf(this.rotationObject)&&a.cameraUpdatableObjects.push(this.rotationObject):(this.parameters._zoomScale=0,this.parameters.fixed&&!this.parameters.flip&&(d=a.cameraUpdatableObjects.indexOf(this.rotationObject),
    -1!==d&&a.cameraUpdatableObjects.splice(d,1)));"undefined"!==typeof this.parameters.url&&""!==this.parameters.url&&this.setURL(this.parameters.url);"undefined"!==typeof this.parameters.text&&""!==this.parameters.text&&this.setText(this.parameters.text);this.rotationObject.updateMatrix();this.mapviewer.mustUpdateCameraObjects=!0;this.mapviewer.requestRedraw()}};k.prototype.setZoomScaleFast=function(a){"boolean"===typeof a&&this.parameters.zoomScaleFast!==a&&(this.parameters.zoomScaleFast=a,this.rotationObject.updateMatrix(),
      this.mapviewer.mustUpdateCameraObjects=!0,this.mapviewer.requestRedraw())};k.prototype.setFloor=function(a){if("string"===typeof a&&""!==a&&this.parameters.floor!==a){this.positionObject.parent.remove(this.positionObject);this.parameters.floor=a;var d=this.mapviewer.scene;a=this.mapviewer.getFloor(this.parameters.floor);if(null===a)console.log("Warning: POI was not updated, required floor doesn't exist.");else{if(null!==a){a="undefined"!==typeof this.parameters.lod?a.getLOD(this.parameters.lod):a.floorContentLOD;
      if(!this.parameters.overlay&&null===a)return;d=a.contentNode}d.add(this.positionObject)}}};k.prototype.setID=function(a){if("string"===typeof a&&this.parameters.id!==a)if(this.setClickable(!1),this.addPoiVariables.POIFactory.removeFromPois(this.mapviewer,this.parameters.id,this.proxy.publicPOI),""===a){delete this.parameters.id;for(var d in this.positionObject.vg.meshes)"poi_text"===d?this.positionObject.vg.meshes[d].forEach(function(a){a.vg.id=""}):this.positionObject.vg.meshes[d].vg.id=""}else{this.addPoiVariables.POIFactory.addToPois(this.mapviewer,
      a,this.proxy.publicPOI);this.parameters.id=a;for(d in this.positionObject.vg.meshes)"poi_text"===d?this.positionObject.vg.meshes[d].forEach(function(d){d.vg.id=a}):this.positionObject.vg.meshes[d].vg.id=a;this.setClickable(!0)}};k.prototype.setClickable=function(a){if("boolean"===typeof a&&this.parameters.clickable!==a){this.parameters.clickable=a;var d=this.mapviewer.getFloor(this.parameters.floor).getLOD(this.parameters.lod);if(null!==d)if(this.parameters.clickable)for(var e in this.positionObject.vg.meshes)"poi_text"===
    e?this.positionObject.vg.meshes[e].forEach(function(a){d.pickables.push(a)}):(a=this.positionObject.vg.meshes[e],d.pickables.push(a));else for(e in this.positionObject.vg.meshes)"poi_text"===e?this.positionObject.vg.meshes[e].forEach(function(a){a=d.pickables.indexOf(a);-1!==a&&d.pickables.splice(a,1)}):(a=this.positionObject.vg.meshes[e],a=d.pickables.indexOf(a),-1!==a&&d.pickables.splice(a,1))}};k.prototype.setWidth=function(a){"number"===typeof a&&this.parameters.width!==a&&(this.parameters.width=
      a,"undefined"!==typeof this.parameters.url&&""!==this.parameters.url&&this.setURL(this.parameters.url),"undefined"!==typeof this.parameters.text&&""!==this.parameters.text&&this.setText(this.parameters.text))};k.prototype.setHeight=function(a){"number"===typeof a&&this.parameters.height!==a&&(this.parameters.height=a,"undefined"!==typeof this.parameters.url&&""!==this.parameters.url&&this.setURL(this.parameters.url),"undefined"!==typeof this.parameters.text&&""!==this.parameters.text&&this.setText(this.parameters.text))};
    k.prototype.setOverlay=function(a){"boolean"===typeof a&&this.parameters.overlay!==a&&(this.parameters.overlay=a,"undefined"!==typeof this.positionObject.vg.meshes.poi_text&&0<this.positionObject.vg.meshes.poi_text.length&&this.positionObject.vg.meshes.poi_text.forEach(function(a){a.material.depthTest=this.parameters.overlay?!1:this.mapviewer.useDepthWriteForPOIs;a.renderOrder=this.parameters.overlay?-this.addPoiVariables.MapviewerPrivate.renderDepthPOIOverlay:-this.addPoiVariables.MapviewerPrivate.renderDepthPOI},
      this),a=this.positionObject.vg.meshes.poi_url,"undefined"!==typeof a&&(a.material.depthTest=this.parameters.overlay?!1:this.mapviewer.useDepthWriteForPOIs,a.renderOrder=this.parameters.overlay?-this.addPoiVariables.MapviewerPrivate.renderDepthPOIOverlay:-this.addPoiVariables.MapviewerPrivate.renderDepthPOI))};k.prototype.setFixed=function(f){if("boolean"===typeof f&&this.parameters.fixed!==f){this.parameters.fixed=f;var e=this.mapviewer.getFloor(this.parameters.floor);f=e.getLOD(this.parameters.lod);
      f||(f=e.floorContentLOD);var k,m=new d.Euler;this.parameters.fixed?(e=new d.Object3D,e.name="options fixed",m.set(0,0,this.parameters.angle*Math.PI/180)):(e=new l({face2d:this.parameters.face2d},this.mapviewer),e.name="options !fixed",("undefined"!==typeof this.parameters.url&&""!==this.parameters.url||"undefined"!==typeof this.parameters.model&&""!==this.parameters.model||"undefined"!==typeof this.parameters.text&&""!==this.parameters.text)&&f.cameraUpdatableObjects.push(e));e.vg=a.extend({},this.positionObject.vg);
      e.matrixAutoUpdate=!1;e.position.copy(this.positionObject.position);e.add(this.rotationObject);this.parameters.fixed&&this.parameters.flip&&(this.parameters.flip=!1,this.setFlip(!0));k=new d.Matrix4;k.makeRotationFromEuler(m);this.rotationObject.position.copy(new d.Vector3);this.rotationObject.position.x=-this.rotationObject.current_position.x/2;this.rotationObject.position.x+=this.parameters.alignment.x*this.rotationObject.current_position.x/2;this.rotationObject.position.applyMatrix4(k);("undefined"!==
        typeof this.parameters.url&&""!==this.parameters.url||"undefined"!==typeof this.parameters.model&&""!==this.parameters.model||"undefined"!==typeof this.parameters.text&&""!==this.parameters.text||"undefined"!==typeof this.parameters.selector&&""!==this.parameters.selector)&&f.rampObjects.push(e);k=f.cameraUpdatableObjects.indexOf(this.positionObject);-1!==k&&f.cameraUpdatableObjects.splice(k,1);k=f.rampObjects.indexOf(this.positionObject);-1!==k&&f.rampObjects.splice(k,1);f=this.positionObject.parent;
      f.remove(this.positionObject);f.add(e);this.positionObject=e;this.rotationObject.rotation.copy(m);this.rotationObject.updateMatrix();this.positionObject.updateMatrix();this.positionObject.updateMatrixWorld(!0);this.mapviewer.mustUpdateCameraObjects=!0;this.mapviewer.requestRedraw()}};k.prototype.setFlip=function(a){if("boolean"===typeof a&&this.parameters.flip!==a){this.parameters.flip=a;var d=this.mapviewer.getFloor(this.parameters.floor);a=d.getLOD(this.parameters.lod);a||(a=d.floorContentLOD);
      this.parameters.fixed&&(this.parameters.flip?(this.rotationObject.current_alignment=this.parameters.alignment,this.rotationObject.current_aspect=0!==this.parameters.scale.y?this.parameters.scale.x/this.parameters.scale.y:1,this.rotationObject.matrixAutoUpdate=!1,("undefined"!==typeof this.parameters.url&&""!==this.parameters.url||"undefined"!==typeof this.parameters.model&&""!==this.parameters.model||"undefined"!==typeof this.parameters.text&&""!==this.parameters.text)&&a.cameraUpdatableObjects.push(this.rotationObject),
        this.mapviewer.mustUpdateCameraObjects=!0):0!==this.parameters.zoomScaleFactor&&(d=a.cameraUpdatableObjects.indexOf(this.rotationObject),-1!==d&&a.cameraUpdatableObjects.splice(d,1)),this.rotationObject.updateMatrix(),this.mapviewer.requestRedraw())}};k.prototype.setFace2d=function(a){"boolean"===typeof a&&this.parameters.face2d!==a&&(this.parameters.face2d=a,"boolean"===typeof this.parameters.fixed&&this.parameters.fixed||(this.positionObject.constraints=this.parameters.face2d?[d.Billboard.FIXED,
      d.Billboard.FIXED,d.Billboard.CAMERA_FACING]:[d.Billboard.CAMERA_FACING,d.Billboard.FIXED,d.Billboard.CAMERA_FACING],this.positionObject.lastCameraOrientationZ=!1,this.positionObject.face2d=this.parameters.face2d,this.positionObject.updateMatrix(),this.positionObject.updateMatrixWorld(!0),this.mapviewer.mustUpdateCameraObjects=!0,this.mapviewer.requestRedraw()))};k.prototype.setTrack=function(a){"boolean"===typeof a&&this.parameters.track!==a&&(this.parameters.track=a)};k.prototype.setAngle=function(a){if("number"===
      typeof a&&this.parameters.angle!==a&&(this.parameters.angle=a,this.parameters._inverseAngleInRadians=2*Math.PI-a*Math.PI/180,this.parameters.fixed)){a=new d.Euler;a.set(0,0,this.parameters.angle*Math.PI/180);this.rotationObject.rotation.copy(a);var e=new d.Matrix4;e.makeRotationFromEuler(a);this.rotationObject.position.copy(new d.Vector3);this.rotationObject.position.x=-this.rotationObject.current_position.x/2;this.rotationObject.position.x+=this.parameters.alignment.x*this.rotationObject.current_position.x/
      2;this.rotationObject.position.applyMatrix4(e);this.positionObject.updateMatrix();this.rotationObject.dirty=!0;this.rotationObject.updateMatrix();this.positionObject.updateMatrixWorld(!0);this.mapviewer.requestRedraw()}};k.prototype.setHeading=function(a){"number"===typeof a&&this.parameters.heading!==a&&this.parameters.angle!==a-this.mapviewer.cameraNorthRotation&&(this.parameters.heading=a,this.setAngle(this.parameters.heading-this.mapviewer.cameraNorthRotation))};k.prototype.getUUID=function(){return this.positionObject?
      this.positionObject.uuid:"does not exist"};return k});
  define("com/visioglobe/web/poi/POIBatchElement",["com/visioglobe/web/poi/POIProxy","underscoretiny"],function(e,n){function l(m,d,a,k){this.batch=m;this.index=d;this.parameters=a;this.proxy=new e(this);m=4*this.index;this.vertexOffsets=[m,m+1,m+2,m+3];m=this.batch.geometry.getAttribute("normal");m.needsUpdate=!0;m.setXYZ(this.vertexOffsets[3],0,0,1);m=this.batch.geometry.getAttribute("uv");m.needsUpdate=!0;d=k[0];a=k[5];var l=k[2];k=k[1];m.setXY(this.vertexOffsets[0],d,a);m.setXY(this.vertexOffsets[1],
    l,a);m.setXY(this.vertexOffsets[2],l,k);m.setXY(this.vertexOffsets[3],d,k);this.updateHalfWidthAndHeight();this.updateTypesAttribute();this.updateCenterAttribute();this.updateGeometryAttributes();this.updateVisibilityRampAttribute()}l.prototype.constructor=l;l.prototype.getVisible=function(){return this.getParameter("visible")};l.prototype.setVisible=function(e,d){if(this.parameters&&this.parameters.visible!=e||d){this.parameters.visible=e;var a=this.batch.geometry.getIndex(),k=6*this.index,l=this.batch.indices,
    f=4*this.index;e?(l[k]=f,l[k+1]=f+1,l[k+2]=f+3,l[k+3]=f+1,l[k+4]=f+2,l[k+5]=f+3):(l[k]=0,l[k+1]=0,l[k+2]=0,l[k+3]=0,l[k+4]=0,l[k+5]=0);a.needsUpdate=!0;this.batch.mesh.updateMatrix();this.batch.mapviewer.requestRedraw()}};l.prototype.getOpacity=function(){return 1};l.prototype.setOpacity=function(e){};l.prototype.options=function(m,d,a){if(!this.parameters)return!1;if(null!==this.parameters){if("undefined"===typeof m)return e.getPublicParameters(this.parameters);if("object"===typeof m){var k=n.extend({},
    this.parameters);Object.keys(m).forEach(function(a){"undefined"===typeof m[a]?delete k[a]:k[a]=m[a]});this.batch.addPoiVariables.POIFactory.createPOI(this.batch.addPoiVariables,k,this.proxy.publicPOI);this.realRemove(!1)}else if("string"===typeof m){if("undefined"===typeof d&&e.isPublicParameter(m))return this.getParameter(m);this.setParameter(m,d)}}};l.prototype.getParameter=function(e){return this.parameters&&this.parameters[e]};l.prototype.setParameter=function(e,d){switch(e){case "visibilityRampStartVisible":this.parameters.visibilityRampStartVisible=
    d;this.updateVisibilityRampAttribute();return;case "visibilityRampFullyVisible":this.parameters.visibilityRampFullyVisible=d;this.updateVisibilityRampAttribute();return;case "visibilityRampStartInvisible":this.parameters.visibilityRampStartInvisible=d;this.updateVisibilityRampAttribute();return;case "visibilityRampFullyInvisible":this.parameters.visibilityRampFullyInvisible=d;this.updateVisibilityRampAttribute();return;case "onObjectMouseOver":this.parameters.onObjectMouseOver=d;return;case "onObjectMouseOut":this.parameters.onObjectMouseOut=
    d;return;case "onObjectMouseUp":this.parameters.onObjectMouseUp=d;return;case "visible":this.setVisible(d);return;case "opacity":return;case "position":this.setPosition(d);return;case "scale":this.setScale(d);return;case "zoomScaleFactor":if(0<d&&0<this.parameters.zoomScaleFactor||!this.parameters.fixed){this.setZoomScaleFactor(d);return}this.parameters.zoomScaleFactor=d;break;case "zoomScaleFast":this.setZoomScaleFast(d);return;case "iconScale":case "icon_scale":console.log('Deprecated option. It will be taken into account if there is no text. Otherwise, "scale" option will be used.');
    "undefined"!==typeof this.parameters.text&&""!==this.parameters.text||this.setScale(d);return;case "angle":this.setAngle(d);return;case "heading":this.setHeading(d);return;case "width":this.setWidth(d);return;case "height":this.setHeight(d);return;case "fixed":if(this.parameters.fixed===d)return;if(0<this.parameters.zoomScaleFactor){this.setFixed(d);return}this.parameters.fixed=d;break;case "flip":this.setFlip(d);return;case "face2d":this.setFace2d(d);return;case "id":this.setID(d);return;case "clickable":this.setClickable(d);
    return;case "track":this.setTrack(d);return;default:this.parameters[e]=d}this.batch.addPoiVariables.POIFactory.createPOI(this.batch.addPoiVariables,this.parameters,this.proxy.publicPOI);this.batch.mesh.updateMatrix();this.batch.mapviewer.requestRedraw();this.realRemove(!1)};l.prototype.setPosition=function(e){this.parameters.position=e||{x:0,y:0,z:0};this.parameters.position.z=e.z||0;this.parameters._center=this.parameters.position;this.parameters._centerZ=this.parameters.position.z+this.parameters._zOffset;
    this.updateCenterAttribute();this.updateGeometryAttributes();this.parameters._dirty=!0;this.batch.mesh.updateMatrix();this.batch.mapviewer.requestRedraw();void 0!==this.parameters.track&&this.parameters.track&&void 0!==this.batch.mapviewer.statistics&&this.batch.mapviewer.statistics.logStat("position",{id:this.parameters.id,position:this.parameters.position})};l.prototype.setScale=function(e){var d=e;"number"===typeof e&&(d={x:e,y:e,z:e});"object"===typeof d&&this.parameters.scale!==d&&(this.parameters.scale=
    d,this.updateHalfWidthAndHeight(),this.updateCenterAttribute(),this.updateGeometryAttributes(),this.parameters._dirty=!0,this.batch.mesh.updateMatrix(),this.batch.mapviewer.requestRedraw())};l.prototype.setZoomScaleFactor=function(e){"number"===typeof e&&this.parameters.zoomScaleFactor!==e&&(this.parameters.zoomScaleFactor=e,this.updateHalfWidthAndHeight(),this.parameters._dirty=!0,this.batch.mesh.updateMatrix(),this.batch.mapviewer.requestRedraw())};l.prototype.setZoomScaleFast=function(e){"boolean"===
  typeof e&&this.parameters.zoomScaleFast!==e&&(this.parameters.zoomScaleFast=e,this.updateHalfWidthAndHeight(),this.parameters._dirty=!0,this.batch.mesh.updateMatrix(),this.batch.mapviewer.requestRedraw())};l.prototype.setWidth=function(e){"number"===typeof e&&this.parameters.width!==e&&(this.parameters.width=e,this.updateHalfWidthAndHeight(),this.updateCenterAttribute(),this.updateGeometryAttributes(),this.parameters._dirty=!0,this.batch.mesh.updateMatrix(),this.batch.mapviewer.requestRedraw())};
    l.prototype.setHeight=function(e){"number"===typeof e&&this.parameters.height!==e&&(this.parameters.height=e,this.updateHalfWidthAndHeight(),this.updateCenterAttribute(),this.updateGeometryAttributes(),this.parameters._dirty=!0,this.batch.mesh.updateMatrix(),this.batch.mapviewer.requestRedraw())};l.prototype.setAngle=function(e){"number"===typeof e&&this.parameters.angle!==e&&(this.parameters.angle=e,this.updateCenterAttribute(),this.updateGeometryAttributes(),this.parameters._dirty=!0,this.batch.mesh.updateMatrix(),
      this.batch.mapviewer.requestRedraw())};l.prototype.setHeading=function(e){"number"===typeof e&&this.parameters.heading!==e&&this.parameters.angle!==e-this.batch.mapviewer.cameraNorthRotation&&(this.parameters.heading=e,this.setAngle(this.parameters.heading-this.batch.mapviewer.cameraNorthRotation))};l.prototype.setFixed=function(e){"boolean"===typeof e&&this.parameters.fixed!==e&&(this.parameters.fixed=e,this.updateTypesAttribute(),this.parameters._dirty=!0,this.batch.mesh.updateMatrix(),this.batch.mapviewer.requestRedraw())};
    l.prototype.setFlip=function(e){"boolean"===typeof e&&this.parameters.flip!==e&&(this.parameters.flip=e,this.updateTypesAttribute(),this.parameters._dirty=!0,this.batch.mesh.updateMatrix(),this.batch.mapviewer.requestRedraw())};l.prototype.setFace2d=function(e){"boolean"===typeof e&&this.parameters.face2d!==e&&(this.parameters.face2d=e,this.updateTypesAttribute(),this.parameters._dirty=!0,this.batch.mesh.updateMatrix(),this.batch.mapviewer.requestRedraw())};l.prototype.setTrack=function(e){"boolean"===
    typeof e&&this.parameters.track!==e&&(this.parameters.track=e)};l.prototype.setID=function(e){"string"===typeof e&&this.parameters.id!==e&&(this.batch.addPoiVariables.POIFactory.removeFromPois(this.batch.mapviewer,this.parameters.id,this.proxy.publicPOI),""!==e&&this.batch.addPoiVariables.POIFactory.addToPois(this.batch.mapviewer,e,this.proxy.publicPOI),this.parameters.id=e)};l.prototype.setClickable=function(e){"boolean"===typeof e&&this.parameters.clickable!==e&&(this.parameters.clickable=e)};l.prototype.updateVisibility=
      function(){this.parameters._halfWidth*this.parameters._zoomScale<.5*this.parameters.width&&this.parameters._halfHeight*this.parameters._zoomScale<.5*this.parameters.height?this.setVisible(!0):this.setVisible(!1)};l.prototype.updateHalfWidthAndHeight=function(){var e,d;if(0<this.parameters.zoomScaleFactor)e=.5*this.parameters._textAspectRatio,d=.5;else if(e=.5*this.parameters._textAspectRatio*this.parameters.scale.x,d=.5*this.parameters.scale.y,-1!==this.parameters.width&&-1!==this.parameters.height){var a=
      this.parameters.width/(2*e);2*d*a>this.parameters.height&&(a=this.parameters.height/(2*d));e*=a;d*=a}this.parameters._halfWidth=e;this.parameters._halfHeight=d};l.prototype.updateGeometryAttributesWithScale=function(e){var d=this.parameters._halfWidth*e,a=this.parameters._halfHeight*e,k=this.parameters.position,l=this.parameters._centerZ,f=-this.parameters.angle*Math.PI/180;e=Math.cos(f);var f=Math.sin(f),g=f*d,d=e*d,n=f*a,a=e*a,v=this.batch.geometry.getAttribute("position");v.needsUpdate=!0;v.setXYZ(this.vertexOffsets[0],
      k.x-d+n,k.y-g-a,l);v.setXYZ(this.vertexOffsets[1],k.x+d+n,k.y+g-a,l);v.setXYZ(this.vertexOffsets[2],k.x+d-n,k.y+g+a,l);v.setXYZ(this.vertexOffsets[3],k.x-d-n,k.y-g+a,l);k=this.batch.geometry.getAttribute("centerOffset");k.needsUpdate=!0;k.setXY(this.vertexOffsets[0],-d+n,-g-a);k.setXY(this.vertexOffsets[1],+d+n,+g-a);k.setXY(this.vertexOffsets[2],+d-n,+g+a);k.setXY(this.vertexOffsets[3],-d-n,-g+a);k=this.batch.geometry.getAttribute("angleVector");k.needsUpdate=!0;k.setXY(this.vertexOffsets[0],-f,
      e);k.setXY(this.vertexOffsets[1],-f,e);k.setXY(this.vertexOffsets[2],-f,e);k.setXY(this.vertexOffsets[3],-f,e)};l.prototype.updateGeometryAttributes=function(){this.updateGeometryAttributesWithScale(1)};l.prototype.updateCenterAttribute=function(){var e=this.parameters.position,d=this.parameters._centerZ,a=this.batch.geometry.getAttribute("center");a.needsUpdate=!0;a.setXYZ(this.vertexOffsets[0],e.x,e.y,d);a.setXYZ(this.vertexOffsets[1],e.x,e.y,d);a.setXYZ(this.vertexOffsets[2],e.x,e.y,d);a.setXYZ(this.vertexOffsets[3],
      e.x,e.y,d)};l.prototype.updateGeometryAttributeFace2d=function(e,d,a){var k=this.parameters._center,l=this.parameters._centerZ,f=this.parameters._halfWidth*a,g=this.parameters._halfHeight*a;a=d*f;f*=e;d*=g;e*=g;g=this.batch.geometry.getAttribute("position");g.needsUpdate=!0;g.setXYZ(this.vertexOffsets[0],k.x-f+d,k.y-a-e,l);g.setXYZ(this.vertexOffsets[1],k.x+f+d,k.y+a-e,l);g.setXYZ(this.vertexOffsets[2],k.x+f-d,k.y+a+e,l);g.setXYZ(this.vertexOffsets[3],k.x-f-d,k.y-a+e,l)};l.prototype.updateGeometryAttributeFacing=
      function(e,d){var a=this.parameters._center,k=this.parameters._centerZ,l=this.parameters._halfWidth*d,f=this.parameters._halfHeight*d,l=[{x:-l,y:-f},{x:l,y:-f},{x:l,y:f},{x:-l,y:f}],f=this.batch.geometry.getAttribute("position");f.needsUpdate=!0;for(var g=0;4>g;g++)f.setXYZ(this.vertexOffsets[g],e[0]*l[g].x+e[3]*l[g].y+a.x,e[1]*l[g].x+e[4]*l[g].y+a.y,e[2]*l[g].x+e[5]*l[g].y+k)};l.prototype.updateTypesAttribute=function(){var e;this.parameters.fixed?e=this.parameters.flip?0:1:this.parameters.face2d?
      (this.batch.mapviewer.mustUpdateCameraObjects=!0,e=2):(this.batch.mapviewer.mustUpdateCameraObjects=!0,e=3);var d=this.batch.geometry.getAttribute("type");d.needsUpdate=!0;d.setX(this.vertexOffsets[0],e);d.setX(this.vertexOffsets[1],e);d.setX(this.vertexOffsets[2],e);d.setX(this.vertexOffsets[3],e)};l.prototype.updateVisibilityRampAttribute=function(){var e=this.batch.geometry.getAttribute("visibilityRamp");e.needsUpdate=!0;e.setXYZW(this.vertexOffsets[0],this.parameters.visibilityRampStartVisible,
      this.parameters.visibilityRampFullyVisible,this.parameters.visibilityRampStartInvisible,this.parameters.visibilityRampFullyInvisible);e.setXYZW(this.vertexOffsets[1],this.parameters.visibilityRampStartVisible,this.parameters.visibilityRampFullyVisible,this.parameters.visibilityRampStartInvisible,this.parameters.visibilityRampFullyInvisible);e.setXYZW(this.vertexOffsets[2],this.parameters.visibilityRampStartVisible,this.parameters.visibilityRampFullyVisible,this.parameters.visibilityRampStartInvisible,
      this.parameters.visibilityRampFullyInvisible);e.setXYZW(this.vertexOffsets[3],this.parameters.visibilityRampStartVisible,this.parameters.visibilityRampFullyVisible,this.parameters.visibilityRampStartInvisible,this.parameters.visibilityRampFullyInvisible)};l.prototype.realRemove=function(e){var d=this.parameters;if(!d)return!1;"undefined"!==typeof d._measuringCanvas&&(d._measuringCanvas=null);this.setVisible(!1,!0);this.parameters=null;var a=this.proxy;e&&this.batch.addPoiVariables.POIFactory.removeFromPois(this.batch.mapviewer,
      d.id,a.publicPOI);this.proxy=null;this.batch.inuse--;0==this.batch.inuse&&this.batch.dispose()};l.prototype.remove=function(){this.realRemove(!0)};return l});
  define("com/visioglobe/web/poi/POIBatchMultiLineText",["com/visioglobe/web/poi/POIProxy","com/visioglobe/web/poi/POIBatchElement"],function(e,n){function l(m,d,a,k,l){this.batch=m;this.index=d;this.parameters=a;this.fragments=k;this.space=l;this.lines=[];this.proxy=new e(this);for(m=0;m<this.fragments.length;m++){d=this.fragments[m];a=4*d.index;d.vertexOffsets=[a,a+1,a+2,a+3];a=this.batch.geometry.getAttribute("normal");a.needsUpdate=!0;a.setXYZ(d.vertexOffsets[3],0,0,1);a=this.batch.geometry.getAttribute("uv");
    a.needsUpdate=!0;k=d.uvArray[0];l=d.uvArray[5];var f=d.uvArray[2],g=d.uvArray[1];a.setXY(d.vertexOffsets[0],k,l);a.setXY(d.vertexOffsets[1],f,l);a.setXY(d.vertexOffsets[2],f,g);a.setXY(d.vertexOffsets[3],k,g)}this.updateHalfWidthAndHeight();this.updateTypesAttribute();this.updateCenterAttribute();this.updateGeometryAttributes();this.updateVisibilityRampAttribute()}l.prototype=Object.create(n.prototype);l.prototype.constructor=l;l.prototype.setVisible=function(e,d){if(this.parameters&&this.parameters.visible!=
    e||d){this.parameters.visible=e;var a=this.batch.geometry.getIndex(),k=this.batch.indices;if(e)for(var l=0;l<this.fragments.length;l++){var f=this.fragments[l],g=6*f.index,f=4*f.index;k[g]=f;k[g+1]=f+1;k[g+2]=f+3;k[g+3]=f+1;k[g+4]=f+2;k[g+5]=f+3}else for(l=0;l<this.fragments.length;l++)f=this.fragments[l],g=6*f.index,k[g]=0,k[g+1]=0,k[g+2]=0,k[g+3]=0,k[g+4]=0,k[g+5]=0;a.needsUpdate=!0}};l.prototype.shouldRecomputeLines=function(){if(0===this.lines.length)return!0;var e=this.lines.length,d=this.fragments.length;
    return 0<this.parameters.zoomScaleFactor&&(this.parameters._zoomScale===this.parameters._previousZoomScale||this.parameters._zoomScale>this.parameters._previousZoomScale&&e===d||this.parameters._zoomScale<this.parameters._previousZoomScale&&1===e)?!1:!0};l.prototype.computeLines=function(e){var d=this.parameters._textAspectRatio/e,a=this.fragments[0].aspectRatio,k=0;this.lines.splice(0,this.lines.length);this.fragments[0].lineNb=0;this.lines[0]={fragments:[0],width:this.fragments[0].width,height:this.fragments[0].height,
    aspectRatio:this.fragments[0].aspectRatio};for(var l=1;l<this.fragments.length;l++){var f=this.fragments[l],g=a+this.space.aspectRatio+f.aspectRatio;k<e&&(a>d||g>1.5*d)?(k++,f.lineNb=k,this.lines[k]={fragments:[l],width:f.width,height:f.height,aspectRatio:f.aspectRatio},a=f.aspectRatio):(a=g,f.lineNb=k,this.lines[k].fragments.push(l),this.lines[k].width+=this.space.width+f.width,this.lines[k].height=Math.max(this.lines[k].height,f.height))}};l.prototype.updateLines=function(e){var d=this.parameters._textAspectRatio,
    a=1;for(this.computeLines(a);e*d>this.parameters.width&&a<this.fragments.length;){a++;this.computeLines(a);for(var k=d=0;k<this.lines.length;k++)d=Math.max(d,this.lines[k].width/this.lines[k].height)}};l.prototype.updateHalfWidthAndHeight=function(){if(this.shouldRecomputeLines()){var e=this.parameters.scale.x;0<this.parameters.zoomScaleFactor&&(e=this.parameters._zoomScale);this.updateLines(e)}if(0<this.parameters.zoomScaleFactor){this.parameters._previousZoomScale=this.parameters._zoomScale;for(var d=
    this.parameters._halfWidth=0;d<this.lines.length;d++){var a=this.lines[d];a.aspectRatio=a.width/a.height;for(var k=.5*-a.aspectRatio,l=.5*(this.lines.length-1)-d,f=0;f<a.fragments.length;f++)e=this.fragments[a.fragments[f]],k+=.5*e.aspectRatio,e.horizontalOffset=k,k+=.5*e.aspectRatio,f<a.fragments.length-1&&(k+=this.space.aspectRatio),e.verticalOffset=l,e.halfWidth=.5*e.aspectRatio,e.halfHeight=.5;this.parameters._halfWidth=Math.max(this.parameters._halfWidth,.5*a.aspectRatio)}this.parameters._halfHeight=
    .5*this.lines.length}else{for(d=0;d<this.lines.length;d++)for(a=this.lines[d],a.aspectRatio=a.width/a.height,k=.5*-a.aspectRatio*this.parameters.scale.x,l=.5*(this.lines.length-1)-d,f=0;f<a.fragments.length;f++)e=this.fragments[a.fragments[f]],k+=.5*e.aspectRatio*this.parameters.scale.x,e.horizontalOffset=k,k+=.5*e.aspectRatio*this.parameters.scale.x,f<a.fragments.length-1&&(k+=this.space.aspectRatio*this.parameters.scale.x),e.verticalOffset=l*this.parameters.scale.y,e.halfWidth=.5*e.aspectRatio*
    this.parameters.scale.x,e.halfHeight=.5*this.parameters.scale.y;if(-1!==this.parameters.width&&-1!==this.parameters.height){for(d=e=0;d<this.lines.length;d++)e=Math.max(e,this.lines[d].aspectRatio);e*=this.parameters.scale.x;a=this.lines.length*this.parameters.scale.y;d=this.parameters.width/e;a*d>this.parameters.height&&(d=this.parameters.height/a);if(1!==d)for(a=0;a<this.fragments.length;a++)e=this.fragments[a],e.horizontalOffset*=d,e.verticalOffset*=d,e.halfWidth*=d,e.halfHeight*=d}}};l.prototype.updateVisibility=
    function(){this.updateHalfWidthAndHeight();this.parameters._halfWidth*this.parameters._zoomScale<.5*this.parameters.width&&this.parameters._halfHeight*this.parameters._zoomScale<.5*this.parameters.height?this.setVisible(!0):this.setVisible(!1)};l.prototype.updateGeometryAttributesWithScale=function(e){var d=this.batch.geometry.getAttribute("position"),a=this.batch.geometry.getAttribute("centerOffset"),k=this.batch.geometry.getAttribute("angleVector");d.needsUpdate=!0;a.needsUpdate=!0;k.needsUpdate=
    !0;for(var l=this.parameters._centerZ,f=-this.parameters.angle*Math.PI/180,g=Math.cos(f),f=Math.sin(f),n=0;n<this.fragments.length;n++)for(var v=this.fragments[n],q=v.halfWidth,t=v.halfHeight,q=[{x:-q+v.horizontalOffset,y:-t+v.verticalOffset},{x:q+v.horizontalOffset,y:-t+v.verticalOffset},{x:q+v.horizontalOffset,y:t+v.verticalOffset},{x:-q+v.horizontalOffset,y:t+v.verticalOffset}],t=this.parameters.position,x=0;4>x;x++){var w=q[x],y=(g*w.x-f*w.y)*e,w=(f*w.x+g*w.y)*e;d.setXYZ(v.vertexOffsets[x],t.x+
    y,t.y+w,l);a.setXY(v.vertexOffsets[x],y,w);k.setXY(v.vertexOffsets[x],-f,g)}};l.prototype.updateCenterAttribute=function(){var e=this.parameters.position,d=this.parameters._centerZ,a=this.batch.geometry.getAttribute("center");a.needsUpdate=!0;for(var k=0;k<this.fragments.length;k++){var l=this.fragments[k];a.setXYZ(l.vertexOffsets[0],e.x,e.y,d);a.setXYZ(l.vertexOffsets[1],e.x,e.y,d);a.setXYZ(l.vertexOffsets[2],e.x,e.y,d);a.setXYZ(l.vertexOffsets[3],e.x,e.y,d)}};l.prototype.updateGeometryAttributeFace2d=
    function(e,d,a){var k=this.parameters._centerZ,l=this.batch.geometry.getAttribute("position");l.needsUpdate=!0;for(var f=0;f<this.fragments.length;f++)for(var g=this.fragments[f],n=g.halfWidth,v=g.halfHeight,n=[{x:-n+g.horizontalOffset,y:-v+g.verticalOffset},{x:n+g.horizontalOffset,y:-v+g.verticalOffset},{x:n+g.horizontalOffset,y:v+g.verticalOffset},{x:-n+g.horizontalOffset,y:v+g.verticalOffset}],v=this.parameters.position,q=0;4>q;q++){var t=n[q];l.setXYZ(g.vertexOffsets[q],v.x+(e*t.x-d*t.y)*a,v.y+
      (d*t.x+e*t.y)*a,k)}};l.prototype.updateGeometryAttributeFacing=function(e,d){var a=this.parameters._centerZ,k=this.batch.geometry.getAttribute("position");k.needsUpdate=!0;for(var l=0;l<this.fragments.length;l++)for(var f=this.fragments[l],g=f.halfWidth,n=f.halfHeight,g=[{x:-g+f.horizontalOffset,y:-n+f.verticalOffset},{x:g+f.horizontalOffset,y:-n+f.verticalOffset},{x:g+f.horizontalOffset,y:n+f.verticalOffset},{x:-g+f.horizontalOffset,y:n+f.verticalOffset}],n=this.parameters.position,v=0;4>v;v++){var q=
    g[v],t=q.x*d,q=q.y*d;k.setXYZ(f.vertexOffsets[v],e[0]*t+e[3]*q+n.x,e[1]*t+e[4]*q+n.y,e[2]*t+e[5]*q+a)}};l.prototype.updateTypesAttribute=function(){var e;this.parameters.fixed?e=this.parameters.flip?0:1:this.parameters.face2d?(this.batch.mapviewer.mustUpdateCameraObjects=!0,e=2):(this.batch.mapviewer.mustUpdateCameraObjects=!0,e=3);var d=this.batch.geometry.getAttribute("type");d.needsUpdate=!0;for(var a=0;a<this.fragments.length;a++){var k=this.fragments[a];d.setX(k.vertexOffsets[0],e);d.setX(k.vertexOffsets[1],
    e);d.setX(k.vertexOffsets[2],e);d.setX(k.vertexOffsets[3],e)}};l.prototype.updateVisibilityRampAttribute=function(){var e=this.batch.geometry.getAttribute("visibilityRamp");e.needsUpdate=!0;for(var d=0;d<this.fragments.length;d++){var a=this.fragments[d];e.setXYZW(a.vertexOffsets[0],this.parameters.visibilityRampStartVisible,this.parameters.visibilityRampFullyVisible,this.parameters.visibilityRampStartInvisible,this.parameters.visibilityRampFullyInvisible);e.setXYZW(a.vertexOffsets[1],this.parameters.visibilityRampStartVisible,
    this.parameters.visibilityRampFullyVisible,this.parameters.visibilityRampStartInvisible,this.parameters.visibilityRampFullyInvisible);e.setXYZW(a.vertexOffsets[2],this.parameters.visibilityRampStartVisible,this.parameters.visibilityRampFullyVisible,this.parameters.visibilityRampStartInvisible,this.parameters.visibilityRampFullyInvisible);e.setXYZW(a.vertexOffsets[3],this.parameters.visibilityRampStartVisible,this.parameters.visibilityRampFullyVisible,this.parameters.visibilityRampStartInvisible,this.parameters.visibilityRampFullyInvisible)}};
    return l});
  define("com/visioglobe/web/helpers/TextGenerator",["three"],function(e){var n=function(e){for(var d=e=e+.5|0,a=0;d>>=1;)a++;d=1<<a;return e==d?d:2*d},l=function(){this.id=l.count++;this.plane_geometry=new e.PlaneBufferGeometry(1,1);this.plane_geometry.vg={permanent:!0};this.iconsAtlas={}};l.count=0;l.prototype.activeAtlas=null;l.prototype.activeTexture=null;l.prototype.textureAtlasParameters={width:1024,height:1024};l.prototype.disposeTexture=function(e){if(0===e.vg.nbRefs&&(e.dispose(),this.activeTexture===
  e&&(this.activeAtlas=this.activeTexture=null),e.vg&&e.vg.options&&(e.vg.options.canvas=void 0,e.vg.options=null),e.onUpdate=void 0,e.image=null,e.vg.inIconsAtlas)){var d,a;for(a in this.iconsAtlas)this.iconsAtlas[a].texture===e&&(d=this.iconsAtlas[a],d.texture=!1,d.debugImage=!1,d.loaded=!1,this.iconsAtlas[a]=!1)}};l.prototype.generateTextNoAtlas=function(l,d){d.canvas=document.createElement("canvas");var a=d.canvas,k=a.getContext("2d"),r=Math.floor(.8*(d.textTextureHeight-4)),f=r+"px "+d.family;
    k.font=f;var g=Math.ceil(k.measureText(l).width),u=Math.ceil(1.25*r),v=0,q=0,t=1,x=1,w=r+2;d._vgmipmap?(t=n(g+4),q=n(u+4),a.width=t,a.height=q,v=1/t,x=1-2/q,t=(g+2)/t,q=1-(u+2)/q):(a.width=g+4,a.height=u+4);r=g/u;k.font=f;k.fillStyle="#"+("000000"+d.color.toString(16)).slice(-6);k.fillText(l,2,w);f=new e.Texture(a);f.vg={nbRefs:0};a=k=null;f.minFilter=e.LinearFilter;f.magFilter=e.LinearFilter;f.needsUpdate=!0;f.vg.options=d;f.onUpdate=function(){this.vg.options.canvas=void 0;this.vg.options=null;
      this.onUpdate=void 0;this.image=null};a=this.plane_geometry;d._vgmipmap&&(f.minFilter=e.LinearMipMapLinearFilter,a=this.plane_geometry.clone(),k=a.attributes.uv.array,k[0]=v,k[1]=x,k[2]=t,k[3]=x,k[4]=v,k[5]=q,k[6]=t,k[7]=q,a.attributes.uv.needsUpdate=!0);return{aspectRatio:r,width:g,height:u,geometry:a,texture:f}};l.prototype.measureText=function(e,d){"undefined"===typeof d._measuringCanvas&&(d._measuringCanvas=document.createElement("canvas"));var a=d._measuringCanvas.getContext("2d"),k=Math.floor(.8*
    (d.textTextureHeight-4));a.font=k+"px "+d.family;a=Math.ceil(a.measureText(e).width);k=Math.ceil(1.25*k);return{width:a,height:k}};l.prototype.generateTextOnAtlas=function(l,d,a){var k=this.activeAtlas,n=this.activeTexture;null===k&&(this.activeAtlas=k=new l(this.textureAtlasParameters),this.activeTexture=n=new e.Texture(k.canvas),n.name="generateTextOnAtlas",n.vg={nbRefs:0});var f=k.canvasContext,g=Math.floor(.8*(a.textTextureHeight-4)),u=g+"px "+a.family;f.font=u;var v=Math.ceil(f.measureText(d).width),
    q=Math.ceil(1.25*g),t=0,x=0,w=1,y=1,t=g+2,w={width:v+4,height:q+4};if(k.isLargerThanAtlas(w))return!1;x=k.getTexturePlacement(w);if(!x&&(0<n.vg.nbRefs?(this.activeAtlas=k=new l(this.textureAtlasParameters),this.activeTexture=n=new e.Texture(k.canvas),n.name="generateTextOnAtlas2",n.vg={nbRefs:0},f=k.canvasContext):(f.clearRect(0,0,k.width,k.height),k.resetNodes()),x=k.getTexturePlacement(w),!1===x))return!1;aspectRatio=v/q;f.font=u;f.fillStyle="#"+("000000"+a.color.toString(16)).slice(-6);f.fillText(d,
    x.x+2,x.y+t);l=n;c=null;l.minFilter=e.LinearMipMapLinearFilter;l.magFilter=e.LinearFilter;l.needsUpdate=!0;d=this.plane_geometry;t=(x.x+2-1)/k.width;y=1-(x.y+2)/k.height;w=(x.x+x.width-2)/k.width;x=1-(x.y+x.height-2)/k.height;d=this.plane_geometry.clone();k=d.attributes.uv.array;k[0]=t;k[1]=y;k[2]=w;k[3]=y;k[4]=t;k[5]=x;k[6]=w;k[7]=x;d.attributes.uv.needsUpdate=!0;return{aspectRatio:aspectRatio,width:v,height:q,geometry:d,texture:l}};l.prototype.generateIconOnAtlasFromImage=function(e,d,a){iconSlot=
    this.iconsAtlas[d];if("undefined"===typeof iconSlot||!1===iconSlot)iconSlot={debugUrl:d,debugImage:a,geometry:!1,aspectRatio:!1,texture:!1},this.iconsAtlas[d]=iconSlot,e=this.findAtlasForImage(e,a),e.texture.vg.inIconsAtlas=!0,iconSlot.aspectRatio=e.aspectRatio,iconSlot.geometry=e.geometry,iconSlot.texture=e.texture,iconSlot.loaded=!0;return iconSlot};l.prototype.findAtlasForImage=function(l,d){var a=this.activeAtlas,k=this.activeTexture,n=d.width/d.height;null===a&&(this.activeAtlas=a=new l(this.textureAtlasParameters),
    this.activeTexture=k=new e.Texture(a.canvas),k.name="findAtlasForImage",k.vg={nbRefs:0});var f=0,g=0,u=1,v=1;if(a.isLargerThanAtlas(d,2))return k=new e.Texture(d),k.name="single after isLargerThanAtlas",k.needsUpdate=!0,k.vg={nbRefs:0},a=this.plane_geometry,{texture:k,aspectRatio:n,geometry:a};f=a.canvasContext;g=a.insert(d,2);if(!g&&(0<k.vg.nbRefs?(this.activeAtlas=a=new l(this.textureAtlasParameters),this.activeTexture=k=new e.Texture(a.canvas),k.name="findAtlasForImage2",k.vg={nbRefs:0}):(f.clearRect(0,
    0,a.width,a.height),a.resetNodes()),g=a.insert(d),!1===g))return!1;c=null;k.minFilter=e.LinearMipMapLinearFilter;k.magFilter=e.LinearFilter;k.needsUpdate=!0;var f=(g.x+2)/a.width,v=1-(g.y+2)/a.height,u=(g.x+g.width-2)/a.width,g=1-(g.y+g.height-1-2)/a.height,a=this.plane_geometry.clone(),q=a.attributes.uv.array;q[0]=f;q[1]=v;q[2]=u;q[3]=v;q[4]=f;q[5]=g;q[6]=u;q[7]=g;a.attributes.uv.needsUpdate=!0;return{aspectRatio:n,geometry:a,texture:k}};return l});
  define("text",{load:function(e){throw Error("Dynamic load not allowed: "+e);}});define("text!com/visioglobe/web/shaders/poi.frag",[],function(){return"varying vec2 vUv;uniform sampler2D map;uniform float opacity;varying float visibilityOpacity;void main(){gl_FragColor=vec4(vec3(1.0),1.0)*texture2D(map,vUv);gl_FragColor.a*=visibilityOpacity*opacity;}"});define("text!com/visioglobe/web/shaders/poi.vert",[],function(){return"uniform vec2 camAngleVector;varying vec2 vUv;varying float visibilityOpacity;attribute vec4 visibilityRamp;attribute vec3 center;attribute vec2 angleVector;attribute vec2 centerOffset;attribute float type;float a(vec3 b){return sqrt((b.x*b.x)+(b.y*b.y)+(b.z*b.z));}float c(vec2 d,vec2 e){return ((d.x*e.x)+(d.y*e.y));}float f(float g){float h;float i=visibilityRamp.x;float j=visibilityRamp.y;float k=visibilityRamp.z;float l=visibilityRamp.w;if(g>j){if(g<k){h=1.0;}else if(g>l){h=0.0;}else{h=1.0-((g-k)/(l-k));}}else if(g<i){h=0.0;}else{h=(g-i)/(j-i);}return h;}void main(){float m=c(angleVector,camAngleVector);vec3 n;if(type==0.0&&m>=0.0){n=center-vec3(centerOffset,0);}else{n=position;}vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(n,1.0);vec4 o=modelMatrix*vec4(center,1.0);vec3 p=cameraPosition-o.xyz;float q=a(p);visibilityOpacity=f(q);}"});
  define("com/visioglobe/web/poi/POIBatch","com/visioglobe/web/poi/POIBatchElement com/visioglobe/web/poi/POIBatchMultiLineText com/visioglobe/web/helpers/TextGenerator text!com/visioglobe/web/shaders/poi.frag text!com/visioglobe/web/shaders/poi.vert three".split(" "),function(e,n,l,m,d,a){function k(e,f,g,k,l,n){this.mapviewer=k;this.texture=e;e.vg.nbRefs++;this.dynamic=n;this.poiBatches=f;this.geometry=new a.BufferGeometry;this.geometry.matrixAutoUpdate=!1;this.material=new a.ShaderMaterial({uniforms:{map:{type:"t",
        value:e},opacity:{type:"f",value:1},camAngleVector:{type:"v2",value:k.manipulator.cameraAngleVector}},vertexShader:d,fragmentShader:m,transparent:!0,side:a.DoubleSide,depthWrite:!1,depthTest:l?!1:k.useDepthWriteForPOIs});this.mesh=new a.Mesh(this.geometry,this.material);this.mesh.matrixAutoUpdate=!1;n&&(this.orientationSerials=new Uint16Array(200),this.mesh.updateMatrix=function(){var d=this.vgbatch,f=d.types,e=d.indices,g=d.mapviewer,k=g.manipulator.cameraAngleVector.x,l=-g.manipulator.cameraAngleVector.y,
    m=g.manipulator.orientationSerial,n=d.orientationSerials,r=g.manipulator.radius,q=(g.camera.vg.cameraMatrix3||new a.Matrix3).elements;Object.keys(d.pois).forEach(function(a){var g=d.pois[a],u=g.parameters;if(u){var v=0,v=u.zoomScaleFast?.02*r*u.zoomScaleFactor:.15*Math.sqrt(r)*u.zoomScaleFactor;0<v&&v!==u._zoomScale&&-1!==u.width&&-1!==u.height&&(u._zoomScale=v,g.updateVisibility());e[6*a]!==e[6*a+1]&&(m!=n[a]||u._dirty||0<v)&&(n[a]=m,u._dirty=!1,a=f[4*a],u=0<v?v:1,2>a&&0<v?g.updateGeometryAttributesWithScale(u):
    2===a?g.updateGeometryAttributeFace2d(l,k,u):3===a&&g.updateGeometryAttributeFacing(q,u))}});a.Object3D.prototype.updateMatrix.apply(this)},this.mesh.vgbatch=this);this.mesh.renderOrder=-g;this.capacity=200;this.nextFreeQuadNumber=this.inuse=0;this.vertices=new Float32Array(2400);this.types=new Float32Array(800);this.center=new Float32Array(2400);this.centerOffset=new Float32Array(1600);this.visibilityRamp=new Float32Array(3200);this.normals=new Float32Array(2400);this.uvs=new Float32Array(1600);
    this.angleVector=new Float32Array(1600);this.geometry.addAttribute("position",new a.BufferAttribute(this.vertices,3));this.geometry.addAttribute("type",new a.BufferAttribute(this.types,1));this.geometry.addAttribute("center",new a.BufferAttribute(this.center,3));this.geometry.addAttribute("centerOffset",new a.BufferAttribute(this.centerOffset,2));this.geometry.addAttribute("normal",new a.BufferAttribute(this.normals,3));this.geometry.addAttribute("uv",new a.BufferAttribute(this.uvs,2));this.geometry.addAttribute("visibilityRamp",
      new a.BufferAttribute(this.visibilityRamp,4));this.geometry.addAttribute("angleVector",new a.BufferAttribute(this.angleVector,2));this.pois=[]}k.prototype.constructor=k;k.prototype.dispose=function(){this.texture.vg.nbRefs--;this.poiBatches.removeBatch(this);this.pois=this.angleVector=this.uvs=this.normals=this.visibilityRamp=this.centerOffset=this.center=this.types=this.vertices=this.poiBatches=null;this.mesh=this.mesh.vgbatch=null;this.material.dispose();this.geometry.dispose()};k.prototype.isFull=
    function(a){return this.nextFreeQuadNumber+a-1>=this.capacity};k.prototype.allocateNextFreeQuad=function(d){var f=this.nextFreeQuadNumber++;this.inuse++;var e=0,e=6*this.nextFreeQuadNumber,k=this.indices,l=new (65535<e?Uint32Array:Uint16Array)(e),m=e=0;if(k){for(;e<6*f;++e)l[e]=k[e];m=4*f}d?(l[e]=m,l[e+1]=m+1,l[e+2]=m+3,l[e+3]=m+1,l[e+4]=m+2,l[e+5]=m+3):(l[e]=0,l[e+1]=0,l[e+2]=0,l[e+3]=0,l[e+4]=0,l[e+5]=0);this.indices=l;this.geometry.setIndex(new a.BufferAttribute(this.indices,1));return f};k.prototype.getPickableFromIntersection=
    function(a){if(!this.pois)return!1;if(a&&a.face){var d=a.face.a/4|0;if(d<this.nextFreeQuadNumber){for(;"undefined"===typeof this.pois[d];)d--;var e=this.pois[d].parameters;if(!e)return!1;a=a.distance;return a<e.visibilityRampStartVisible||a>e.visibilityRampFullyInvisible?!1:{publicObject:this.pois[d].proxy.publicPOI,options:{id:e.id,poi:e}}}}return!1};k.prototype.recalculatePositionCameraFacing=function(d,f,e){d=d.matrix;var k=new a.Matrix3;d=d.elements;var l=k.elements;l[0]=d[0];l[1]=d[1];l[2]=d[2];
    l[3]=d[4];l[4]=d[5];l[5]=d[6];l[6]=d[8];l[7]=d[9];l[8]=d[10];var m=f._halfWidth,n=f._halfHeight;d=f._center;f=f._centerZ;var l=new a.Vector3(-m,-n,0),x=new a.Vector3(m,-n,0),w=new a.Vector3(m,n,0),m=new a.Vector3(-m,n,0);l.applyMatrix3(k);x.applyMatrix3(k);w.applyMatrix3(k);m.applyMatrix3(k);var k=e+1,n=e+2,y=e+3,z=this.geometry.getAttribute("position");z.setXYZ(e,l.x+d.x,l.y+d.y,l.z+f);z.setXYZ(k,x.x+d.x,x.y+d.y,x.z+f);z.setXYZ(n,w.x+d.x,w.y+d.y,w.z+f);z.setXYZ(y,m.x+d.x,m.y+d.y,m.z+f);z.needsUpdate=
      !0};k.prototype.recalculatePositionFace2D=function(a,d,e,k){var l=e._halfWidth,m=e._halfHeight,n=e._center;e=e._centerZ;var x=k+1,w=k+2,y=k+3,z=a*l,l=d*l;a*=m;d*=m;m=this.geometry.getAttribute("position");m.setXYZ(k,n.x-l+a,n.y-z-d,e);m.setXYZ(x,n.x+l+a,n.y+z-d,e);m.setXYZ(w,n.x+l-a,n.y+z+d,e);m.setXYZ(y,n.x-l-a,n.y-z+d,e);m.needsUpdate=!0};k.prototype.createElement=function(a,d,g,k){k._textAspectRatio=a;k._zOffset=g;k._center=k.position;k._centerZ=(k.position.z||0)+g;a=this.allocateNextFreeQuad(k.visible);
    d=new e(this,a,k,d);this.pois[a]=d;this.geometry.needsUpdate=!0;this.geometry.computeBoundingSphere();this.mesh.updateMatrix();this.mesh.updateMatrixWorld(!0);return d};k.prototype.createMultiLineText=function(a,d,e,k,l){l._textAspectRatio=a;l._zOffset=k;l._center=l.position;l._centerZ=(l.position.z||0)+k;for(a=0;a<d.length;a++)d[a].index=this.allocateNextFreeQuad(l.visible);e=new n(this,d[0].index,l,d,e);this.pois[d[0].index]=e;this.geometry.needsUpdate=!0;this.geometry.computeBoundingSphere();this.mesh.updateMatrix();
    this.mesh.updateMatrixWorld(!0);return e};return k});
  define("com/visioglobe/web/helpers/TextureAtlas",[],function(){var e=function(e){this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height;this.right=this.left=this.image=null};e.prototype.isLeaf=function(){return null===this.left&&null===this.right};e.prototype.insert=function(l){if(this.isLeaf()){if(null!==this.image||l.width>this.width||l.height>this.height)return null;if(l.width===this.width&&l.height===this.height)return this.image=l,this;this.width-l.width>this.height-l.height?(this.left=
    new e({x:this.x,y:this.y,width:l.width,height:this.height}),this.right=new e({x:this.x+l.width,y:this.y,width:this.width-l.width,height:this.height})):(this.left=new e({x:this.x,y:this.y,width:this.width,height:l.height}),this.right=new e({x:this.x,y:this.y+l.height,width:this.width,height:this.height-l.height}));return this.left.insert(l)}var m=this.left.insert(l);return null!==m?m:this.right.insert(l)};var n=function(e){this.width="undefined"!==typeof e.width?e.width:2048;this.height="undefined"!==
  typeof e.height?e.height:2048;this.canvas=e=document.createElement("canvas");e.width=this.width;e.height=this.height;this.canvasContext=e.getContext("2d");this.count=0;this.resetNodes()};n.prototype.resetNodes=function(){this.root=new e({x:0,y:0,width:this.width,height:this.height});this.nodesBySrc={}};n.prototype.insert=function(e,m){m=m||0;var d=this.root.insert({width:e.width+2*m,height:e.height+2*m});if(null===d)return!1;this.count++;this.canvasContext.drawImage(e,d.x+m,d.y+m);return d};n.prototype.getOrInsert=
    function(e){var m=e.src;if("undefined"!==typeof this.nodesBySrc[m])return this.nodesBySrc[m];e=this.insert(e);return this.nodesBySrc[m]=e};n.prototype.isLargerThanAtlas=function(e,m){m=m||0;return e.width+m>this.width||e.height+m>this.height};n.prototype.getTexturePlacement=function(e){e=this.root.insert(e);if(null===e)return!1;this.count++;e.uvx=e.x/this.canvas.width;e.uvy=e.y/this.canvas.height;e.image=n.anonymousCounter;return this.nodesBySrc[n.anonymousCounter++]=e};n.prototype.remove=function(e){e=
    e.src;var m=this.nodesBySrc[e];"undefined"!==typeof m&&(this.count--,m.image=null,delete this.nodesBySrc[e])};n.anonymousCounter=0;return n});
  define("com/visioglobe/web/poi/POIBatches",["com/visioglobe/web/poi/POIBatch","com/visioglobe/web/helpers/TextureAtlas","com/visioglobe/web/helpers/TextGenerator"],function(e,n,l){function m(d,a,e,m){this.lod=d;this.renderDepthPOI=e;this.overlay=a.overlay;this.dynamic=!a.fixed||0<a.zoomScaleFactor;this.textGenerator=m||new l;this.batches=[]}m.prototype.constructor=m;m.prototype.removeBatch=function(d){index=this.batches.indexOf(d);-1!==index&&(this.batches.splice(index,1),this.textGenerator.disposeTexture(d.texture),
    index=this.lod.pickables.indexOf(d.mesh),-1!==index&&this.lod.pickables.splice(index,1),d.mesh.parent&&d.mesh.parent.remove(d.mesh),d.dynamic&&(index=this.lod.cameraUpdatableObjects.indexOf(d.mesh),-1!==index&&this.lod.cameraUpdatableObjects.splice(index,1)))};m.prototype.addBatch=function(d){this.batches.push(d);var a=d.mesh;this.lod.contentNode.add(a);a.vg={id:!0,batch:d};this.lod.pickables.push(a);d.dynamic&&this.lod.cameraUpdatableObjects.push(d.mesh)};m.prototype.getBatch=function(d,a,k,l,f){if(l)for(var g=
    0,m=this.batches.length;g<m;++g)if(l=this.batches[g],l.texture===d&&!l.isFull(f))return this.batches[g];l=0==this.batches.length?{}:this.batches[this.batches.length-1];if(l.texture!==d||l.isFull(f))l=new e(d,this,this.renderDepthPOI,a,this.overlay,this.dynamic),l.addPoiVariables=k,this.addBatch(l);return l};m.prototype.createPOI=function(d,a){var e=d.MapviewerPrivate,l=d._mapviewer,f=a.text;if("undefined"!==typeof f&&""!==f){var g=f.replace(/\s+/g," ").trim().split(" ");if(a.multiline&&1<g.length){f=
    this.textGenerator.generateTextOnAtlas(n," ",a);if(!1===f)return!1;for(var m=[],v=0,q=0,t=!1,x=0;x<g.length;x++){var w=g[x],y=this.textGenerator.generateTextOnAtlas(n,w,a);t||(t=y.texture);if(!1===y||t!==y.texture)return!1;q+=y.width;v=Math.max(v,y.height);m.push({text:w,uvArray:y.geometry.attributes.uv.array,width:y.width,height:y.height,aspectRatio:y.aspectRatio,space:!1});x<g.length-1&&(q+=f.width)}g=q/v;t=this.getBatch(t,l,d,!1,m.length);e=t.createMultiLineText(g,m,f,e.zOffsetPOI,a)}else{y=this.textGenerator.generateTextOnAtlas(n,
    f,a);if(!1===y)return!1;t=this.getBatch(y.texture,l,d,!1,1);e=t.createElement(y.aspectRatio,y.geometry.attributes.uv.array,e.zOffsetPOI,a)}}else{y=this.textGenerator.generateIconOnAtlasFromImage(n,a.url,l.textures[a.url].texture.image);if(!1===y)return!1;y.aspectRatio=1;t=this.getBatch(y.texture,l,d,!0,1);e=t.createElement(y.aspectRatio,y.geometry.attributes.uv.array,e.zOffsetPOI,a)}l.requestRedraw();return e};return m});
  define("com/visioglobe/web/poi/POIFactory","com/visioglobe/web/poi/PublicPOI com/visioglobe/web/poi/POI com/visioglobe/web/poi/POIBatches com/visioglobe/web/helpers/CachedTexture com/visioglobe/web/helpers/MathUtils com/visioglobe/web/helpers/TextGenerator three".split(" "),function(e,n,l,m,d,a,k){var r={DEFAULT_POI_OPTIONS:{family:"Arial",textTextureHeight:64,color:16777215,visibilityRampStartVisible:2,visibilityRampFullyVisible:5,visibilityRampStartInvisible:3E3,visibilityRampFullyInvisible:5E3},
    removeFromPois:function(a,d,e){if("undefined"!==typeof d&&null!==d){var k=a.pois[d];"undefined"!==typeof k&&(e=k.indexOf(e),-1!==e&&(k.splice(e,1),0==k.length&&delete a.pois[d]))}},addToPois:function(a,d,e){"undefined"!==typeof d&&null!==d&&("undefined"===typeof a.pois[d]&&(a.pois[d]=[]),a.pois[d].push(e))},updateOrCreatePublicPOI:function(a,d,k){if(k)k.proxy=d;else{k=new e(d);var l=d.options("id");r.addToPois(a._mapviewer,l,k)}return d.publicPOI=k},createPOIBatchElement:function(d,e,k,m,n){var r=
      d.MapviewerPrivate,x=d._mapviewer,w;n?w=e.overlay?k.poiBatchesOverlay||(k.poiBatchesOverlay=new l(k,e,r.renderDepthPOIOverlay)):!e.fixed||0<e.zoomScaleFactor?k.poiBatchesFacing||(k.poiBatchesFacing=new l(k,e,r.renderDepthPOIFacing)):k.poiBatches||(k.poiBatches=new l(k,e,r.renderDepthPOI)):m&&(x.iconGenerator||(x.iconGenerator=new a),w=e.overlay?k.poiBatchesIconsOverlay||(k.poiBatchesIconsOverlay=new l(k,e,r.renderDepthPOIOverlay,x.iconGenerator)):!e.fixed||0<e.zoomScaleFactor?k.poiBatchesIconsFacing||
      (k.poiBatchesIconsFacing=new l(k,e,r.renderDepthPOIFacing,x.iconGenerator)):k.poiBatchesIcons||(k.poiBatchesIcons=new l(k,e,r.renderDepthPOI,x.iconGenerator)));return w.createPOI(d,e)},createPOI:function(a,e,k){a.POIFactory=r;var l=a._mapviewer,q,t=r.DEFAULT_POI_OPTIONS;"undefined"!==typeof e.model&&(t.visibilityRampStartVisible=0,t.visibilityRampFullyVisible=0,t.visibilityRampStartInvisible=Infinity,t.visibilityRampFullyInvisible=Infinity);t={text:"undefined"!==typeof e.text&&""!==e.text?String(e.text):
        "",url:e.url,model:e.model,startAnimations:e.startAnimations||[],textureAnimation:e.textureAnimation,selector:e.selector,textTextureHeight:e.textTextureHeight||t.textTextureHeight,family:e.family||t.family,color:"undefined"!==typeof e.color?e.color:t.color,position:e.position||{x:0,y:0,z:0},alignment:e.alignment||{x:0,y:0},_textAspectRatio:1,multiline:e.multiline||!1,_textNbLines:1,scale:e.scale||e.iconScale||e.icon_scale||{x:1,y:1,z:1},zoomScaleFactor:e.zoomScaleFactor||0,zoomScaleFast:e.zoomScaleFast||
      !1,_zoomScale:0,_previousZoomScale:0,angle:e.angle,heading:e.heading,_inverseAngleInRadians:0,floor:"undefined"!==typeof e.floor?e.floor:l.currentFloorName,lod:e.lod,visible:"undefined"!==typeof e.visible?e.visible:!0,id:"undefined"!==typeof e.id?e.id:"_anonymous"+ ++l._anonymous_poi_counter,visibilityRampStartVisible:e.visibilityRampStartVisible||t.visibilityRampStartVisible,visibilityRampFullyVisible:e.visibilityRampFullyVisible||t.visibilityRampFullyVisible,visibilityRampStartInvisible:e.visibilityRampStartInvisible||
      t.visibilityRampStartInvisible,visibilityRampFullyInvisible:e.visibilityRampFullyInvisible||t.visibilityRampFullyInvisible,clickable:"undefined"!==typeof e.clickable?e.clickable:!0,fixed:"undefined"!==typeof e.fixed?e.fixed:!1,width:"undefined"!==typeof e.width&&0!==e.width?e.width:-1,height:"undefined"!==typeof e.height&&0!==e.height?e.height:-1,overlay:"undefined"!==typeof e.overlay?e.overlay:!1,flip:"undefined"!==typeof e.flip?e.flip:!1,face2d:"undefined"!==typeof e.face2d?e.face2d:!1,image:"undefined"!==
      typeof e.image?e.image:!1,onObjectMouseOver:e.onObjectMouseOver,onObjectMouseOut:e.onObjectMouseOut,onObjectMouseUp:e.onObjectMouseUp,track:"undefined"!==typeof e.track?e.track:!1,_vgnobatch:"undefined"!==typeof e.vgnobatch?e.vgnobatch:!1,_vgnobatchfacing:"undefined"!==typeof e.vgnobatchfacing?e.vgnobatchfacing:!1,_vgnobatchicon:"undefined"!==typeof e.vgnobatchicon?e.vgnobatchicon:!1,_vgmipmap:"undefined"!==typeof e.vgmipmap?e.vgmipmap:!(l.vgnobatch||e.vgnobatch),_empty:!1};"number"===typeof t.heading&&
    (t.angle=e.heading-l.cameraNorthRotation);for(t.angle="undefined"!==typeof t.angle?t.angle:0;0>t.angle;)t.angle+=360;for(;360<t.angle;)t.angle-=360;t._inverseAngleInRadians=d.TWOPI-t.angle*Math.PI/180;"number"===typeof t.scale&&(t.scale={x:t.scale,y:t.scale,z:t.scale});e="undefined"!==typeof t.url&&""!==t.url;var x="undefined"!==typeof t.text&&""!==t.text,w="undefined"!==typeof t.model&&""!==t.model,y="undefined"!==typeof t.selector&&""!==t.url,z=!1;e&&(z=(z=l.textures[t.url])&&z.loaded);t._empty=
      !(e&&z||x||w||y);var B=l.scene,C=l.getFloor(t.floor);if(null===C)return console.log("Warning: POI was not created, required floor doesn't exist."),null;if(null!==C){q="undefined"!==typeof t.lod?C.getLOD(t.lod):C.floorContentLOD;if(!t.overlay&&!q)return null;B=q.contentNode}if(!(e&&z||x||w||y))return q=new n(a,t,q,B,e,x,w,y),k&&l.requestRedraw(),q=r.updateOrCreatePublicPOI(a,q.proxy,k),e&&!z&&(a=t.url,q.options("url",""),new m(l,a,!0,function(a,d){return function(e){d.options("url",a)}}(a,q))),q;var C=
      !1,E=l.vgnobatch||t._vgnobatch,H=l.vgnobatchfacing||t._vgnobatchfacing,l=l.vgnobatchicon||t._vgnobatchicon;w||y||E||H&&!t.fixed||!(!l&&!x&&e&&z||x&&!e)||0!==t.alignment.x||0!==t.alignment.y||(C=this.createPOIBatchElement(a,t,q,e,x));if(C)return this.updateOrCreatePublicPOI(a,C.proxy,k);l=new n(a,t,q,B,e,x,w,y);return this.updateOrCreatePublicPOI(a,l.proxy,k)},createTextureAnimation:function(a,e,k){k=k.match(/(sintranslate|timetranslate|sinscale)\(\s*([0-9\.-]+)\s*,\s*([0-9\.-]+)\s*,\s*([0-9\.-]+)\s*,\s*([0-9\.-]+)\s*\)/);
      if(null!==k){var l=k[2],m=k[3],n=k[4];switch(k[1]){case "timetranslate":a=a.animateValue(0,1,{duration:1E3*l,step:function(a){a=-a;e.offset.set(a*m,a*n)}});a.repeat(Infinity);break;case "sintranslate":a=a.animateValue(0,1,{duration:1E3*l,step:function(a){a=Math.sin(d.TWOPI*a);e.offset.set(a*m,a*n)}});a.repeat(Infinity);break;case "sinscale":a=a.animateValue(0,1,{duration:1E3*l,step:function(a){a=Math.sin(d.TWOPI*a);e.repeat.set(1+a*m,1+a*n);e.offset.set(-.5*a*m,-.5*a*n)}}),a.repeat(Infinity)}}},onModelLoaded:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 e,l,m,n,t){var x;if(3.1===e.version){var w=!1,y=[];Object.keys(e.materials).forEach(function(a){a=new k.MeshBasicMaterial({map:e.materials[a].map,color:16777215,side:k.FrontSide,transparent:e.materials[a].transparent,alphaTest:.1,opacity:m});y.push(a);!w&&a.transparent&&(w=!0)});x=new k.Mesh(e.geometry,y);x.matrixAutoUpdate=!1;if(0<l.visibilityRampStartVisible||0<l.visibilityRampFullyVisible||Infinity>l.visibilityRampStartInvisible||Infinity>l.visibilityRampFullyInvisible)y.forEach(function(a,d){y[d].transparent=
      !0}),w=!0;x.renderOrder=w?1:0;x.vg={id:l.id,poi:l,originalColor:16777215};t.pickables.push(x);var z;null===e.bbox?(z=new k.Box3,z.setFromObject(x),e.bbox=z):z=e.bbox;z=z.getSize();z=Math.max(z.x,z.y,z.z)/l.scale.x;x.position.x=0;x.position.y=0;x.position.z=0;x.scale.x=1/z;x.scale.y=-1/z;x.scale.z=-1/z;x.updateMatrix();x.traverse(function(a){a instanceof k.Mesh&&(a.castShadow=!0,a.receiveShadow=!0);a.matrixAutoUpdate=x.matrixAutoUpdate})}else if(4.4<=e.version){x=e.scene.clone(void 0,!1);x.updateMatrixWorld(!0);
      w=!1;x.matrixAutoUpdate=!1;x.traverse(function(d){d.matrixAutoUpdate=x.matrixAutoUpdate;d instanceof k.Mesh&&((d.material instanceof k.MeshBasicMaterial||d.material instanceof k.MeshLambertMaterial||d.material instanceof k.MeshPhongMaterial)&&d.material.map&&d.material.color.setHex(16777215),"undefined"!==typeof l.textureAnimation&&(d.material=d.material.clone()),d.material.side=k.FrontSide,d.material.alphaTest=.1,d.material.opacity=m,!w&&d.material.transparent&&(w=!0),d.material.map&&"undefined"!=
      typeof d.material.map.image&&("undefined"!==typeof l.textureAnimation&&(d.material.map=d.material.map.clone(),r.createTextureAnimation(a,d.material.map,l.textureAnimation)),d.material.map.wrapS=k.RepeatWrapping,d.material.map.wrapT=k.RepeatWrapping,d.material.map.needsUpdate=!0),d.vg={id:l.id,poi:l,originalColor:16777215},t.pickables.push(d),d.castShadow=!0,d.receiveShadow=!0)});if(0<l.visibilityRampStartVisible||0<l.visibilityRampFullyVisible||Infinity>l.visibilityRampStartInvisible||Infinity>l.visibilityRampFullyInvisible)x.traverse(function(a){a instanceof
      k.Mesh&&(Array.isArray(a.material)?a.material.forEach(function(d,e){a.material[e].transparent=!0}):a.material.transparent=!0)}),w=!0;x.renderOrder=w?1:0;null===e.bbox?(z=new k.Box3,z.setFromObject(x),e.bbox=z):z=e.bbox;x.position.x=0;x.position.y=0;x.position.z=0;z=2*Math.max(Math.abs(z.min.x),Math.abs(z.max.x),Math.abs(z.min.y),Math.abs(z.max.y))/Math.max(l.scale.x,l.scale.y);x.scale.x*=1/z;x.scale.y*=1/z;x.scale.z*=1/z;x.rotation.x=d.PI_2;x.updateMatrix();x.updateMatrixWorld()}else if(3.2===e.version){w=
      !1;for(z in e.result.materials)if((e.result.materials[z]instanceof k.MeshBasicMaterial||e.result.materials[z]instanceof k.MeshLambertMaterial||e.result.materials[z]instanceof k.MeshPhongMaterial)&&e.result.materials[z].map&&e.result.materials[z].color.setHex(16777215),e.result.materials[z].side=k.FrontSide,e.result.materials[z].alphaTest=.1,e.result.materials[z].opacity=m,!w&&e.result.materials[z].transparent&&(w=!0),e.result.materials[z].map){var B=e.result.materials[z].map;B.wrapS=k.RepeatWrapping;
      B.wrapT=k.RepeatWrapping}x=e.result.scene.clone(void 0,!1);if(0<l.visibilityRampStartVisible||0<l.visibilityRampFullyVisible||Infinity>l.visibilityRampStartInvisible||Infinity>l.visibilityRampFullyInvisible)x.traverse(function(a){a instanceof k.Mesh&&(Array.isArray(a.material)?a.material.forEach(function(d,e){a.material[e].transparent=!0}):a.material.transparent=!0)}),w=!0;x.renderOrder=w?1:0;x.matrixAutoUpdate=!1;x.traverse(function(a){a.matrixAutoUpdate=x.matrixAutoUpdate;a instanceof k.Mesh&&(a.vg=
      {id:l.id,poi:l,originalColor:16777215},t.pickables.push(a),a.castShadow=!0,a.receiveShadow=!0)});null===e.bbox?(z=new k.Box3,z.setFromObject(x),e.bbox=z):z=e.bbox;z=2*Math.max(Math.abs(z.min.x),Math.abs(z.max.x),Math.abs(z.min.y),Math.abs(z.max.y))/Math.max(l.scale.x,l.scale.y);x.position.x=0;x.position.y=0;x.position.z=0;x.scale.x=1/z;x.scale.y=1/z;x.scale.z=1/z;x.rotation.x=d.PI_2;x.updateMatrix();x.updateMatrixWorld()}x.name="poi_model";n.add(x);n.updateMatrixWorld(!0);l._opacity=null;a.mustUpdateCameraObjects=
      !0;a.requestRedraw()},removeMaterial:function(a,d,e){null!==d&&e.traverse(function(d){if(d&&"undefined"!==typeof d.material&&null!==d.material.map&&"object"===typeof d.material.map){var e=function(e){"undefined"!==typeof d.material.map.vg&&d.material.map.vg.nbRefs--;if("undefined"===typeof d.material.map.vg||0>=d.material.map.vg.nbRefs)e=d.material.map,e.dispose(),e.sourceFile&&"undefined"!==typeof a.textures[e.sourceFile]&&delete a.textures[e.sourceFile],e.image instanceof HTMLCanvasElement||(e.image=
      null)};"object"===typeof d.material.map?e(d.material):"undefined"!==typeof d.material.length&&d.material.forEach(function(a){e(a)})}})},removeModel:function(a,d){var e=function(a){a instanceof k.Material?(a.map&&a.map.dispose(),a.dispose()):0<a.length&&a.forEach(function(a){e(a)})},l=a.models[d];if(3.1===l.version){l.geometry.dispose();for(var m=l.materials.length-1;0<=m;m--)e(l.materials[m])}else 3.2===l.version?(Object.keys(l.result.geometries).forEach(function(a){l.result.geometries[a].dispose()}),
      Object.keys(l.result.materials).forEach(function(a){e(l.result.materials[a])}),Object.keys(l.result.textures).forEach(function(a){l.result.textures[a].dispose()})):4.4<=l.version&&l.scene.traverse(function(a){a.geometry&&a.geometry.dispose();"undefined"!==typeof a.material&&e(a.material)});delete a.models[d]}};return r});define("text!com/visioglobe/web/shaders/sky.frag",[],function(){return"uniform vec3 topColor;uniform vec3 bottomColor;uniform float offset;uniform float exponent;varying vec3 vWorldPosition;void main(){float a=normalize(vWorldPosition.yzx+offset).y;gl_FragColor=vec4(mix(bottomColor,topColor,max(pow(max(a,0.0),exponent),0.0)),1.0);}"});
  define("text!com/visioglobe/web/shaders/sky.vert",[],function(){return"varying vec3 vWorldPosition;void main(){vec4 a=modelMatrix*vec4(position,1.0);vWorldPosition=a.xyz;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}"});
  define("com/visioglobe/web/helpers/Skybox",["three","text!com/visioglobe/web/shaders/sky.frag","text!com/visioglobe/web/shaders/sky.vert"],function(e,n,l){function m(d){this.mapviewer=d;this.camera=new e.PerspectiveCamera(this.mapviewer.camera.fov,this.mapviewer.camera.aspect,.1,2);this.scene=new e.Scene;this.scene.autoUpdate=!1;this.textureCube=null;this.rotateCameraX=!1}m.prototype.constructor=m;m.prototype.initializeWithFaces=function(d){if("undefined"!==typeof d&&Array.isArray(d.images)&&6===
    d.images.length){this.textureCube=(new e.CubeTextureLoader).load(d.images,function(){this.mapviewer.requestRedraw()}.bind(this));this.textureCube.format=e.RGBFormat;this.textureCube.mapping=e.CubeReflectionMapping;d=e.ShaderLib.cube;d=new e.ShaderMaterial({fragmentShader:d.fragmentShader,vertexShader:d.vertexShader,uniforms:d.uniforms,depthWrite:!1,side:e.BackSide});d.uniforms.tCube.value=this.textureCube;var a=new e.BoxGeometry(1,1,1);this.mesh=new e.Mesh(a,d);this.scene.add(this.mesh);this.rotateCameraX=
    !0}};m.prototype.initializeWithStrip=function(d){if("undefined"!==typeof d&&"string"===typeof d.image){var a=new Image;a.onload=function(){this.textureCube=new e.CubeTexture;this.textureCube.format=e.RGBFormat;this.textureCube.mapping=e.CubeReflectionMapping;var k,l,f=a.height;a.width<a.height&&(f=a.width);for(var g=d.rhs?[5,4,2,3,1,0]:[0,1,2,3,4,5],m=0;6>m;m++){k=document.createElement("canvas");l=k.getContext("2d");k.height=f;k.width=f;var n=g[m];a.width<a.height?l.drawImage(a,0,f*n,f,f,0,0,f,f):
    l.drawImage(a,f*n,0,f,f,0,0,f,f);this.textureCube.images[m]=k}this.textureCube.needsUpdate=!0;k=e.ShaderLib.cube;k=new e.ShaderMaterial({fragmentShader:k.fragmentShader,vertexShader:k.vertexShader,uniforms:k.uniforms,depthWrite:!1,side:e.BackSide});k.uniforms.tCube.value=this.textureCube;l=new e.BoxGeometry(1,1,1);this.mesh=new e.Mesh(l,k);this.scene.add(this.mesh);this.rotateCameraX=!0;this.mapviewer.requestRedraw()}.bind(this);a.src=d.image}};m.prototype.initializeWithGradient=function(d){"undefined"!==
  typeof d&&Array.isArray(d.colors)&&2===d.colors.length||(d={colors:[30719,7864319]});d={topColor:{type:"c",value:new e.Color(d.colors[0])},bottomColor:{type:"c",value:new e.Color(d.colors[1])},offset:{type:"f",value:d.offset||.033},exponent:{type:"f",value:d.exponent||.55}};d=new e.ShaderMaterial({fragmentShader:n,vertexShader:l,uniforms:d,depthWrite:!1,side:e.BackSide});var a=new e.SphereGeometry(1,32,15);this.mesh=new e.Mesh(a,d);this.scene.add(this.mesh);this.mapviewer.requestRedraw()};m.prototype.setFov=
    function(d){this.fov=d;this.camera.fov=this.fov;this.camera.updateProjectionMatrix()};m.prototype.dispose=function(){this.mesh.geometry.dispose();this.mesh=null;null!==this.textureCube&&(this.textureCube.dispose(),this.textureCube.images.forEach(function(d){}),this.textureCube=null);this.scene=null};m.prototype.update=function(d,a){null===this.fov&&(this.camera.fov=d);this.camera.aspect=a;this.camera.updateProjectionMatrix()};m.prototype.render=function(){this.camera.rotation.copy(this.mapviewer.camera.rotation);
    this.rotateCameraX&&(this.camera.rotation.x-=Math.PI/2);this.mapviewer.renderer.render(this.scene,this.camera)};return m});
  define("com/visioglobe/web/helpers/SvgUtils",["com/visioglobe/web/helpers/MathUtils"],function(e){var n=function(){};n.trim=function(a){return a.replace(/^\s+|\s+$/g,"")};n.compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm," ")};n.Point=function(a,d){this.x=a;this.y=d;this.clone=function(){return new n.Point(this.x,this.y)};this.angleTo=function(a){return Math.atan2(a.y-this.y,a.x-this.x)};this.equals=function(a,d){d=d||.01;return Math.abs(this.x-a.x)<d&&Math.abs(this.y-a.y)<d?!0:!1}};n.equalsPoints=
    function(a,d,e){e=e||.01;return Math.abs(d.x-a.x)<e&&Math.abs(d.y-a.y)<e?!0:!1};n.Parser={};n.Parser.color=function(a){if("undefined"===typeof a)return 0;var d,e=parseInt;a=a.replace(/\s\s*/g,"");if(d=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})/.exec(a))d=[e(d[1],16),e(d[2],16),e(d[3],16)];else if(d=/^#([\da-fA-F])([\da-fA-F])([\da-fA-F])/.exec(a))d=[17*e(d[1],16),17*e(d[2],16),17*e(d[3],16)];else return 0;return 65536*d[0]+256*d[1]+d[2]};var l=function(a){this.tokens=a.split(" ")};l.prototype.reset=
    function(){this.i=-1;this.previousCommand=this.command="";this.start=new n.Point(0,0);this.control=new n.Point(0,0);this.current=new n.Point(0,0);this.points=[];this.angles=[]};l.prototype.isEnd=function(){return this.i>=this.tokens.length-1};l.prototype.isCommandOrEnd=function(){return this.isEnd()?!0:null!==this.tokens[this.i+1].match(/^[A-Za-z]$/)};l.prototype.isRelativeCommand=function(){return this.command===this.command.toLowerCase()};l.prototype.getToken=function(){this.i+=1;return this.tokens[this.i]};
    l.prototype.getScalar=function(){return parseFloat(this.getToken())};l.prototype.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};l.prototype.getPoint=function(){var a=new n.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(a)};l.prototype.getAsControlPoint=function(){var a=this.getPoint();return this.control=a};l.prototype.getAsCurrentPoint=function(){var a=this.getPoint();return this.current=a};l.prototype.getReflectedControlPoint=function(){return"c"!==
    this.previousCommand.toLowerCase()&&"s"!==this.previousCommand.toLowerCase()?this.current:new n.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)};l.prototype.makeAbsolute=function(a){this.isRelativeCommand()&&(a.x=this.current.x+a.x,a.y=this.current.y+a.y);return a};l.prototype.addMarker=function(a,d,e){null!==e&&0<this.angles.length&&null===this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(e));this.addMarkerAngle(a,
      null===d?null:d.angleTo(a))};l.prototype.addMarkerAngle=function(a,d){this.points.push(a);this.angles.push(d)};l.prototype.getMarkerPoints=function(){return this.points};l.prototype.getMarkerAngles=function(){for(var a=0;a<this.angles.length;a++)if(null===this.angles[a])for(var d=a+1;d<this.angles.length;d++)if(null!==this.angles[d]){this.angles[a]=this.angles[d];break}return this.angles};n.Parser.path=function(a){a=a.replace(/,/gm," ").replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,
      "$1 $2").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2").replace(/([0-9])([+\-])/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");a=n.compressSpaces(a);a=n.trim(a);this.PathParser=l;return new this.PathParser(a)};n.convertRectToPath=function(a){var d=a.getAttribute("x")||0,e=a.getAttribute("y")||0,f=a.getAttribute("width"),g=a.getAttribute("height"),d=""+("m"+d+","+e+"")+("l0,"+
      g+""),d=d+("l"+f+",0"),d=d+("l0,"+-g+""),d=d+("l"+-f+",0"),d=d+"z";a.setAttribute("d",d)};n.convertCircleToPath=function(a,d){for(var e=parseFloat(a.getAttribute("cx")),f=parseFloat(a.getAttribute("cy")),g=parseFloat(a.getAttribute("r")),l="",m,n,t,x,w=d||24,y=0;y<w;++y)if(m=e+g*Math.cos(2*y*Math.PI/(w-1)),n=f+g*Math.sin(2*y*Math.PI/(w-1)),0===y)l+="m"+m+","+n+"",t=m,x=n;else{var z=m-t,B=n-x;t=m;x=n;l+="l"+z+","+B+""}a.setAttribute("d",l+"z")};n.convertEllipseToPath=function(a,d){for(var e=parseFloat(a.getAttribute("cx")),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 f=parseFloat(a.getAttribute("cy")),g=parseFloat(a.getAttribute("rx")),l=parseFloat(a.getAttribute("ry")),m="",n,t,x,w,y=d||24,z=0;z<y;++z)if(n=e+g*Math.cos(2*z*Math.PI/(y-1)),t=f+l*Math.sin(2*z*Math.PI/(y-1)),0===z)m+="m"+n+","+t+"",x=n,w=t;else{var B=n-x,C=t-w;x=n;w=t;m+="l"+B+","+C+""}a.setAttribute("d",m+"z")};n.convertPolygonToPath=function(a){for(var d="",e=a.getAttribute("points").split(/[, ]/).filter(function(a){return""!==a}).map(function(a){return""===a?null:parseFloat(a)}),f,g,l=0,m=e.length/
      2;l<m;++l){var n=e[2*l+0],t=e[2*l+1];if(0===l)d+="m"+n+","+t+"",f=n,g=t;else{var x=n-f,w=t-g;f=n;g=t;d+="l"+x+","+w+""}}a.setAttribute("d",d+"z")};n.deg2rad=function(a){return a*e.DEG2RAD};n.Transform=function(a){this.matrix=a||[1,0,0,1,0,0]};n.Transform.prototype.multiply=function(a,d){var e=a.matrix[0],f=a.matrix[1],g=a.matrix[2],l=a.matrix[3],m=a.matrix[4],n=a.matrix[5],t=d.matrix[0],x=d.matrix[1],w=d.matrix[2],y=d.matrix[3],z=d.matrix[4],B=d.matrix[5];this.matrix[0]=e*t+f*w;this.matrix[1]=e*x+
      f*y;this.matrix[2]=g*t+l*w;this.matrix[3]=g*x+l*y;this.matrix[4]=m*t+n*w+1*z;this.matrix[5]=m*x+n*y+1*B};n.Transform.prototype.multiplyVector=function(a){var d=a.x,e=a.y;a.x=this.matrix[0]*d+this.matrix[2]*e+this.matrix[4];a.y=this.matrix[1]*d+this.matrix[3]*e+this.matrix[5]};n.Transform.prototype.decompose=function(){var a={},d=e.sign(this.matrix[0]);0===d&&(d=1);var l=e.sign(this.matrix[3]);0===l&&(l=1);a.sx=d*Math.sqrt(this.matrix[0]*this.matrix[0]+this.matrix[2]*this.matrix[2]);a.sy=l*Math.sqrt(this.matrix[1]*
      this.matrix[1]+this.matrix[3]*this.matrix[3]);a.angle=180*Math.atan2(-this.matrix[2],this.matrix[0])/Math.PI;a.tx=this.matrix[4]/a.sx;a.ty=this.matrix[5]/a.sy;return a};var m=function(a){var d=a.indexOf("("),e=a.indexOf(")");if(-1===d||-1===e)return[];a=a.substring(d+1,e);a=a.replace(/[ ,]/g," ");a=a.split(" ");for(d=0;d<a.length;++d)""===a[d]&&(a.splice(d,1),--d);return a=a.map(function(a){return parseFloat(a)})},d=/((translate|rotate|matrix|scale|skewX|skewY)(\([0-9eE\-\. ,]*\)))/g;n.Transform.parse=
      function(a){var e=new n.Transform([1,0,0,1,0,0]);if("undefined"===typeof a||null===a)return e;var l=a.match(d);Object.keys(l).forEach(function(a){a=l[a];var d=a.substring(0,a.indexOf("("));a=m(a);switch(d){case "matrix":if(6!==a.length)return null;e.multiply(new n.Transform(a),e);break;case "translate":if(1>a.length)return null;1===a.length&&a.push(0);d=[1,0,0,1,a[0],a[1]];e.multiply(new n.Transform(d),e);break;case "scale":if(1>a.length)return null;1===a.length&&a.push(a[0]);d=[a[0],0,0,a[1],0,0];
        e.multiply(new n.Transform(d),e);break;case "rotate":if(1>a.length)return null;var d=Math.cos(n.deg2rad(a[0])),u=Math.sin(n.deg2rad(a[0])),d=[d,u,-u,d,0,0];1!==a.length&&(u=new n.Transform([1,0,0,1,-a[1],-a[2]]),a=new n.Transform([1,0,0,1,a[1],a[2]]),u.multiply(u,new n.Transform(d)),u.multiply(u,a),d=u.matrix);e.multiply(new n.Transform(d),e);break;case "skewX":if(1>a.length)return null;a=Math.tan(n.deg2rad(a[0]));d=[1,0,a,1,0,0];e.multiply(new n.Transform(d),e);break;case "skewY":if(1>a.length)return null;
        a=Math.tan(n.deg2rad(a[0]));d=[1,a,0,1,0,0];e.multiply(new n.Transform(d),e)}});return e};return n});
  define("com/visioglobe/web/helpers/PathUtils",["three"],function(e){var n={};(function(l){var m=Math.PI/180;l.transformSVGPath=function(d){function a(){for(var a,e,k=!1;f<g;){e=d.charCodeAt(f);if(44!==e&&32!==e)break;f++}for(a=45===e?f++:f;f<g;)if(e=d.charCodeAt(f),48<=e&&57>=e)f++;else if(46===e||101===e||69===e||45===e)f++,k=!0;else return a=d.substring(a,f),k?parseFloat(a):parseInt(a);a=d.substring(a);return k?parseFloat(a):parseInt(a)}function k(){for(var a;f<g;){a=d.charCodeAt(f);if(44!==a&&
    32!==a)break;f++}a=d.charCodeAt(f);return 45===a||48<=a&&57>=a}var l=new e.ShapePath,f=1,g=d.length,n,v=0,q=0,t=0,x=0,w=null,y=null,z=0,B=0,C=0,E=0,H=0,K=0,J=0,O=0,L=0,R;for(n=d[0];f<=g;){R=!0;switch(n){case "M":v=a();q=a();l.moveTo(v,q);n="L";w=v;y=q;break;case "m":v+=a();q+=a();l.moveTo(v,q);n="l";w=v;y=q;break;case "Z":case "z":R=!1;v===w&&q===y||l.lineTo(w,y);break;case "L":case "H":case "V":t="V"===n?v:a();x="H"===n?q:a();l.lineTo(t,x);v=t;q=x;break;case "l":case "h":case "v":t="v"===n?v:v+a();
    x="h"===n?q:q+a();l.lineTo(t,x);v=t;q=x;break;case "C":z=a(),C=a();case "S":"S"===n&&(z=2*v-B,C=2*q-E);B=a();E=a();t=a();x=a();l.bezierCurveTo(z,C,B,E,t,x);v=t;q=x;break;case "c":z=v+a(),C=q+a();case "s":"s"===n&&(z=2*v-B,C=2*q-E);B=v+a();E=q+a();t=v+a();x=q+a();l.bezierCurveTo(z,C,B,E,t,x);v=t;q=x;break;case "Q":z=a(),C=a();case "T":"T"===n&&(z=2*v-z,C=2*q-C);t=a();x=a();l.quadraticCurveTo(z,C,t,x);v=t;q=x;break;case "q":z=v+a(),C=q+a();case "t":"t"===n&&(z=2*v-z,C=2*q-C);t=v+a();x=q+a();l.quadraticCurveTo(z,
    C,t,x);v=t;q=x;break;case "A":H=a();K=a();J=a()*m;O=a();L=a();t=a();x=a();H!==K&&console.warn("Forcing elliptical arc to be a circular one :(",H,K);z=Math.cos(J)*(v-t)/2+Math.sin(J)*(q-x)/2;C=-Math.sin(J)*(v-t)/2+Math.cos(J)*(q-x)/2;E=Math.sqrt((H*H*K*K-H*H*C*C-K*K*z*z)/(H*H*C*C+K*K*z*z));O===L&&(E=-E);var B=E*H*C/K,E=E*-K*z/H,v=Math.cos(J)*B-Math.sin(J)*E+(v+t)/2,q=Math.sin(J)*B+Math.cos(J)*E+(q+x)/2,J=new e.Vector2(1,0),O=new e.Vector2((z-B)/H,(C-E)/K),W=Math.acos(J.dot(O)/J.length()/O.length());
    0>J.x*O.y-J.y*O.x&&(W=-W);J.x=(-z-B)/H;J.y=(-C-E)/K;K=Math.acos(O.dot(J)/O.length()/J.length());0>O.x*J.y-O.y*J.x&&(K=-K);!L&&0<K&&(K-=2*Math.PI);L&&0>K&&(K+=2*Math.PI);l.absarc(v,q,H,W,W+K,L);v=t;q=x;break;case " ":break;default:throw Error("weird path command: '"+n+"'");}R&&k()||(n=d[f++])}return l}})(n);return n});
  define("com/visioglobe/web/CameraDrivenExplorer",["com/visioglobe/common/PublicInterface"],function(e){function n(k){e.create(this,k,m,d,a)}function l(a){this.panFromUndergroundFloor=!1;this.maxExploreDistance=0;this.isEnabled=!1;this.publicCameraDrivenExplorer=new n(this);this.multiBuildingView=a;this.mapviewer=a.mapviewer;this.camera=a.mapviewer.publicCamera;this._updateAndExplore=k.bind(this);this.isAnimating=!1;this.maxViewpointRadius=0;this.buildingParameters={}}var m=["panFromUndergroundFloor",
    "maxExploreDistance"],d=["isEnabled"],a=["setEnabled","setBuildingEnabled"];l.prototype.constructor=l;var k=function(a){this.updateBuildingViewpoints();this.explore()};l.prototype.setEnabled=function(a){if(a!==this.isEnabled)if((this.isEnabled=a)&&this.multiBuildingView.venueLayout.hasGlobalLayer){this.initBuildingInfo();var d=this;this.mapviewer.publicCamera.setCustomPostManipulatorListener(function(){d.explore()});this.mapviewer.on("resize",this._updateAndExplore)}else this.mapviewer.publicCamera.removeCustomPostManipulatorListener(),
    this.mapviewer.off("resize",this._updateAndExplore)};l.prototype.setBuildingEnabled=function(a,d,e){"undefined"===typeof e&&(e="inout");if("string"===typeof d&&"undefined"!==typeof this.buildingParameters[d])switch(e){case "in":this.buildingParameters[d].exploreTo=a;break;case "out":this.buildingParameters[d].exploreFrom=a;break;default:this.buildingParameters[d].exploreTo=a,this.buildingParameters[d].exploreFrom=a}else if("string"!==typeof d&&0<d.length)for(var k in d)this.setBuildingEnabled(a,d[k],
    e)};l.prototype.initBuildingInfo=function(){this.multiBuildingView.venueLayout.buildings.forEach(function(a){var d=a.id;this.buildingParameters[d]={};this.buildingParameters[d].viewpoint=this.mapviewer.getPOF(d);this.buildingParameters[d].exploreTo=a.exploreTo;this.buildingParameters[d].exploreFrom=a.exploreFrom},this);this.updateBuildingViewpoints()};l.prototype.updateBuildingViewpoints=function(){this.maxViewpointRadius=0;this.multiBuildingView.venueLayout.buildings.forEach(function(a){var d=a.id;
      a=this.mapviewer.getFootprintPoints(d);var d=this.mapviewer.getPOF(d),e=this.multiBuildingView.floorModePaddingFactor;(a=this.mapviewer.getViewpointFromPositions({points:a,top:e*this.multiBuildingView.containerHeight,bottom:e*this.multiBuildingView.containerHeight,left:e*this.multiBuildingView.containerWidth,right:e*this.multiBuildingView.containerWidth,pitch:this.multiBuildingView.floorModePitch,heading:d.headingInDegrees}))&&a.radius>this.maxViewpointRadius&&(this.maxViewpointRadius=a.radius)},
    this);this.maxViewpointRadius*=2};l.prototype.explore=function(){if(this.isAnimating)return!1;var a=this.camera.position,d=this.camera.position.radius,e=this.camera.pitch,k=this.camera.heading,l=!1,m=this.multiBuildingView.getCurrentExploreState(),n=0!==this.maxExploreDistance?this.maxExploreDistance:this.maxViewpointRadius,x=Math.max(this.maxExploreDistance,this.maxViewpointRadius),w,y;if("undefined"!==typeof m.buildingID&&("undefined"===typeof this.buildingParameters[m.buildingID].exploreFrom||
    !this.buildingParameters[m.buildingID].exploreFrom))return!1;var z=function(a,d){if("floor"!==m.mode)return!1;var e=d.buildingByID[a.buildingID].floorByID[a.floorID];if(0>e.levelIndex)return!0;var f=function(a){return 0>e.connectedFloors[a].levelIndex},g=Object.keys(e.connectedFloors);return 0<g.length&&g.some(f)?!0:!1}(m,this.multiBuildingView.venueLayout);if(z&&!this.panFromUndergroundFloor)y=m.buildingID,l=!0;else if("global"!==m.mode&&d<x&&this.mapviewer.isInsideFootprint(a,m.buildingID))y=m.buildingID,
    l=!0;else if(d<n)for(w in this.buildingParameters)if("undefined"!==typeof this.buildingParameters[w].exploreTo&&this.buildingParameters[w].exploreTo&&this.mapviewer.isInsideFootprint(a,w)){y=w;l=!0;break}a=!1;(d>x||!l)&&"global"!==m.mode?(a={mode:"global",buildingID:m.buildingID,floorID:m.floorID,viewpoint:{position:this.camera.position,heading:k,pitch:e},animationDuration:.5,noViewpoint:!0},z&&(a.floorAnimationDuration=0)):l&&("global"===m.mode||"floor"===m.mode&&m.buildingID!==y)&&(d=this.multiBuildingView.DEFAULT,
    y===m.buildingID?d=m.floorID:"floor"===m.mode&&(l=this.multiBuildingView.venueLayout.buildingByID[m.buildingID].floorByID[m.floorID],"undefined"!==typeof l.connectedFloors[y]&&(d=l.connectedFloors[y].floor)),a=this.multiBuildingView.buildingModeEnabled?{mode:"building",buildingID:y,floorID:d,animationDuration:.5}:{mode:"floor",buildingID:y,floorID:d,viewpoint:{position:this.camera.position,heading:k,pitch:e},animationDuration:.5,noViewpoint:!0});if(a){this.isAnimating=!0;var B=this;this.multiBuildingView.goTo(a).then(function(){B.isAnimating=
    !1})}};return l});
  define("com/visioglobe/common/MultiBuildingView",["com/visioglobe/common/PublicInterface","com/visioglobe/web/helpers/MathUtils","bluebird","underscoretiny"],function(e,n,l,m){function d(a){e.create(this,a,k,r,f)}function a(a,e,f,k){this.debug=!1;l.config({cancellation:!0});this.mapviewer=a;this.viewType="undefined"!==typeof k.viewType?k.viewType:"multibuilding";this.animationType="undefined"!==typeof k.animationType?k.animationType:"translation";this.buildingModePaddingFactor=this.floorModePaddingFactor=.1;
    this.globalModePaddingFactor=0;this.buildingModeEnabled=!1;var m=-50,n=-20,r=-50;a.publicCamera.maxPitch=Math.max(m,Math.max(n,r));a.publicCamera.minPitch=-90;Object.defineProperty(this,"globalModePitch",{get:function(){return m},set:function(d){m=d;a.publicCamera.maxPitch=Math.max(d,Math.max(n,r))}});Object.defineProperty(this,"buildingModePitch",{get:function(){return n},set:function(d){n=d;a.publicCamera.maxPitch=Math.max(d,Math.max(m,r))}});Object.defineProperty(this,"floorModePitch",{get:function(){return r},
      set:function(d){r=d;a.publicCamera.maxPitch=Math.max(d,Math.max(m,n))}});this.floorAnimationDuration=1;this.buildingModelAnimationDurationUp=this.cameraPositionAnimationDuration=this.headingAnimationDuration=this.pitchAnimationDuration=.7;this.buildingModelAnimationDurationDown=0;this.stackHeightFarAway=500;this.buildingMarkerHeight=50;this.buildingMarkerScale=30;this.publicMultiBuildingView=new d(this);this.mapviewerFloorByID={};var u=a.getFloors(),E,H,K;E=0;for(H=u.length;E<H;E++)K=u[E],K.setEnabled(!1),
      this.mapviewerFloorByID[K.name]=K;this.venueLayout=this.parseVenueLayout(a,this.mapviewerFloorByID,e);this.setVenueLayoutLocalization(f);this.parameters=k;this.exploreState={mode:"global"};this.originalChangeFloorFunction=a.changeFloor;this.goToPromise=l.resolve();this.nextExploreState=!1;a.changeFloor=this.setCurrentFloor.bind(this);a.getCurrentFloor=this.getCurrentFloor.bind(this);this.container=document.querySelector(k.containerDivSelector);this.customPreManipulatorStartCenter=!1;this.containerHeight=
      parseInt(window.getComputedStyle(this.container).height,10);this.containerWidth=parseInt(window.getComputedStyle(this.container).width,10);this.verticalPanChangeFloorThreshold=.1*this.containerHeight;this.activeBuildingMarkerPOIs={};this.inactiveBuildingMarkerPOIs={};this.setupActiveBuildingMarkerPOIs();"multifloor"===this.viewType&&"undefined"!==typeof MyRoute&&(MyRoute.prototype.use_links=!0,a.on("MultiBuildingView.exploreStateWillChange",v));this._onBuildingMouseUp=g.bind(this);a.on("mouseup",
      this._onBuildingMouseUp);if(this.isWeb2d="web2d"===a.sdkType){this.buildingModeEnabled=!1;this.pitchAnimationDuration=this.headingAnimationDuration=this.floorAnimationDuration=this.globalModePaddingFactor=this.buildingAndFloorModePaddingFactor=0;e=a.getFloors();f=function(){};var J={setPosition:f,getPosition:function(){return{x:0,y:0,z:0}},setAutoUpdateLOD:f,getLODs:function(){return[]}};e.forEach(function(a){Object.keys(J).forEach(function(d){"function"!==typeof a[d]&&(a[d]=J[d])})});var O={setManipulator:f,
      getManipulator:f,setCustomPreManipulatorListener:f,getCustomPreManipulatorListener:function(){return!1}};Object.keys(O).forEach(function(d){"function"!==typeof a.publicCamera[d]&&(a.publicCamera[d]=O[d])})}}var k="floorModePaddingFactor buildingModePaddingFactor globalModePaddingFactor buildingModeEnabled globalModePitch buildingModePitch floorModePitch floorAnimationDuration pitchAnimationDuration headingAnimationDuration cameraPositionAnimationDuration buildingModelAnimationDurationUp buildingModelAnimationDurationDown stackHeightFarAway buildingMarkerHeight buildingMarkerScale".split(" "),
    r=["DEFAULT"],f="getCurrentFloor setCurrentFloor goTo getCurrentExploreState getLocalizedName getVenueLayout animatePitch animateHeading".split(" ");a.prototype.constructor=a;a.VgFloor=function(a,d){this.id=a;this.levelIndex=parseInt(d,10)};a.VgBuilding=function(a,d,e,f,g,k,l,m){this.id=a;this.displayIndex=d;this.exploreTo=e;this.exploreFrom=f;this.floors=g;this.groundFloorIndex=k;this.defaultFloorIndex=l;this.floorByID={};a=0;for(d=this.floors.length;a<d;a++)e=this.floors[a],this.floorByID[e.id]=
    e;this.modelPOIs=Array.isArray(m)?m:[]};a.VgVenueLayout=function(a,d,e){this.buildings=a;this.defaultBuildingIndex=d;"undefined"!==typeof e&&0<e.length?(this.hasGlobalLayer=!0,this.globalLayerID=e):this.hasGlobalLayer=!1;this.buildingByID={};this.buildingByFloorID={};var f,g;a=0;for(d=this.buildings.length;a<d;a++)for(e=this.buildings[a],this.buildingByID[e.id]=e,f=0,g=e.floors.length;f<g;f++)this.buildingByFloorID[e.floors[f].id]=e};a.prototype.DEFAULT="<DEFAULT VALUE>";a.prototype.resolveExploreState=
    function(a){var d=this.venueLayout,e=this.mapviewer,f,g,k,l;g={};if("undefined"!==typeof a.place){a=a.place;if(f=e.getPlace(a))if(f.vg&&f.vg.floor&&f.vg.floor==d.globalLayerID)g={mode:"global",place:a};else{f=f.vg.floor;g=d.buildingByFloorID[f];if("undefined"===typeof g)throw Error("ERROR cannot find building for floorID: "+f);e=g.id;if("undefined"===typeof g.floorByID[f])throw Error("ERROR cannot find floorID: "+f+" in building "+e);g={mode:"floor",buildingID:e,floorID:f,place:a}}else return!1;return g}a.buildingID===
    this.DEFAULT&&(!1!==this.venueLayout.defaultBuildingIndex?a.buildingID=d.buildings[this.venueLayout.defaultBuildingIndex].id:(a.buildingID=void 0,a.floorID===this.DEFAULT&&(a.floorID=void 0)));if("undefined"!==typeof a.buildingID){e=a.buildingID;g=d.buildingByID[e];if("undefined"===typeof g)throw Error("ERROR cannot find building for floorID: "+f);f="undefined"!==typeof a.floorID&&a.floorID!==this.DEFAULT?a.floorID:g.floors[g.defaultFloorIndex].id}else if("undefined"!==typeof a.floorID)if(a.floorID===
      d.globalLayerID)a.mode="global",f=this.exploreState.floorID,e=this.exploreState.buildingID;else{f=a.floorID;g=d.buildingByFloorID[f];if("undefined"===typeof g)throw Error("ERROR cannot find building for floorID: "+f);e=g.id;if("undefined"===typeof g.floorByID[f])throw Error("ERROR cannot find floorID: "+f+" in building "+e);}else f=this.exploreState.floorID,e=this.exploreState.buildingID;l="undefined"!==typeof a.mode?a.mode:this.exploreState.mode;"global"!=l||d.hasGlobalLayer||(console.log("WARNING, global mode requested, but does not exist"),
      l="building");if("building"==l||"floor"==l)"undefined"===typeof e&&0<d.buildings.length&&(e=d.buildings[0].id),"undefined"===typeof f&&(g=d.buildingByID[e])&&0<g.floors.length&&(f=g.floors[0].id);if("building"==l)if(this.buildingModeEnabled){if(g=d.buildingByID[e],!g||1>=g.floors.length)l="floor"}else l="floor";if("floor"==l&&(g=d.buildingByID[e],!g))if(d.hasGlobalLayer)l="global",console.log("WARNING, requesting a floor, but no focused building, fallback to global");else throw Error("ERROR, no focused building, and no global mode");
      "undefined"!==typeof a.viewpoint&&(k=a.viewpoint,"building"==l&&(console.log("WARNING: asking for a viewpoint in building mode not possible"),k=void 0));if(!("building"!==l&&"floor"!==l||"undefined"!==typeof f&&"undefined"!==typeof e))if(d.hasGlobalLayer)l="global",console.log("WARNING: targetMode was building or floor, but invalid targetFloor or targetBuilding: "+f+"/"+e);else throw Error("ERROR: invalid targetFloor or targetBuilding, and no global mode to fallback to");g={mode:l,buildingID:e,floorID:f};
      "undefined"!==typeof k&&(g.viewpoint=k);return g};a.prototype.goTo=function(a){var d=this.mapviewer;if(!1!==this.goToPromise&&this.goToPromise.isPending()){var e=this.exploreState;this.exploreState.mode=this.nextExploreState.mode;"undefined"!==typeof this.nextExploreState.buildingID&&(this.exploreState.buildingID=this.nextExploreState.buildingID);"undefined"!==typeof this.nextExploreState.floorID&&(this.exploreState.floorID=this.nextExploreState.floorID);d.trigger("MultiBuildingView.exploreStateChanged",
    {current:this.nextExploreState,previous:e,view:this});this.currentFloorAnimation.stop();this.currentHeadingAnimation.stop();this.currentPitchAnimation.stop();this.goToPromise.cancel()}this.debug&&console.log("CALL goTo(mode: "+a.mode+", buildingID: "+a.buildingID+", floorID: "+a.floorID);try{this.nextExploreState=this.resolveExploreState(a)}catch(f){return l.reject(f)}this.debug&&console.log("CALL goTo resolved(mode: "+this.nextExploreState.mode+", buildingID: "+this.nextExploreState.buildingID+", floorID: "+
    this.nextExploreState.floorID);var g=this.getMapStateForExploreState(this.nextExploreState);a.noViewpoint&&(g.cameraConfig=!1);if(!1===d.trigger("MultiBuildingView.exploreStateWillChange",{target:this.nextExploreState,current:this.getCurrentExploreState(),view:this}))return l.reject(Error("trigger handler for MultiBuildingView.exploreStateWillChange returned false"));e=this.getCurrentExploreState();"undefined"!==typeof a.animationDuration&&(g.pitchAnimationDuration=a.animationDuration,g.headingAnimationDuration=
    a.animationDuration,g.cameraPositionAnimationDuration=a.animationDuration);"undefined"!==typeof a.pitchAnimationDuration&&(g.pitchAnimationDuration=a.pitchAnimationDuration);"undefined"!==typeof a.headingAnimationDuration&&(g.headingAnimationDuration=a.headingAnimationDuration);"undefined"!==typeof a.cameraPositionAnimationDuration&&(g.cameraPositionAnimationDuration=a.cameraPositionAnimationDuration);"undefined"!==typeof a.floorAnimationDuration&&(g.floorAnimationDuration=a.floorAnimationDuration);
    this.goToPromise=this.applyMapState(g);return this.goToPromise.then(function(){this.exploreState.mode=this.nextExploreState.mode;if("undefined"!==typeof this.nextExploreState.buildingID){this.exploreState.buildingID=this.nextExploreState.buildingID;var a=this.venueLayout.buildingByID[this.nextExploreState.buildingID];this.mapviewer.currentFloorName=a.floors[a.defaultFloorIndex].id}"undefined"!==typeof this.nextExploreState.floorID&&(this.exploreState.floorID=this.nextExploreState.floorID,this.mapviewer.currentFloorName=
      this.nextExploreState.floorID);"global"===this.exploreState.mode&&(this.mapviewer.currentFloorName=this.venueLayout.globalLayerID);d.trigger("MultiBuildingView.exploreStateChanged",{current:this.nextExploreState,previous:e,view:this})}.bind(this))};a.prototype.getMapStateForExploreState=function(a){var d=this.venueLayout,e=this.mapviewer,f={targetLevelIndex:!1,layerConfig:{},cameraConfig:{},buildingModels:{},manipulator:"map",floorAnimationDuration:this.floorAnimationDuration,pitchAnimationDuration:this.pitchAnimationDuration,
    headingAnimationDuration:this.headingAnimationDuration,cameraPositionAnimationDuration:this.cameraPositionAnimationDuration,buildingModelAnimationDurationUp:this.buildingModelAnimationDurationUp,buildingModelAnimationDurationDown:this.buildingModelAnimationDurationDown},g=a.mode,k=a.buildingID,l,m=a.floorID,n;if("undefined"!==typeof k){l=d.buildingByID[k];if("undefined"===typeof l)return console.log("ERROR: unknown targetBuildingID: "+k),!1;if("undefined"===typeof m)return console.log("ERROR: unknown targetFloorID: "+
    m),!1;n=l.floorByID[m];if("undefined"===typeof n)return console.log("ERROR: unknown targetFloorID "+m),!1;f.targetLevelIndex=n.levelIndex}if("global"!==g&&("undefined"===typeof n||"undefined"===typeof l)&&this.debug)debugger;var r;if(d.hasGlobalLayer){switch(g){case "global":r={lod:"auto",position:{x:0,y:0,z:0},visible:!0};"global"===this.exploreState.mode||"multifloor"!==this.viewType&&("translation"===this.animationType||this.mapviewerFloorByID[d.globalLayerID].isEnabled())||(r.fadeIn=!0);break;
    case "building":case "floor":"multifloor"===this.viewType?r={lod:"auto",position:{x:0,y:0,z:-n.groundStackHeight},visible:!1,fadeOut:!0}:(l=0<=n.levelIndex,m=Object.keys(n.connectedFloors),0<m.length&&(l=l&&!m.some(function(a){return 0>n.connectedFloors[a].levelIndex})),l?(r={lod:"auto",position:{x:0,y:0,z:"singlefloor"===this.viewType?0:-n.groundStackHeight},visible:!0},this.mapviewerFloorByID[d.globalLayerID].isEnabled()||"opacity"!==this.animationType&&"both"!==this.animationType||(r.fadeIn=!0)):
      (r={lod:"auto",position:{x:0,y:0,z:"opacity"===this.animationType?-n.groundStackHeight:this.stackHeightFarAway},visible:!1},!this.mapviewerFloorByID[d.globalLayerID].isEnabled()||"opacity"!==this.animationType&&"both"!==this.animationType||(r.fadeOut=!0)))}f.layerConfig[d.globalLayerID]=r}"floor"===g&&("global"===this.exploreState.mode||"floor"===this.exploreState.mode&&this.exploreState.buildingID!==k)&&(f.floorAnimationDuration=0);var u={};Object.keys(d.buildings).forEach(function(a){var e=d.buildings[a];
    Object.keys(e.floors).forEach(function(a){a=e.floors[a];switch(g){case "global":u=0>=a.levelIndex?{lod:"auto",position:{x:0,y:0,z:a.groundStackHeight},visible:!1,immediateVisible:!1}:{lod:"auto",position:{x:0,y:0,z:this.stackHeightFarAway},visible:!1,immediateVisible:!1};break;case "building":case "floor":if(e.id===k||"undefined"!==typeof n.connectedFloors[e.id]){var d=e.id===k?n.levelIndex:n.connectedFloors[e.id].levelIndex,l=!1;if(this.isWeb2d)l=a.levelIndex===d;else switch(this.viewType){case "singlefloor":l=
      a.levelIndex===d;break;case "multifloor":l="building"===g&&e.id===k||a.levelIndex===d;break;case "multibuilding":l=a.levelIndex<=d}if(l)u={lod:a.levelIndex===d?"auto":0,position:{x:0,y:0,z:a.groundStackHeight-n.groundStackHeight},visible:!0},a.levelIndex!==d||this.mapviewerFloorByID[a.id].isEnabled()||a.id===this.exploreState.floorID||"opacity"!==this.animationType&&"both"!==this.animationType||"multifloor"===this.viewType||(u.fadeIn=!0),"multifloor"===this.viewType&&(u.lod="building"===g?0:"auto");
    else if(u={lod:"auto",position:{x:0,y:0,z:this.stackHeightFarAway},visible:!1},"opacity"===this.animationType?u.position.z=a.groundStackHeight-n.groundStackHeight:"multibuilding"!==this.viewType&&(u.position.z*=a.levelIndex<n.levelIndex?-1:1),"opacity"===this.animationType||"both"===this.animationType)u.fadeOut=!0}else if(0<a.levelIndex&&"multibuilding"===this.viewType?(u={lod:"auto",position:{x:0,y:0,z:this.stackHeightFarAway},visible:!1},"opacity"===this.animationType&&(u.position.z=a.groundStackHeight-
      n.groundStackHeight)):u={lod:a.levelIndex==n.levelIndex?"auto":0,position:{x:0,y:0,z:a.groundStackHeight-n.groundStackHeight},visible:!1},"opacity"===this.animationType||"both"===this.animationType)u.fadeOut=!0}f.layerConfig[a.id]=u},this)},this);Object.keys(d.buildings).forEach(function(a){a=d.buildings[a];f.buildingModels[a.id]={visible:"global"==g?!0:a.id==k||"undefined"!==typeof n.connectedFloors[a.id]?!1:!0}},this);m=l=!1;r=0;switch(g){case "global":f.cameraConfig.pitch=this.globalModePitch;
    l=e.getFootprintPoints(d.globalLayerID);m=e.getPOF(d.globalLayerID);r=this.globalModePaddingFactor;break;case "building":f.cameraConfig.pitch=this.buildingModePitch;l=e.getFootprintPoints(k)||e.getFootprintPoints(d.globalLayerID);m=e.getPOF(k)||e.getPOF(d.globalLayerID);r=this.buildingModePaddingFactor;break;case "floor":f.cameraConfig.pitch=this.floorModePitch,l=e.getFootprintPoints(k)||e.getFootprintPoints(d.globalLayerID),m=e.getPOF(k)||e.getPOF(d.globalLayerID),r=this.floorModePaddingFactor}a.noViewpoint?
    f.cameraConfig=!1:"undefined"!==typeof a.viewpoint&&"undefined"!==typeof a.viewpoint.position?(f.cameraConfig.position=a.viewpoint.position,"undefined"!==typeof a.viewpoint.heading&&(f.cameraConfig.heading=a.viewpoint.heading),"undefined"!==typeof a.viewpoint.pitch&&(f.cameraConfig.pitch=a.viewpoint.pitch)):("undefined"!==typeof a.place&&(a=e.getFootprintPoints(a.place))&&(l=a),m&&(f.cameraConfig.heading=m.headingInDegrees),l&&(a={points:l,top:r*this.containerHeight,bottom:r*this.containerHeight,
      left:r*this.containerWidth,right:r*this.containerWidth,pitch:f.cameraConfig.pitch,heading:"undefined"!==typeof f.cameraConfig.heading?f.cameraConfig.heading:e.publicCamera.heading},f.cameraConfig.position=e.getViewpointFromPositions(a)),"multifloor"===this.viewType&&!1===l&&("undefined"===typeof this.cachedInitialPosition&&(this.cachedInitialPosition=e.publicCamera.position),f.cameraConfig.position={x:this.cachedInitialPosition.x,y:this.cachedInitialPosition.y,radius:this.cachedInitialPosition.radius},
    "floor"===g&&(e=f.cameraConfig.position,e.radius*=.75,f.cameraConfig.position=e)));f.manipulator="building"==g?"custom":"map";return f};a.prototype.applyMapState=function(a){var d=this.venueLayout,e=this.mapviewer,f,g,k,m=[],r,u="undefined"!==typeof a.pitchAnimationDuration?a.pitchAnimationDuration:this.pitchAnimationDuration,v="undefined"!==typeof a.headingAnimationDuration?a.headingAnimationDuration:this.headingAnimationDuration,K="undefined"!==typeof a.floorAnimationDuration?a.floorAnimationDuration:
    this.floorAnimationDuration,J="undefined"!==typeof a.cameraPositionAnimationDuration?a.cameraPositionAnimationDuration:this.cameraPositionAnimationDuration,O="undefined"!==typeof a.buildingModelAnimationDurationUp?a.buildingModelAnimationDurationUp:this.buildingModelAnimationDurationUp,L="undefined"!==typeof a.buildingModelAnimationDurationDown?a.buildingModelAnimationDurationDown:this.buildingModelAnimationDurationDown;Object.keys(a.layerConfig).forEach(function(d){g=this.mapviewerFloorByID[d];if("undefined"!==
    typeof g){if(f=a.layerConfig[d],r=g.isEnabled(),"undefined"===typeof f.visible&&(f.visible=r),"undefined"!==typeof f.immediateVisible&&g.setEnabled(f.immediateVisible),r&&f.fadeOut?(g.fadeOut(500),m.push({mapviewerFloor:g,startPosition:g.getPosition(),endPosition:{x:f.position.x,y:f.position.y,z:f.position.z},visible:f.visible})):f.visible||r?(!r&&f.visible&&g.setEnabled(f.visible),f.fadeIn&&("multifloor"===this.viewType&&d===this.venueLayout.globalLayerID||"opacity"===this.animationType?g.fadeIn(500):
    "both"===this.animationType&&g.fadeIn(1E3*K)),m.push({mapviewerFloor:g,startPosition:g.getPosition(),endPosition:{x:f.position.x,y:f.position.y,z:f.position.z},visible:f.visible})):(g.setPosition(f.position),g.setEnabled(f.visible)),g.isEnabled())if("auto"==f.lod)g.setAutoUpdateLOD(!0),g.setContentEnabled(!0);else for(g.setAutoUpdateLOD(!1),g.setContentEnabled("multifloor"===this.viewType?!0:!1),d=g.getLODs(),k=0;k<d.length;k++)d[k].setEnabled(k==f.lod)}else return console.log("ERROR applyMapState to a non-existing floorID: "+
    d),l.reject()},this);var R=[];R.push(new l(function(a,d){var f=function(){m.forEach(function(a){g=a.mapviewerFloor;g.setPosition(a.endPosition);g.setEnabled(a.visible)});a()};0<K?(this.currentFloorAnimation&&this.currentFloorAnimation.stop&&this.currentFloorAnimation.stop(),this.currentFloorAnimation=e.animateValue(0,1,{duration:1E3*K,step:function(a){var d,e,f,k=n.easeInOut(a);m.forEach(function(a){g=a.mapviewerFloor;e=a.startPosition;f=a.endPosition;d={x:e.x+(f.x-e.x)*k,y:e.x+(f.y-e.y)*k,z:e.z+
      (f.z-e.z)*k};g.setPosition(d)})},complete:f})):f()}.bind(this)));if(!this.isWeb2d){var W,I,da;this.venueLayout.hasGlobalLayer&&Object.keys(a.buildingModels).forEach(function(f){(da=this.venueLayout.buildingByID[f])&&0<da.modelPOIs.length?(I=da.modelPOIs,W=a.buildingModels[f],I.forEach(function(a){a._modelAnimation&&a._modelAnimation.stop();var d=a.options("position"),f=d.z,g=W.visible?0:200,k=(0==f?O:L)*Math.abs(f-g)/200;a.visible!=W.visible&&function(a,d,l,m){a.visible=!0;a._modelAnimation=e.animateValue(f,
    g,{duration:1E3*k,easing:"linear",step:function(d){l.z=d;a.options("position",l)},stop:function(){a.visible=m.visible},complete:function(){a.visible=m.visible}})}(a,da,d,W)},this)):d.hasGlobalLayer&&console.log("WARNING no model for buildingID: "+f)},this)}switch(a.manipulator){case "map":e.publicCamera.setManipulator("map");e.publicCamera.getCustomPreManipulatorListener()===this.mapviewerCustomPreManipulatorListener&&e.publicCamera.setCustomPreManipulatorListener(!1);break;case "custom":e.publicCamera.setManipulator("none");
    !1===e.publicCamera.getCustomPreManipulatorListener()&&e.publicCamera.setCustomPreManipulatorListener(this.mapviewerCustomPreManipulatorListener.bind(this));break;default:console.log("ERROR do not know how to handle manipulator "+a.manipulator)}if(a.cameraConfig&&a.cameraConfig.position){var ya=e.publicCamera.getManipulator();e.publicCamera.setManipulator("none");R.push(e.publicCamera.goTo(a.cameraConfig.position,{animationDuration:1E3*J}).then(function(){e.publicCamera.setManipulator(ya)}))}a.cameraConfig&&
  "undefined"!==typeof a.cameraConfig.pitch&&(0<u?R.push(this.animatePitch(a.cameraConfig.pitch,{durationInSeconds:u})):e.publicCamera.pitch=a.cameraConfig.pitch);a.cameraConfig&&"undefined"!==typeof a.cameraConfig.heading&&(0<v?R.push(this.animateHeading(a.cameraConfig.heading,{durationInSeconds:v})):e.publicCamera.heading=a.cameraConfig.heading);return l.all(R)};a.prototype.getCurrentExploreState=function(){return m.extend({},this.exploreState)};a.prototype.parseVenueLayout=function(d,e,f){var g,
    k=[],l,m=!1;"string"===typeof f.layer&&0<f.layer.length&&("undefined"!==typeof e[f.layer]?m=f.layer:console.log("WARNING: venueLayout has layer: "+f.layer+" but non existant in map"));var n,r,u,v,J,O,L,R;Object.keys(f.buildings).forEach(function(l){r=[];var m=f.buildings[l];Object.keys(m.floors).forEach(function(d){var f=m.floors[d];g=e[d];"undefined"!==typeof g?(u=new a.VgFloor(d,f.levelIndex),u.stackHeightMax=f.stackHeightMax||0,u.stackHeightMin=f.stackHeightMin||0,u.stackGap=f.stackGap||0,u.connectedFloors=
    f.connectedFloors||[],r.push(u),0===u.levelIndex&&(floorLevel0=u)):console.log("WARNING: venueLayout building has floorID : "+d+" but non existant in map")},this);r.sort(function(a,d){return parseInt(a.levelIndex,10)-parseInt(d.levelIndex,10)});J=v=!1;if("undefined"!==typeof m.defaultFloor){R=!1;i=0;for(n=r.length;i<n;i++)if(r[i].id==m.defaultFloor){J=i;R=!0;break}R||console.log("WARNING, there is a defaultFloor: "+m.defaultFloor+" but no floor found for it")}R=!1;i=0;for(n=r.length;i<n;i++)if(0==
    r[i].levelIndex){v=i;R=!0;break}R||(console.log("WARNING, no groundFloor found (with levelIndex 0) for building "+l),v=0);var z=0,B;r[v].groundStackHeight=0;i=v+1;for(n=r.length;i<n;i++)B=r[i-1].stackHeightMax+r[i-1].stackGap-r[i].stackHeightMin,z+=B,r[i].groundStackHeight=z;z=0;for(i=v-1;0<=i;i--)B=r[i].stackHeightMax+r[i].stackGap-r[i+1].stackHeightMin,z-=B,r[i].groundStackHeight=z;O=[];if(!this.isWeb2d&&(L=d.getPOI(l),"undefined"!==typeof L))for(i=0;i<L.length;i++)L[i].options("model")&&O.push(L[i]);
    k.push(new a.VgBuilding(l,m.displayIndex,"boolean"===typeof m.exploreTo?m.exploreTo:!0,"boolean"===typeof m.exploreFrom?m.exploreFrom:!0,r,v,J,O))},this);k.sort(function(a,d){return a.displayIndex-d.displayIndex});k.forEach(function(a){a.floors.forEach(function(a){if(0<a.connectedFloors.length){var d={};a.connectedFloors.forEach(function(a){var e=k.find(function(d){return"undefined"!==typeof d.floorByID[a]});"undefined"!==typeof e&&(d[e.id]={floor:a,levelIndex:e.floorByID[a].levelIndex})});a.connectedFloors=
    d}})});l=!1;if("undefined"!==typeof f.defaultBuilding){R=!1;i=0;for(n=k.length;i<n;i++)if(k[i].id==f.defaultBuilding){l=i;R=!0;break}R||console.log('WARNING: no building found with venueLayout.defaultBuilding "'+f.defaultBuilding+'"')}return new a.VgVenueLayout(k,l,m)};a.prototype.getVenueLayout=function(){return m.extend({},this.venueLayout)};a.prototype.animatePitch=function(a,d){d=d||{};var e=this.mapviewer,f=e.publicCamera.pitch,g=1E3*(d.durationInSeconds||(a-f)/4);this.currentPitchAnimation&&
  this.currentPitchAnimation.stop&&this.currentPitchAnimation.stop();return new l(function(d,k){this.currentPitchAnimation=e.animateValue(parseFloat(f),parseFloat(a),{duration:g,easing:"linear",step:function(a){e.publicCamera.pitch=a},complete:function(){d()}})}.bind(this))};a.prototype.animateHeading=function(a,d){d=d||{};var e=this.mapviewer,f=e.publicCamera.heading,f=f%360;0>f&&(f+=360);var g=1E3*(d.durationInSeconds||(a-f)/4),k=parseFloat(a),k=k%360;0>k&&(k+=360);180<Math.abs(f-k)&&(f>k?f-=360:
    k-=360);this.currentHeadingAnimation&&this.currentHeadingAnimation.stop&&this.currentHeadingAnimation.stop();return new l(function(a,d){this.currentHeadingAnimation=e.animateValue(parseFloat(f),k,{duration:g,easing:"linear",step:function(a,d){e.publicCamera.heading=a},complete:function(){a()}})}.bind(this))};a.prototype.setCurrentFloor=function(a,d){var e;a==this.venueLayout.globalLayerID?e={mode:"global",noViewpoint:!0}:this.venueLayout.buildingByID[a]?e={mode:"building",buildingID:a}:(e=this.venueLayout.buildingByFloorID[a],
    e={mode:"floor",buildingID:e&&e.id,floorID:a,noViewpoint:!0});d&&"undefined"!==typeof d.animationDuration&&(e.floorAnimationDuration=d.animationDuration/1E3);return this.goTo(e)};a.prototype.getCurrentFloor=function(){return"global"===this.exploreState.mode?this.venueLayout.globalLayerID:this.exploreState.floorID};a.prototype.mapviewerCustomPreManipulatorListener=function(a){var d,e,f;if("building"==this.exploreState.mode){var g=!1,k=!1;if("wheel"===a.type)if(a.delta=a.delta||0,0<a.delta)g=!0;else if(0>
    a.delta)k=!0;else return!1;else switch(d=this.container.getBoundingClientRect(),d={left:a.center.x-d.left,top:a.center.y-d.top},a.type){case "panstart":this.customPreManipulatorStartCenter=d;break;case "panmove":a=d.top-this.customPreManipulatorStartCenter.top;Math.abs(a)>this.verticalPanChangeFloorThreshold&&(0<a?g=!0:k=!0,this.customPreManipulatorStartCenter=d);break;case "tap":return this.goTo({mode:"floor"}),!1}if((g||k)&&"undefined"!==typeof this.exploreState.buildingID&&"undefined"!==typeof this.exploreState.floorID){var l=
    this.exploreState.floorID;e=this.venueLayout.buildingByID[this.exploreState.buildingID].floors;d=e.length;f=!1;for(a=0;a<d;a++)if(e[a].id==l){f=!0;break}f?g&&a<d-1?this.goTo({mode:"building",buildingID:this.exploreState.buildingID,floorID:e[a+1].id}):k&&0<a&&this.goTo({mode:"building",buildingID:this.exploreState.buildingID,floorID:e[a-1].id}):console.log("ERROR: this.exploreState.floorID not found!: "+this.exploreState.floorID)}return!1}};a.prototype.setVenueLayoutLocalization=function(a){this.venueLayoutLocalization=
    a||{}};a.prototype.getLocalizedName=function(a){return this.venueLayoutLocalization[a]?this.venueLayoutLocalization[a].name||a:a};a.prototype.setupActiveBuildingMarkerPOIs=function(){var a=vg.imagePath||"../media",d=this.mapviewer,e=this.venueLayout;if(e.hasGlobalLayer){var f,g;this.venueLayout.buildings.forEach(function(k){k=k.id;var l=d.getPOF(k);l&&(f=d.addPOI({id:k,url:a+"/building_focused.png",image:!0,position:{x:l.x,y:l.y,z:this.buildingMarkerHeight},floor:e.globalLayerID,alignment:{x:0,y:1},
    scale:this.buildingMarkerScale,visible:!1,overlay:!0}),g=d.addPOI({id:k,url:a+"/building.png",image:!0,position:{x:l.x,y:l.y,z:this.buildingMarkerHeight},floor:e.globalLayerID,alignment:{x:0,y:1},scale:this.buildingMarkerScale,visible:!1,overlay:!0}),f&&g&&(this.activeBuildingMarkerPOIs[k]=f,this.inactiveBuildingMarkerPOIs[k]=g))},this);d.on("MultiBuildingView.exploreStateWillChange",u)}};var g=function(a){a=a.args.element;if(Array.isArray(a))console.log("WARNING getting array maybe many POIs, should not happen on VisioWeb 1.7.17+");
  else if(a&&a.options&&(a=a.options("id"),"undefined"!==typeof this.venueLayout.buildingByID[a]))return this.goTo({mode:"building",buildingID:a,floorID:this.DEFAULT}).delay(0),!1},u=function(a){var d=a.args.view;a=a.args.target;var e=a.buildingID,f="undefined"!==typeof e;"global"==a.mode?Object.keys(d.activeBuildingMarkerPOIs).forEach(function(a){f&&a==e?(d.activeBuildingMarkerPOIs[a].show(),d.inactiveBuildingMarkerPOIs[a].hide()):(d.activeBuildingMarkerPOIs[a].hide(),d.inactiveBuildingMarkerPOIs[a].show())},
    this):this.isWeb2d?Object.keys(d.activeBuildingMarkerPOIs).forEach(function(a){a==e?(d.activeBuildingMarkerPOIs[a].hide(),d.inactiveBuildingMarkerPOIs[a].hide()):(d.activeBuildingMarkerPOIs[a].hide(),d.inactiveBuildingMarkerPOIs[a].show())},this):Object.keys(d.activeBuildingMarkerPOIs).forEach(function(a){d.activeBuildingMarkerPOIs[a].hide();d.inactiveBuildingMarkerPOIs[a].hide()},this)},v=function(a){"undefined"!==typeof currentRoute&&currentRoute&&("floor"===a.args.target.mode?currentRoute.hideLinks():
    currentRoute.showLinks())};a.prototype.removeCallbacks=function(){this.mapviewer.off("mouseup",this._onBuildingMouseUp);this.mapviewer.off("MultiBuildingView.exploreStateWillChange",u);"multifloor"===this.viewType&&this.mapviewer.off("MultiBuildingView.exploreStateWillChange",v)};return a});
  define("com/visioglobe/web/TrackballManipulator",["com/visioglobe/web/helpers/MathUtils","com/visioglobe/common/utils/Utils","three"],function(e,n,l){return function(m,d){this.radius=1E3;this.orientation=new l.Vector3(-.9800000000000013,0,-1.5707963267948966);this.orientationSerial=1;this.orientationLast=new l.Vector3;this.orientationNormalized=this.orientation.clone();this.target=new l.Vector3(0,0,0);this.translateSpeed=1;this.rotationSpeed=.005*e.RAD2DEG;this.rotationXMin=-90*e.DEG2RAD;this.rotationXMax=
    -45*e.DEG2RAD;this.zoomSpeed=.003;this.minRadius=10;this.maxRadius=5E3;this.panManipulatorEnabled=this.zoomManipulatorEnabled=this.rotationManipulatorEnabled=this.pitchManipulatorEnabled=!0;this.cameraAngleVector={x:0,y:1};this.boundary=[{x:-1E9,y:-1E9},{x:1E9,y:-1E9},{x:1E9,y:1E9},{x:-1E9,y:1E9},{x:-1E9,y:-1E9}];this.update=function(){var a=!1;if(this.orientation.x!==this.orientationLast.x||this.orientation.y!==this.orientationLast.y||this.orientation.z!==this.orientationLast.z)this.orientationLast=
    this.orientation.clone(),this.orientationSerial++,a=!0;this.orientationNormalized.x=this.orientation.x;for(this.orientationNormalized.z=this.orientation.z;this.orientationNormalized.z>2*Math.PI;)this.orientationNormalized.z-=2*Math.PI;for(;0>this.orientationNormalized.z;)this.orientationNormalized.z+=2*Math.PI;this.previousMaxRadius!=this.maxRadius&&"number"===typeof m.sideInMeters&&(d.far=Math.max(this.maxRadius+m.sideInMeters*Math.sqrt(2)),d.updateProjectionMatrix(),this.previousMaxRadius=this.maxRadius);
    this.radius=l.Math.clamp(this.radius,this.minRadius,this.maxRadius);this.translateSpeed=this.radius/616;var k=e.projectPointToPolygon(this.target,this.boundary);this.target.x=k.x;this.target.y=k.y;var k=this.orientation.z-.5*Math.PI,n=this.orientation.x;d.position.x=this.target.x+Math.sin(k)*Math.cos(n)*-this.radius;d.position.y=this.target.y-Math.cos(k)*Math.cos(n)*-this.radius;d.position.z=this.target.z+Math.sin(n)*-this.radius;n<=.5*-Math.PI+.001?(d.up.x=Math.sin(k),d.up.y=-Math.cos(k),d.up.z=
      0):(d.up.x=0,d.up.y=0,d.up.z=1);this.cameraAngleVector.x=-Math.sin(k);this.cameraAngleVector.y=Math.cos(k);d.lookAt(this.target);m.mustUpdateCameraObjects=!0;d instanceof l.OrthographicCamera&&m.orthographicNormalizedZoom&&this.wholeRadius&&(d.zoom=m.orthographicNormalizedZoom*this.wholeRadius/this.radius,d.updateProjectionMatrix());d.updateMatrix();d.updateMatrixWorld();d.matrixWorldInverse.getInverse(d.matrixWorld);d.vg||(d.vg={camera_rotation:new l.Euler,cameraComponents:!1,cameraMatrix3:new l.Matrix3});
    k=new l.Quaternion;k.setFromRotationMatrix(d.matrixWorldInverse);d.vg.camera_rotation.setFromQuaternion(k,"XYZ");d.vg.cameraComponents=d.vg.camera_rotation.toArray();a&&(a=d.matrix.elements,k=d.vg.cameraMatrix3.elements,k[0]=a[0],k[1]=a[1],k[2]=a[2],k[3]=a[4],k[4]=a[5],k[5]=a[6],k[6]=a[8],k[7]=a[9],k[8]=a[10]);m.requestRedraw()}}});
  define("heap",[],function(){var e,n,l,m,d,a,k,r,f,g,u,v,q,t;n=Math.floor;f=Math.min;var x=function(a,d){if(null==a)return-1;for(var e=0,f=a.length;e<f;e++)if(a[e]===d)return e;return-1};e=function(a,d){return a<d?-1:a>d?1:0};r=function(a,d,f,g,k){var l;null==f&&(f=0);null==k&&(k=e);if(0>f)throw Error("lo must be non-negative");null==g&&(g=a.length);for(;f<g;)l=n((f+g)/2),0>k(d,a[l])?g=l:f=l+1;return[].splice.apply(a,[f,f-f].concat(d)),d};d=function(a,d,f){null==f&&(f=e);a.push(d);return q(a,0,a.length-
    1,f)};m=function(a,d){var f,g;null==d&&(d=e);f=a.pop();a.length?(g=a[0],a[0]=f,t(a,0,d)):g=f;return g};k=function(a,d,f){var g;null==f&&(f=e);g=a[0];a[0]=d;t(a,0,f);return g};a=function(a,d,f){var g;null==f&&(f=e);a.length&&0>f(a[0],d)&&(g=[a[0],d],d=g[0],a[0]=g[1],t(a,0,f));return d};l=function(a,d){var f,g,k,l,m,r;null==d&&(d=e);l=function(){r=[];for(var d=0,e=n(a.length/2);0<=e?d<e:d>e;0<=e?d++:d--)r.push(d);return r}.apply(this).reverse();m=[];g=0;for(k=l.length;g<k;g++)f=l[g],m.push(t(a,f,d));
    return m};v=function(a,d,f){null==f&&(f=e);d=x(a,d);if(-1!==d)return q(a,0,d,f),t(a,d,f)};g=function(d,f,g){var k,m,n;null==g&&(g=e);k=d.slice(0,f);if(!k.length)return k;l(k,g);n=d.slice(f);f=0;for(m=n.length;f<m;f++)d=n[f],a(k,d,g);return k.sort(g).reverse()};u=function(a,d,g){var k,n,q,u;null==g&&(g=e);if(10*d<=a.length){n=a.slice(0,d).sort(g);if(!n.length)return n;k=n[n.length-1];u=a.slice(d);d=0;for(q=u.length;d<q;d++)a=u[d],0>g(a,k)&&(r(n,a,0,null,g),n.pop(),k=n[n.length-1]);return n}l(a,g);
    n=[];k=0;for(d=f(d,a.length);0<=d?k<d:k>d;0<=d?++k:--k)n.push(m(a,g));return n};q=function(a,d,f,g){var k,l,m;null==g&&(g=e);for(k=a[f];f>d;)if(m=f-1>>1,l=a[m],0>g(k,l))a[f]=l,f=m;else break;return a[f]=k};t=function(a,d,f){var g,k,l,m,n;null==f&&(f=e);k=a.length;n=d;l=a[d];for(g=2*d+1;g<k;)m=g+1,m<k&&!(0>f(a[g],a[m]))&&(g=m),a[d]=a[g],d=g,g=2*d+1;a[d]=l;return q(a,n,d,f)};return function(){function f(a){this.cmp=null!=a?a:e;this.nodes=[]}f.push=d;f.pop=m;f.replace=k;f.pushpop=a;f.heapify=l;f.updateItem=
    v;f.nlargest=g;f.nsmallest=u;f.prototype.push=function(a){return d(this.nodes,a,this.cmp)};f.prototype.pop=function(){return m(this.nodes,this.cmp)};f.prototype.peek=function(){return this.nodes[0]};f.prototype.contains=function(a){return-1!==x(this.nodes,a)};f.prototype.replace=function(a){return k(this.nodes,a,this.cmp)};f.prototype.pushpop=function(d){return a(this.nodes,d,this.cmp)};f.prototype.heapify=function(){return l(this.nodes,this.cmp)};f.prototype.updateItem=function(a){return v(this.nodes,
    a,this.cmp)};f.prototype.clear=function(){return this.nodes=[]};f.prototype.empty=function(){return 0===this.nodes.length};f.prototype.size=function(){return this.nodes.length};f.prototype.clone=function(){var a;a=new f;a.nodes=this.nodes.slice(0);return a};f.prototype.toArray=function(){return this.nodes.slice(0)};f.prototype.insert=f.prototype.push;f.prototype.top=f.prototype.peek;f.prototype.front=f.prototype.peek;f.prototype.has=f.prototype.contains;f.prototype.copy=f.prototype.clone;return f}()});
  define("vector",[],function(){var e=function(e,l,m){this.x=e||0;this.y=l||0;this.z=m||0};e.prototype={negative:function(){return new e(-this.x,-this.y,-this.z)},add:function(n){return n instanceof e?new e(this.x+n.x,this.y+n.y,this.z+n.z):new e(this.x+n,this.y+n,this.z+n)},subtract:function(n){return n instanceof e?new e(this.x-n.x,this.y-n.y,this.z-n.z):new e(this.x-n,this.y-n,this.z-n)},multiply:function(n){return n instanceof e?new e(this.x*n.x,this.y*n.y,this.z*n.z):new e(this.x*n,this.y*n,this.z*
      n)},divide:function(n){return n instanceof e?new e(this.x/n.x,this.y/n.y,this.z/n.z):new e(this.x/n,this.y/n,this.z/n)},equals:function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function(n){return new e(this.y*n.z-this.z*n.y,this.z*n.x-this.x*n.z,this.x*n.y-this.y*n.x)},length:function(){return Math.sqrt(this.dot(this))},lengthSq:function(){return this.dot(this)},unit:function(){return this.divide(this.length())},normalize:function(){return this.divide(this.length())},
    min:function(){return Math.min(Math.min(this.x,this.y),this.z)},max:function(){return Math.max(Math.max(this.x,this.y),this.z)},toAngles:function(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}},angleTo:function(e){return Math.acos(this.dot(e)/(this.length()*e.length()))},toArray:function(e){return[this.x,this.y,this.z].slice(0,e||3)},clone:function(){return new e(this.x,this.y,this.z)},init:function(e,l,m){this.x=e;this.y=l;this.z=m;return this}};e.negative=function(e,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          l){l.x=-e.x;l.y=-e.y;l.z=-e.z;return l};e.add=function(n,l,m){l instanceof e?(m.x=n.x+l.x,m.y=n.y+l.y,m.z=n.z+l.z):(m.x=n.x+l,m.y=n.y+l,m.z=n.z+l);return m};e.subtract=function(n,l,m){l instanceof e?(m.x=n.x-l.x,m.y=n.y-l.y,m.z=n.z-l.z):(m.x=n.x-l,m.y=n.y-l,m.z=n.z-l);return m};e.multiply=function(n,l,m){l instanceof e?(m.x=n.x*l.x,m.y=n.y*l.y,m.z=n.z*l.z):(m.x=n.x*l,m.y=n.y*l,m.z=n.z*l);return m};e.divide=function(n,l,m){l instanceof e?(m.x=n.x/l.x,m.y=n.y/l.y,m.z=n.z/l.z):(m.x=n.x/l,m.y=n.y/l,m.z=
    n.z/l);return m};e.cross=function(e,l,m){m.x=e.y*l.z-e.z*l.y;m.y=e.z*l.x-e.x*l.z;m.z=e.x*l.y-e.y*l.x;return m};e.unit=function(e,l){var m=e.length();l.x=e.x/m;l.y=e.y/m;l.z=e.z/m;return l};e.fromAngles=function(n,l){return new e(Math.cos(n)*Math.cos(l),Math.sin(l),Math.sin(n)*Math.cos(l))};e.randomDirection=function(){return e.fromAngles(Math.random()*Math.PI*2,Math.asin(2*Math.random()-1))};e.min=function(n,l){return new e(Math.min(n.x,l.x),Math.min(n.y,l.y),Math.min(n.z,l.z))};e.max=function(n,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       l){return new e(Math.max(n.x,l.x),Math.max(n.y,l.y),Math.max(n.z,l.z))};e.lerp=function(e,l,m){return l.subtract(e).multiply(m).add(e)};e.fromArray=function(n){return new e(n[0],n[1],n[2])};e.angleBetween=function(e,l){return e.angleTo(l)};return e});
  define("com/visioglobe/common/routing/AStarRoutingSolver",["heap","underscoretiny","vector"],function(e,n,l){var m=function(a,d,e,f,g){this.solver=a;this.origin=d;this.inputDestinations=e;this.numInputDestinations=e.length;this.runParameters=f;this.finishOnLast=g;this.found=!1;this.bestDistance=Number.POSITIVE_INFINITY;this.numDestinations=e.length+1;this.destinations=[];this.bestSolution=[];this.nodeIDs=[];this.nodes=[];this.distances=[];a=0;for(f=this.numDestinations;a<f;a++)this.destinations[a]=
    a;a=0;for(f=this.numInputDestinations;a<f;a++)this.nodeIDs[a]=e[a].id,this.nodes[a]=e[a];this.nodeIDs[this.numInputDestinations]=d.id;this.nodes[this.numInputDestinations]=d;this.originNodeIndex=this.numInputDestinations;a=0;for(f=this.numDestinations*this.numDestinations;a<f;a++)this.distances[a]=!1;this.finishOnLast?(this.lastNodeIndex=this.numInputDestinations-1,this.numSearchDestinations=this.numInputDestinations-1):this.numSearchDestinations=this.numInputDestinations};m.prototype.distance=function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                d){if(this.nodeIDs[a]==this.nodeIDs[d])return!1;var e=a*this.numDestinations+d,f=this.distances[e];if(!1===f){var g={legs:[],length:0,duration:0,status:200},l=this.solver.run(this.nodes[a],this.nodes[d],this.runParameters);if(!1!==this.solver._appendRunResult(g,l,e))return f={found:!0},f.distance=this.runParameters.fastest?g.length:g.duration,this.distances[e]=f,f.distance;f.found=!1;this.distances[e]=f}else if(f.found)return f.distance;return!1};m.prototype.find=function(a,d,e,f){var g,l,m,n;if(0==
    e)return!1;if(1==e){g=this.distance(a,this.destinations[d]);if(!1!==g){if(this.finishOnLast)if(a=this.distance(this.destinations[d],this.lastNodeIndex),!1!==a)g+=a;else return!1;g+=f;if(!1===this.found||g<this.bestDistance)return this.found=!0,this.bestDistance=g,this.bestSolution=this.destinations.slice(0),!0}return!1}g=this.distance(a,this.destinations[d]);!1!==g&&(g=f+g,g<this.bestDistance&&this.find(this.destinations[d],d+1,e-1,g));l=this.destinations[d];for(n=1;n<e;n++)m=this.destinations[d+
  n],this.destinations[d+n]=l,this.destinations[d]=m,g=this.distance(a,m),!1!==g&&(g=f+g,g<this.bestDistance&&this.find(m,d+1,e-1,g)),this.destinations[d+n]=m,this.destinations[d]=l;return!0};m.prototype.compute=function(){var a=[],d,e,f;this.find(this.originNodeIndex,0,this.numSearchDestinations,0);if(this.found){d=0;for(e=this.numInputDestinations;d<e;d++)f=this.bestSolution[d],a[d]=this.inputDestinations[f];return this.solver.runInOrder(this.origin,a,this.runParameters,this.bestSolution)}return{legs:[],
    length:0,duration:0,status:404,message:"No solution found"}};var d=function(a,d){this.geoinformation=d;"undefined"!==typeof a.routing&&this.load(a.routing)};d.prototype._initializeLayerNameToIDMap=function(){var a=this;n.each(this.floors,function(d,e){a.layerNameToIDMap[d.name]=e;a.layerIDToNameMap[e]=d.name})};d.prototype.getLayerID=function(a){a=this.layerNameToIDMap[a];return"undefined"!==typeof a?a:!1};d.prototype.getLayerIDsForHeight=function(a){var d=[];n.each(this.floors,function(e,f){a>=e.zmin&&
  a<=e.zmax&&d.push(f)});return 0<d.length?d:!1};d.prototype._getSqDistanceOfPointNoZ=function(a,d,e){var f={onEdge:!1,distSq:0};a=new l(a.x,a.y,0);d=new l(d.x,d.y,0);var g=new l(e.x,e.y,0);e=g.subtract(d);var m=a.subtract(d),n=e.lengthSq();if(1E-6>n)return f.distSq=m.lengthSq(),f;n=Math.sqrt(n);e=e.divide(n);var q=e.dot(m);if(0>q)return f.distSq=m.lengthSq(),f;if(q<n)return a=m.subtract(e.multiply(q)),f.onEdge=!0,f.projectionFromStart=q/n,f.projectionPosition=d.add(e.multiply(q)),f.distSq=a.lengthSq(),
    f;a=a.subtract(g);f.distSq=a.lengthSq();return f};d.prototype._getClosestNodeWithoutZ=function(a,d,e,f){f=f||{};searchType=f.option||"onEdge";var g=!1,l,m,q=this,t={},x=!1,w;if(Array.isArray(f.excludedModalities))for(l=0,m=f.excludedModalities.length;l<m;l++)w=this.modalityToID[this.modalities,f.excludedModalities[l]],-1!==w&&(x=t[w]=!0);else"string"===typeof f.excludedModalities&&(w=this.modalityToID[f.excludedModalities],-1!==w&&(x=t[w]=!0));var y=d*d;n.each(e,function(d){"onEdge"===searchType?
    (n.each(q.nodesByFloor[d],function(e){if(!1===e.isVirtual)for(var f=0,k=e.modalityEdges.length;f<k;f++){var l=e.modalityEdges[f];if(!x||!t[l.modality]){var l=l.edge,m=q.nodes[l.endNode];!1===e.isVirtual&&d===q.nodes[l.endNode].floor&&(m=q._getSqDistanceOfPointNoZ(a,e,m),m.onEdge&&m.distSq<y&&(y=m.distSq,g={type:"edge",node:null,edge:l,floor:d,edgeExtra:m,hasEdgeExcludedModalities:x,edgeExcludedModalities:t}))}}f=(e.x-a.x)*(e.x-a.x)+(e.y-a.y)*(e.y-a.y);f<y&&!1===e.isVirtual&&(y=f,g={type:"node",node:e,
      edge:null,floor:d})}),"edge"===g.type&&(1E-5>g.edgeExtra.projectionFromStart?(g.type="node",g.node=q.nodes[g.edge.startNode],g.edge=null,g.edgeExtra=null):.99999<g.edgeExtra.projectionFromStart&&(g.type="node",g.node=q.nodes[g.edge.endNode],g.edge=null,g.edgeExtra=null))):n.each(q.nodesByFloor[d],function(e){var f=(e.x-a.x)*(e.x-a.x)+(e.y-a.y)*(e.y-a.y);f<y&&!1===e.isVirtual&&(y=f,g={type:"node",node:e,floor:d})})});return g};d.prototype.getAccessNearWithoutZ=function(a,d,e){var f=[],g=d*d;n.each(this.accessByFloor[e],
    function(d,e){var k=(d.x-a.x)*(d.x-a.x)+(d.y-a.y)*(d.y-a.y);k<g&&f.push({node:d,distSq:k,accessName:d.accessName,nodeID:d.id})});return f};d.prototype.getAttributes=function(){return this.attributes};d.prototype.getModalities=function(){return this.modalities};d.prototype.getRoutingNode=function(a,d){var e;if("undefined"!==typeof a._hint)return a;if("string"===typeof a)return"undefined"!==typeof this.accesses[a]?(e=this.accesses[a].node,e={id:a,_hint:{type:"node",node:e},floor:this.layerIDToNameMap[e.floor]}):
    !1;e=this.getNodeHintForPosition(a,d);return!1===e?!1:e={position:a,routePosition:this._getPointFromHint(e),floor:this.layerIDToNameMap[e.floor],_hint:e}};d.prototype.processSnapToEdgeRoutingNodes=function(a){var d={originalNumberOfNodes:this.nodes.length,originalNumberOfEdges:this.edges.length,nodeModalityEdgeRollbackMap:{}},e=null,f=null,g=null,l=null,m=null;a.src=this.getRoutingNode(a.src);a.src._hint&&"edge"==a.src._hint.type&&(e=a.src._hint,g=this._constructNodeEdgesFromHint(e,!0,d),a.src={_hint:{type:"node",
      node:g}});if(Array.isArray(a.dst)&&0<a.dst.length){a.dst=a.dst.slice(0);for(var q=0;q<a.dst.length-1;q++)m=this.getRoutingNode(a.dst[q]),m._hint&&"edge"===m._hint.type&&(m=this.nodes[.5>m._hint.edgeExtra.projectionFromStart?m._hint.edge.startNode:m._hint.edge.endNode],a.dst[q]={_hint:{type:"node",node:m}});q=this.getRoutingNode(a.dst[a.dst.length-1]);q._hint&&"edge"==q._hint.type&&(f=q._hint,l=this._constructNodeEdgesFromHint(f,!1,d),a.dst[a.dst.length-1]={_hint:{type:"node",node:l}})}else a.dst=
    this.getRoutingNode(a.dst),a.dst._hint&&"edge"===a.dst._hint.type&&(f=a.dst._hint,l=this._constructNodeEdgesFromHint(f,!1,d),a.dst={_hint:{type:"node",node:l}});if(null!==e&&null!==f&&null!==g&&null!==l){a=!1;var t=0;if(e.edge.startNode===f.edge.startNode&&e.edge.endNode===f.edge.endNode||e.edge.startNode===f.edge.endNode&&e.edge.endNode===f.edge.startNode)"undefined"===typeof e.oppositeEdge?e.edgeExtra.projectionFromStart<f.edgeExtra.projectionFromStart&&(a=!0,t=f.edgeExtra.projectionFromStart-e.edgeExtra.projectionFromStart):
    (a=!0,t=e.edge===f.edge?f.edgeExtra.projectionFromStart-e.edgeExtra.projectionFromStart:1-f.edgeExtra.projectionFromStart-e.edgeExtra.projectionFromStart,0>t&&(t=-t));if(a){var x={startNode:g.id,endNode:l.id,length:e.edge.length*t,attributes:e.edge.attributes};this.edges[this.edges.length]=x;n.each(this.nodes[e.edge.startNode].modalityEdges,function(a){a.edge!==e.edge||e.hasEdgeExcludedModalities&&!0===e.edgeExcludedModalities[a.modality]||g.modalityEdges.push({edge:x,modality:a.modality,time:a.time*
    t})})}}return d};d.prototype.rollbackEdgeRoutingNodes=function(a){this.nodes.length=a.originalNumberOfNodes;this.edges.length=a.originalNumberOfEdges;var d=this;n.each(a.nodeModalityEdgeRollbackMap,function(a,e){d.nodes[e].modalityEdges.length=a})};d.prototype._getPointFromHint=function(a){if("edge"===a.type)a={x:a.edgeExtra.projectionPosition.x,y:a.edgeExtra.projectionPosition.y,z:this.nodes[a.edge.startNode].z*this.geoinformation.meters_per_pixel};else if("node"===a.type)a=a.node,altitude=a.z,a=
    {x:a.x,y:a.y,z:a.z*this.geoinformation.meters_per_pixel};else return!1;return this.geoinformation.convertSVGToPoint(a)};d.prototype._constructNodeEdgesFromHint=function(a,d,e){var f=this,g=a.edge,l=this.nodes[g.startNode],m=this.nodes[g.endNode],q={attributes:d?l.attributes:m.attributes,floor:l.floor,id:this.nodes.length,modalityEdges:[],w:void 0,x:a.edgeExtra.projectionPosition.x,y:a.edgeExtra.projectionPosition.y,z:l.z,isVirtual:!1,isAccess:!1};this.nodes[this.nodes.length]=q;var t={startNode:d?
      q.id:g.startNode,endNode:d?g.endNode:q.id,length:g.length*(d?1-a.edgeExtra.projectionFromStart:a.edgeExtra.projectionFromStart),attributes:g.attributes};this.edges[this.edges.length]=t;n.each(l.modalityEdges,function(l){l.edge!==g||a.hasEdgeExcludedModalities&&!0===a.edgeExcludedModalities[l.modality]||(l={edge:t,modality:l.modality,time:l.time*(d?1-a.edgeExtra.projectionFromStart:a.edgeExtra.projectionFromStart)},d?q.modalityEdges.push(l):("undefined"===typeof e.nodeModalityEdgeRollbackMap[g.startNode]&&
  (e.nodeModalityEdgeRollbackMap[g.startNode]=f.nodes[g.startNode].modalityEdges.length),f.nodes[g.startNode].modalityEdges.push(l)))});for(var x=0,w=m.modalityEdges,x=0;x<w.length;x++)if(w[x].edge.endNode===l.id){var y=w[x].edge;a.oppositeEdge=y;var z={startNode:d?q.id:y.startNode,endNode:d?y.endNode:q.id,length:g.length*(d?a.edgeExtra.projectionFromStart:1-a.edgeExtra.projectionFromStart),attributes:y.attributes};this.edges[this.edges.length]=z;n.each(m.modalityEdges,function(g){g.edge!==y||a.hasEdgeExcludedModalities&&
  !0===a.edgeExcludedModalities[g.modality]||(g={edge:z,modality:g.modality,time:g.time*(d?a.edgeExtra.projectionFromStart:1-a.edgeExtra.projectionFromStart)},d?q.modalityEdges.push(g):("undefined"===typeof e.nodeModalityEdgeRollbackMap[y.startNode]&&(e.nodeModalityEdgeRollbackMap[y.startNode]=f.nodes[y.startNode].modalityEdges.length),f.nodes[y.startNode].modalityEdges.push(g)))});break}return q};d.prototype.load=function(a){var d=this;this.maxSpeed=a.maxSpeed||1;this.floors=a.floors;this.layerNameToIDMap=
    {};this.layerIDToNameMap={};this._initializeLayerNameToIDMap();this.attributes=a.attributes;this.modalities=a.modalities;this.modalityToID={};n.each(this.modalities,function(a,e){d.modalityToID[a]=e});this.nodesByFloor=[];n.each(this.floors,function(a,e){d.nodesByFloor[e]=[]});this.accessByFloor=[];n.each(this.floors,function(a,e){d.accessByFloor[e]=[]});this.virtualAttributeID=n.indexOf(a.attributes,"virtual");this.accessAttributeID=n.indexOf(a.attributes,"access");this.intersectionAttributeID=n.indexOf(a.attributes,
    "intersection");this.nodes=[];n.each(a.nodes,function(a,e){var g={x:a.x,y:a.y,z:a.z,w:a.w,floor:a.f,id:e,modalityEdges:[],attributes:!1,isAccess:!1,isVirtual:!1};d.nodes[e]=g;d.nodesByFloor[a.f].push(g)});this.edges=[];n.each(a.edges,function(a){d.edges.push({startNode:a.s,endNode:a.e,length:a.l,attributes:!1})});n.each(a.routingNodeAttributes,function(a){var e=d.nodes[a.n];a=a.a;a===d.virtualAttributeID?e.isVirtual=!0:a===d.accessAttributeID?(e.isAccess=!0,d.accessByFloor[e.floor].push(e)):a===d.intersectionAttributeID?
    e.isIntersection=!0:!1===e.attributes?e.attributes=[a]:e.attributes.push(a)});n.each(a.routingEdgeAttributes,function(a){var e=d.edges[a.e];a=a.a;!1===e.attributes?e.attributes=[a]:e.attributes.push(a)});n.each(a.routingEdgeModalities,function(a){var e=d.edges[a.e];d.nodes[e.startNode].modalityEdges.push({time:a.t,edge:e,modality:a.m})});this.accesses={};n.each(a.poiRoutingNodes,function(a){"undefined"===typeof d.accesses[a.a]&&(d.accesses[a.a]={entries:[]});d.accesses[a.a].entries.push({node:d.nodes[a.n]});
    d.nodes[a.n].accessName=a.a});n.each(this.accesses,function(a){var d=!1;n.each(a.entries,function(a){a.node.isVirtual&&(d=a.node)});if(!1!==d){var e=[];n.each(a.entries,function(a){n.each(a.node.modalityEdges,function(a){if(a.edge.startNode===d.id||a.edge.endNode===d.id)a.originalTime=a.time,a.edge.originalLength=a.edge.length,e.push(a)})});a.node=d;a.modalityEdges=e}})};d.prototype.hasIntersections=function(){return-1!==this.intersectionAttributeID};d.prototype._heuristic=function(a,d,e){var f=parseFloat(a.x),
    g=parseFloat(a.y);a=parseFloat(a.z);var l=parseFloat(d.x),m=parseFloat(d.y),n=parseFloat(d.z),f=Math.sqrt((l-f)*(l-f)+(m-g)*(m-g)+(n-a)*(n-a));"undefined"!==typeof d.w&&(f-=d.w);"undefined"!==typeof e.w&&(f-=e.w);return f=Math.max(f,0)};d.prototype.run=function(a,d,l){var f,g,m,v;l=l||{};var q=l.fastest,t=l.weight,x=l.hasExcludedAttributes,w=l.hasExcludedModalities,y=l.excludedAttributes,z=l.excludedModalities,B=l.hasRemapResultinModality;l=l.remapResultingModalityByID;var C=new e(function(a,d){return a.f-
    d.f}),E=!1,E=d.isVirtual;n.each(this.nodes,function(a){a.parentModalityEdge=null;a.f=0;a.g=0;a.h=0;a.closed=!1;a.opened=!1});C.push(a);for(a.opened=!0;!C.empty();){var H=C.pop();H.closed=!0;if(H===d){for(d=[];null!==H.parentModalityEdge;)!1===H.isVirtual&&!1===this.nodes[H.parentModalityEdge.edge.startNode].isVirtual&&(a=H.parentModalityEdge.modality,B&&(a=l[a],"undefined"===typeof a&&(a=H.parentModalityEdge.modality)),d.push({startNode:H.parentModalityEdge.edge.startNode,endNode:H.id,modality:this.modalities[a],
    time:H.parentModalityEdge.time,lengthSvg:H.parentModalityEdge.edge.length,attributes:H.parentModalityEdge.edge.attributes})),H=this.nodes[H.parentModalityEdge.edge.startNode];return d=d.reverse()}var K=H.modalityEdges;f=0;for(g=K.length;f<g;++f){var J=K[f],O=this.nodes[J.edge.endNode];if(!(O.closed||!(!0!==O.isVirtual||E&&O.id===d.id)||w&&z[J.modality])){var L=J.edge.attributes,R=!1;if(x&&!1!==L)for(v=0,m=L.length;v<m;v++)if(y[L[v]]){R=!0;break}!R&&(m=q?J.time:J.edge.length,m=H.g+m,!O.opened||m<O.g)&&
  (O.g=m,O.h=O.h||t*this._heuristic(O,d,a),O.f=O.g+O.h,O.parentModalityEdge=J,O.opened?C.updateItem(O):(C.push(O),O.opened=!0))}}}return[]};d.prototype.queryNearPlaces=function(a,d){var e=[];d=d||{heading:0,threshold:10};var f="number"===typeof d.threshold?d.threshold:10,g=d.heading||0,m=a.lon,v=a.alt||a.z||0,q;"undefined"!==typeof a.lat&&"undefined"!==typeof m?q=this.geoinformation.convertLatLonToPoint(a):"undefined"!==typeof a.x&&"undefined"!==typeof a.y&&(q={x:a.x,y:a.y});if("undefined"!==typeof q){m=
    !1;"undefined"!==typeof a.floor?(v=this.getLayerID(a.floor),!1!==v&&(m=[v])):m=this.getLayerIDsForHeight(v);if(!1!==m){var t=this.geoinformation.convertPointToSVG(q),x=this.geoinformation.meters_per_pixel,w=this.geoinformation.rotation_angle_in_degrees,y=f/x,z=this;n.each(m,function(a){a=z.getAccessNearWithoutZ(t,y,a);for(var d=0,f=a.length;d<f;d++){var k=a[d],m=(new l(k.node.x-t.x,k.node.y-t.y)).normalize();m.y=-m.y;m=0<m.x?Math.acos(m.y):-Math.acos(m.y);m*=180/Math.PI;m-=g;for(m-=w;180<m;)m-=360;
    for(;-180>m;)m+=360;e.push({id:k.accessName,distance:Math.sqrt(k.distSq)*x,angle:m})}})}e.sort(function(a,d){return a.distance-d.distance})}return e};d.prototype.getNodeHintForPosition=function(a,d){var e=d||{option:"onEdge",distanceThreshold:200},f="number"===typeof e.distanceThreshold?e.distanceThreshold:200,g=a.lon,l=a.alt||a.z||0,m;"undefined"!==typeof a.lat&&"undefined"!==typeof g?m=this.geoinformation.convertLatLonToPoint(a):"undefined"!==typeof a.x&&"undefined"!==typeof a.y&&(m={x:a.x,y:a.y});
    var n=!1;if("undefined"!==typeof m){var t=g=!1;"undefined"!==typeof a.floor?(t=this.getLayerID(a.floor),!1!==t&&(g=[t])):g=this.getLayerIDsForHeight(l);!1!==g&&(l=this.geoinformation.convertPointToSVG(m),n=this._getClosestNodeWithoutZ(l,f/this.geoinformation.meters_per_pixel,g,e))}return n};d.prototype._getLayerName=function(a){var d=!1;"undefined"!==typeof this.floors&&a.floor<this.floors.length&&(d=this.floors[a.floor].name);return d};d.prototype.addPointToLeg=function(a,d,e,f,g){var l=this.geoinformation.convertSVGToPoint(d),
    l=this.geoinformation.convertPointToLatLon(l);a.points.push({lat:l.lat,lon:l.lon,_svg:{x:d.x,y:d.y,z:d.z},_routing:{id:d.id,isIntersection:d.isIntersection||!1,pointAttributes:d.attributes,edgeAttributes:g},_cumullength:e,_cumultime:f})};d.prototype._appendRunResult=function(a,e,l){if(e&&0<e.length){var f=!1,g=a.duration,m=a.length,v=e.length,q=this;n.each(e,function(e,k,n){var y=e.time,z=e.lengthSvg*q.geoinformation.meters_per_pixel,B=q.nodes[e.startNode],C=q.nodes[e.endNode];!1===f&&(f=d.createLeg(q._getLayerName(B),
    e.modality,B.z*q.geoinformation.meters_per_pixel,l),a.legs.push(f),q.addPointToLeg(f,B,m,g,e.attributes));var E=f.modality!==e.modality,H=k+1<v?n[k+1].attributes:!1;B.floor!==C.floor?(e=k+1<v?n[k+1].modality:e.modality,f=d.createLeg(q._getLayerName(C),e,C.z*q.geoinformation.meters_per_pixel,l),g+=y,m+=z,q.addPointToLeg(f,C,m,g,H),a.legs.push(f)):E?(f=d.createLeg(q._getLayerName(C),e.modality,C.z*q.geoinformation.meters_per_pixel,l),q.addPointToLeg(f,B,m,g,e.attributes),g+=y,m+=z,q.addPointToLeg(f,
    C,m,g,H),a.legs.push(f)):(g+=y,m+=z,q.addPointToLeg(f,C,m,g,H))});a.length=m;a.duration=g;a.legs=n.filter(a.legs,function(a){return 0<a.points.length});"undefined"===typeof a.destinationIndices?a.destinationIndices=[l]:a.destinationIndices.push(l);return!0}return!1};d.createLeg=function(a,d,e,f){return{dataset:a,modality:d,destinationIndex:f,points:[],height:e}};d.prototype.runInOrder=function(a,d,e,f){for(var g={legs:[],length:0,duration:0,status:200},l,m,n=0,t=d.length;n<t;n++){l=d[n];a=this.run(a,
    l,e);m=f?f[n]:n;if(!1===this._appendRunResult(g,a,m)){g.status=404;g.error="Route not found.src not routable.dst not routable.";break}a=l}return g};d.prototype.runClosest=function(a,d,e){var f,g;g=!1;for(var l=1E99,m=!1,n=0,t=d.length;n<t;n++)f=d[n],g=this.run(a,f,e),f={legs:[],length:0,duration:0,status:200},!1!==this._appendRunResult(f,g,n)&&(g=e.fastest?f.duration:f.length,g<l&&(l=g,m=f));return!1!==m?m:{legs:[],length:0,duration:0,error:"Route not found",status:404}};d.prototype.computeRoute=
    function(a){var e=a.routingParameters||{},l={src:a.src,dst:a.dst,routingParameters:e};"undefined"!==typeof e.requestType&"shortest"===e.requestType?(l.fastest=!1,l.weight=1):(l.fastest=!0,this.geoinformation=this.geoinformation||{},this.geoinformation.meters_per_pixel=this.geoinformation.meters_per_pixel||1,l.weight=this.geoinformation.meters_per_pixel/this.maxSpeed);var f,g,u={},v=!1,q,t,x,w;if("undefined"!==typeof e.excludedAttributes)if(w=e.excludedAttributes,Array.isArray(w))for(f=0,g=w.length;f<
    g;f++)q=w[f],q=n.indexOf(this.attributes,q),-1!==q&&(v=u[q]=!0);else"string"===typeof w&&(q=n.indexOf(this.attributes,w),-1!==q&&(v=u[q]=!0));0==u.length&&(u=!1);l.hasExcludedAttributes=v;l.excludedAttributes=u;v={};w=!1;if("undefined"!==typeof e.excludedModalities)if(u=e.excludedModalities,Array.isArray(u))for(f=0,g=u.length;f<g;f++)q=u[f],q=this.modalityToID[q],-1!==q&&(w=v[q]=!0);else"string"===typeof u&&(q=this.modalityToID[u],-1!==q&&(w=v[q]=!0));l.hasExcludedModalities=w;l.excludedModalities=
      v;"undefined"!==typeof e.remapResultingModality?(l.remapResultingModalityByID={},Object.keys(e.remapResultingModality).forEach(function(a){t=this.modalityToID[a];x=this.modalityToID[e.remapResultingModality[a]];"undefined"!==typeof t&&"undefined"!==typeof x&&(l.remapResultingModalityByID[t]=x)},this),l.hasRemapResultinModality=!0):(l.hasRemapResultinModality=!1,l.remapResultingModalityByID={});u=this.processSnapToEdgeRoutingNodes(l);f=!1;var y,v=this.getRoutingNode(l.src);w={legs:[],length:0,duration:0,
      status:200};do if(!1!==v)if(v=v._hint,"node"===v.type)if(startNode=v.node,Array.isArray(l.dst)){q=[];f=0;for(g=l.dst.length;f<g;f++){y=this.getRoutingNode(l.dst[f]);if(!1===y){w.status=404;w.error="routable.dst "+f+" not routable.";break}y=y._hint;if("node"===y.type)y=y.node;else{w.status=500;w.error="dst "+f+" is on edge, even after filtering..";break}q.push(y)}if(200==w.status)switch("undefined"===typeof a.destinationOrder&&(a.destinationOrder="optimalFinishOnLast"),1==l.dst.length&&(a.destinationOrder=
      "inOrder"),a.destinationOrder){case "inOrder":w=this.runInOrder(startNode,q,l);break;case "closest":w=this.runClosest(startNode,q,l);break;case "optimal":f=new m(this,startNode,q,l,!1);w=f.compute();break;case "optimalFinishOnLast":f=new m(this,startNode,q,l,!0);w=f.compute();break;default:w.status=500,w.error="Bad destination order: "+a.destinationOrder}}else y=this.getRoutingNode(l.dst),!1===y?(w.status=404,w.error="routable.dst not routable."):(y=y._hint,"node"===y.type?(y=y.node,startNode.id===
    y.id?(f=0<startNode.modalityEdges.length?startNode.modalityEdges[0]:{modality:0,edge:{attributes:!1}},g=d.createLeg(this._getLayerName(startNode),f.modality,startNode.z*this.geoinformation.meters_per_pixel,-1),this.addPointToLeg(g,startNode,0,0,f.edge.attributes),w.legs.push(g)):(f=this.run(startNode,y,l),!1===this._appendRunResult(w,f,0)&&(w.status=404,w.error="Route not found.src not routable.dst not routable."))):(w.status=500,w.error="dst is on edge, even after filtering.."));else w.status=500,
      w.error="src is on edge, even after filtering..";else w.status=404,w.error="Route not found.src not routable.dst not routable.";while(0);this.rollbackEdgeRoutingNodes(u);w.request=a;return w};d.prototype._displayNetwork=function(a){var d=this;n.each(d.floors,function(e,f){var g=e.name;n.each(d.nodesByFloor[f],function(e){var f=2,l="#ff0000";if(!e.isVirtual){e.isAccess?(f=1.5,l="#0000ff"):e.isIntersection&&(f=2.5,l="#808080");var m=d.geoinformation.convertSVGToPoint(e);a.addPOI({position:{x:m.x,y:m.y,
      z:0},text:e.id,floor:g,scale:f,color:l,opacity:.5,overlay:!0})}})})};return d});
  define("com/visioglobe/common/navigation/NavigationSolver",["vector","underscoretiny"],function(e,n){var l=function(e,d,a){this.routingSolver=e;this.metersPerPixel=d;this.hasIntersections=a||!1};l._getVector=function(l){return new e(l.x,l.y,0)};l._subVectors=function(e,d){return e.subtract(d)};l._crossVectors=function(e,d){return e.cross(d)};l._computeAngle=function(e,d){var a=e.dot(d),k=l._crossVectors(d,e);if(.999999<a)return 0;if(-.999999>a)return 180;a=180*Math.acos(a)/Math.PI;0>k.z&&(a=-a);return-a};
    l.prototype._defaultNavigationParameters={straightAngleThreshold:30,distanceFromCouloirThreshold:2,nearPlacesThreshold:10,minimumInstructionLength:0};l.prototype._getParam=function(e,d){"undefined"===typeof e&&console.log("BAD: undefined modality for getParam");"undefined"===typeof d&&console.log("BAD: undefined parameterName for getParam");return"undefined"!==typeof this.mModalityParameters&&"undefined"!==typeof this.mModalityParameters[e]&&"undefined"!==typeof this.mModalityParameters[e][d]?this.mModalityParameters[e][d]:
      "undefined"!==typeof this._defaultNavigationParameters[d]?this._defaultNavigationParameters[d]:Infinity};l.prototype._angle2maneuver=function(e,d){var a=this._getParam(d,"straightAngleThreshold"),k=0<e?!0:!1,l=Math.abs(e);return l<a?"eVgManeuverTypeGoStraight":45>l?!0===k?"eVgManeuverTypeTurnGentleRight":"eVgManeuverTypeTurnGentleLeft":135>l?!0===k?"eVgManeuverTypeTurnRight":"eVgManeuverTypeTurnLeft":!0===k?"eVgManeuverTypeTurnSharpRight":"eVgManeuverTypeTurnSharpLeft"};l.prototype.computeNavigation=
      function(e,d){d=d||{};d.algorithm=d.algorithm||"auto";var a=d.algorithm;"auto"===a&&this.hasIntersections&&(a="intersectionAlgorithm");return"intersectionAlgorithm"===a?this.computeNavigationIntersection(e,d):this.computeNavigationOriginal(e,d)};l.prototype.computeNavigationOriginal=function(e,d){d=d||{};d.mergeFloorChangeInstructions="undefined"!==typeof d.mergeFloorChangeInstructions?d.mergeFloorChangeInstructions:!0;d.modalityParameters=d.modalityParameters||{};var a=d.mergeFloorChangeInstructions;
      this.mModalityParameters=d.modalityParameters||{};if(0===e.legs.length)return{instructions:[{length:0,duration:0,maneuverType:"eVgManeuverTypeEnd",icon:"transit_instruction_end.png",destinationIndex:0}],parameters:d,route:e,_algorithm:"originalAlgorithm, prefer to use explicit intersections algorithm"};for(var k=[],n=e.legs[e.legs.length-1],n=n.points[n.points.length-1]._cumultime,f=0,g=e.legs,u=0,v=g.length;u<v;u++){for(var q=g[u],t=q.points.slice(0),x=!1;2>t.length;)x=!0,t.push(t[0]);var w={positions:[],
        attributes:[]};w.position=t[0];w.height=w.position._svg.z*this.metersPerPixel;w.modality=q.modality;w.dataset=q.dataset;w.destinationIndex=q.destinationIndex;f=t[0]._cumullength;w.time=t[0]._cumultime;var y=l._getVector(t[0]._svg),z=l._getVector(t[1]._svg);w.positions.push(t[0]);t[0]._routing.edgeAttributes&&w.attributes.push(t[0]._routing.edgeAttributes);x||(w.positions.push(t[1]),t[1]._routing.edgeAttributes&&w.attributes.push(t[1]._routing.edgeAttributes));for(var B=l._subVectors(y,z).length()*
        this.metersPerPixel,C=0,x=2,E=t.length;x<E;x++){var H=l._subVectors(y,z).normalize(),K=l._getVector(t[x]._svg),y=l._subVectors(y,K),J=y.clone().normalize(),C=l._computeAngle(H,J);Math.abs(C);C=l._crossVectors(H,J).length()*y.length()*this.metersPerPixel;C=Math.abs(C);y=this._getParam(q.modality,"distanceFromCouloirThreshold");this._getParam(q.modality,"straightAngleThreshold");if(C=C>y||!1)if(y=l._subVectors(z,K).normalize(),y=l._computeAngle(H,y),Math.abs(y)<this._getParam(q.modality,"straightAngleThreshold")||
      B<this._getParam(q.modality,"minimumInstructionLength"))C=!1,z.clone();C?(B=l._computeAngle(H,l._subVectors(z,K).normalize()),w.length=t[x-1]._cumullength-f,w.duration=t[x-1]._cumultime-w.time,w.maneuverType=this._angle2maneuver(B,q.modality),this._computeNearPlaces(w,H,B),k.push(w),w={positions:[],attributes:[]},f=t[x-1]._cumullength,w.time=t[x-1]._cumultime,B=l._subVectors(K,z).length()*this.metersPerPixel,lCurrentDuration=0,z.clone(),w.position=t[x-1],w.height=w.position._svg.z*this.metersPerPixel,
        w.dataset=q.dataset,w.destinationIndex=q.destinationIndex,w.modality=q.modality,w.positions.push(w.position),t[x-1]._routing.edgeAttributes&&w.attributes.push(t[x-1]._routing.edgeAttributes)):B+=l._subVectors(K,z).length()*this.metersPerPixel;y=z.clone();z=K.clone();l._subVectors(y,z).normalize();w.positions.push(t[x]);t[x]._routing.edgeAttributes&&w.attributes.push(t[x]._routing.edgeAttributes)}w.maneuverType="eVgManeuverTypeGoStraight";0<B&&(z=l._getVector({x:0,y:0}),E=w.positions.length,1<E&&(z=
        l._subVectors(l._getVector(w.positions[E-1]._svg),l._getVector(w.positions[E-2]._svg)).normalize()),this._computeNearPlaces(w,z,0),w.length=t[x-1]._cumullength-f,w.duration=t[x-1]._cumultime-w.time,k.push(w),w={positions:[],attributes:[]},f=t[x-1]._cumullength,w.time=t[x-1]._cumultime);if(!1===a){if(u===v-1)w.maneuverType="eVgManeuverTypeEnd",w.destinationIndex=q.destinationIndex,w.length=0,w.duration=0;else{var O=g[u+1],z=O.dataset,E=O.destinationIndex,H=q.dataset,K=q.destinationIndex,C=O.modality,
        y=q.modality,J=t[0]._svg.z,O=O.points[0]._svg.z;O<J?(w.maneuverType="eVgManeuverTypeGoDown",w.length=0):O>J?(w.maneuverType="eVgManeuverTypeGoUp",w.length=0):J===O&&H!==z?(w.maneuverType="eVgManeuverTypeChangeLayer",w.length=0):y!==C?(w.maneuverType="eVgManeuverTypeChangeModality",w.length=0):K!==E?(w.maneuverType="eVgManeuverTypeWaypoint",w.length=0):console.log("This should not happen yet")}0===B&&"undefined"===typeof w.position&&console.log("BAD1");0<B&&(w.position=t[t.length-1],w.height=w.position._svg.z*
        this.metersPerPixel,w.positions.push(w.position),w.position._routing.edgeAttributes&&w.attributes.push(w.position._routing.edgeAttributes));w.dataset=q.dataset;w.destinationIndex=q.destinationIndex;w.modality=q.modality;w.duration=t[x-1]._cumultime-w.time;w.length=t[x-1]._cumullength-f;this._computeNearPlaces(w);k.push(w);w={positions:[]};w.time=t[x-1]._cumultime}}a=0;for(f=k.length;a<f;a++)w=k[a],w.totalTime=n,this._uniqueAndConvertAttributes(w),"undefined"===typeof w.duration&&console.log("HBXX fixme mDuration: "+
        a),"undefined"===typeof w.time&&console.log("HBXX fixme time: "+a),"undefined"===typeof w.length&&console.log("HBXX fixme length: "+a),w.icon=this._getIconName(w);0===k.length&&(k=[{length:0,duration:0,maneuverType:"eVgManeuverTypeEnd",icon:"transit_instruction_end.png",destinationIndex:0}]);return{instructions:k,parameters:d,route:e,_algorithm:"originalAlgorithm, prefer to use explicit intersections algorithm"}};l.prototype._getIconName=function(e){var d="";switch(e.maneuverType){case "eVgManeuverTypeUnknown":d=
      "";break;case "eVgManeuverTypeGoStraight":d="transit_instruction_straight.png";break;case "eVgManeuverTypeTurnGentleRight":d="transit_instruction_turn_gentle_right.png";break;case "eVgManeuverTypeTurnGentleLeft":d="transit_instruction_turn_gentle_left.png";break;case "eVgManeuverTypeTurnRight":d="transit_instruction_turn_right.png";break;case "eVgManeuverTypeTurnLeft":d="transit_instruction_turn_left.png";break;case "eVgManeuverTypeTurnSharpRight":d="transit_instruction_turn_sharp_right.png";break;
      case "eVgManeuverTypeTurnSharpLeft":d="transit_instruction_turn_sharp_left.png";break;case "eVgManeuverTypeUTurnLeft":d="transit_instruction_uturn_left.png";break;case "eVgManeuverTypeUTurnRight":d="transit_instruction_uturn_right.png";break;case "eVgManeuverTypeStart":d="transit_instruction_start.png";break;case "eVgManeuverTypeEnd":d="transit_instruction_end.png";break;case "eVgManeuverTypeGoUp":d="transit_instruction_up.png";break;case "eVgManeuverTypeGoDown":d="transit_instruction_down.png";break;
      case "eVgManeuverTypeChangeModality":d="transit_instruction_modality_change.png";break;case "eVgManeuverTypeChangeLayer":d="transit_instruction_layer_change.png";break;case "eVgManeuverTypeWaypoint":d="transit_instruction_intermediate_destination.png";break;default:console.log("bad icon?")}return d};l.prototype._computeNearPlaces=function(e,d,a){var k=this;e.nearPlaces=[];if("undefined"!==typeof this.routingSolver){"undefined"===typeof d&&(d=l._getVector({x:0,y:0}));"undefined"===typeof a&&(a=0);
      e.actionAngle=a;var r=l._getVector(e.positions[e.positions.length-1]._svg),f=this._getParam(e.modality,"nearPlacesThreshold")/k.metersPerPixel,g=k.routingSolver.getLayerID(e.dataset),f=this.routingSolver.getAccessNearWithoutZ(r,f,g);n.each(f,function(a){var f=0;if(0!==d.x||0!==d.y){var g=l._getVector(a.node),g=l._subVectors(r,g);if(0!==g.x||0!==g.y)g=g.normalize(),f=l._computeAngle(d,g)}e.nearPlaces.push({id:a.accessName,distance:Math.sqrt(a.distSq)*k.metersPerPixel,angle:f})});f=function(a){return function(d,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       e){var f=0<a?90+.5*a:-90+.5*a,g=0<a,k=d.angle-f,f=e.angle-f;return.01>Math.abs(k-f)?d.distance-e.distance:g?0<=k&&0>f?-1:0>k&&0<=f?1:0<=k?k-f:f-k:0<=k&&0>f?1:0>k&&0<=f?-1:0<=k?k-f:f-k}};g=function(a,d){return a.distance-d.distance};e.nearPlaces=0===a?e.nearPlaces.sort(g):e.nearPlaces.sort(f(a))}};l.prototype.computeNavigationIntersection=function(e,d){d=d||{};d.mergeFloorChangeInstructions="undefined"===typeof d.mergeFloorChangeInstructions?!0:d.mergeFloorChangeInstructions;d.modalityParameters=d.modalityParameters||
      {};d.firstNodeAsIntersection="undefined"===typeof d.firstNodeAsIntersection?!1:d.firstNodeAsIntersection;var a=d.mergeFloorChangeInstructions;this.mModalityParameters=d.modalityParameters||{};var k=d.firstNodeAsIntersection;if(0===e.legs.length)return{instructions:[{length:0,duration:0,maneuverType:"eVgManeuverTypeEnd",icon:"transit_instruction_end.png",destinationIndex:0}],parameters:d,route:e,_algorithm:"intersectionAlgorithm"};for(var n=[],f=0,g=e.legs,u,v,q=0,t=!1,x=0,w=g.length;x<w;x++){for(var y=
      g[x],z=y.points.slice(0),B=!1;2>z.length;)B=!0,z.push(z[0]);u={position:z[0],positions:[],attributes:[],height:z[0]._svg.z*this.metersPerPixel,time:z[0]._cumultime,modality:y.modality,dataset:y.dataset,destinationIndex:y.destinationIndex};f=z[0]._cumullength;0<n.length&&(v=n[n.length-1],v.duration=u.time-v.time,v.length=u.position._cumullength-v.position._cumullength);var C=l._getVector(z[0]._svg),q=l._getVector(z[1]._svg);u.positions.push(z[0]);z[0]._routing.edgeAttributes&&u.attributes.push(z[0]._routing.edgeAttributes);
      B||(u.positions.push(z[1]),z[1]._routing.edgeAttributes&&u.attributes.push(z[1]._routing.edgeAttributes));var E=this._getParam(y.modality,"straightAngleThreshold"),H;v=l._subVectors(C,q).normalize();var K=l._getVector({x:0,y:0}),J=0;H=0;for(var O=z[1]._routing.isIntersection||0==x&&k||0<x&&g[x].destinationIndex!=g[x-1].destinationIndex&&k,B=2,L=z.length;B<L;B++){C=l._getVector(z[B]._svg);K=l._subVectors(q,C).normalize();J=l._computeAngle(v,K);H=Math.abs(J);if(H=O&&H>E)u.length=z[B-1]._cumullength-
        f,u.duration=z[B-1]._cumultime-u.time,u.maneuverType=this._angle2maneuver(J,y.modality),f=z[B-1]._cumullength,this._computeNearPlaces(u,v,J),n.push(u),v=u,u={position:z[B-1],positions:[],attributes:[],height:v.height,time:z[B-1]._cumultime,modality:v.modality,dataset:v.dataset,destinationIndex:v.destinationIndex},u.positions.push(u.position),z[B-1]._routing.edgeAttributes&&u.attributes.push(z[B-1]._routing.edgeAttributes);q.clone();q=C.clone();v=K;O=z[B]._routing.isIntersection;u.positions.push(z[B]);
        z[B]._routing.edgeAttributes&&u.attributes.push(z[B]._routing.edgeAttributes)}u.maneuverType="eVgManeuverTypeGoStraight";q=z[B-1]._cumullength-f;0<q?(this._computeNearPlaces(u,v,0),u.length=z[B-1]._cumullength-f,u.duration=z[B-1]._cumultime-u.time,f=z[B-1]._cumullength,n.push(u),u={positions:[],attributes:[],time:z[B-1]._cumultime}):t=!0;if(!a||t)t=!1,x===w-1?(u.maneuverType="eVgManeuverTypeEnd",u.length=0,u.duration=0):(E=y.dataset,C=y.modality,v=y.destinationIndex,O=g[x+1],K=O.dataset,L=O.modality,
        J=O.destinationIndex,H=z[0]._svg.z,O=O.points[0]._svg.z,O<H?u.maneuverType="eVgManeuverTypeGoDown":O>H?u.maneuverType="eVgManeuverTypeGoUp":H===O&&E!==K?u.maneuverType="eVgManeuverTypeChangeLayer":C!==L?u.maneuverType="eVgManeuverTypeChangeModality":v!==J?u.maneuverType="eVgManeuverTypeWaypoint":console.log("This should not happen yet")),0===q&&"undefined"===typeof u.position&&console.log("BAD1"),0<q&&(u.position=z[z.length-1],u.height=u.position._svg.z*this.metersPerPixel,u.positions.push(u.position),
      u.position._routing.edgeAttributes&&u.attributes.push(u.position._routing.edgeAttributes)),u.dataset=y.dataset,u.destinationIndex=y.destinationIndex,u.modality=y.modality,u.duration=z[B-1]._cumultime-u.time,u.length=z[B-1]._cumullength-f,this._computeNearPlaces(u),n.push(u)}u=e.legs[e.legs.length-1];a=u.points[u.points.length-1]._cumultime;k=0;for(f=n.length;k<f;k++)u=n[k],n[k].totalTime=a,this._uniqueAndConvertAttributes(u),"undefined"===typeof n[k].duration&&console.log("fixme duration: "+k),"undefined"===
    typeof n[k].time&&console.log("fixme time: "+k),"undefined"===typeof n[k].length&&console.log("fixme length: "+k),n[k].icon=this._getIconName(n[k]);0===n.length&&(n=[{length:0,duration:0,maneuverType:"eVgManeuverTypeEnd",icon:"transit_instruction_end.png",destinationIndex:0}]);return{instructions:n,parameters:d,route:e,_algorithm:"intersectionAlgorithm"}};l.prototype._uniqueAndConvertAttributes=function(e){for(var d={},a=[],k=!1,l=0,f=e.attributes.length;l<f;l++)for(var g=e.attributes[l],n=0,v=g.length;n<
    v;n++){var q=g[n];void 0===d[q]&&(a.push(this.routingSolver.attributes[q]),k=d[q]=!0)}k&&(e.attributes=a)};return l});
  define("com/visioglobe/web/SVG3Loader",["./helpers/SvgUtils","./helpers/ExtrudeGeometry","com/visioglobe/common/utils/Utils","three"],function(e,n,l,m){var d=function(a){console.log("SVG3Loader");this.scene=new m.Scene;this.material=new m.MeshBasicMaterial({color:16777215,specular:13421772,vertexColors:m.VertexColors,transparent:!1});this.floors={};this.svgHeight=2048;this.geoinformation={meters_per_pixel:1};this.synchronousLoading=this.generateWalls=this.generateRoofs=!0;this.debug=!1};d.prototype.initialize=
    function(){this.debug&&console.log("initialize")};d.prototype.convertSVGTo3D=function(a){var d={};d.x=(a.x-this.svgHeight/2)*this.geoinformation.meters_per_pixel;d.y=(this.svgHeight/2-a.y)*this.geoinformation.meters_per_pixel;a.z&&(d.z=a.z);return d};d.prototype.convertPathToShape=function(a){var d=a.getAttribute("d");if("undefined"===typeof d)return null;var l=new m.Shape,f=l,g=new e.Transform;a.getAttribute("transform")&&(g=a.getAttribute("transform"),g=e.Transform.parse(g));a=null;var n,d=e.Parser.path(d);
    d.reset();for(var v,q,t,x=!1;!d.isEnd();)switch(d.nextCommand(),x&&(f=new m.Shape,l.holes.push(f),x=!1),d.command.toUpperCase()){case "Z":e.equalsPoints(n,a,.01)&&f.curves.splice(-1,1);break;case "M":v=d.getAsCurrentPoint().clone();g.multiplyVector(v);v=this.convertSVGTo3D(v);f.moveTo(v.x,v.y);for(a=n=v;!d.isCommandOrEnd();)v=d.getAsCurrentPoint().clone(),g.multiplyVector(v),v=this.convertSVGTo3D(v),e.equalsPoints(v,a,.01)||f.lineTo(v.x,v.y),a=v;break;case "L":for(;!d.isCommandOrEnd();)v=d.getAsCurrentPoint().clone(),
      g.multiplyVector(v),v=this.convertSVGTo3D(v),e.equalsPoints(v,a,.01)||f.lineTo(v.x,v.y),a=v;break;case "C":for(;!d.isCommandOrEnd();)v=d.getAsControlPoint().clone(),q=d.getAsControlPoint().clone(),t=d.getAsCurrentPoint().clone(),g.multiplyVector(v),v=this.convertSVGTo3D(v),g.multiplyVector(q),q=this.convertSVGTo3D(q),g.multiplyVector(t),t=this.convertSVGTo3D(t),f.bezierCurveTo(v.x,v.y,q.x,q.y,t.x,t.y);break;case "S":for(;!d.isCommandOrEnd();)v=d.getReflectedControlPoint().clone(),q=d.getAsControlPoint().clone(),
      t=d.getAsCurrentPoint().clone(),g.multiplyVector(v),v=this.convertSVGTo3D(v),g.multiplyVector(q),q=this.convertSVGTo3D(q),g.multiplyVector(t),t=this.convertSVGTo3D(t),f.bezierCurveTo(v.x,v.y,q.x,q.y,t.x,t.y);break;case "H":for(;!d.isCommandOrEnd();)q=d.getScalar(),v=d.current.clone(),v.x="h"===d.command?v.x+q:q,d.current.x=v.x,g.multiplyVector(v),v=this.convertSVGTo3D(v),f.lineTo(v.x,v.y);break;case "V":for(;!d.isCommandOrEnd();)q=d.getScalar(),v=d.current.clone(),v.y="v"===d.command?v.y+q:q,d.current.y=
      v.y,g.multiplyVector(v),v=this.convertSVGTo3D(v),f.lineTo(v.x,v.y);break;default:return null}return l};d.prototype.addPathToScene=function(a,d,l){var f=this.convertPathToShape(a);if(null===f||1>=f.curves.length)console.log("Cannot convert to shape.");else{var g=a.getAttribute("fill");void 0===g&&(g=d.color);var u=e.Parser.color(g),v,q,t,x,w,g=this.floors[l.floor],g=!1!==l.lod?g.lods[l.lod]:g.floorContentLOD,y=0;d.reflection?y=1:d.water&&(y=2);for(var z=y;g.children.length<y+1;)g.add(new m.Mesh(void 0,
    this.material));d.reflection?g.children[y].userData={reflection:!0}:d.water&&(g.children[y].userData={water:!0});if(this.generateRoofs){v={amount:d.thickness,steps:1,bevelEnabled:!1,generateSides:!1,generateTop:!0,generateBottom:!1};try{for(q=new n(f,v),q.computeBoundingBox(),t=new m.Color(u),x=0,w=q.faces.length;x<w;++x)q.faces[x].color=t}catch(B){console.log("ExtrudeGeometry failed",B);return}t=g.children[y].geometry.faces.length;g.children[y].geometry.merge(q);a=a.getAttribute("vg_id");"undefined"!==
  typeof a&&(x=new m.Vector3,x.addVectors(q.boundingBox.max,q.boundingBox.min),x.multiplyScalar(.5),l={id:a,floor:l.floor,originalColor:u,nbFaces:q.faces.length,faces_offset:t,position:x},g.userData.pickables=g.userData.pickables||[],g.userData.pickables.push(l))}if(this.generateWalls&&0<d.thickness&&!1!==d.wall_geometry){v={amount:d.thickness,steps:1,bevelEnabled:!1,generateSides:!0,generateTop:!1,generateBottom:!1};q=new n(f,v);q.computeVertexNormals();var C=new m.Color(u),E=new m.Color(u);d.wall_color_gradient&&
  (f=parseFloat(d.wall_color_gradient_top_ratio),isNaN(f)||C.multiplyScalar(f),d=parseFloat(d.wall_color_gradient_bottom_ratio),isNaN(bottom_ratio)||E.multiplyScalar(d));var H=["a","b","c"];x=0;for(w=q.faces.length;x<w;++x){var K=q.faces[x];Object.keys(H).forEach(function(a){K.vertexColors[a]=0<q.vertices[K[H[a]]].z?C:E})}g.children[z].geometry.merge(q)}}};d.prototype.addSvgPath=function(a,d,e){this.addPathToScene(a,d,e)};d.prototype.loadItem=function(a){this.debug&&console.log("loadItem");var d=a.element,
    l=a.info.type,f=d.getAttribute("onabort");f&&JSON.parse(f);d.getAttribute("id")&&d.setAttribute("vg_id",d.getAttribute("id"));if("vg-model"!==l&&"vg-image"!==l&&"vg-label"!==l)switch(d.name||d.localName){case "rect":e.convertRectToPath(d);this.addSvgPath(d,a.parameters,a.info);break;case "polygon":e.convertPolygonToPath(d);this.addSvgPath(d,a.parameters,a.info);break;case "polyline":e.convertPolygonToPath(d);this.addSvgPath(d,a.parameters,a.info);break;case "ellipse":e.convertEllipseToPath(d);this.addSvgPath(d,
    a.parameters,a.info);break;case "circle":e.convertCircleToPath(d);this.addSvgPath(d,a.parameters,a.info);break;case "path":this.addSvgPath(d,a.parameters,a.info)}};d.prototype.parseBoolean=function(a,d){return"undefined"===typeof a?d||!1:!1===a||"false"===a||"off"===a||"0"===a||0===a?!1:!0};d.prototype.loadSVG3=function(a,d,e){this.debug&&console.log("loadSVG3");a=a.querySelector("svg");this.svgHeight=parseInt(a.getAttribute("height"),10);var f=a.getAttribute("onabort"),f=JSON.parse(f);d&&d(f);"undefined"!==
  typeof f.builder_parameters&&"undefined"!==typeof f.builder_parameters.distance_coeff&&(f.geo.distance_coef=f.builder_parameters.distance_coeff);this.geoinformation=f.geo;this.scene.userData={svgHeight:this.svgHeight,geoinformation:this.geoinformation,proj4string:f.proj4string,offsetX:f.offsetX,offsetY:f.offsetY};this.debug&&console.log("height= ",this.svgHeight);var g=this,n=[];l.queryChildren(a,"g[id^=floor]").forEach(function(a){var d=a.getAttribute("id").substr(5),e=new m.Object3D,k=new m.Object3D;
    e.add(k);g.scene.add(e);e.userData={name:d};g.floors[d]={object:e,content:k,lods:{}};g.debug&&console.log("floor= ",d);l.queryChildren(a,"g[id^=lod]").forEach(function(a){var k=a.getAttribute("id").substr(3),r=new m.Object3D;e.add(r);r.userData={index:parseInt(k,10)};g.floors[d].lods[k]=r;g.debug&&console.log(" lod= ",k);l.queryChildren(a,"g").forEach(function(a){var e=a.getAttribute("id");g.debug&&console.log("  type",e);l.queryChildren(a,"*:not(.vghelper)").forEach(function(a){g.debug&&console.log("   child");
      var l={thickness:0,color:10526880};if("undefined"===typeof f.parameters.styles[e]||"undefined"===typeof f.parameters.styles[e].footprint||!0!==f.parameters.styles[e].footprint)f.parameters.styles[e]&&(l.thickness=parseFloat(f.parameters.styles[e].extrusion_height),l.color=f.parameters.styles[e].color,l.wall_geometry=g.parseBoolean(f.parameters.styles[e].wall_geometry,!1),l.wall_color_gradient=g.parseBoolean(f.parameters.styles[e].wall_color_gradient,!1),l.wall_color_gradient_top_ratio=parseFloat(f.parameters.styles[e].wall_color_gradient_top_ratio),
        l.wall_color_gradient_bottom_ratio=parseFloat(f.parameters.styles[e].wall_color_gradient_bottom_ratio),l.reflection=g.parseBoolean(f.parameters.styles[e].reflection),l.water=g.parseBoolean(f.parameters.styles[e].water)),n.push({element:a,parameters:l,info:{floor:d,lod:k,type:e}})})})})});if(this.synchronousLoading)return Object.keys(n).forEach(function(a){this.loadItem(n[a])},this),Promise.resolve();var v=0,q=Math.ceil(n.length/100),t=function(){for(var a=Math.min(n.length-v,q),d=0;d<a;++d)this.loadItem(n[v]),
    ++v;if(v===n.length)return e(1),Promise.resolve();e(v/n.length);return Promise.resolve().bind(this).call(t).delay(0)};return Promise.resolve().bind(this).call(t).delay(0)};d.prototype.getVgFile=function(a,d,e,f){a instanceof m.Scene||!f||(a.object.userData.proj4string=f.proj4string,a.object.userData.offsetX=f.offsetX,a.object.userData.offsetY=f.offsetY);d={scene:a,routing:d,pois:e};var g=function(a,d){Object.keys(a).forEach(function(e){a[e]=d.apply(this,[e,a[e]]);null!==a[e]&&"object"==typeof a[e]&&
  g(a[e],d)},this);return a};a instanceof m.Scene||g(d,function(a,d){"number"===typeof d&&(d=parseFloat(d.toFixed(1)));return d});return d};return d});
  define("com/visioglobe/web/helpers/SceneLoader",["three"],function(e){e.SceneLoader=function(n){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){};this.callbackSync=function(){};this.callbackProgress=function(){};this.geometryHandlers={};this.hierarchyHandlers={};this.addGeometryHandler("ascii",e.JSONLoader);this.manager=void 0!==n?n:e.DefaultLoadingManager};e.SceneLoader.prototype={constructor:e.SceneLoader,load:function(n,l,m,d){var a=this;(new e.XHRLoader(a.manager)).load(n,
      function(d){a.parse(JSON.parse(d),l,n)},m,d)},addGeometryHandler:function(e,l){this.geometryHandlers[e]={loaderClass:l}},addHierarchyHandler:function(e,l){this.hierarchyHandlers[e]={loaderClass:l}},parse:function(n,l,m){function d(a,d){return"relativeToHTML"==d?a:x+a}function a(){W.object?k(L.scene,W.object.children):k(L.scene,W.objects)}function k(a,f){var l,m,n,r,q,v;for(v in f){var u=L.objects[v],x=f[v];if(void 0===u){if(x.type&&x.type in t.hierarchyHandlers)void 0===x.loading&&(y=L.materials[x.material],
      x.loading=!0,t.hierarchyHandlers[x.type].loaderObject.load(d(x.url,W.urlBaseType),g(v,a,y,x)));else if(void 0!==x.geometry){if(w=L.geometries[x.geometry])y=L.materials[x.material],m=x.position,n=x.rotation,r=x.scale,l=x.matrix,q=x.quaternion,x.material||(y=new e.MultiMaterial(L.face_materials[x.geometry])),y instanceof e.MultiMaterial&&0===y.materials.length&&(y=new e.MultiMaterial(L.face_materials[x.geometry])),x.skin?u=new e.SkinnedMesh(w,y):x.morph?(u=new e.MorphAnimMesh(w,y),void 0!==x.duration&&
    (u.duration=x.duration),void 0!==x.time&&(u.time=x.time),void 0!==x.mirroredLoop&&(u.mirroredLoop=x.mirroredLoop),y.morphNormals&&w.computeMorphNormals()):u=new e.Mesh(w,y),u.name=v,l?(u.matrixAutoUpdate=!1,u.matrix.set(l[0],l[4],l[8],l[12],l[1],l[5],l[9],l[13],l[2],l[6],l[10],l[14],l[3],l[7],l[11],l[15]),u.matrix.decompose(u.position,u.quaternion,u.scale)):(u.position.fromArray(m),q?u.quaternion.fromArray(q):u.rotation.fromArray(n),u.scale.fromArray(r)),u.visible=x.visible,u.castShadow=x.castShadow,
      u.receiveShadow=x.receiveShadow,a.add(u),L.objects[v]=u}else if("AmbientLight"===x.type||"PointLight"===x.type||"DirectionalLight"===x.type||"SpotLight"===x.type||"HemisphereLight"===x.type){l=x.color;m=x.intensity;n=x.distance;r=x.position;q=x.rotation;switch(x.type){case "AmbientLight":E=new e.AmbientLight(l);break;case "PointLight":E=new e.PointLight(l,m,n);E.position.fromArray(r);break;case "DirectionalLight":E=new e.DirectionalLight(l,m);E.position.fromArray(x.direction);break;case "SpotLight":E=
      new e.SpotLight(l,m,n);E.angle=x.angle;E.position.fromArray(r);E.target.set(r[0],r[1]-n,r[2]);E.target.applyEuler(new e.Euler(q[0],q[1],q[2],"XYZ"));break;case "HemisphereLight":E=new e.DirectionalLight(l,m,n),E.target.set(r[0],r[1]-n,r[2]),E.target.applyEuler(new e.Euler(q[0],q[1],q[2],"XYZ"))}a.add(E);E.name=v;L.lights[v]=E;L.objects[v]=E}else"PerspectiveCamera"===x.type||"OrthographicCamera"===x.type?(m=x.position,n=x.rotation,q=x.quaternion,"PerspectiveCamera"===x.type?z=new e.PerspectiveCamera(x.fov,
      x.aspect,x.near,x.far):"OrthographicCamera"===x.type&&(z=new e.OrthographicCamera(x.left,x.right,x.top,x.bottom,x.near,x.far)),z.name=v,z.position.fromArray(m),void 0!==q?z.quaternion.fromArray(q):void 0!==n?z.rotation.fromArray(n):x.target&&z.lookAt((new e.Vector3).fromArray(x.target)),a.add(z),L.cameras[v]=z,L.objects[v]=z):(u=new e.Object3D,u.name=v,void 0!==x.matrix?(l=new e.Matrix4,l.fromArray(x.matrix),l.decompose(u.position,u.quaternion,u.scale)):(void 0!==x.position&&u.position.fromArray(x.position),
      void 0!==x.rotation?u.rotation.fromArray(x.rotation):void 0!==x.quaternion&&u.quaternion.fromArray(x.quaternion),void 0!==x.scale&&u.scale.fromArray(x.scale)),u.visible=void 0!==x.visible?x.visible:!1,a.add(u),L.objects[v]=u,L.empties[v]=u);if(u){if(void 0!==x.userData)for(var B in x.userData)u.userData[B]=x.userData[B];if(void 0!==x.groups)for(l=0;l<x.groups.length;l++)m=x.groups[l],void 0===L.groups[m]&&(L.groups[m]=[]),L.groups[m].push(v)}}void 0!==u&&void 0!==x.children&&k(u,x.children)}}function r(d,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  e,f,g,k){var l=k.rotation,m=k.quaternion,n=k.scale;d.position.fromArray(k.position);m?d.quaternion.fromArray(m):d.rotation.fromArray(l);d.scale.fromArray(n);g&&d.traverse(function(a){a.material=g});var r=void 0!==k.visible?k.visible:!0;d.traverse(function(a){a.visible=r});f.add(d);d.name=e;L.objects[e]=d;a()}function f(d){return function(e,f){e.name=d;L.geometries[d]=e;L.face_materials[d]=f;a();--H;t.onLoadComplete();v()}}function g(a,d,e,f){return function(g){r(g.content?g.content:g.dae?g.scene:
      g,a,d,e,f);--H;t.onLoadComplete();v()}}function u(a){return function(d,e){d.name=a;L.geometries[a]=d;L.face_materials[a]=e}}function v(){t.callbackProgress({totalModels:J,totalTextures:O,loadedModels:J-H,loadedTextures:O-K},L);t.onLoadProgress();if(0===H&&0===K){for(var a=0;a<R.length;a++){var d=R[a],f=L.objects[d.targetName];f?d.object.target=f:(d.object.target=new e.Object3D,L.scene.add(d.object.target));d.object.target.userData.targetInverse=d.object}l(L)}}function q(a,d){d(a);if(void 0!==a.children)for(var e in a.children)q(a.children[e],
      d)}var t=this,x=e.LoaderUtils.extractUrlBase(m),w,y,z,B,C,E,H,K,J,O,L,R=[],W=n,I;for(I in this.geometryHandlers)n=this.geometryHandlers[I].loaderClass,this.geometryHandlers[I].loaderObject=new n;for(I in this.hierarchyHandlers)n=this.hierarchyHandlers[I].loaderClass,this.hierarchyHandlers[I].loaderObject=new n;K=H=0;L={scene:new e.Scene,geometries:{},face_materials:{},materials:{},textures:{},objects:{},cameras:{},lights:{},fogs:{},empties:{},groups:{}};W.transform&&(I=W.transform.position,n=W.transform.rotation,
      m=W.transform.scale,I&&L.scene.position.fromArray(I),n&&L.scene.rotation.fromArray(n),m&&L.scene.scale.fromArray(m),I||n||m)&&(L.scene.updateMatrix(),L.scene.updateMatrixWorld());if(W.animations){L.scene.animations=[];for(var da in W.animations){var ya=W.animations[da];if("undefined"===typeof ya.duration){var ea={name:ya.name,duration:0,tracks:[]};ya.tracks.forEach(function(a){var d={name:a.name,times:[],values:[],type:"float"===a.type?"number":a.type};a.keys.forEach(function(a){var e=a.time/ya.fps;
      ea.duration=Math.max(ea.duration,e);d.times.push(e);d.values.push(a.value)});ea.tracks.push(d)});L.scene.animations.push(e.AnimationClip.parse(ea))}else L.scene.animations.push(e.AnimationClip.parse(ya))}}I=function(a){return function(){K-=a;v();t.onLoadComplete()}};for(var Fa in W.fogs)n=W.fogs[Fa],"linear"===n.type?B=new e.Fog(0,n.near,n.far):"exp2"===n.type&&(B=new e.FogExp2(0,n.density)),n=n.color,B.color.setRGB(n[0],n[1],n[2]),L.fogs[Fa]=B;for(var G in W.geometries)B=W.geometries[G],B.type in
    this.geometryHandlers&&(H+=1,t.onLoadStart());for(C in W.objects)q(W.objects[C],function(a){a.type&&a.type in t.hierarchyHandlers&&(H+=1,t.onLoadStart())});J=H;for(G in W.geometries)if(B=W.geometries[G],"cube"===B.type)w=new e.BoxGeometry(B.width,B.height,B.depth,B.widthSegments,B.heightSegments,B.depthSegments),w.name=G,L.geometries[G]=w;else if("plane"===B.type)w=new e.PlaneGeometry(B.width,B.height,B.widthSegments,B.heightSegments),w.name=G,L.geometries[G]=w;else if("sphere"===B.type)w=new e.SphereGeometry(B.radius,
      B.widthSegments,B.heightSegments),w.name=G,L.geometries[G]=w;else if("cylinder"===B.type)w=new e.CylinderGeometry(B.topRad,B.botRad,B.height,B.radSegs,B.heightSegs),w.name=G,L.geometries[G]=w;else if("torus"===B.type)w=new e.TorusGeometry(B.radius,B.tube,B.segmentsR,B.segmentsT),w.name=G,L.geometries[G]=w;else if("icosahedron"===B.type)w=new e.IcosahedronGeometry(B.radius,B.subdivisions),w.name=G,L.geometries[G]=w;else if(B.type in this.geometryHandlers){var Aa=this.geometryHandlers[B.type].loaderObject;
      Aa.load(d(B.url,W.urlBaseType),f(G))}else"Geometry"===B.type?(Aa=new e.JSONLoader,C=Aa.parse(B.data),C.geometry.name=B.uuid,L.geometries[B.uuid]=C.geometry):"embedded"===B.type&&(C=W.embeds[B.id],C.metadata=W.metadata,C&&(C=this.geometryHandlers.ascii.loaderObject.parse(C,""),u(G)(C.geometry,C.materials)));for(var Z in W.textures)if(G=W.textures[Z],Array.isArray(G.url))for(K+=G.url.length,C=0;C<G.url.length;C++)t.onLoadStart();else K+=1,t.onLoadStart();O=K;for(Z in W.textures){G=W.textures[Z];void 0!==
    G.mapping&&void 0!==e[G.mapping]&&(G.mapping=e[G.mapping]);if(Array.isArray(G.url)){C=G.url.length;B=[];for(da=0;da<C;da++)B[da]=d(G.url[da],W.urlBaseType);Aa=e.Loader.Handlers.get(B[0]);null!==Aa?(C=Aa.load(B,I(C)),void 0!==G.mapping&&(C.mapping=G.mapping)):(C=(new e.CubeTextureLoader).load(B,I(C)),C.mapping=G.mapping)}else{if(G.image){C=!1;for(da in W.images)if(W.images[da].uuid===G.image){C=W.images[da];break}C&&(G.url=C.url)}var va=d(G.url,W.urlBaseType),ga=I(1),Aa=e.Loader.Handlers.get(va);null!==
    Aa?C=Aa.load(va,ga):(C=new e.Texture,Aa=new e.ImageLoader,Aa.setCrossOrigin(""),function(a,d){Aa.load(va,function(e){e.toDataURL=function(){return d};a.image=e;a.needsUpdate=!0;ga()})}(C,G.url));void 0!==G.mapping&&(C.mapping=G.mapping);void 0!==e[G.minFilter]&&(C.minFilter=e[G.minFilter]);void 0!==e[G.magFilter]&&(C.magFilter=e[G.magFilter]);G.anisotropy&&(C.anisotropy=G.anisotropy);G.repeat&&(C.repeat.set(G.repeat[0],G.repeat[1]),1!==G.repeat[0]&&(C.wrapS=e.RepeatWrapping),1!==G.repeat[1]&&(C.wrapT=
      e.RepeatWrapping));G.offset&&C.offset.set(G.offset[0],G.offset[1]);G.wrap&&(B={repeat:e.RepeatWrapping,mirror:e.MirroredRepeatWrapping},void 0!==B[G.wrap[0]]&&(C.wrapS=B[G.wrap[0]]),void 0!==B[G.wrap[1]]&&(C.wrapT=B[G.wrap[1]]))}L.textures[Z]=C;G.loadedTexture=C}var sa,ca;for(sa in W.materials){Z=W.materials[sa];for(ca in Z.parameters)"envMap"===ca||"map"===ca||"lightMap"===ca||"bumpMap"===ca||"normalMap"===ca||"alphaMap"===ca?Z.parameters[ca]=L.textures[Z.parameters[ca]]:"shading"===ca?Z.parameters[ca]=
      "flat"===Z.parameters[ca]?e.FlatShading:e.SmoothShading:"side"===ca?Z.parameters[ca]="double"==Z.parameters[ca]?e.DoubleSide:"back"==Z.parameters[ca]?e.BackSide:e.FrontSide:"blending"===ca?Z.parameters[ca]=Z.parameters[ca]in e?e[Z.parameters[ca]]:e.NormalBlending:"combine"===ca?Z.parameters[ca]=Z.parameters[ca]in e?e[Z.parameters[ca]]:e.MultiplyOperation:"vertexColors"===ca?"face"==Z.parameters[ca]?Z.parameters[ca]=e.FaceColors:Z.parameters[ca]&&(Z.parameters[ca]=e.VertexColors):"wrapRGB"===ca?(I=
      Z.parameters[ca],Z.parameters[ca]=new e.Vector3(I[0],I[1],I[2])):"normalScale"===ca&&(I=Z.parameters[ca],Z.parameters[ca]=new e.Vector2(I[0],I[1]));if("undefined"===typeof Z.parameters){if(Z.map){C=!1;for(da in W.textures)if(W.textures[da].uuid===Z.map){C=W.textures[da];break}C&&(Z.map=C.loadedTexture)}sa=Z.uuid;y="MeshFaceMaterial"===Z.type||"MultiMaterial"===Z.type?Z.materials:new e[Z.type](Z)}else void 0!==Z.parameters.opacity&&1>Z.parameters.opacity&&(Z.parameters.transparent=!0),"undefined"!==
    typeof Z.parameters.ambient&&("undefined"===typeof Z.parameters.color&&(Z.parameters.color=Z.parameters.ambient),delete Z.parameters.ambient),"undefined"!==typeof Z.parameters.emissive&&("undefined"===typeof Z.parameters.color&&(Z.parameters.color=Z.parameters.emissive),delete Z.parameters.emissive),"undefined"!==typeof Z.parameters.reflectionMap&&delete Z.parameters.reflectionMap,y="MeshFaceMaterial"===Z.type||"MultiMaterial"===Z.type?Z.parameters.materials:new e[Z.type](Z.parameters);y.name=sa;
      L.materials[sa]=y}for(sa in W.materials)if(Z=W.materials[sa],Z.parameters&&Z.parameters.materials){ca=[];for(da=0;da<Z.parameters.materials.length;da++)ca.push(L.materials[Z.parameters.materials[da]]);L.materials[sa]=ca}a();L.cameras&&W.defaults&&W.defaults.camera&&(L.currentCamera=L.cameras[W.defaults.camera]);L.fogs&&W.defaults&&W.defaults.fog&&(L.scene.fog=L.fogs[W.defaults.fog]);t.callbackSync(L);v()}};return e.SceneLoader});
  define("com/visioglobe/common/SlotHelper",["com/visioglobe/common/utils/Utils","bluebird"],function(e,n){var l=function(){};l.compareVersions=function(e,d){for(var a=e.split(/\./),k=d.split(/\./),l=a.length,f=k.length;f<l;)k.push("0"),f++;for(;l<f;)a.push("0"),l++;for(f=0;f<l;f++){var g=parseInt(a[f],10),n=parseInt(k[f],10);if(g<n)return-1;if(g>n)return 1}return 0};l.checkSlotDescription=function(m,d,a,k){return new n(function(n,f){var g="string"===typeof a.sdkType?[a.sdkType]:a.sdkType,u=a.sdkVersion,
    v=a.minimumDataSDKVersion||a.sdkVersion,q=new Date;"undefined"!==typeof m.version&&1==m.version||f(Error("missing overall version or not equal to 1"));!0===k&&f(Error("error: slot.descrition refers to another slot description"));if(Array.isArray(m.maps)&&0<m.maps.length){var t=m.maps[0];"string"===typeof t.sdk_type&&-1!==g.indexOf(t.sdk_type)||f(Error("missing or wrong slot sdk_type: "+t.sdk_type));"undefined"===typeof t.sdk_version&&f(Error("missing slot attribute sdk_version"));"undefined"===typeof t.sdk_min_version&&
  (t.sdk_min_version=t.sdk_version);1==l.compareVersions(t.sdk_min_version,u)&&f(Error("data's minimum sdk_version "+t.sdk_min_version+" is higher than this SDK's version "+u+" Data too new, update SDK, or get different data"));-1==l.compareVersions(t.sdk_version,v)&&f(Error("data's sdk_version "+t["sdk.version"]+" is smaller than this SDK's minimumDataSDKVersion "+v+" Data is too old, update data"));"undefined"!==typeof t.expiry_date&&(g=new Date(t.expiry_date+" UTC"),isNaN(g.getTime())&&f(Error("Bad slot expiry_date: "+
    t.expiry_date)),g<q&&f(Error("map has expired on: "+t.expiry_date)));if("string"===typeof t.path){q=e.extendDeep({},d);g=d.path.replace(/\/[^/]+$/,"/");/\//.test(g)||(g="");u=/http|https|\/\//i;v=/^\/[^/]/;if(t.base_url)var x=t.base_url,g=u.test(x)||v.test(x)?x+"/"+t.path:g+x+"/"+t.path;else g+=t.path;t.name&&(q.mapName=t.name);q.path=g;n(q)}else f(Error("invalid slot.description: maps missing .path"))}else f(Error("invalid slot.description: missing maps, or not array or length == 0"));m=null})};
    return l});
  (function(e){function n(a,d,e){var l=0,m=[],n=0,q,t,v,w,x,y,z,B=!1,C=!1,J=[],E=[],Ba,Da=!1;e=e||{};q=e.encoding||"UTF8";Ba=e.numRounds||1;v=u(d,q);if(Ba!==parseInt(Ba,10)||1>Ba)throw Error("numRounds must a integer >= 1");y=function(d,e){return K(d,e,a)};z=function(d,e,f,g){var k,l;if("SHA-224"===a||"SHA-256"===a)k=(e+65>>>9<<4)+15,l=16;else throw Error("Unexpected error in SHA-2 implementation");for(;d.length<=k;)d.push(0);d[e>>>5]|=128<<24-e%32;d[k]=e+f;f=d.length;for(e=0;e<f;e+=l)g=K(d.slice(e,
    e+l),g,a);if("SHA-224"===a)d=[g[0],g[1],g[2],g[3],g[4],g[5],g[6]];else if("SHA-256"===a)d=g;else throw Error("Unexpected error in SHA-2 implementation");return d};if("SHA-224"===a)x=512,w=224;else if("SHA-256"===a)x=512,w=256;else throw Error("Chosen SHA variant is not supported");t=H(a);this.setHMACKey=function(d,e,f){var g;if(!0===C)throw Error("HMAC key already set");if(!0===B)throw Error("Cannot set HMAC key after finalizing hash");if(!0===Da)throw Error("Cannot set HMAC key after calling update");
    q=(f||{}).encoding||"UTF8";e=u(e,q)(d);d=e.binLen;e=e.value;g=x>>>3;f=g/4-1;if(g<d/8){for(e=z(e,d,0,H(a));e.length<=f;)e.push(0);e[f]&=4294967040}else if(g>d/8){for(;e.length<=f;)e.push(0);e[f]&=4294967040}for(d=0;d<=f;d+=1)J[d]=e[d]^909522486,E[d]=e[d]^1549556828;t=y(J,t);l=x;C=!0};this.update=function(a){var d,e,f,g=0,k=x>>>5;d=v(a,m,n);a=d.binLen;e=d.value;d=a>>>5;for(f=0;f<d;f+=k)g+x<=a&&(t=y(e.slice(f,f+k),t),g+=x);l+=g;m=e.slice(g>>>5);n=a%x;Da=!0};this.getHash=function(d,e){var q,u,v;if(!0===
    C)throw Error("Cannot call getHash after setting HMAC key");v=g(e);switch(d){case "HEX":q=function(a){return k(a,v)};break;case "B64":q=function(a){return r(a,v)};break;case "BYTES":q=f;break;default:throw Error("format must be HEX, B64, or BYTES");}if(!1===B)for(t=z(m,n,l,t),u=1;u<Ba;u+=1)t=z(t,w,0,H(a));B=!0;return q(t)};this.getHMAC=function(d,e){var q,u,v;if(!1===C)throw Error("Cannot call getHMAC without first setting HMAC key");v=g(e);switch(d){case "HEX":q=function(a){return k(a,v)};break;
    case "B64":q=function(a){return r(a,v)};break;case "BYTES":q=f;break;default:throw Error("outputFormat must be HEX, B64, or BYTES");}!1===B&&(u=z(m,n,l,t),t=y(E,H(a)),t=z(u,w,x,t));B=!0;return q(t)}}function l(){}function m(a,d,e){var f=a.length,g,k,l,m,n;d=d||[0];e=e||0;n=e>>>3;if(0!==f%2)throw Error("String of HEX type must be in byte increments");for(g=0;g<f;g+=2){k=parseInt(a.substr(g,2),16);if(isNaN(k))throw Error("String of HEX type contains invalid characters");m=(g>>>1)+n;for(l=m>>>2;d.length<=
  l;)d.push(0);d[l]|=k<<8*(3-m%4)}return{value:d,binLen:4*f+e}}function d(a,d,e){var f=[],g,k,l,m,f=d||[0];e=e||0;k=e>>>3;for(g=0;g<a.length;g+=1)d=a.charCodeAt(g),m=g+k,l=m>>>2,f.length<=l&&f.push(0),f[l]|=d<<8*(3-m%4);return{value:f,binLen:8*a.length+e}}function a(a,d,e){var f=[],g=0,k,l,m,n,r,q,f=d||[0];e=e||0;d=e>>>3;if(-1===a.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");l=a.indexOf("=");a=a.replace(/\=/g,"");if(-1!==l&&l<a.length)throw Error("Invalid '=' found in base-64 string");
    for(l=0;l<a.length;l+=4){r=a.substr(l,4);for(m=n=0;m<r.length;m+=1)k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(r[m]),n|=k<<18-6*m;for(m=0;m<r.length-1;m+=1){q=g+d;for(k=q>>>2;f.length<=k;)f.push(0);f[k]|=(n>>>16-8*m&255)<<8*(3-q%4);g+=1}}return{value:f,binLen:8*g+e}}function k(a,d){var e="",f=4*a.length,g,k;for(g=0;g<f;g+=1)k=a[g>>>2]>>>8*(3-g%4),e+="0123456789abcdef".charAt(k>>>4&15)+"0123456789abcdef".charAt(k&15);return d.outputUpper?e.toUpperCase():e}function r(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           d){var e="",f=4*a.length,g,k,l;for(g=0;g<f;g+=3)for(l=g+1>>>2,k=a.length<=l?0:a[l],l=g+2>>>2,l=a.length<=l?0:a[l],l=(a[g>>>2]>>>8*(3-g%4)&255)<<16|(k>>>8*(3-(g+1)%4)&255)<<8|l>>>8*(3-(g+2)%4)&255,k=0;4>k;k+=1)8*g+6*k<=32*a.length?e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l>>>6*(3-k)&63):e+=d.b64Pad;return e}function f(a){var d="",e=4*a.length,f,g;for(f=0;f<e;f+=1)g=a[f>>>2]>>>8*(3-f%4)&255,d+=String.fromCharCode(g);return d}function g(a){var d={outputUpper:!1,b64Pad:"="};
    a=a||{};d.outputUpper=a.outputUpper||!1;!0===a.hasOwnProperty("b64Pad")&&(d.b64Pad=a.b64Pad);if("boolean"!==typeof d.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!==typeof d.b64Pad)throw Error("Invalid b64Pad formatting option");return d}function u(e,f){var g;switch(f){case "UTF8":case "UTF16BE":case "UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE");}switch(e){case "HEX":g=m;break;case "TEXT":g=function(a,d,e){var g=[],k=[],l=0,m,n,r,
    q,t,g=d||[0];d=e||0;r=d>>>3;if("UTF8"===f)for(m=0;m<a.length;m+=1)for(e=a.charCodeAt(m),k=[],128>e?k.push(e):2048>e?(k.push(192|e>>>6),k.push(128|e&63)):55296>e||57344<=e?k.push(224|e>>>12,128|e>>>6&63,128|e&63):(m+=1,e=65536+((e&1023)<<10|a.charCodeAt(m)&1023),k.push(240|e>>>18,128|e>>>12&63,128|e>>>6&63,128|e&63)),n=0;n<k.length;n+=1){t=l+r;for(q=t>>>2;g.length<=q;)g.push(0);g[q]|=k[n]<<8*(3-t%4);l+=1}else if("UTF16BE"===f||"UTF16LE"===f)for(m=0;m<a.length;m+=1){e=a.charCodeAt(m);"UTF16LE"===f&&
  (n=e&255,e=n<<8|e>>>8);t=l+r;for(q=t>>>2;g.length<=q;)g.push(0);g[q]|=e<<8*(2-t%4);l+=2}return{value:g,binLen:8*l+d}};break;case "B64":g=a;break;case "BYTES":g=d;break;default:throw Error("format must be HEX, TEXT, B64, or BYTES");}return g}function v(a,d){return a>>>d|a<<32-d}function q(a,d,e){return a&d^~a&e}function t(a,d,e){return a&d^a&e^d&e}function x(a){return v(a,2)^v(a,13)^v(a,22)}function w(a){return v(a,6)^v(a,11)^v(a,25)}function y(a){return v(a,7)^v(a,18)^a>>>3}function z(a){return v(a,
    17)^v(a,19)^a>>>10}function B(a,d){var e=(a&65535)+(d&65535);return((a>>>16)+(d>>>16)+(e>>>16)&65535)<<16|e&65535}function C(a,d,e,f){var g=(a&65535)+(d&65535)+(e&65535)+(f&65535);return((a>>>16)+(d>>>16)+(e>>>16)+(f>>>16)+(g>>>16)&65535)<<16|g&65535}function E(a,d,e,f,g){var k=(a&65535)+(d&65535)+(e&65535)+(f&65535)+(g&65535);return((a>>>16)+(d>>>16)+(e>>>16)+(f>>>16)+(g>>>16)+(k>>>16)&65535)<<16|k&65535}function H(a){var d,e;d=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,
    3204075428];e=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];switch(a){case "SHA-224":a=d;break;case "SHA-256":a=e;break;case "SHA-384":a=[new l,new l,new l,new l,new l,new l,new l,new l];break;case "SHA-512":a=[new l,new l,new l,new l,new l,new l,new l,new l];break;default:throw Error("Unknown SHA variant");}return a}function K(a,d,e){var f,g,k,l,m,n,r,u,v,H,K,sa,ca,ta,Ba,Da,ua,S,ha,Ia,ba,xa,ka=[],Ra;if("SHA-224"===e||"SHA-256"===e)H=64,sa=1,xa=Number,ca=
    B,ta=C,Ba=E,Da=y,ua=z,S=x,ha=w,ba=t,Ia=q,Ra=J;else throw Error("Unexpected error in SHA-2 implementation");e=d[0];f=d[1];g=d[2];k=d[3];l=d[4];m=d[5];n=d[6];r=d[7];for(K=0;K<H;K+=1)16>K?(v=K*sa,u=a.length<=v?0:a[v],v=a.length<=v+1?0:a[v+1],ka[K]=new xa(u,v)):ka[K]=ta(ua(ka[K-2]),ka[K-7],Da(ka[K-15]),ka[K-16]),u=Ba(r,ha(l),Ia(l,m,n),Ra[K],ka[K]),v=ca(S(e),ba(e,f,g)),r=n,n=m,m=l,l=ca(k,u),k=g,g=f,f=e,e=ca(u,v);d[0]=ca(e,d[0]);d[1]=ca(f,d[1]);d[2]=ca(g,d[2]);d[3]=ca(k,d[3]);d[4]=ca(l,d[4]);d[5]=ca(m,
    d[5]);d[6]=ca(n,d[6]);d[7]=ca(r,d[7]);return d}var J;J=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,
    3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];"function"===typeof define&&define.amd?define("sha256",[],function(){return n}):"undefined"!==typeof exports?"undefined"!==typeof module&&module.exports?module.exports=exports=n:exports=n:e.jsSHA=n})(this);
  define("com/visioglobe/common/utils/MapChecker",["sha256"],function(e){return{check:function(n,l,m){m=m||{};if(void 0===n||void 0===n.pois||void 0===n.pois.hedVersion)return!0;var d=JSON.stringify({expiration:n.expiration,nbRoutingNodes:n.routing?n.routing.nodes.length:0,nbRoutingEdges:n.routing?n.routing.edges.length:0}),a=new e("SHA-256","TEXT");a.update(l+d);hashedCredential=a.getHash("HEX");if(hashedCredential!==n.credentials)return m.message="map integrity failure",!1;if("never"===n.expiration)return!0;
      n=new Date(n.expiration);return new Date>n?(m.message="map expired on "+n,!1):!0}}});
  define("com/visioglobe/common/Notifications",[],function(){var e=function(){this.onNotificationHandlers={};this.onStickyNotification={}};e.prototype.on=function(e,l,m){m=m||!1;var d=e.split(/ /);1!=d.length?Object.keys(d).forEach(function(a){this.on(d[a],l)},this):("undefined"===typeof this.onNotificationHandlers[e]&&(this.onNotificationHandlers[e]=[]),this.onNotificationHandlers[e].push({callback:l,once:m}),"undefined"!==typeof this.onStickyNotification[e]&&l(this.onStickyNotification[e].event))};
    e.prototype.off=function(e,l){var m=e.split(/ /);if(1!=m.length)Object.keys(m).forEach(function(a){this.off(m[a],l)},this);else{if("undefined"===typeof this.onNotificationHandlers[e])return!1;if("undefined"===typeof l)return this.onNotificationHandlers[e]=[],!0;for(var d=this.onNotificationHandlers[e],a=0,k=d.length;a<k;++a)if(d[a].callback===l)return d.splice(a,1),!0;return!1}};e.prototype.trigger=function(e,l,m){var d=e.split(/ /),a;if(1!=d.length)Object.keys(d).forEach(function(e){a=this.trigger(d[e],
      l,m);if(!1===a)return!1},this);else if(m&&(this.onStickyNotification[e]={event:k}),"undefined"!==typeof this.onNotificationHandlers[e]){for(var k={type:e,args:l},r=this.onNotificationHandlers[e],f=[],g=0,u=r.length;g<u;++g)f.push(r[g]);g=0;for(u=f.length;g<u;++g)if(r=f[g],a=r.callback(k),r.once&&this.off(e,r.function),!1===a)return!1}};return e});
  define("com/visioglobe/common/Statistics",["require","com/visioglobe/common/utils/Utils"],function(e){var n=e("com/visioglobe/common/utils/Utils");return function(e){this.mapviewer=e;this.sendingData=!1;this.statURL="https://s.visioglobe.com/stats/SDKStatLogger.php";this.secretCode="L3sStatsS3r0ntHash33s";this.logVersion=this.dbVersion=1;this.lastLogTime=n.now();this.minLogPositionInterval=30;this.delayedLogging=void 0;this.statDB={};this.shortDelay=6E4;this.longDelay=9E5;this.sendDelay=this.shortDelay;
    this.oldLogDelay=604800;this.sendDelayWhenNoFreshData=this.longDelay;this.appID=!1;this.statDB.indexedDB={};this.statDB.indexedDB.db=null;var m=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB;"webkitIndexedDB"in window&&!("IDBKeyRange"in window)&&(window.IDBKeyRange=window.webkitIDBKeyRange);"webkitIndexedDB"in window&&!("IDBTransaction"in window)&&(window.IDBTransaction=window.webkitIDBTransaction);var d=this;this.statDB.indexedDB.db=null;this.statDB.indexedDB.onerror=function(a){console.log(a)};
    this.statDB.indexedDB.open=function(){var a=m.open("stats",d.dbVersion);a.onupgradeneeded=function(d){a.result.createObjectStore("stat",{keyPath:"timestamp"})};a.onsuccess=function(a){d.statDB.indexedDB.db=a.target.result;d.logStat("sessionInfo",null)};a.onfailure=d.statDB.indexedDB.onerror};this.statDB.indexedDB.addStat=function(a){var e=d.statDB.indexedDB.db;null!==e&&void 0!==e&&(a=e.transaction("stat","readwrite").objectStore("stat").put(a),a.onsuccess=function(a){d.sendingData||(setTimeout(d.sendStats,
      d.sendDelay),d.sendingData=!0)},a.onerror=function(a){console.error("Error Adding an item: ",a)})};this.statDB.indexedDB.getAllStatItems=function(a){var e=d.statDB.indexedDB.db.transaction("stat","readwrite").objectStore("stat"),l=IDBKeyRange.lowerBound(0),e=e.openCursor(l),f=[],g=[];e.onsuccess=function(e){e=e.target.result;0==!!e?0<f.length?a(f,g):d.sendingData||(setTimeout(d.sendStats,d.sendDelay),d.sendingData=!0):(f.push(e.value),g.push(e.primaryKey),e.continue())};e.onerror=d.statDB.indexedDB.onerror};
    this.statDB.indexedDB.getOldStatItems=function(a){var e=d.statDB.indexedDB.db.transaction("stat","readwrite").objectStore("stat"),l=IDBKeyRange.upperBound((new Date).getTime()-d.oldLogDelay),e=e.openCursor(l),f=[],g=[];e.onsuccess=function(e){e=e.target.result;0==!!e?0<f.length?a(g):d.sendingData||(setTimeout(d.sendStats,d.sendDelay),d.sendingData=!0):(f.push(e.value),g.push(e.primaryKey),e.continue())};e.onerror=d.statDB.indexedDB.onerror};this.statDB.indexedDB.deleteStats=function(a){for(var e=
      a.length,l=d.statDB.indexedDB.db.transaction("stat","readwrite").objectStore("stat"),f=0;f<a.length;f++){var g=a[f],m=l.delete(g);m.onsuccess=function(a){e--;0!==e||d.sendingData||(setTimeout(d.sendStats,d.sendDelay),d.sendingData=!0)};m.onerror=function(a){console.error("Error deleteing "+g+": ",a)}}};this.sendData=function(a,e){var l=JSON.stringify(a),f=new FormData;f.append("compress",!1);f.append("log",l);f.append("hash",n.sha1(l+d.secretCode));f.append("sdk_timestamp",n.now());null!==n.getCookie("sdk_stat_session_id")&&
    f.append("sdk_stat_session_id",n.getCookie("sdk_stat_session_id"));n.request(d.statURL,"POST",f,{crossDomain:!0}).then(function(a){a=JSON.parse(a.response);n.setCookie("sdk_stat_session_id",a.sdk_stat_session_id,30);d.statDB.indexedDB.deleteStats(e);d.sendDelay=d.shortDelay}).catch(function(a){console.log("error :(",a.message);d.sendDelay=d.longDelay;d.statDB.indexedDB.getOldStatItems(d.statDB.indexedDB.deleteStats)})};this.sendStats=function(){d.sendingData=!1;d.statDB.indexedDB.getAllStatItems(d.sendData)};
    this.lastData=this.lastType=void 0;this.logStatCaller=function(){void 0!==d.lastType&&void 0!==d.lastData&&d.logStat(d.lastType,d.lastData)};this.logStat=function(a,e){if("sessionInfo"===a){var l={},l=window.navigator,l={type:a,appCodeName:l.appCodeName,appName:l.appName,appVersion:l.appVersion,language:l.language,platform:l.platform,product:l.product,productSub:l.productSub,userAgent:l.userAgent,vendor:l.vendor,vendorSub:l.vendorSub,timestamp:n.now(),sdkVersion:d.mapviewer.version,sdkName:"web",
      version:d.logVersion,platformVersion:l.oscpu};void 0!==d.mapParameters&&(l.mapPath=d.mapParameters.path||d.mapParameters.svg||d.mapParameters.mapContentString,void 0!==d.mapviewer.mapName&&!1!==d.mapviewer.mapName&&(l.mapName=d.mapviewer.mapName));d.appID&&(l.appID=d.appID);d.statDB.indexedDB.addStat(l)}"mapLoaded"===a&&(l={type:a,mapPath:e.path||"",timestamp:n.now()},d.statDB.indexedDB.addStat(l));if("position"===a){void 0!==d.delayedLogging&&clearTimeout(d.delayedLogging);l=n.now();if(l-d.lastLogTime<
      d.minLogPositionInterval){d.lastType=a;d.lastData=e;d.delayedLogging=setTimeout(d.logStatCaller,1E3*(d.minLogPositionInterval+1));return}d.lastLogTime=l;l={type:a,id:e.id,position:d.mapviewer.convertPointToLatLon(e.position),floor:d.mapviewer.getCurrentFloor(),timestamp:n.now()};void 0!==d.mapParameters&&(l.mapPath=d.mapParameters.path||"",void 0!==d.mapviewer.mapName&&!1!==d.mapviewer.mapName&&(l.mapName=d.mapviewer.mapName));d.statDB.indexedDB.addStat(l)}if("routing"===a){var f=void 0,g=void 0;
      "string"===typeof e.src?f={id:e.src}:"object"===typeof e.src?void 0!==e.src.x&&void 0!==e.src.y&&(l={position:d.mapviewer.convertPointToLatLon(e.src)},l.position.floor=d.mapviewer.getCurrentFloor(),f=l):f=e.src;if("string"===typeof e.dst)g={id:e.dst};else if("array"===typeof e.dst||"object"===typeof e.dst||0<e.dst.length)for(var g=[],m=0;m<e.dst.length;m++)"string"===typeof e.dst[m]?g.push({id:e.dst[m]}):"object"===typeof e.dst[m]?void 0!==e.dst[m].x&&void 0!==e.dst[m].y&&(l={position:d.mapviewer.convertPointToLatLon(e.dst[m])},
        l.position.floor=d.mapviewer.getCurrentFloor(),g.push(l)):g.push(e.dst[m]);else"object"===typeof e.dst?void 0!==e.dst.x&&void 0!==e.dst.y&&(l={position:d.mapviewer.convertPointToLatLon(e.dst)},l.position.floor=d.mapviewer.getCurrentFloor(),g=[l]):g=e.dst;l={type:a,src:f,dst:g,timestamp:n.now()};void 0!==d.mapParameters&&(l.mapPath=d.mapParameters.path||"",void 0!==d.mapviewer.mapName&&!1!==d.mapviewer.mapName&&(l.mapName=d.mapviewer.mapName));d.statDB.indexedDB.addStat(l)}"selectPlace"===a&&(l={type:a,
      id:e.vg.id,floor:e.vg.floor,timestamp:n.now()},void 0!==d.mapParameters&&(l.mapPath=d.mapParameters.path||"",void 0!==d.mapviewer.mapName&&!1!==d.mapviewer.mapName&&(l.mapName=d.mapviewer.mapName)),d.statDB.indexedDB.addStat(l))};this.getURL=function(){return d.statURL};this.setURL=function(a){d.statURL=a;d.logStat("sessionInfo",null)};this.getAppID=function(){return d.appID};this.setAppID=function(a){d.appID=a;d.logStat("sessionInfo",null)};this.setMapParameters=function(a){d.mapParameters=a};this.statDB.indexedDB.open()}});
  define("com/visioglobe/web/TiledImage",["three","underscoretiny"],function(e,n){var l=function(l,d){d.overlay=void 0!==d.overlay?d.overlay:!1;this.options=d;this.mapviewer=d.mapviewer;this.spriteLayer=this.mapviewer.scene;this.floor=this.mapviewer.getFloor(this.options.floor);if(null===this.floor)return console.log("Warning: POI was not created, required floor doesn't exist."),null;var a;if(null!==this.floor){a="undefined"!==typeof this.options.lod?this.floor.getLOD(this.options.lod):this.floor.floorContentLOD;
    if(!this.options.overlay&&!a)return null;this.spriteLayer=a.contentNode}this.textureLoader=this.mapviewer.textureLoader;this.planeGeometry=new e.PlaneGeometry(1,1);this.updateQuadtree=this.useTexture=!0;this.distanceCoef=.25;this.prunedTilesByLevel=[];for(var k=0;k<=this.options.depth;++k)a=n.filter(this.options.pruned,function(a){return a[2]===k}),this.prunedTilesByLevel.push(a);this.camera=l;this.rootNode=this.loadTile(0,0,0);this.rootNode.rotation.set(0,0,this.options.angle*Math.PI/180);this.rootNode.scale.x=
    this.options.scale.x;this.rootNode.scale.y=this.options.scale.y;this.rootNode.scale.z=this.options.scale.z;this.rootNode.position.x=this.options.position.x;this.rootNode.position.y=this.options.position.y;this.rootNode.position.z=this.options.position.z;this.rootNode.updateMatrix();this.rootNode.updateMatrixWorld(!0);this.floor.tiledImages||(this.floor.tiledImages=[]);this.update()};l.prototype.constructor=l;l.prototype.loadTile=function(l,d,a){var k=this,n=new e.Object3D;n.visible=!1;var f=this.textureLoader.load(this.options.name+
    ""+a+"/"+l+"-"+d+".png",function(a){return function(){a.quadtree.loaded=!0;k.mapviewer.mustUpdateCameraObjects=!0;k.mapviewer.requestRedraw()}}(n),function(){},function(a){return function(){a.quadtree.loaded=!1}}(n)),g=new e.MeshBasicMaterial({wireframe:this.mapviewer.wireframe,color:16777215,side:e.FrontSide,transparent:!0,depthWrite:!1,depthTest:this.options.overlay?!1:this.mapviewer.useDepthWriteForPOIs});g.originalMap=f;g.map=g.originalMap;f=new e.Mesh(this.planeGeometry,g);f.renderOrder=-this.mapviewer.constructor.renderDepthPOI;
    this.options.overlay&&(f.renderOrder=-this.mapviewer.constructor.renderDepthPOIOverlay);f.visible=!1;g=Math.pow(2,a);f.scale.x=1/g;f.scale.y=1/g;f.scale.z=1/g;var u=.5/g*(g-1);f.position.x=l/g-u;f.position.y=-d/g+u;n.add(f);n.quadtree={x:l,y:d,z:a};return n};l.prototype.refineQuadtree=function(e){var d=this,a=function(a){for(var d=!0,e=1;e<a.children.length;++e)if(!a.children[e].quadtree.loaded){d=!1;break}return d},k=function(a,e,f){return d.prunedTilesByLevel[f].find(function(d){return d[0]===a&&
    d[1]===e})?!0:0===f?!1:k(parseInt(a/2),parseInt(e/2),f-1)},l=function(a,e,f,g){k(e,f,g)||(e=d.loadTile(e,f,g),a.add(e),e.updateMatrixWorld(!0))},f=e.children[0].getWorldPosition(),g=e.children[0].getWorldScale(),f=d.camera.getWorldPosition().distanceTo(f)*d.distanceCoef<g.x;if(e.quadtree.z<d.options.depth&&f)if(e.isQueried||(l(e,2*e.quadtree.x+0,2*e.quadtree.y+0,e.quadtree.z+1),l(e,2*e.quadtree.x+1,2*e.quadtree.y+0,e.quadtree.z+1),l(e,2*e.quadtree.x+0,2*e.quadtree.y+1,e.quadtree.z+1),l(e,2*e.quadtree.x+
    1,2*e.quadtree.y+1,e.quadtree.z+1),e.isQueried=!0),a(e))for(e.visible=!0,e.children[0].visible=!1,a=1;a<e.children.length;++a)this.refineQuadtree(e.children[a]);else for(e.visible=!0,e.children[0].visible=!0,a=1;a<e.children.length;++a)e.children[a].visible=!1;else for(e.visible=!0,e.children[0].visible=!0,a=1;a<e.children.length;++a)e.children[a].visible=!1};l.prototype.update=function(){this.updateQuadtree&&this.refineQuadtree(this.rootNode)};l.prototype.add=function(){-1===this.spriteLayer.children.indexOf(this.rootNode)&&
  this.spriteLayer.add(this.rootNode);-1===this.floor.tiledImages.indexOf(this)&&this.floor.tiledImages.push(this)};l.prototype.remove=function(){this.spriteLayer.remove(this.rootNode);var e=this.floor.tiledImages.indexOf(this);-1!==e&&this.floor.tiledImages.splice(e,1)};return l});define("text!com/visioglobe/web/shaders/depth.frag",[],function(){return"varying vec3 vPos;void main(){float a=vPos.z;float b=clamp(1.0-a/5.0,0.0,1.0);gl_FragColor=vec4(vec3(b),1.0);}"});
  define("text!com/visioglobe/web/shaders/depth.vert",[],function(){return"varying vec3 vPos;void main(){vPos=position;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}"});define("text!com/visioglobe/web/shaders/water.frag",[],function(){return"float a(const in vec4 b){const vec4 c=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);float d=dot(b,c);return d;}varying vec2 vUv;varying vec3 vPos;varying vec3 vColor;uniform sampler2D tDiffuse;uniform sampler2D tDepth;uniform sampler2D tNoise;uniform float viewWidth;uniform float viewHeight;uniform vec3 uColor;uniform float near;uniform float far;uniform float time;uniform vec3 eye;uniform vec3 sunDirection;uniform vec3 sunColor;vec4 e(vec2 f){vec2 g=(f/103.0)+vec2(time/17.0,time/29.0);vec2 h=f/107.0-vec2(time/-19.0,time/31.0);vec2 i=f/vec2(897.0,983.0)+vec2(time/101.0,time/97.0);vec2 j=f/vec2(991.0,877.0)-vec2(time/109.0,time/-113.0);vec4 k=(texture2D(tNoise,g))+(texture2D(tNoise,h))+(texture2D(tNoise,i))+(texture2D(tNoise,j));return k*0.5-1.0;}void l(const vec3 m,const vec3 n,float o,float p,float q,inout vec3 r,inout vec3 s){vec3 t=normalize(reflect(-sunDirection,m));float u=max(0.0,dot(n,t));s+=pow(u,o)*sunColor*p;r+=max(dot(sunDirection,m),0.0)*sunColor*q;}void main(){vec2 v=gl_FragCoord.xy*vec2(1.0/viewWidth,1.0/viewHeight);vec4 w=texture2D(tDepth,v);float d=w.x;float x=d*0.5;vec4 k=e(vPos.xy*4.0);vec3 m=normalize(k.xzy*vec3(2.0,1.0,2.0));vec3 q=vec3(0.0);vec3 y=vec3(0.0);vec3 z=eye-vPos;vec3 A=normalize(z);l(m,A,100.0,2.0,0.5,q,y);vec4 B=texture2D(tDiffuse,v+m.xz*(1.0-w.x)*0.025);vec3 C=vColor;gl_FragColor=vec4(mix(C.xyz,B.xyz,0.5),1.0);}"});
  define("text!com/visioglobe/web/shaders/water.vert",[],function(){return"attribute vec3 color;varying vec2 vUv;varying vec3 vPos;varying vec3 vColor;void main(){vUv=uv;vPos=position;vColor=color;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}"});
  (function(e,n,l,m){function d(a,d,e){return setTimeout(u(a,e),d)}function a(a,d,e){return Array.isArray(a)?(k(a,e[d],e),!0):!1}function k(a,d,e){var f;if(a)if(a.forEach)a.forEach(d,e);else if(a.length!==m)for(f=0;f<a.length;)d.call(e,a[f],f,a),f++;else for(f in a)a.hasOwnProperty(f)&&d.call(e,a[f],f,a)}function r(a,d,e){for(var f=Object.keys(d),g=0;g<f.length;){if(!e||e&&a[f[g]]===m)a[f[g]]=d[f[g]];g++}return a}function f(a,d){return r(a,d,!0)}function g(a,d,e){d=d.prototype;var f;f=a.prototype=Object.create(d);
    f.constructor=a;f._super=d;e&&r(f,e)}function u(a,d){return function(){return a.apply(d,arguments)}}function v(a,d){return"function"==typeof a?a.apply(d?d[0]||m:m,d):a}function q(a,d,e){k(w(d),function(d){a.addEventListener(d,e,!1)})}function t(a,d,e){k(w(d),function(d){a.removeEventListener(d,e,!1)})}function x(a,d){for(;a;){if(a==d)return!0;a=a.parentNode}return!1}function w(a){return a.trim().split(/\s+/g)}function y(a,d,e){if(a.indexOf&&!e)return a.indexOf(d);for(var f=0;f<a.length;){if(e&&a[f][e]==
    d||!e&&a[f]===d)return f;f++}return-1}function z(a){return Array.prototype.slice.call(a,0)}function B(a,d,e){for(var f=[],g=[],k=0;k<a.length;){var l=d?a[k][d]:a[k];0>y(g,l)&&f.push(a[k]);g[k]=l;k++}e&&(f=d?f.sort(function(a,e){return a[d]>e[d]}):f.sort());return f}function C(a,d){for(var e,f=d[0].toUpperCase()+d.slice(1),g=0;g<Q.length;){e=(e=Q[g])?e+f:d;if(e in a)return e;g++}return m}function E(a){a=a.ownerDocument;return a.defaultView||a.parentWindow}function H(a,d){var e=this;this.manager=a;
    this.callback=d;this.element=a.element;this.target=a.options.inputTarget;this.domHandler=function(d){v(a.options.enable,[a])&&e.handler(d)};this.init()}function K(a){var d=a.options.inputClass;return new (d?d:ab?ya:wb?Fa:aa?Aa:da)(a,J)}function J(a,d,e){var f=e.pointers.length,g=e.changedPointers.length,k=d&1&&0===f-g;e.isFirst=!!k;e.isFinal=!!(d&12&&0===f-g);k&&(a.session={});e.eventType=d;d=a.session;f=e.pointers;g=f.length;d.firstInput||(d.firstInput=O(e));1<g&&!d.firstMultiple?d.firstMultiple=
    O(e):1===g&&(d.firstMultiple=!1);var k=d.firstInput,l=(g=d.firstMultiple)?g.center:k.center,n=e.center=L(f);e.timeStamp=fc();e.deltaTime=e.timeStamp-k.timeStamp;e.angle=I(l,n);e.distance=W(l,n);var k=e.center,l=d.offsetDelta||{},n=d.prevDelta||{},q=d.prevInput||{};if(1===e.eventType||4===q.eventType)n=d.prevDelta={x:q.deltaX||0,y:q.deltaY||0},l=d.offsetDelta={x:k.x,y:k.y};e.deltaX=n.x+(k.x-l.x);e.deltaY=n.y+(k.y-l.y);e.offsetDirection=R(e.deltaX,e.deltaY);g?(k=g.pointers,k=W(f[0],f[1],fa)/W(k[0],
    k[1],fa)):k=1;e.scale=k;g?(g=g.pointers,f=I(f[1],f[0],fa)-I(g[1],g[0],fa)):f=0;e.rotation=f;l=d.lastInterval||e;f=e.timeStamp-l.timeStamp;8!=e.eventType&&(25<f||l.velocity===m)?(k=l.deltaX-e.deltaX,l=l.deltaY-e.deltaY,n=k/f||0,q=l/f||0,f=n,g=q,n=gb(n)>gb(q)?n:q,k=R(k,l),d.lastInterval=e):(n=l.velocity,f=l.velocityX,g=l.velocityY,k=l.direction);e.velocity=n;e.velocityX=f;e.velocityY=g;e.direction=k;d=a.element;x(e.srcEvent.target,d)&&(d=e.srcEvent.target);e.target=d;a.emit("hammer.input",e);a.recognize(e);
    a.session.prevInput=e}function O(a){for(var d=[],e=0;e<a.pointers.length;)d[e]={clientX:pa(a.pointers[e].clientX),clientY:pa(a.pointers[e].clientY)},e++;return{timeStamp:fc(),pointers:d,center:L(d),deltaX:a.deltaX,deltaY:a.deltaY}}function L(a){var d=a.length;if(1===d)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var e=0,f=0,g=0;g<d;)e+=a[g].clientX,f+=a[g].clientY,g++;return{x:pa(e/d),y:pa(f/d)}}function R(a,d){return a===d?1:gb(a)>=gb(d)?0<a?2:4:0<d?8:16}function W(a,d,e){e||(e=ib);var f=d[e[0]]-
    a[e[0]];a=d[e[1]]-a[e[1]];return Math.sqrt(f*f+a*a)}function I(a,d,e){e||(e=ib);return 180*Math.atan2(d[e[1]]-a[e[1]],d[e[0]]-a[e[0]])/Math.PI}function da(){this.evEl=Sa;this.evWin=Za;this.allow=!0;this.pressed=!1;H.apply(this,arguments)}function ya(){this.evEl=qb;this.evWin=A;H.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function ea(){this.evTarget="touchstart";this.evWin="touchstart touchmove touchend touchcancel";this.started=!1;H.apply(this,arguments)}function Fa(){this.evTarget=
    Bb;this.targetIds={};H.apply(this,arguments)}function G(a,d){var e=z(a.touches),f=this.targetIds;if(d&3&&1===e.length)return f[e[0].identifier]=!0,[e,e];var g,k=z(a.changedTouches),l=[],m=this.target;g=e.filter(function(a){return x(a.target,m)});if(1===d)for(e=0;e<g.length;)f[g[e].identifier]=!0,e++;for(e=0;e<k.length;)f[k[e].identifier]&&l.push(k[e]),d&12&&delete f[k[e].identifier],e++;if(l.length)return[B(g.concat(l),"identifier",!0),l]}function Aa(){H.apply(this,arguments);var a=u(this.handler,
    this);this.touch=new Fa(this.manager,a);this.mouse=new da(this.manager,a)}function Z(a,d){this.manager=a;this.set(d)}function va(a){if(-1<a.indexOf("none"))return"none";var d=-1<a.indexOf("pan-x"),e=-1<a.indexOf("pan-y");return d&&e?"pan-x pan-y":d||e?d?"pan-x":"pan-y":-1<a.indexOf("manipulation")?"manipulation":"auto"}function ga(a){this.id=Ua++;this.manager=null;this.options=f(a||{},this.defaults);a=this.options.enable;this.options.enable=a===m?!0:a;this.state=1;this.simultaneous={};this.requireFail=
    []}function sa(a){return 16==a?"down":8==a?"up":2==a?"left":4==a?"right":""}function ca(a,d){var e=d.manager;return e?e.get(a):a}function ta(){ga.apply(this,arguments)}function Ba(){ta.apply(this,arguments);this.pY=this.pX=null}function Da(){ta.apply(this,arguments)}function ua(){ga.apply(this,arguments);this._input=this._timer=null}function S(){ta.apply(this,arguments)}function ha(){ta.apply(this,arguments)}function Ia(){ga.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=
    null;this.count=0}function ba(a,d){d=d||{};var e=d.recognizers;d.recognizers=e===m?ba.defaults.preset:e;return new xa(a,d)}function xa(a,d){d=d||{};this.options=f(d,ba.defaults);this.options.inputTarget=this.options.inputTarget||a;this.handlers={};this.session={};this.recognizers=[];this.element=a;this.input=K(this);this.touchAction=new Z(this,this.options.touchAction);ka(this,!0);k(d.recognizers,function(a){var d=this.add(new a[0](a[1]));a[2]&&d.recognizeWith(a[2]);a[3]&&d.requireFailure(a[3])},
    this)}function ka(a,d){var e=a.element;k(a.options.cssProps,function(a,f){e.style[C(e.style,f)]=d?a:""})}function Ra(a,d){var e=n.createEvent("Event");e.initEvent(a,!0,!0);e.gesture=d;d.target.dispatchEvent(e)}var Q=" webkit moz MS ms o".split(" "),Ma=n.createElement("div"),pa=Math.round,gb=Math.abs,fc=Date.now,Ua=1,$b=/mobile|tablet|ip(ad|hone|od)|android/i,aa="ontouchstart"in e,ab=C(e,"PointerEvent")!==m,wb=aa&&$b.test(navigator.userAgent),ib=["x","y"],fa=["clientX","clientY"];H.prototype={handler:function(){},
    init:function(){this.evEl&&q(this.element,this.evEl,this.domHandler);this.evTarget&&q(this.target,this.evTarget,this.domHandler);this.evWin&&q(E(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&t(this.element,this.evEl,this.domHandler);this.evTarget&&t(this.target,this.evTarget,this.domHandler);this.evWin&&t(E(this.element),this.evWin,this.domHandler)}};var na={mousedown:1,mousemove:2,mouseup:4},Sa="mousedown",Za="mousemove mouseup";g(da,H,{handler:function(a){var d=na[a.type];
      d&1&&0===a.button&&(this.pressed=!0);d&2&&1!==a.which&&(d=4);this.pressed&&this.allow&&(d&4&&(this.pressed=!1),this.callback(this.manager,d,{pointers:[a],changedPointers:[a],pointerType:"mouse",srcEvent:a}))}});var yb={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Mb={2:"touch",3:"pen",4:"mouse",5:"kinect"},qb="pointerdown",A="pointermove pointerup pointercancel";e.MSPointerEvent&&(qb="MSPointerDown",A="MSPointerMove MSPointerUp MSPointerCancel");g(ya,H,{handler:function(a){var d=
      this.store,e=!1,f=a.type.toLowerCase().replace("ms",""),f=yb[f],g=Mb[a.pointerType]||a.pointerType,k="touch"==g,l=y(d,a.pointerId,"pointerId");f&1&&(0===a.button||k)?0>l&&(d.push(a),l=d.length-1):f&12&&(e=!0);0>l||(d[l]=a,this.callback(this.manager,f,{pointers:d,changedPointers:[a],pointerType:g,srcEvent:a}),e&&d.splice(l,1))}});var $a={touchstart:1,touchmove:2,touchend:4,touchcancel:8};g(ea,H,{handler:function(a){var d=$a[a.type];1===d&&(this.started=!0);if(this.started){var e;e=z(a.touches);var f=
      z(a.changedTouches);d&12&&(e=B(e.concat(f),"identifier",!0));e=[e,f];d&12&&0===e[0].length-e[1].length&&(this.started=!1);this.callback(this.manager,d,{pointers:e[0],changedPointers:e[1],pointerType:"touch",srcEvent:a})}}});var Y={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Bb="touchstart touchmove touchend touchcancel";g(Fa,H,{handler:function(a){var d=Y[a.type],e=G.call(this,a,d);e&&this.callback(this.manager,d,{pointers:e[0],changedPointers:e[1],pointerType:"touch",srcEvent:a})}});g(Aa,
    H,{handler:function(a,d,e){var f="mouse"==e.pointerType;if("touch"==e.pointerType)this.mouse.allow=!1;else if(f&&!this.mouse.allow)return;d&12&&(this.mouse.allow=!0);this.callback(a,d,e)},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var Va=C(Ma.style,"touchAction"),Nb=Va!==m;Z.prototype={set:function(a){"compute"==a&&(a=this.compute());Nb&&(this.manager.element.style[Va]=a);this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=
      [];k(this.manager.recognizers,function(d){v(d.options.enable,[d])&&(a=a.concat(d.getTouchAction()))});return va(a.join(" "))},preventDefaults:function(a){if(!Nb){var d=a.srcEvent;a=a.offsetDirection;if(this.manager.session.prevented)d.preventDefault();else{var e=this.actions,f=-1<e.indexOf("none"),g=-1<e.indexOf("pan-y"),e=-1<e.indexOf("pan-x");if(f||g&&a&6||e&&a&24)return this.preventSrc(d)}}},preventSrc:function(a){this.manager.session.prevented=!0;a.preventDefault()}};ga.prototype={defaults:{},
    set:function(a){r(this.options,a);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(d){if(a(d,"recognizeWith",this))return this;var e=this.simultaneous;d=ca(d,this);e[d.id]||(e[d.id]=d,d.recognizeWith(this));return this},dropRecognizeWith:function(d){if(a(d,"dropRecognizeWith",this))return this;d=ca(d,this);delete this.simultaneous[d.id];return this},requireFailure:function(d){if(a(d,"requireFailure",this))return this;var e=this.requireFail;d=ca(d,this);-1===y(e,
      d)&&(e.push(d),d.requireFailure(this));return this},dropRequireFailure:function(d){if(a(d,"dropRequireFailure",this))return this;d=ca(d,this);d=y(this.requireFail,d);-1<d&&this.requireFail.splice(d,1);return this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function d(g){e.manager.emit(e.options.event+(g?f&16?"cancel":f&8?"end":f&4?"move":f&2?"start":"":""),a)}var e=this,f=this.state;8>f&&d(!0);d();
      8<=f&&d(!0)},tryEmit:function(a){if(this.canEmit())return this.emit(a);this.state=32},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&33))return!1;a++}return!0},recognize:function(a){a=r({},a);v(this.options.enable,[this,a])?(this.state&56&&(this.state=1),this.state=this.process(a),this.state&30&&this.tryEmit(a)):(this.reset(),this.state=32)},process:function(a){},getTouchAction:function(){},reset:function(){}};g(ta,ga,{defaults:{pointers:1},attrTest:function(a){var d=
      this.options.pointers;return 0===d||a.pointers.length===d},process:function(a){var d=this.state,e=a.eventType,f=d&6;a=this.attrTest(a);return f&&(e&8||!a)?d|16:f||a?e&4?d|8:d&2?d|4:2:32}});g(Ba,ta,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var a=this.options.direction,d=[];a&6&&d.push("pan-y");a&24&&d.push("pan-x");return d},directionTest:function(a){var d=this.options,e=!0,f=a.distance,g=a.direction,k=a.deltaX,l=a.deltaY;g&d.direction||(d.direction&6?(g=
      0===k?1:0>k?2:4,e=k!=this.pX,f=Math.abs(a.deltaX)):(g=0===l?1:0>l?8:16,e=l!=this.pY,f=Math.abs(a.deltaY)));a.direction=g;return e&&f>d.threshold&&g&d.direction},attrTest:function(a){return ta.prototype.attrTest.call(this,a)&&(this.state&2||!(this.state&2)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX;this.pY=a.deltaY;var d=sa(a.direction);d&&this.manager.emit(this.options.event+d,a);this._super.emit.call(this,a)}});g(Da,ta,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},
    attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&2)},emit:function(a){this._super.emit.call(this,a);1!==a.scale&&this.manager.emit(this.options.event+(1>a.scale?"in":"out"),a)}});g(ua,ga,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return["auto"]},process:function(a){var e=this.options,f=a.pointers.length===e.pointers,g=a.distance<e.threshold,k=a.deltaTime>e.time;this._input=a;if(!g||!f||a.eventType&
      12&&!k)this.reset();else if(a.eventType&1)this.reset(),this._timer=d(function(){this.state=8;this.tryEmit()},e.time,this);else if(a.eventType&4)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(a){8===this.state&&(a&&a.eventType&4?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=fc(),this.manager.emit(this.options.event,this._input)))}});g(S,ta,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(a){return this._super.attrTest.call(this,
      a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&2)}});g(ha,ta,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:30,pointers:1},getTouchAction:function(){return Ba.prototype.getTouchAction.call(this)},attrTest:function(a){var d=this.options.direction,e;d&30?e=a.velocity:d&6?e=a.velocityX:d&24&&(e=a.velocityY);return this._super.attrTest.call(this,a)&&d&a.direction&&a.distance>this.options.threshold&&gb(e)>this.options.velocity&&a.eventType&4},emit:function(a){var d=sa(a.direction);
      d&&this.manager.emit(this.options.event+d,a);this.manager.emit(this.options.event,a)}});g(Ia,ga,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(a){var e=this.options,f=a.pointers.length===e.pointers,g=a.distance<e.threshold,k=a.deltaTime<e.time;this.reset();if(a.eventType&1&&0===this.count)return this.failTimeout();if(g&&k&&f){if(4!=a.eventType)return this.failTimeout();f=this.pTime?a.timeStamp-
      this.pTime<e.interval:!0;g=!this.pCenter||W(this.pCenter,a.center)<e.posThreshold;this.pTime=a.timeStamp;this.pCenter=a.center;this.count=g&&f?this.count+1:1;this._input=a;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=d(function(){this.state=8;this.tryEmit()},e.interval,this),2):8}return 32},failTimeout:function(){this._timer=d(function(){this.state=32},this.options.interval,this);return 32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=
      this.count,this.manager.emit(this.options.event,this._input))}});ba.VERSION="2.0.4";ba.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[S,{enable:!1}],[Da,{enable:!1},["rotate"]],[ha,{direction:6}],[Ba,{direction:6},["swipe"]],[Ia],[Ia,{event:"doubletap",taps:2},["tap"]],[ua]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};xa.prototype={set:function(a){r(this.options,
      a);a.touchAction&&this.touchAction.update();a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init());return this},stop:function(a){this.session.stopped=a?2:1},recognize:function(a){var d=this.session;if(!d.stopped){this.touchAction.preventDefaults(a);var e,f=this.recognizers,g=d.curRecognizer;if(!g||g&&g.state&8)g=d.curRecognizer=null;for(var k=0;k<f.length;)e=f[k],2===d.stopped||g&&e!=g&&!e.canRecognizeWith(g)?e.reset():e.recognize(a),!g&&e.state&14&&(g=d.curRecognizer=
      e),k++}},get:function(a){if(a instanceof ga)return a;for(var d=this.recognizers,e=0;e<d.length;e++)if(d[e].options.event==a)return d[e];return null},add:function(d){if(a(d,"add",this))return this;var e=this.get(d.options.event);e&&this.remove(e);this.recognizers.push(d);d.manager=this;this.touchAction.update();return d},remove:function(d){if(a(d,"remove",this))return this;var e=this.recognizers;d=this.get(d);e.splice(y(e,d),1);this.touchAction.update();return this},on:function(a,d){var e=this.handlers;
      k(w(a),function(a){e[a]=e[a]||[];e[a].push(d)});return this},off:function(a,d){var e=this.handlers;k(w(a),function(a){d?e[a].splice(y(e[a],d),1):delete e[a]});return this},emit:function(a,d){this.options.domEvents&&Ra(a,d);var e=this.handlers[a]&&this.handlers[a].slice();if(e&&e.length){d.type=a;d.preventDefault=function(){d.srcEvent.preventDefault()};for(var f=0;f<e.length;)e[f](d),f++}},destroy:function(){this.element&&ka(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=
      null}};r(ba,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:xa,Input:H,TouchAction:Z,TouchInput:Fa,MouseInput:da,PointerEventInput:ya,TouchMouseInput:Aa,SingleTouchInput:ea,Recognizer:ga,AttrRecognizer:ta,Tap:Ia,Pan:Ba,Swipe:ha,
    Pinch:Da,Rotate:S,Press:ua,on:q,off:t,each:k,merge:f,extend:r,inherit:g,bindFn:u,prefixed:C});"function"==typeof define&&define.amd?define("hammer",[],function(){return ba}):"undefined"!=typeof module&&module.exports?module.exports=ba:e[l]=ba})(window,document,"Hammer");define("text!com/visioglobe/web/resources/visioglobe.png.base64",[],function(){return"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"});
  define("text!com/visioglobe/web/resources/laser.png.base64",[],function(){return"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"});
  define("text!com/visioglobe/web/resources/water.jpg.base64",[],function(){return"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"});
  define("com/visioglobe/web/MapviewerPrivate","require com/visioglobe/web/helpers/StringUtils com/visioglobe/web/helpers/MathUtils com/visioglobe/common/utils/Utils com/visioglobe/web/helpers/CachedTexture com/visioglobe/web/Camera com/visioglobe/web/helpers/ExtrudeGeometry com/visioglobe/web/Floor com/visioglobe/web/Path com/visioglobe/web/helpers/PathGeometry com/visioglobe/web/Place com/visioglobe/web/poi/POIFactory com/visioglobe/web/helpers/Skybox com/visioglobe/web/helpers/SvgUtils com/visioglobe/web/helpers/PathUtils com/visioglobe/web/CameraDrivenExplorer com/visioglobe/common/MultiBuildingView com/visioglobe/web/TrackballManipulator com/visioglobe/common/routing/AStarRoutingSolver com/visioglobe/common/navigation/NavigationSolver com/visioglobe/web/SVG3Loader com/visioglobe/web/helpers/SceneLoader com/visioglobe/common/SlotHelper com/visioglobe/common/utils/MapChecker com/visioglobe/web/helpers/TextureAtlas com/visioglobe/web/helpers/TextGenerator com/visioglobe/common/Notifications com/visioglobe/common/Statistics com/visioglobe/web/TiledImage text!com/visioglobe/web/shaders/depth.frag text!com/visioglobe/web/shaders/depth.vert text!com/visioglobe/web/shaders/water.frag text!com/visioglobe/web/shaders/water.vert text!com/visioglobe/web/shaders/sky.frag text!com/visioglobe/web/shaders/sky.vert underscoretiny hammer three bluebird text!com/visioglobe/web/resources/visioglobe.png.base64 text!com/visioglobe/web/resources/laser.png.base64 text!com/visioglobe/web/resources/water.jpg.base64".split(" "),
    function(e){var n=e("com/visioglobe/web/helpers/StringUtils"),l=e("com/visioglobe/web/helpers/MathUtils"),m=e("com/visioglobe/common/utils/Utils"),d=e("com/visioglobe/web/helpers/CachedTexture"),a=e("com/visioglobe/web/Camera"),k=e("com/visioglobe/web/helpers/ExtrudeGeometry"),r=e("com/visioglobe/web/Floor"),f=e("com/visioglobe/web/Path"),g=e("com/visioglobe/web/helpers/PathGeometry"),u=e("com/visioglobe/web/Place"),v=e("com/visioglobe/web/poi/POIFactory"),q=e("com/visioglobe/web/helpers/Skybox"),
      t=e("com/visioglobe/web/helpers/SvgUtils"),x=e("com/visioglobe/web/helpers/PathUtils"),w=e("com/visioglobe/web/CameraDrivenExplorer"),y=e("com/visioglobe/common/MultiBuildingView"),z=e("com/visioglobe/web/TrackballManipulator"),B=e("com/visioglobe/common/routing/AStarRoutingSolver"),C=e("com/visioglobe/common/navigation/NavigationSolver");e("com/visioglobe/web/SVG3Loader");e("com/visioglobe/web/helpers/SceneLoader");var E=e("com/visioglobe/common/SlotHelper"),H=e("com/visioglobe/common/utils/MapChecker");
      e("com/visioglobe/web/helpers/TextureAtlas");var K=e("com/visioglobe/web/helpers/TextGenerator"),J=e("com/visioglobe/common/Notifications"),O=e("com/visioglobe/common/Statistics"),L=e("com/visioglobe/web/TiledImage");e("text!com/visioglobe/web/shaders/depth.frag");e("text!com/visioglobe/web/shaders/depth.vert");e("text!com/visioglobe/web/shaders/water.frag");e("text!com/visioglobe/web/shaders/water.vert");e("text!com/visioglobe/web/shaders/sky.frag");e("text!com/visioglobe/web/shaders/sky.vert");
      var R=e("underscoretiny"),W=e("hammer"),I=e("three"),da=e("bluebird"),ya=m.getURLParameters(),ea=window.console,Fa=function(){};ea||(ea={},ea.log=Fa,ea.warn=Fa,ea.error=Fa,ea.time=Fa,ea.timeEnd=Fa);ea.time=ea.time||Fa;ea.timeEnd=ea.timeEnd||Fa;var G=function(){var e,Z,va;function ga(){var a=document.createElement("img");a.src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";I.Texture.DEFAULT_IMAGE=a}function sa(){function a(d){var e=Ca.getBoundingClientRect();return{left:d.center.x-
        e.left,top:d.center.y-e.top}}function d(a,e){var f=Date.now();if(!(0!==hc&&200<f-hc||200>f-md)&&(md=f,!1===A.customPreManipulatorListener||!1!==A.customPreManipulatorListener(e))){switch(A.manipulatorTypeName){case "map":case "trackball":f=wb(a),!1!==f&&0<f.length&&be(e,f[0].target,f[0].vg.poi)}!1!==A.customPostManipulatorListener&&A.customPostManipulatorListener(e)}}function e(d){var f=a(d),f=wb({x:f.left,y:f.top});!1!==f&&0<f.length&&(f=f[0].target,f.vg&&f.vg.poi&&kd(d,f))}var f,g,k=!1,l,n,q=0,
        r=1;A.onTapWithCenter=d;var t=new W.Manager(oa.domElement);t.add(new W.Pan({threshold:0,pointers:0}));t.add(new W.Rotate({threshold:0})).recognizeWith(t.get("pan"));t.add(new W.Pinch({threshold:0})).recognizeWith([t.get("pan"),t.get("rotate")]);t.add(new W.Tap({event:"doubletap",taps:2}));t.add(new W.Tap);t.on("panstart panmove",function(d){if(A.manipulator.panManipulatorEnabled&&(!1===A.customPreManipulatorListener||!1!==A.customPreManipulatorListener(d))){switch(A.manipulatorTypeName){case "map":if("panstart"==
        d.type){var e=a(d);f=A.convertScreenToPoint(e)}else{var e=a(d),e=A.convertScreenToPoint(e),q=A.publicCamera.position;A.publicCamera.position={x:f.x-e.x+q.x,y:f.y-e.y+q.y,radius:q.radius}}break;case "trackball":if("panstart"==d.type)g=d.center,l=A.publicCamera.pitch,n=A.publicCamera.rotation,e=a(d),k=e.top<.5*m.getElementHeight(Ca);else{var e=d.center.x-g.x,q=d.center.y-g.y,r=!1;A.manipulator.pitchManipulatorEnabled&&(0==k&&(q=-q),A.publicCamera.pitch=l+A.manipulator.rotationSpeed*q,r=!0);A.manipulator.rotationManipulatorEnabled&&
      (0==k&&(e=-e),A.publicCamera.rotation=n+A.manipulator.rotationSpeed*e,r=!0);r&&A.manipulator.update()}}!1!==A.customPostManipulatorListener&&A.customPostManipulatorListener(d)}});t.on("rotatestart rotatemove",function(d){if(!1!==A.manipulator.rotationManipulatorEnabled&&(!1===A.customPreManipulatorListener||!1!==A.customPreManipulatorListener(d))){switch(A.manipulatorTypeName){case "map":if("rotatestart"==d.type)q=A.publicCamera.rotation;else{var e=a(d),f=A.convertScreenToPoint(e),g=e.top,e=e.left,
        k=A.viewportWidth-e-1,l=A.viewportHeight-g-1;A.publicCamera.rotation=q+d.rotation;A.manipulator.panManipulatorEnabled&&(f=A.getViewpointFromPositions({points:[f],top:g,bottom:l,left:e,right:k}),A.publicCamera.position=f)}}!1!==A.customPostManipulatorListener&&A.customPostManipulatorListener(d)}});t.on("pinchstart pinchmove",function(d){if(!1!==A.manipulator.zoomManipulatorEnabled&&(!1===A.customPreManipulatorListener||!1!==A.customPreManipulatorListener(d))){switch(A.manipulatorTypeName){case "map":if("pinchstart"==
        d.type)A.publicCamera.position.radius,r=A.publicCamera.position.radius||1;else{var e=A.publicCamera.position;e.radius=r/d.scale;var f=a(d),g=A.convertScreenToPoint(f),k=f.top,f=f.left,l=A.viewportWidth-f-1,m=A.viewportHeight-k-1;A.publicCamera.position=e;e=A.getViewpointFromPositions({points:[g],top:k,bottom:m,left:f,right:l});A.publicCamera.position=e}break;case "trackball":"pinchstart"==d.type?(A.publicCamera.position.radius,r=A.publicCamera.position.radius||1):(e=A.publicCamera.position,e.radius=
        r/d.scale,A.publicCamera.position=e)}!1!==A.customPostManipulatorListener&&A.customPostManipulatorListener(d)}});t.on("tap",function(e){Tb=!1;var f=a(e);return d({x:f.left,y:f.top},e)});t.on("doubletap",function(a){});"undefined"!==typeof kd&&(t.add(new W.Press({time:100})),t.on("press",e));Ca.addEventListener("mousedown",gb,!1);Ca.addEventListener("mousemove",ib,!1);Ca.addEventListener("mouseup",Ua,!1);document.addEventListener("mouseup",fc,!1);Ca.addEventListener("mouseout",aa,!1);Ca.addEventListener("contextmenu",
        na,!1);t="mousewheel";navigator&&navigator.userAgent&&-1!=navigator.userAgent.indexOf("Firefox")&&(t="DOMMouseScroll");Ca.addEventListener(t,fa);t=A.getExtraData().background;if("undefined"!==typeof t)switch(t.type){case "image":Ca.style["background-image"]="url("+Va+t.file+")";Ca.style["background-size"]="cover";break;case "gradient":Ca.style.background="linear-gradient("+t.start+","+t.stop+")";break;case "color":Ca.style["background-color"]=t.color}A.resizeInternal(m.getElementWidth(Ca),m.getElementHeight(Ca),
        !1)}function ca(a){var d=new r(A,a);d.index=Oa.length;Oa.push(d);return ce[a]=d}function ta(a){var d=a.getAttribute("d");if("undefined"===typeof d)return[];var e=new t.Transform;if(a.getAttribute("transform"))var f=a.getAttribute("transform"),e=t.Transform.parse(f);try{var g=x.transformSVGPath(d),k=I.ShapeUtils.isClockWise(g.subPaths[0].getPoints()),l=g.toShapes(!k),f=function(a){e.multiplyVector(a);var d=Sa(a);a.x=d.x;a.y=d.y},m=function(a){if(a instanceof I.LineCurve)f(a.v1),f(a.v2);else if(a instanceof
        I.QuadraticBezierCurve)f(a.v0),f(a.v1),f(a.v2);else if(a instanceof I.CubicBezierCurve)f(a.v0),f(a.v1),f(a.v2),f(a.v3);else if(a instanceof I.SplineCurve)a.points.forEach(function(a){f(a)});else if(a instanceof I.EllipseCurve)ea.log("EllipseCurve not transformed");else throw Error("weird Curve type");};l.forEach(function(a){a.curves.forEach(m);a.holes.forEach(function(a){a.curves.forEach(m)})});return l}catch(n){return ea.log("convertPathToShape failed",n),[]}}function Ba(a,d,e){var f=ta(a);if(null!==
        f&&f.length){var g=A.getFloor(e.floor),l=g.getLOD(e.lod);null===l&&(l=g.floorContentLOD);g=Da(a.getAttribute("vg_id"),"VgID");a=a.getAttribute("fill");null===a&&(a=d.color);a=t.Parser.color(a);for(var m=0;m<f.length;++m){var n=f[m],q=new I.MeshBasicMaterial({color:16777215,vertexColors:I.VertexColors,transparent:!1}),r={amount:d.thickness,steps:1,bevelEnabled:!1,generateSides:!1,generateTop:!0,generateBottom:!1},v;try{v=new k(n,r);for(var u=new I.Color(a),w=v.faces,r=0,x=w.length;r<x;++r)w[r].color=
        u}catch(y){ea.log("ExtrudeGeometry failed",y);ea.log(y.stack);break}d.is_reflection&&(pd.uniforms.uColor.value=new I.Color(a),q=pd);r=new I.Matrix4;r.makeTranslation(0,0,d.offset);v.applyMatrix(r);q=new I.Mesh(v,q);q.matrixAutoUpdate=!1;q.geometry.computeBoundingBox();r=l.node;d.is_reflection&&(r=l.node);var z=0;Ob&&0!==r.children.length?(z=r.children[0].geometry.faces.length,r.children[0].geometry.merge(q.geometry)):r.add(q);"undefined"!==typeof g&&(q.vg={id:g,floor:e.floor,originalColor:a,nb_faces:q.geometry.faces.length,
        faces_offset:z,layer:r},l.pickables.push(q),"undefined"===typeof A.places_list[g]&&(A.places_list[g]=[]),A.places_list[g].push(q),r=new I.Vector3,r.addVectors(q.geometry.boundingBox.max,q.geometry.boundingBox.min),r.multiplyScalar(.5),r.multiply(q.scale),r.add(q.position),q.vg.position=r);if(0<d.thickness&&d.wall_geometry&&A.layersParameters.wall.enabled){x=9671571;x=a;q=new I.MeshBasicMaterial({color:16777215,vertexColors:I.VertexColors,transparent:!1});r={amount:d.thickness,steps:1,bevelEnabled:!1,
        generateSides:!0,generateTop:!1,generateBottom:!1};v=new k(n,r);v.computeVertexNormals();n=new I.Color(x);z=new I.Color(x);d.wall_color_gradient&&(x=parseFloat(d.wall_color_gradient_top_ratio),isNaN(x)||n.multiplyScalar(x),x=parseFloat(d.wall_color_gradient_bottom_ratio),isNaN(x)||z.multiplyScalar(x));for(var B=["a","b","c"],r=0,x=v.faces.length;r<x;++r){var C=v.faces[r],H;for(H in B)C.vertexColors[H]=0<v.vertices[C[B[H]]].z?n:z}r=new I.Matrix4;r.makeTranslation(0,0,d.offset);v.applyMatrix(r);q=new I.Mesh(v,
        q);q.matrixAutoUpdate=!1;n=l.getOrCreateLayer(A.layersParameters.wall.order);0===n.children.length?n.add(q):n.children[0].geometry.merge(q.geometry)}}}else ea.log("Cannot convert to shape.")}function Da(a,d){if(!a)return a;var e=a.replace(d,"").split(/(_x[0-9A-Fa-f]*_)/),f;for(f in e)if(-1!==e[f].indexOf("_x")){var g=parseInt(e[f].substr(2),16);e[f]=String.fromCharCode(g)}return e.join("")}function ua(a){null!==a&&(a.geoinformation?(T=a.geoinformation,T.rotation_angle_in_degrees=parseFloat(T.rotation_angle_in_degrees),
        T.meters_per_pixel=parseFloat(T.meters_per_pixel),T.geo_xref=parseFloat(T.geo_xref),T.geo_yref=parseFloat(T.geo_yref),T.pixel_xref=parseFloat(T.pixel_xref),A.cameraNorthRotation=-T.rotation_angle_in_degrees):A.cameraNorthRotation=!1,R.each(a.features,function(a,d){A.layersParameters[n.ucfirst(d)]={thickness:parseFloat(a.extrusion_height),side_color:a.side_color}}),a.proj4string&&a.offsetX&&a.offsetY&&!1===A.initializeProjection(a)&&ea.log("Cannot initialize projection"))}function S(){var a=T.rotation_angle_in_degrees*
        l.DEG2RAD;T.matrixUTMToSVG=new I.Matrix4;T.matrixUTMToSVG.elements[0]=Math.cos(-a)/T.meters_per_pixel;T.matrixUTMToSVG.elements[1]=-Math.sin(-a)/T.meters_per_pixel;T.matrixUTMToSVG.elements[2]=-Math.sin(-a)/T.meters_per_pixel;T.matrixUTMToSVG.elements[3]=-Math.cos(-a)/T.meters_per_pixel;T.matrixUTMToSVG.elements[4]=Na;T.matrixUTMToSVG.elements[5]=Na;T.matrixSVGToUTM=new I.Matrix4;T.matrixSVGToUTM.elements[0]=Math.cos(a)*T.meters_per_pixel;T.matrixSVGToUTM.elements[1]=-Math.sin(a)*T.meters_per_pixel;
        T.matrixSVGToUTM.elements[2]=Math.sin(a)*T.meters_per_pixel;T.matrixSVGToUTM.elements[3]=Math.cos(a)*T.meters_per_pixel;T.matrixSVGToUTM.elements[4]=-Na;T.matrixSVGToUTM.elements[5]=Na}function ha(a,d){void 0===d&&(d=!1);A.manipulator.maxRadius=.5*a/Math.tan(.5*Math.min(N.fovY,N.fovX)*l.DEG2RAD);A.manipulator.wholeRadius=A.manipulator.maxRadius;"undefined"!==typeof ya.radius||d||(A.manipulator.radius=A.manipulator.maxRadius);A.layersParameters.global.fog.far=3*a;A.sideInMeters=a;A.camera.far=A.layersParameters.global.fog.far;
        var e=A.getFootprint("limits");0!=e?A.publicCamera.setBoundary(e.points):(e=.5*a,A.publicCamera.setBoundary([{x:-e,y:-e},{x:e,y:-e},{x:e,y:e},{x:-e,y:e},{x:-e,y:-e}]));A.manipulator.update()}function Ia(a,d,e){var f;f=ea.log;ea.log=function(){};"Fence"!==e.type&&Ba(a,d,e);ea.log=f}function ba(){var a=A.getFloor(yc);a?(A.currentFloorName=yc,A.currentFloor=a):(A.currentFloorName=Oa[0].name,A.currentFloor=Oa[0]);for(var d=0,e=Oa.length;d<e;++d){a=Oa[d];a.setEnabled(a.name===A.currentFloorName);a.name===
      A.currentFloorName&&(A.current_lod=a.lods[a.lods.length-1].index);for(var f=0,g=a.lods.length;f<g;++f){var k=a.lods[f];"undefined"!==typeof k&&(k.setEnabled(a.name===A.currentFloorName&&k.index===A.current_lod),k.node.traverse(function(a){}))}}for(var l in A.places_list)new u(A,A.places_list[l],l,T.meters_per_pixel);d=new I.Vector3(0,0,-1);e=new I.Vector3;f=new I.Raycaster(e,d);if(Cb)for(l in A.pois){var g=A.pois[l],m;for(m in g){var n=g[m],k=n.options("lod");if("undefined"!==typeof k){var q=n.options("position"),
        a=n.options("floor"),a=A.getFloor(a);e.copy({x:q.x,y:q.y,z:1E3});f.set(e,d);var r=a.floorContentLOD.pickables,k=a.getLOD(k),r=r.concat(k.node),a=f.intersectObjects(r,!0);0!==a.length&&(a=a[0].point.z,a!==q.z&&(q.z=a,n.options("position",q,!0)))}}}A.mustUpdateCameraObjects=!0;A.requestRedraw();return da.resolve()}function xa(a,d){var e,f;return(new da(function(g,k){Cb=!1;var l={};H.check(a,"String.length*Math.cos(window.length)",l)||k(Error(l.message));e=a;f=a.scene;l=new I.ObjectLoader;f instanceof
      I.Scene||(f=l.parse(f));d(.6,"sceneLoader parse finished");g()})).delay(0).tap(function(){"undefined"!==typeof e.extra_data&&(A.extraData=e.extra_data);"undefined"!==typeof e.map_name&&(A.mapName=e.map_name);var a={};if("undefined"!==typeof e.routing)for(var g=0;g<e.routing.floors.length;++g){var k=e.routing.floors[g];a[k.name]=k}new I.Box3;for(g=0;g<f.children.length;++g){var l=f.children[g].userData.name,k=ca(l);"undefined"!==typeof a[l]&&(k.heightMin=a[l].zmin,k.heightMax=a[l].zmax);l=f.children[g].children.slice();
        l[0].traverse(function(a){a.matrixAutoUpdate=!1;"undefined"!==typeof a.userData.water&&!0===a.userData.water&&k.floorContentLOD.groundObjects.push(a)});k.floorContentLOD.node.add(l[0]);for(var m=1,n=l.length;m<n;++m){var q=l[m],r=k.createLOD(q.userData.index);q.traverse(function(a){a.matrixAutoUpdate=!1;"undefined"!==typeof a.userData.water&&!0===a.userData.water&&r.groundObjects.push(a)});r.node.add(q);if("undefined"!==typeof q.userData.pickables){r.pickables=q.userData.pickables;for(var t=0,v=r.pickables.length;t<
        v;++t){var D=r.pickables[t];"undefined"===typeof A.places_list[D.id]&&(A.places_list[D.id]=[]);var u={};u.vg=D;u.geometry=q.children[0].geometry;A.places_list[D.id].push(u)}}}}g=0;for(a=Oa.length;g<a;++g)k=Oa[g],A.scene.add(k.node);Ka=f.userData.svgHeight;Na=Ka/2;ua({features:[],geoinformation:f.userData.geoinformation,proj4string:f.userData.proj4string,offsetX:f.userData.offsetX,offsetY:f.userData.offsetY});S();"undefined"!==typeof e.routing&&(g={convertSVGToPoint:Sa,convertPointToSVG:Za,convertPointToLatLon:A.convertPointToLatLon.bind(A),
        convertLatLonToPoint:A.convertLatLonToPoint.bind(A),meters_per_pixel:T.meters_per_pixel,rotation_angle_in_degrees:T.rotation_angle_in_degrees},A.routingSolver=new B({routing:e.routing},g),A.navigationSolver=new C(A.routingSolver,g.meters_per_pixel,A.routingSolver.hasIntersections()),A.setRoutingURL("#javascript"));ha(Ka*T.meters_per_pixel);d(.75,"setup except POIs finished")}).delay(0).then(function(){if("undefined"!==typeof e.pois){var f=e.pois,g=f.pois,k=f.images,l=f.labels,m=f.models,n=f.tiledImages;
        A.loaderStatistics.pois+=k.length;A.loaderStatistics.pois+=m.length;A.loaderStatistics.pois+=l.length;n&&(A.loaderStatistics.pois+=n.length);A.deferredPoiLoading.active=!0;for(var q=A.deferredPoiLoading,f=q.setPlaceName,q=q.setPlaceIcon,r=A.pois_floor_table,t=0,v=g.length;t<v;++t){var u=g[t];r[u.poiID]=u}if("undefined"!==typeof e.pois.polygons)for(g=e.pois.polygons,t=0,v=g.length;t<v;++t)u=g[t],"undefined"===typeof A.polygons_table[u.poiID]&&(A.polygons_table[u.poiID]=[]),A.polygons_table[u.poiID].push(u);
        if("undefined"!==typeof e.pois.points)for(u=e.pois.points,t=0,v=u.length;t<v;++t)g=u[t],A.pofs_table[g.poiID]=g;t=0;for(v=k.length;t<v;++t)u=k[t],g={x:u.centerX,y:u.centerY,z:u.altitude},"facing"===u.type&&(g.z+=.5*u.width),g=Sa(g),A.addPOI({url:Va+"icons/"+u.imageName+".png",id:u.poiID,position:g,scale:{x:u.width,y:u.height,z:1},floor:r[u.poiID].floorName,lod:u.lod,fixed:"fixed"===u.type,angle:u.angleInDegrees,face2d:"facing"!==u.type,image:!0,clickable:u.poiID&&null===u.poiID.match(/^mapIcon/)?
            !0:!1,track:!1}),A.loaderStatistics.pois--;t=0;for(v=m.length;t<v;++t)k=m[t],g={x:k.centerX,y:k.centerY,z:k.altitude},g=Sa(g),A.addPOI({model:Va+"models/"+k.modelName+".json",id:k.poiID,startAnimations:k.startAnimations,textureAnimation:k.textureAnimation,position:g,scale:{x:k.width,y:k.height,z:1},floor:r[k.poiID].floorName,lod:k.lod,fixed:"fixed"===k.type,angle:k.angleInDegrees,face2d:"facing"!==k.type,clickable:k.poiID&&null===k.poiID.match(/^mapModel/)?!0:!1,track:!1}),A.loaderStatistics.pois--;
        if(n)for(t=0,v=n.length;t<v;++t)m=n[t],g={x:m.centerX,y:m.centerY,z:m.altitude},g=Sa(g),A.addTiledImages({position:g,scale:{x:m.width,y:m.height,z:1},floor:r[m.poiID].floorName,lod:m.lod,id:m.poiID,clickable:!0,mapviewer:A,angle:m.angleInDegrees,name:Va+m.name,tileSize:m.tileSize,depth:m.depth,pruned:m.pruned});t=0;for(v=l.length;t<v;++t)m=l[t],n=m.poiID,k=r[n],g={x:m.centerX,y:m.centerY,z:m.altitude},g=Sa(g),A.addPOI({id:n,text:f[n]||k.name,url:q[n],color:m.fontColor,position:g,scale:{x:1,y:1,z:1},
          floor:k.floorName,lod:m.lod,fixed:!0,angle:m.angleInDegrees,width:m.width,height:m.height,flip:!0,clickable:m.poiID&&null===m.poiID.match(/^mapLabel/)?!0:!1}),A.loaderStatistics.pois--;A.deferredPoiLoading.active=!1;A.deferredPoiLoading.setPlaceIcon={};A.deferredPoiLoading.setPlaceName={}}a=e=null;d(1,"done");return ba()})}function ka(a,d){return da.resolve(a).tap(function(){d(.25,"map downloaded")}).delay(0).then(JSON.parse).tap(function(){d(.5,"json parsed")}).delay(0).then(function(a){return xa(a,
        d)}).catch(function(a){return da.reject(a)})}function Ra(a){var d={},e;for(e in a.parameters){var f=a.parameters[e];"object"!==typeof f&&(d[e]=f)}a=a.parameters.styles;for(e in a){var f=a[e],g;for(g in d)"undefined"===typeof f[g]&&(f[g]=d[g])}}function Q(a,d){qb=!1;A.useDepthWriteForPOIs=!1;var e=a.querySelector("svg");Ka=parseInt(e.getAttribute("height"),10);Na=Ka/2;var f=e.getAttribute("onabort"),f=JSON.parse(f);if(1<f.version)return da.reject(Error("map data version "+f.version+", this SDK supports 1. Please update SDK"));
        Ra(f);f.parameters.background&&(A.extraData={},A.extraData.background=f.parameters.background);e={features:f.parameters.styles,geoinformation:f.geo,proj4string:f.proj4string,offsetX:f.offsetX,offsetY:f.offsetY};"undefined"!==typeof f.builder_parameters&&"undefined"!==typeof f.builder_parameters.distance_coeff&&(e.geoinformation.distance_coef=f.builder_parameters.distance_coeff);ua(e);S();"undefined"!==typeof f.routing&&(e={convertSVGToPoint:Sa,convertPointToSVG:Za,convertPointToLatLon:A.convertPointToLatLon.bind(A),
          convertLatLonToPoint:A.convertLatLonToPoint.bind(A),meters_per_pixel:T.meters_per_pixel},A.routingSolver=new B({routing:f.routing},e),A.navigationSolver=new C(A.routingSolver,e.meters_per_pixel,A.routingSolver.hasIntersections()),A.setRoutingURL("#javascript"));var g=[],k;for(k in f.parameters.styles)g.push(k);g.sort(function(a,d){a=f.parameters.styles[a]&&"undefined"!==typeof f.parameters.styles[a].extrusion_height?parseFloat(f.parameters.styles[a].extrusion_height):0;d=f.parameters.styles[d]&&"undefined"!==
        typeof f.parameters.styles[d].extrusion_height?parseFloat(f.parameters.styles[d].extrusion_height):0;return a-d});ha(Ka*T.meters_per_pixel);var l=[],n={};"undefined"!==typeof f.routing&&"undefined"!==typeof f.routing.floors&&R.each(f.routing.floors,function(a){n[a.name]=a});a.querySelectorAll("svg>g[id^=floor]").forEach(function(a){var d=a.getAttribute("id").substr(5),e={};e.floor=d;var k=A.getFloor(e.floor);null===k&&(k=ca(e.floor),A.scene.add(k.node),"undefined"!==typeof n[e.floor]&&(k.heightMin=
          n[e.floor].zmin,k.heightMax=n[e.floor].zmax));m.queryChildren(a,"g[id^=vg-common-foreground]>g[id^=vg-model]").forEach(function(a){var d={thickness:0,offset:0,order:g.indexOf("vg-model")};R.extend(d,f.parameters.styles["vg-model"]);d.thickness=parseFloat(d.extrusion_height);d.order=0;m.queryChildren(a,"image").forEach(function(a){l.push({element:a,type:"vg-model",parameters:R.extend({},d),layer_info:R.extend({},e)})})});m.queryChildren(a,"g[id^=lod]").forEach(function(a){var d=a.getAttribute("id").substr(3);
          e.lod=parseInt(d,10);d=k.getLOD(e.lod);null===d&&(d=k.createLOD(e.lod));m.queryChildren(a,"g").forEach(function(a){var d=a.getAttribute("id");e.type=d;var k={lod:0,thickness:0,offset:0,order:g.indexOf(d)};R.extend(k,f.parameters.styles[d]);if("undefined"===typeof k.footprint||!0!==k.footprint)k.thickness=parseFloat(k.extrusion_height),k.order=0,m.queryChildren(a,"*:not(.vghelper)").forEach(function(a){l.push({element:a,type:d,parameters:R.extend({},k),layer_info:R.extend({},e)})})})})});var q=function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     d){var e=a.element,f=a.type,g=e.getAttribute("onabort");g&&(g=JSON.parse(g));e.getAttribute("id")&&e.setAttribute("vg_id",e.getAttribute("id"));if("vg-model"===f){!g||"fixed"!==g.vg_orientationType&&"fixed"!==g.vg_orientationtype?!g||"facing"!==g.vg_orientationType&&"facing"!==g.vg_orientationtype?e.setAttribute("vg_face2d","true"):e.setAttribute("vg_face2d","false"):e.setAttribute("vg_orientationType","fixed");g&&"undefined"!==typeof g.vg_model&&e.setAttribute("vg_model",g.vg_model);var f=a.layer_info,
          g=e.getAttribute("transform"),k=t.Transform.parse(g),l=null===e.getAttribute("x")?0:parseFloat(e.getAttribute("x")),m=null===e.getAttribute("y")?0:parseFloat(e.getAttribute("y")),g=parseFloat(e.getAttribute("width")),n=parseFloat(e.getAttribute("height")),q=new t.Point(l,m);k.multiplyVector(q);l=new t.Point(l+g,m+n);k.multiplyVector(l);var k=k.decompose(),g=g*Math.abs(k.sx),n=n*Math.abs(k.sy),q={x:(q.x+l.x)/2,y:(q.y+l.y)/2,z:0},q=Sa(q),l=Da(e.getAttribute("vg_id"),"VgID"),m=e.getAttribute("vg_model"),
          r="fixed"===e.getAttribute("vg_orientationType"),e=null===e.getAttribute("vg_face2d")?!0:"true"===e.getAttribute("vg_face2d");A.addPOI({model:Va+m,id:l,position:q,scale:{x:g*T.meters_per_pixel,y:n*T.meters_per_pixel,z:1},floor:f.floor,lod:f.lod,fixed:r,angle:k.angle,face2d:e,clickable:l&&null===l.match(/^mapModel/)?!0:!1,track:!1})}else if("vg-image"===f)!g||"fixed"!==g.vg_orientationType&&"fixed"!==g.vg_orientationtype?!g||"facing"!==g.vg_orientationType&&"facing"!==g.vg_orientationtype?e.setAttribute("vg_face2d",
          "true"):e.setAttribute("vg_face2d","false"):e.setAttribute("vg_orientationType","fixed"),f=a.layer_info,g=e.getAttribute("transform"),k=t.Transform.parse(g),q=A.layersParameters.sprite,m=null===e.getAttribute("x")?0:parseFloat(e.getAttribute("x")),r=null===e.getAttribute("y")?0:parseFloat(e.getAttribute("y")),g=parseFloat(e.getAttribute("width")),n=parseFloat(e.getAttribute("height")),l=new t.Point(m,r),k.multiplyVector(l),m=new t.Point(m+g,r+n),k.multiplyVector(m),k=k.decompose(),g*=Math.abs(k.sx),
          n*=Math.abs(k.sy),q={x:(l.x+m.x)/2,y:(l.y+m.y)/2,z:q.offset},q=Sa(q),l=Da(e.getAttribute("vg_id"),"VgID"),m=e.getAttribute("xlink:href"),r="fixed"===e.getAttribute("vg_orientationType"),e=null===e.getAttribute("vg_face2d")?!0:"true"===e.getAttribute("vg_face2d"),A.addPOI({url:Va+m,id:l,position:q,scale:{x:g*T.meters_per_pixel,y:n*T.meters_per_pixel,z:1},floor:f.floor,lod:f.lod,fixed:r,angle:k.angle,face2d:e,image:!0,clickable:l&&null===l.match(/^mapIcon/)?!0:!1,track:!1});else if("vg-label"===f){g&&
        g.vg_legend&&e.setAttribute("vg_legend",g.vg_legend);var f=a.layer_info,q=e.querySelector("rect"),g=e.querySelector("text"),l=e.getAttribute("transform"),m=t.Transform.parse(l),r=A.layersParameters.sprite,u=null===q.getAttribute("x")?0:parseFloat(q.getAttribute("x")),v=null===q.getAttribute("y")?0:parseFloat(q.getAttribute("y")),n=parseFloat(q.getAttribute("width")),k=parseFloat(q.getAttribute("height")),D=new t.Point(u,v);m.multiplyVector(D);u=new t.Point(u+n,v+k);m.multiplyVector(u);m=m.decompose();
          n*=Math.abs(m.sx);k*=Math.abs(m.sy);r={x:(D.x+u.x)/2,y:(D.y+u.y)/2,z:r.offset};r=Sa(r);A.layersParameters.debugLabel.enabled&&(t.convertRectToPath(rect),q.getAttribute("fill","#ff0000"),q.getAttribute("transform",l),Ia(q,A.layersParameters.debugLabel,f));l=Da(e.getAttribute("vg_id"),"VgLabel");Math.min(Math.abs(n),Math.abs(k));q=null!==g?t.Parser.color(g.getAttribute("fill")):t.Parser.color(q.getAttribute("stroke"));D="";null!==g&&"true"===e.getAttribute("vg_legend")?D=Da(g.text()):null===g&&e.getAttribute("vg_legend")&&
            (D=e.getAttribute("vg_legend"));A.addPOI({id:l,text:D,color:q,position:r,scale:{x:1,y:1,z:1},floor:f.floor,lod:f.lod,fixed:!0,angle:m.angle,width:n*T.meters_per_pixel,height:k*T.meters_per_pixel,flip:!0,clickable:!1})}else switch(e.localName){case "rect":t.convertRectToPath(e);Ia(e,a.parameters,a.layer_info);break;case "polygon":t.convertPolygonToPath(e);Ia(e,a.parameters,a.layer_info);break;case "polyline":t.convertPolygonToPath(e);Ia(e,a.parameters,a.layer_info);break;case "ellipse":t.convertEllipseToPath(e);
          Ia(e,a.parameters,a.layer_info);break;case "circle":t.convertCircleToPath(e);Ia(e,a.parameters,a.layer_info);break;case "path":Ia(e,a.parameters,a.layer_info)}},r=0,u=Math.ceil(l.length/100),v=0,w=function(){for(;;){var a=r;q.apply(A,[l[a],a]);r++;v++;if(r===l.length)return d(1),ba();if(v===u)return v=0,d(r/l.length),da.resolve(w()).delay(0)}};return da.resolve(w()).delay(0)}function Ma(a,d){return da.resolve(a).tap(function(){d(.25,"map downloaded")}).delay(0).then(function(a){var d=new DOMParser;
        return da.resolve(d.parseFromString(a,"application/xml"))}).tap(function(){d(.5,"json parsed")}).delay(0).then(function(a){return Q(a,d)}).catch(function(a){return da.reject(a)})}function pa(a,d){a.progressHandler(0,"ajax request called, method: "+d);var e=0,f={progressCallBack:function(d){d.lengthComputable?a.progressHandler(d.loaded/d.total*.25):(e=Math.min(e+.0024,.24),a.progressHandler(e))}};"jsonp"===d&&(f.crossDomain=!0);"undefined"!==typeof a.mapName&&(A.mapName=a.mapName);return m.request(a.path,
        "GET",null,f)}function gb(a){Tb=!1;hc=Date.now();switch(A.manipulatorTypeName){case "map":case "trackball":if(a.target!==oa.domElement)break;R.each(A.pois_with_selector,function(a,d){document.querySelector(a.selector).style["pointer-events"]="none"});var d=ab(a);e=a.button;Z=d.x;va=d.y}return!1}function fc(a){Tb=!1;return $b(a)}function Ua(a){Tb=!1;return $b(a)}function $b(a){if(0==e&&0==a.button){var d=ab(a);A.onTapWithCenter(d,a)}switch(A.manipulatorTypeName){case "map":case "trackball":R.each(A.pois_with_selector,
        function(a,d){document.querySelector(a.selector).style["pointer-events"]="all"})}e=-1}function aa(a){e=-1}function ab(a){return"undefined"===typeof a.offsetX?{x:a.layerX-a.target.offsetLeft,y:a.layerY-a.target.offsetTop}:{x:a.offsetX,y:a.offsetY}}function wb(a){var d=[],e=new I.Vector3(a.x/A.viewportWidth*2-1,2*-(a.y/A.viewportHeight)+1,.5);e.unproject(A.camera);A.camera instanceof I.OrthographicCamera?(e=new I.Vector3(a.x/A.viewportWidth*2-1,2*-(a.y/A.viewportHeight)+1,1),e.unproject(A.camera),a=
        new I.Vector3(a.x/A.viewportWidth*2-1,2*-(a.y/A.viewportHeight)+1,-1),a.unproject(A.camera),e.sub(a).normalize(),a=new I.Raycaster(a,e)):a=new I.Raycaster(A.camera.position,e.sub(A.camera.position).normalize());e=[];if(qb){for(var f=0,g=A.activeLODList.length;f<g;++f)e.push(A.activeLODList[f].node);a=a.intersectObjects(e,!0);R.each(a,function(a,e){var f=!1,g=a.object;if(!1!==g.visible&&-1===xc.indexOf(g)){var k,l,m=g.parent.userData.pickables;if("undefined"!==typeof m)for(var n=0,q=m.length;n<q;++n){var r=
        m[n],t=!1;a.object.geometry instanceof I.Geometry?t=a.faceIndex>=r.faces_offset&&a.faceIndex<r.faces_offset+r.nb_faces:a.object.geometry instanceof I.BufferGeometry&&(t=a.faceIndex>=3*r.faces_offset&&a.faceIndex<3*(r.faces_offset+r.nb_faces));if(t&&(k=A.places[r.id],"undefined"!==typeof k)){l=r;break}}if("undefined"===typeof k)if(g.vg&&g.vg.batch)(g=g.vg.batch.getPickableFromIntersection(a))&&g.options.poi.clickable&&(k=g.publicObject,l=g.options,f=l.poi.overlay);else if("undefined"!==typeof g&&"undefined"!==
        typeof g.vg&&null!==g.vg.id&&g.vg.poi&&g.vg.poi.clickable){k=A.pois[g.vg.id];if(1===k.length)k=k[0];else for(n=0,q=k.length;n<q;n++)if(R.isMatch(g.vg.poi,k[n].options())){k=k[n];break}l=g.vg;f=g.vg.poi.overlay}if("undefined"===typeof k)return!1;d.push({vg:l,target:k,distance:a.distance,overlay:f})}})}else{f=0;for(g=A.activeLODList.length;f<g;++f)e.push(A.activeLODList[f].pickables);e=e.concat.apply([],e);a=a.intersectObjects(e,!0);R.each(a,function(a,e){var f,g,k,l=!1,m=a.object;if(!1!==m.visible&&
        -1===xc.indexOf(a.object)&&!("undefined"===typeof m.vg||"undefined"===typeof m.vg.id&&"undefined"===typeof m.vg.batch||null===m.vg.id||m.vg.poi&&!1===m.vg.poi.clickable)){k=m.vg;if(m.vg.batch)(f=m.vg.batch.getPickableFromIntersection(a))&&f.options.poi.clickable&&(g=f.publicObject,k=f.options,l=k.poi.overlay);else if(g=A.places[m.vg.id],"undefined"===typeof g){if(0===m.vg.poi._opacity)return;l=m.vg.poi.overlay;g=A.pois[m.vg.id];if(1===g.length)g=g[0];else{f=0;for(var n=g.length;f<n;f++)if(R.isMatch(m.vg.poi,
        g[f].options())){g=g[f];break}}}"undefined"!==typeof g&&d.push({vg:k,target:g,distance:a.distance,overlay:l})}})}d.sort(function(a,d){return a.overlay===d.overlay?a.distance-d.distance:a.overlay?-1:1});return 0<d.length?[d[0]]:[]}function ib(a){if(Tb){switch(A.manipulatorTypeName){case "map":case "trackball":if(a.target!==oa.domElement)break;a.preventDefault();var d=ab(a);A.trigger("mousemove",{event:a,position:d});if(0!==e)if(1===e){if(A.manipulator.zoomManipulatorEnabled&&(A.manipulator.radius*=
        1+A.manipulator.zoomSpeed*(va-d.y),A.manipulator.update(),!1!==A.customPostManipulatorListener&&!1===A.customPostManipulatorListener({type:"dragmiddle",center:d,event:a})))break}else if(2===e){var f=!1;A.manipulator.pitchManipulatorEnabled&&(A.publicCamera.pitch+=A.manipulator.rotationSpeed*(d.y-va),f=!0);A.manipulator.rotationManipulatorEnabled&&(A.publicCamera.rotation+=A.manipulator.rotationSpeed*(d.x-Z),f=!0);if(f&&(A.manipulator.update(),!1!==A.customPostManipulatorListener&&!1===A.customPostManipulatorListener({type:"dragright",
        center:d,event:a})))break}else if(f=wb(d),!1!==f){var g=xc.slice(0);xc=f;var k,l,m,n,q,r;for(k in g){m=g[k];q=m.vg.id;r=!1;for(l in f)if(n=f[l],n=n.vg.id,q===n){r=!0;break}r||(q=m.vg,m=m.target,n=!0,q.poi&&q.poi.onObjectMouseOut&&(n=q.poi.onObjectMouseOut(a,m,ac)),!1!==n&&"undefined"!==typeof jd&&jd(a,m,ac))}for(l in f)n=f[l],q=n.vg,m=n.target,g=!0,q.poi&&q.poi.onObjectMouseOver&&(g=q.poi.onObjectMouseOver(a,m,ac)),!1!==g&&"undefined"!==typeof hd&&hd(a,m,ac);ac++}Z=d.x;va=d.y}return!1}Tb=!0}function fa(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    d){"undefined"===typeof d&&(a.wheelDeltaY?d=a.wheelDeltaY:a.wheelDelta?d=a.wheelDelta:a.detail&&(d=-a.detail),"undefined"===typeof d&&window.event&&(a=window.event,a.wheelDeltaY?d=a.wheelDeltaY:a.wheelDelta?d=a.wheelDelta:a.detail&&(d=-a.detail)));if(!1===A.customPreManipulatorListener||!1!==A.customPreManipulatorListener({type:"wheel",delta:d})){switch(A.manipulatorTypeName){case "map":case "trackball":if(a.preventDefault(),"undefined"!==typeof d&&A.manipulator.zoomManipulatorEnabled){var e=Ca.getBoundingClientRect(),
        e={left:a.clientX-e.left,top:a.clientY-e.top};positionBefore=A.convertScreenToPoint(e);A.manipulator.radius=0<d?.8*A.manipulator.radius:A.manipulator.radius/.8;A.manipulator.update();if("map"==A.manipulatorTypeName){var e=A.convertScreenToPoint(e),f=A.publicCamera.position;A.publicCamera.position={x:positionBefore.x-e.x+f.x,y:positionBefore.y-e.y+f.y,radius:f.radius}}}}if(!1===A.customPostManipulatorListener||!1!==A.customPostManipulatorListener({type:"wheel",delta:d}))return!1}}function na(a){if(a.target!==
        oa.domElement)return!1;a.preventDefault();return!1}function Sa(a){var d={};d.x=(a.x-Na)*T.meters_per_pixel;d.y=(Na-a.y)*T.meters_per_pixel;"undefined"!==typeof a.z&&(d.z=a.z);return d}function Za(a){var d={};d.x=a.x/T.meters_per_pixel+Na;d.y=Na-a.y/T.meters_per_pixel;"undefined"!==typeof a.z&&(d.z=a.z);return d}function yb(a,d,e,f,g,k){"undefined"===typeof a.initialValue&&(a.initialValue={});for(var l in d)g?a.initialValue[l]=a[l]:("undefined"===typeof a.initialValue[l]&&(a.initialValue[l]=a[l]),
        a[l]=d[l]);f=f||0;if(g)g=d;else{g={};for(var m in d)"undefined"!==typeof a.initialValue[m]&&(g[m]=a.initialValue[m])}if(0===e&&0===f){for(m in g)a[m]=g[m];"function"===typeof k&&k()}else if(a=(new TWEEN.Tween(a)).to(g,e).delay(f).start(),"function"===typeof k)a.onUpdate(k)}function Mb(a,d,e,f){e=a.index<e.index?-1:1;e=de.translate.clone().multiplyScalar(e);var g=f&&"number"===typeof f.animationDuration?f.animationDuration:de.transitionTime;yb(a.node.position,{x:e.x,y:e.y,z:e.z},g,0,d,function(){a.node.updateMatrix();
        a.node.updateMatrixWorld(!0)});a.node.traverse(function(a){if("undefined"!==typeof a.material)if(a.material instanceof I.MeshFaceMaterial)for(var e in a.material.materials)yb(a.material.materials[e],{opacity:0},g,0,d);else yb(a.material,{opacity:0},g,0,d)});return new da(function(a,d){0===g?a():(new TWEEN.Tween({dummy:0})).to({dummy:1},g).onComplete(function(){A.forcePoiUpdateOpacity||(A.forcePoiUpdateOpacity=!0,A.updateCameraObjects(),A.forcePoiUpdateOpacity=!1,A.requestRedraw());a()}).start()})}
        this.wireframe=!1;var qb=!0;this.useDepthWriteForPOIs=!0;var A=this;this.pois={};this._anonymous_poi_counter=0;this.pois_with_selector=[];this.places_list={};this.polygons_table={};this.pofs_table={};this.pois_floor_table={};this.places={};this.plugins={};this.viewportHeight=this.viewportWidth=0;this.skybox=this.camera=this.scene=null;this.nbUpdatableObjects=0;this.mustUpdateCameraObjects=!1;this.textures={};this.models={};this.loaderStatistics={models:0,textures:0,pois:0};this.current_lod=2;this.currentFloorName=
          "";this.currentFloor=null;this.activeLODList=[];this.manipulator=null;this.manipulatorTypeName="map";this.customPostManipulatorListener=this.customPreManipulatorListener=!1;this.globalCameraUpdatebleLinks=[];this.mapName=this.extraData=this.navigationSolver=this.routingSolver=!1;this.deferredPoiLoading={active:!1,setPlaceName:{},setPlaceIcon:{}};this.publicLodFactor=1;this.publicCamera=null;this.layersParameters={receiveShadow:{order:9},wall:{enabled:!0,order:10},debugLabel:{enabled:!1,order:87,offset:5.5,
            thickness:0},reflection:{order:89},sprite:{order:90,offset:2,scale:2},overlay:{order:91},global:{fog:{color:0,near:6500,far:7E3}}};var $a=null,Y=null,Bb=!1,Va="",Nb="";this.logStatistics=!1;this.statistics=void 0;var N={fovX:45,fovY:45,near:1,far:7E3,update:function(a,d){if(0!==a&&0!==d){var e=.5*this.fovY*l.DEG2RAD,f=Math.tan(e)/d;this.projectedPixelSize=Math.tan(e)/d;this.cosFovY=Math.cos(e);this.fovX=2*Math.atan(f*a)*l.RAD2DEG}}},oa,X=!1,bb=!1,Ca,Ka,Na,Cb=!0,Ob=!1;new I.Box3;var zb=0,cb=Date.now();
        this.plane_geometry=new I.PlaneBufferGeometry(1,1);this.plane_geometry.vg={permanent:!0};var fd="undefined"!==typeof ya.vgcontinuous?!1:!0,gd=!1,xc=[],hd,jd,kd,be=function(a,d,e){},ld=!1,Oa=[];this.floors=Oa;var ce={};this.publicFloors=!1;var yc="",de={translate:new I.Vector3(0,0,2048),opacity:!0,transitionTime:500};e=-1;va=Z=0;var Tb=!1,md=0,hc=0,T={rotation_angle_in_degrees:0,meters_per_pixel:.2,geo_xref:0,geo_yref:0,utm_zone:1},zc=!1,nd,od,Ub=0,Ac=0,pd,Pb;this.initialize=function(a,d){for(var e in G.available_plugins){var f=
          G.available_plugins[e];this.plugins[f.name]=new f.factory(this)}Ca=a;this.viewportWidth=m.getElementWidth(Ca);this.viewportHeight=m.getElementHeight(Ca);this.vgbatchfacing=this.vgnobatchicon=this.vgnobatch=!1;"undefined"!==typeof ya.vgnobatch&&(this.vgnobatch=!0);"undefined"!==typeof ya.vgnobatchicon&&(this.vgnobatchicon=!0);"undefined"!==typeof ya.vgnobatchfacing&&(this.vgnobatchfacing=!0);"undefined"!==typeof d.optimizations&&(e=d.optimizations,"undefined"!==typeof e.load1&&(Cb=!e.load1),"undefined"!==
        typeof e.framerate1&&(Ob=e.framerate1),"undefined"!==typeof e.nobatch&&(this.vgnobatch=e.nobatch));yc=d.initialFloorName||yc;e={antialias:"undefined"!==typeof d.antialias?d.antialias:!0,stencil:!1,alpha:!0,bugPixelStorei:d.bugPixelStorei,bugWP81:d.bugWP81,disable_console:"undefined"!==typeof d.disable_console?d.disable_console:!0,useSkeleton:!1,recomputeCameraInverse:!1};I.ImageLoader.crossOrigin="";this.textureLoader=new I.TextureLoader;this.textureLoader.setCrossOrigin("");try{oa=new I.WebGLRenderer(e)}catch(g){return da.reject(g)}oa&&
        oa.setSize||ea.log("bad");this.renderer=oa;oa.setSize(this.viewportWidth,this.viewportHeight);oa.setPixelRatio(window.devicePixelRatio?window.devicePixelRatio:1);Ca.innerHTML="";Ca.appendChild(oa.domElement);ga();this.scene=new I.Scene;this.clock=new I.Clock;this.scene.autoUpdate=!1;this.scene.matrixAutoUpdate=!1;this.scene.fog=!1;N.update(this.viewportWidth,this.viewportHeight);this.camera="undefined"!==typeof d.cameraType&&"orthographic"===d.cameraType?new I.OrthographicCamera(this.viewportWidth/
          -2,this.viewportWidth/2,this.viewportHeight/2,this.viewportHeight/-2,.1,2E4):new I.PerspectiveCamera(N.fovY,this.viewportWidth/this.viewportHeight,N.near,N.far);this.camera.matrixAutoUpdate=!1;this.camera.position.copy({x:0,y:0,z:300});this.camera.updateMatrix();this.scene.add(this.camera);this.manipulator=new z(this,this.camera);A.manipulator.update();this.camera instanceof I.OrthographicCamera&&(this.publicCamera.pitch=-90,this.publicCamera.pitchManipulatorEnabled=!1,this.publicCamera.rotationManipulatorEnabled=
          !1);e=new I.AmbientLight(4473924);e.matrixAutoUpdate=!1;this.scene.add(e);Pb=new I.DirectionalLight(16777215,1);Pb.matrixAutoUpdate=!1;Pb.position.set(0,100,100);Pb.target.position.set(0,0,0);Pb.updateMatrix();this.scene.add(Pb);kd=d.onObjectMouseDown;hd=d.onObjectMouseOver;jd=d.onObjectMouseOut;be=function(a,e,f){"undefined"!==typeof A.logStatistics&&A.logStatistics&&"undefined"===typeof e.vg.poi&&A.statistics.logStat("selectPlace",e);var g=!0;f&&f.onObjectMouseUp&&(g=f.onObjectMouseUp(a,e));if(!1===
          g||!1===A.trigger("mouseup",{event:a,element:e}))return!1;if(d.onObjectMouseUp)d.onObjectMouseUp(a,e)};"undefined"===typeof d.progressHandler&&(d.progressHandler=Fa);return"undefined"!==typeof d.path||"undefined"!==typeof d.svg||"undefined"!==typeof d.mapContentString?A.loadMap(d).then(function(){sa();A.trigger("initializeCompleted",void 0,!0);A.logStatisticsParameters=d;A.logStatistics&&void 0===A.statistics&&(A.statistics=new O(A));void 0!==A.statistics&&A.statistics.setMapParameters(d)}).catch(function(a){A.trigger("initializeFailed",
          void 0,!0);return da.reject(a)}):da.reject(Error("missing .path or .mapContentString parameter"))};this.setSkybox=function(a){if("undefined"!==typeof a&&"undefined"!==typeof a.type)switch(null!==this.skybox&&this.skybox.dispose(),this.skybox=new q(this),"undefined"!==typeof a&&"number"===typeof a.fov&&this.skybox.setFov(a.fov),a.type){case "faces":this.skybox.initializeWithFaces(a.data);break;case "strip":this.skybox.initializeWithStrip(a.data);break;case "gradient":this.skybox.initializeWithGradient(a.data)}};
        this.synthesizeVenueLayout=function(){var a=100;"undefined"!==typeof ya.gap&&(a=parseFloat(ya.gap));var d=this.getFloors();if(0===d.length)return ea.log("ERROR: no floors found!"),!1;var e=[],f;for(f in d)e.push(d[f]);e.sort(function(a,d){return a.heightMin-d.heightMin});var d={config:{venue_layout:{buildings:{},defaultBuilding:"default",version:1,layer:""}}},g={defaultFloor:e[0].name,displayIndex:0,floors:{}},k={},l=0,m=0;for(f in e){var n=e[f];k[n.name]={layer:n.name,levelIndex:l,stackGap:a,stackHeightMax:n.heightMax-
          n.heightMin,stackHeightMin:0};0===(n.heightMax+n.heightMin)/2&&(g.defaultFloor=n.name,m=l);l++}if(0!=m)for(f in k)k[f].levelIndex-=m;g.floors=k;d.config.venue_layout.buildings["default"]=g;return d};this.setupMultiBuildingView=function(a){var d=this.getExtraData();if(!d||!d.config||!d.config.venue_layout){d=this.synthesizeVenueLayout();if(!1===d)return ea.log("ERROR: no vg_venue_layout, mode not supported, you need data setup for multibuilding on map editor AND synthesizeVenueLayout failed."),!1;
          "multibuilding"===a.viewType&&(a.viewType="multifloor")}var e,f;if(d&&d.resources){f=window.navigator.userLanguage||window.navigator.language;var g=[];"string"===typeof f&&(f=f.replace(/-.*/,""),g.push(f));g.push("default");for(var k in g)if(f=g[k],d.resources[f]&&d.resources[f].localized&&1==d.resources[f].localized.version&&d.resources[f].localized.locale&&d.resources[f].localized.locale[f]&&d.resources[f].localized.locale[f].venueLayout){e=d.resources[f].localized.locale[f].venueLayout;break}}this.multiBuildingView=
          new y(this,d.config.venue_layout,e,a);this.cameraDrivenExplorer=new w(this.multiBuildingView);this.camera instanceof I.OrthographicCamera&&(this.multiBuildingView.globalModePitch=-90,this.multiBuildingView.buildingModePitch=-90,this.multiBuildingView.floorModePitch=-90);return!0};this.setup=function(){this.animateBind=this.animate.bind(this);this.publicCamera=new a(this)};this.getFloor=function(a){a=ce[a];return"undefined"===typeof a?null:a};this.setShapeColor=function(a,d){var e=Ob?a.vg.layer.children[0].geometry:
          a.geometry,f=a.vg.nb_faces,g=a.vg.faces_offset,k=a.vg.position.z,l=new I.Color(d),m=new I.Color(l);"undefined"!==typeof a.vg.topRatio&&m.multiplyScalar(a.vg.topRatio);var n=new I.Color(l);"undefined"!==typeof a.vg.bottomRatio&&n.multiplyScalar(a.vg.bottomRatio);if(e instanceof I.Geometry){for(var q=e.faces,r=["a","b","c"],t=g;t<g+f;++t){var u=q[t];if(0<u.vertexColors.length)for(var v=0;v<u.vertexColors.length;++v){var w=e.vertices[u[r[v]]];u.vertexColors[v]=w.z>k?m:w.z<k?n:l}else u.color=l}e.elementsNeedUpdate=
          !0}else if(e instanceof I.BufferGeometry){q=e.getAttribute("position");e=e.getAttribute("color");for(t=g;t<g+f;++t)for(r=v=3*t;r<v+3;r++)u=q.getZ(r),u>k?(e.setX(r,m.r),e.setY(r,m.g),e.setZ(r,m.b)):u<k?(e.setX(r,n.r),e.setY(r,n.g),e.setZ(r,n.b)):(e.setX(r,l.r),e.setY(r,l.g),e.setZ(r,l.b));e.needsUpdate=!0}};this.loadMap=function(a,d){var e=a.svg||a.mapContentString;"undefined"!==typeof a.mapName&&(A.mapName=a.mapName);"undefined"!==typeof a.mapContentDirectory&&(Va=a.mapContentDirectory+"/");if("string"===
          typeof e)return null!==e.match(/^</)?Ma(e,a.progressHandler):ka(e,a.progressHandler);a.path=a.path||"map.svg";var f="ajax";a.useJSONP&&(f="jsonp");var g=function(a){(a=a.match(/^(.*\/)[^\/]+$/))&&0<a.length&&(Va=a[1]);"//"!==Va.substr(0,2)&&-1===Va.indexOf("http://")&&-1===Va.indexOf("https://")||-1===Va.indexOf("/content/")||A.setRoutingURL(Va.replace("/content/","/route"))};g(a.path);return null!==a.path.match(/.svg$/)?pa(a,f).then(function(d){return Ma(d.response,a.progressHandler)}).catch(function(d){return"404"===
        d.message?(a.path=a.path.replace(".svg",".json"),pa(a,f).then(function(d){return ka(d.response,a.progressHandler)})):da.reject(d)}):pa(a,f).then(function(e){var k=JSON.parse(e.response);return"undefined"!==typeof k.maps?E.checkSlotDescription(k,a,{sdkType:["web","kiosk"],sdkVersion:A.version,minimumDataSDKVersion:A.minimumDataSDKVersion},d).tap(function(){a.progressHandler(0,"start download")}).delay(0).then(function(a){g(a.path);return pa(a,f)}).then(function(d){return-1!==k.maps[0].path.indexOf(".svg")?
          Ma(d.response,a.progressHandler):ka(d.response,a.progressHandler)}):da.resolve(k).tap(function(){a.progressHandler(.5,"json parsed")}).delay(0).then(function(d){return xa(d,a.progressHandler)}).catch(function(a){return da.reject(a)})}).catch(function(d){return"404"===d.message&&null!==a.path.match(/map.json$/)?(a.path=a.path.replace(".json",".svg"),pa(a,f).then(function(d){return Ma(d.response,a.progressHandler)}).catch(function(a){return da.reject(a)})):da.reject(d)})};this.unloadMap=function(){if(0===
          this.floors.length||!this.isLoaded())return!1;this.renderer.clear();null!==this.skybox&&this.skybox.dispose();for(var a=Object.keys(this.pois),d=a.length-1;0<=d;d--)for(var e=this.pois[a[d]],f=e.length-1;0<=f;f--)e[f].remove();this.pois={};this._anonymous_poi_counter=0;this.pois_with_selector=[];this.pois_floor_table={};this.places={};this.places_list={};this.polygons_table={};this.pofs_table={};this.nbUpdatableObjects=0;a=Object.keys(this.textures);for(d=a.length-1;0<=d;d--)this.textures[a[d]].texture.dispose();
          this.textures={};a=Object.keys(this.models);for(d=a.length-1;0<=d;d--)v.removeModel(this,a[d]);this.models={};for(d=Oa.length-1;0<=d;d--)if(Oa[d].node.traverse(function(a){a instanceof I.Mesh&&a.geometry.dispose()}),this.scene.remove(Oa[d].node),Oa[d].tiledImages){a=0;for(e=Oa[d].tiledImages.length;a<e;++a)Oa[d].tiledImages[a].remove();Oa[d].tiledImages=[];delete Oa[d].tiledImages}this.floors=Oa=[];this.publicFloors=null;this.currentFloorName="";this.currentFloor=null;this.activeLODList=[];this.navigationSolver=
            this.routingSolver=!1;"undefined"!==typeof this.multiBuildingView&&null!==this.multiBuildingView&&(this.multiBuildingView.removeCallbacks(),this.multiBuildingView=null);"undefined"!==typeof this.cameraDrivenExplorer&&null!==this.cameraDrivenExplorer&&(this.cameraDrivenExplorer.setEnabled(!1),this.cameraDrivenExplorer=null);return!0};var ac=0;this.requestRedraw=function(){bb&&(gd||!1!==X||(X=requestAnimationFrame(A.animateBind)))};this.requestContinuousUpdate=function(a){bb&&(gd=a,!1===X&&(X=requestAnimationFrame(A.animateBind)))};
        var Bc=function(a,d){var e=Math.sin(T.rotation_angle_in_degrees*Math.PI/180),f=Math.cos(T.rotation_angle_in_degrees*Math.PI/180),g=a-T.pixel_xref,k=d-T.pixel_yref;return[T.meters_per_pixel*(g*f-k*e),T.meters_per_pixel*(g*e+k*f)]};this.setAutoUpdateLOD=function(a){for(var d=0,e=Oa.length;d<e;d++)Oa[d].setAutoUpdateLOD(a)};this.forcePoiUpdateOpacity=!1;this._updateObjectOpacity=function(a,d){if(a.vg.poi&&a.vg.poi.visibilityRampStartVisible&&a.vg.poi.visibilityRampFullyVisible&&a.vg.poi.visibilityRampStartInvisible&&
          a.vg.poi.visibilityRampFullyInvisible){var e=A.computeOpacity(a.position,a.vg.poi,d);a.visible=0==e||!1===a.vg.poi.visible?!1:!0;var f=a.vg.poi._opacity;if(this.forcePoiUpdateOpacity||f!==e)a.vg.poi._opacity=e,a.traverse(function(a){if(a.material)if("undefined"!==typeof a.material.materials)for(var d=a.material.materials,f=0,g=d.length;f<g;++f)d[f].opacity=e;else if("undefined"!==typeof a.material.length)for(f=0,g=a.material.length;f<g;++f)a.material[f].opacity=e;else a.material.opacity=e;a.vg&&a.vg.poi&&
        a.vg.poi.selector&&(d=document.querySelector(a.vg.poi.selector),0===e||!1===a.vg.poi.visible?d.style.display="none":(d.style.opacity=e,d.style.display=""))})}};this.updateCameraObjects=function(){for(var a=0,d=Oa.length;a<d;a++){var e=Oa[a];if(e.isAutoUpdateLOD()&&e.isEnabled())for(var f=this.computeTargetLod(e.name),g=0,k=e.lods.length;g<k;g++)e.lods[g].setEnabled(g==f);if(e.isEnabled()&&e.tiledImages)for(g=0,k=e.tiledImages.length;g<k;++g){var l=e.tiledImages[g];l.update()}e.name==this.currentFloorName&&
        (this.current_lod=f)}a=0;for(d=A.activeLODList.length;a<d;++a){e=A.activeLODList[a];g=A.camera.position.clone();e.node.worldToLocal(g);k=0;for(l=e.rampObjects.length;k<l;++k)f=e.rampObjects[k],this._updateObjectOpacity(f,g);g=0;for(k=e.cameraUpdatableObjects.length;g<k;++g)f=e.cameraUpdatableObjects[g],f.updateMatrix(),f.updateMatrixWorld();if(e.tiledImages)for(g=0,k=e.tiledImages.length;g<k;++g)l=e.tiledImages[g],l.update()}d=new I.Vector3;a=0;for(f=this.pois_with_selector.length;a<f;++a)if(g=this.pois_with_selector[a],
          g.selector)if(k=document.querySelector(g.selector),e=A.getFloor(g.floor),e="undefined"!==typeof g.lod?e.getLOD(g.lod):e.floorContentLOD,!1===e.isActive()||!1===g.visible||0===g._opacity)k.style.display="none",g._opacity=0;else if(d.copy(g.position),e=A.getFloor(g.floor).getPosition(),d.add(e),d.project(A.camera),1<d.z)k.style.display="none";else{k.style.display="";var e=(d.x+1)/2*this.viewportWidth,l=(1-d.y)/2*this.viewportHeight,n=m.getElementWidth(k),q=m.getElementHeight(k),e=e+n*(g.alignment.x-
          1)/2,l=l-q*(g.alignment.y+1)/2;""!==k.textContent&&(e=Math.round(e),l=Math.round(l));k.style.transform="translate("+e+"px,"+l+"px)";k.style["webkit-transform"]="translate("+e+"px,"+l+"px)"}a=0;for(d=A.globalCameraUpdatebleLinks.length;a<d;++a)A.globalCameraUpdatebleLinks[a].updateCamerafacing()};this.removeLink=function(a){for(var d=0,e=A.globalCameraUpdatebleLinks.length;d<e;d++)if(A.globalCameraUpdatebleLinks[d]===a)return A.globalCameraUpdatebleLinks.splice(d,1),!0;return!1};this.addLink=function(a){this.globalCameraUpdatebleLinks.push(a)};
        this.removePath=function(a){var d=a.lod.pathObjects.indexOf(a);-1!==d&&a.lod.pathObjects.splice(d,1)};this.addActiveLOD=function(a){this.activeLODList.push(a)};this.removeActiveLOD=function(a){for(var d=0,e=A.activeLODList.length;d<e;d++)if(A.activeLODList[d]===a)return A.activeLODList.splice(d,1),!0;return!1};this.computeTargetLod=function(a){var d=0;if(null===$a||Y!==a){var e=this.getFloor(a).lods.length;$a=[];Y=a;var f;if(T.meters_per_pixel){T.distance_coef||(T.distance_coef=.5);if(!1===Bb){a=
          Ka;var g,k,m,n,q;g=Bc(0,0);f=g[0];g=g[1];k=f;n=g;m=f;q=g;g=Bc(0,a);f=g[0];g=g[1];k=Math.min(k,f);n=Math.min(n,g);m=Math.max(m,f);q=Math.max(q,g);g=Bc(a,a);f=g[0];g=g[1];k=Math.min(k,f);n=Math.min(n,g);m=Math.max(m,f);q=Math.max(q,g);g=Bc(a,0);f=g[0];g=g[1];k=Math.min(k,f);n=Math.min(n,g);m=Math.max(m,f);q=Math.max(q,g);Bb=Math.max(m-k,q-n)}f=.5*Bb*T.distance_coef;a=Math.tan(.5*N.fovY*l.DEG2RAD)/this.viewportHeight;f/=1800*a;for(a=0;a<e-1;a++)$a.push(f),f*=.5}else if(f=800,1<e)for(k=700/(e-1),a=0;a<
        e-1;a++)f-=k,$a.push(f)}e=this.manipulator.radius/this.publicLodFactor;T.meters_per_pixel&&(e=e*Math.sin(-this.publicCamera.pitch*l.DEG2RAD)*T.meters_per_pixel);a=0;for(f=$a.length;a<f;++a)if(e<$a[a])d++;else break;return d};this.computeOpacity=function(){var a=new I.Vector3;return function(d,e,f){a.copy(d);a.sub(f);d=a.length();return d=d<e.visibilityRampStartVisible||d>e.visibilityRampFullyInvisible?0:d<e.visibilityRampFullyVisible?I.Math.mapLinear(d,e.visibilityRampStartVisible,e.visibilityRampFullyVisible,
          0,1):d<=e.visibilityRampStartInvisible?1:I.Math.mapLinear(d,e.visibilityRampFullyInvisible,e.visibilityRampStartInvisible,0,1)}}();this.frameCounter=0;this.frameRateDivider=1;navigator&&navigator.userAgent&&-1!=navigator.userAgent.indexOf("Windows Phone")&&(this.frameRateDivider=3);this.frameRateProbing=!1;this.frameTimeLastProbe=0;this.animate=function(a){X=!1;this.frameCounter++;if(gd&&bb&&(X=requestAnimationFrame(A.animateBind),0!=this.frameCounter%this.frameRateDivider))return;A.mustUpdateCameraObjects&&
        (A.updateCameraObjects(),A.mustUpdateCameraObjects=!1);for(var d=0,e=A.activeLODList.length;d<e;++d)for(var f=A.activeLODList[d],g=0,k=f.pathObjects.length;g<k;++g)a=f.pathObjects[g].mesh,a.vg.path&&a.material.map&&(a.material.map.offset.x=-zb*a.vg.path.speed);this.render()};this.postRenderListeners=[];this.postRenderListenersRemoveList=[];this.addPostRenderListener=function(a){this.postRenderListeners.push(a)};this.removePostRenderListener=function(a){for(var d=0,e=this.postRenderListeners.length;d<
        e;d++)if(this.postRenderListeners[d]===a)return this.postRenderListenersRemoveList.push(a),!0;return!1};this.render=function(){if(0<this.nbUpdatableObjects)for(var a=this.clock.getDelta(),d,e=0,f=A.activeLODList.length;e<f;++e)for(var g=A.activeLODList[e],k=0,l=g.animatedObjects.length;k<l;++k)d=g.animatedObjects[k],d.updateMatrixWorld(!0),d.vg.mixer.update(a);TWEEN.update();document.body.contains(Ca)&&(oa.autoClear=!1,oa.clear(),null!==this.skybox&&this.skybox.render(),oa.render(this.scene,this.camera));
          zb=(Date.now()-cb)/1E3;for(e=0;e<this.postRenderListeners.length;e++)this.postRenderListeners[e]();for(A.trigger("redraw",void 0);0<this.postRenderListenersRemoveList.length;)for(a=this.postRenderListenersRemoveList.pop(),e=0,f=this.postRenderListeners.length;e<f;e++)if(this.postRenderListeners[e]===a){this.postRenderListeners.splice(e,1);break}};this.animateObject=yb;this.getGeoinformation=function(){return T};this.convertPointToScreen=function(a){a=new I.Vector3(a.x,a.y,a.z||0);a.project(A.camera);
          return{left:.5*this.viewportWidth*(a.x+1),top:.5*this.viewportHeight*(1-a.y)}};this.convertScreenToPoint=function(a,d){d=d||0;var e=new I.Vector3(2*a.left/A.viewportWidth-1,1-2*a.top/A.viewportHeight,1);e.unproject(A.camera);if(this.camera instanceof I.OrthographicCamera){var f=new I.Vector3(2*a.left/A.viewportWidth-1,1-2*a.top/A.viewportHeight,-1);f.unproject(A.camera);if(e.z==f.z)return{x:f.x,y:f.y,z:d};var g=f.clone();g.sub(e);g.multiplyScalar((f.z-d)/g.z);f.sub(g);return{x:f.x,y:f.y,z:d}}e=e.clone().sub(A.camera.position).normalize();
          if(.001>Math.abs(e.z))return e=A.publicCamera.position,{x:e.x,y:e.y,z:0};f=(A.camera.position.z-d)/-e.z;e=e.clone().multiplyScalar(f);e=e.add(A.camera.position);return{x:e.x,y:e.y,z:e.z}};this.convertLatLonToPoint=function(a){if(!zc)return{x:0,y:0,z:1,valid:!1};a=new Proj4js.Point([a.lon,a.lat]);a=Proj4js.transform(nd,od,a);a={x:a.x-Ub,y:a.y-Ac};var d={},e=a.x,f=a.y;d.x=e*T.matrixUTMToSVG.elements[0]+f*T.matrixUTMToSVG.elements[1]+T.matrixUTMToSVG.elements[4];d.y=e*T.matrixUTMToSVG.elements[2]+f*
          T.matrixUTMToSVG.elements[3]+T.matrixUTMToSVG.elements[5];"undefined"!==typeof a.z&&(d.z=a.z);d.z=2;return a=Sa(d)};this.convertPointToLatLon=function(a){if(!zc)return{lat:0,lon:0,valid:!1};var d=Za(a),e=d.x+T.matrixSVGToUTM.elements[4],d=T.matrixSVGToUTM.elements[5]-d.y;a=new Proj4js.Point([e*T.matrixSVGToUTM.elements[0]+d*T.matrixSVGToUTM.elements[1]+Ub,e*T.matrixSVGToUTM.elements[2]+d*T.matrixSVGToUTM.elements[3]+Ac,a.z||0]);a=Proj4js.transform(od,nd,a);return{lat:a.y,lon:a.x}};this.offsetPosition=
          function(a,d,e,f){a=Za(a);d=Math.PI*(d+T.rotation_angle_in_degrees)/180;e=Math.PI*e/180;a.z=a.z||0;var g=f/T.meters_per_pixel;f={x:a.x+Math.sin(d)*Math.cos(e)*g,y:a.y-Math.cos(d)*Math.cos(e)*g,z:a.z+Math.sin(e)*f};return Sa(f)};this.computeHeadingAngle=function(a,d,e){a=C._getVector(Za(a));d=C._getVector(Za(d));e=C._getVector(Za(e));d=C._subVectors(d,a);a=C._subVectors(e,a);d.z=0;a.z=0;return 0==d.lengthSq()||0==a.lengthSq()?!1:C._computeAngle(d.normalize(),a.normalize())};this.computeDistance=function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      d){var e=C._getVector(Za(a)),f=C._getVector(Za(d)),g=(a.z||0)-(d.z||0),e=C._subVectors(f,e);e.z=0;e=e.length()*T.meters_per_pixel;return 0==g?e:Math.sqrt(e*e+g*g)};this.initializeProjection=function(a){zc=!1;if("string"!==typeof a.proj4string)return!1;var d=a.proj4string.replace(/\+proj=(\S+).*$/,"$1");if(!d.match(/utm|somerc|tmerc|lcc/))return!1;nd=new Proj4js.Proj("WGS84");d=d.toUpperCase()+"00";Proj4js.defs[d]=a.proj4string;od=new Proj4js.Proj(d);Ub=parseFloat(a.offsetX)||0;Ac=parseFloat(a.offsetY)||
          0;return zc=!0};this.textGenerator=new K;this.addPOI=function(a){return v.createPOI({container:Ca,_mapviewer:A,MapviewerPrivate:G},a)};this.addTiledImages=function(a){(new L(A.camera,a)).add()};this.addRoutingPath=function(a){return(a=this.addRoutingPrivatePath(a))?a.getPublicPath():!1};this.addRoutingPrivatePath=function(a){var e,k,l={};l.points=a.points;if("undefined"===typeof l.points||2>l.points.length)return!1;k=l.points;if(2===k.length&&k[0].x===k[1].x&&k[0].y===k[1].y&&k[0].z===k[1].z)return!1;
          l.url=a.url;l.speed="undefined"!==typeof a.speed?a.speed:0;l.repeat=a.repeat||-1;l.overlay="undefined"!==typeof a.overlay?a.overlay:!A.useDepthWriteForPOIs;l.segments=a.segments||-1;l.thickness="undefined"!==typeof a.thickness?a.thickness:2;l.lod=a.lod;l.floor=a.floor||A.currentFloorName;l.visible="undefined"!==typeof a.visible?a.visible:!0;l.color="undefined"!==typeof a.color?a.color:16777215;l.opacity="undefined"!==typeof a.opacity?a.opacity:1;l.interpolationStart=a.interpolationStart||0;l.interpolationEnd=
            "undefined"===typeof a.interpolationEnd?1:a.interpolationEnd;l.interpolationTextureLikeWindow="undefined"===typeof a.interpolationTextureLikeWindow?!0:a.interpolationTextureLikeWindow;0>l.thickness&&(l.thickness*=-1);a=new I.CurvePath;var m=k.length;for(e=0;e<m;e++)k[e].z=k[e].z||0,k[e]=new I.Vector3(k[e].x,k[e].y,k[e].z);if(2===m)a.add(new I.LineCurve3(k[0],k[1]));else{var n=new I.Vector3,q=new I.Vector3;e=0;q.subVectors(k[e+1],k[e]).multiplyScalar(.5).add(k[e]);a.add(new I.LineCurve3(k[e],q.clone()));
            e=1;n.subVectors(k[e],k[e-1]);n.multiplyScalar(.5);n.add(k[e-1]);for(e=1;e<m-1;++e)q.subVectors(k[e+1],k[e]),q.multiplyScalar(.5),q.add(k[e]),a.add(new I.CubicBezierCurve3(n.clone(),k[e],k[e],q.clone())),n=q.clone();e=m-2;n.subVectors(k[e+1],k[e]);n.multiplyScalar(.5);n.add(k[e]);a.add(new I.LineCurve3(n,k[e+1]))}k=a.getLength();0>l.segments&&(l.segments=Math.ceil(-k/l.segments));n=l.repeat;0>n&&(n*=-k/l.thickness);e=new g(a,{segments:l.segments,radius:l.thickness,segmentsRadius:2,closed:!1,debug:!1,
            interpolationStart:l.interpolationStart,interpolationEnd:l.interpolationEnd,interpolationTextureLikeWindow:l.interpolationTextureLikeWindow,zOffset:G.zOffsetPath});m=e.geometry;q=new I.MeshBasicMaterial({color:l.color,opacity:l.opacity,wireframe:!1,transparent:!0,depthWrite:!1,depthTest:!l.overlay});if(l.url){var r=new d(A,l.url,!1);r.wrapS=I.RepeatWrapping;r.wrapT=I.RepeatWrapping;r.repeat.x=n;r.repeat.y=-1;q.map=r}else l.speed=0;n=new I.Mesh(m,q);n.matrixAutoUpdate=!1;n.renderOrder=-(l.overlay?
            G.renderDepthPathOverlay:G.renderDepthPath)-m.vertices[0].z;n.doubleSided=!1;q=A.scene;m=A.getFloor(l.floor);null===m&&(m=A.getFloor(A.currentFloorName));null!==m&&(q=("undefined"!==typeof l.lod?m.getLOD(l.lod):m.floorContentLOD).contentNode);q.add(n);n.updateMatrixWorld(!0);n.vg={path:l};a=new f(A,l,a,k,n,e,m.floorContentLOD);m.floorContentLOD.pathObjects.push(a);0!==l.speed&&l.visible&&A.incrementUpdatableObjects();l.visible&&A.requestRedraw();return a};this.addRoutingLink=function(a){a=a||{};if("undefined"===
          typeof a.startPoint||"undefined"===typeof a.endPoint)return!1;var d=A.getFloor(a.startFloor||A.currentFloorName);if(null===d)return!1;var e=A.getFloor(a.endFloor||A.currentFloorName);if(null===e)return!1;var f=d.getPosition(),g={x:a.startPoint.x,y:a.startPoint.y,z:a.startPoint.z||0},k=e.getPosition(),l={x:a.endPoint.x,y:a.endPoint.y,z:a.endPoint.z||0};a={floor:d.name,points:[g,{x:k.x-f.x+l.x,y:k.y-f.y+l.y,z:k.z-f.z+l.z}],segments:1,url:a.url,color:a.color,repeat:a.repeat,speed:a.speed,thickness:a.thickness,
          visible:a.visible,opacity:a.opacity,interpolationStart:a.interpolationStart,interpolationEnd:a.interpolationEnd,interpolationTextureLikeWindow:a.interpolationTextureLikeWindow,overlay:a.overlay};if(a.points&&2!=a.points.length)return!1;this.mustUpdateCameraObjects=!0;a=this.addRoutingPrivatePath(a);return!1!==a?(a.setLinkOptions({cameraFacing:!0,startFloor:d,endFloor:e,startPoint:g,endPoint:l}),this.addLink(a),a.getPublicLink()):!1};this.recreateAndUpdateMeshFromPathGeometry=function(a,d,e){e="undefined"===
        typeof e?!0:e;var f=d.parent;f&&f.remove(d);var g=d.vg||{},k=d.doubleSided||!1,l=d.material;d.geometry.dispose();d=new I.Mesh(a.clone(),l);d.matrixAutoUpdate=!1;d.renderOrder=-(g.path.overlay?G.renderDepthPathOverlay:G.renderDepthPath);0<a.vertices.length&&(d.renderOrder+=a.vertices[0].z);d.vg=g;d.doubleSided=k;f&&(f.add(d),d.updateMatrixWorld(!0));d.traverse(function(a){a.visible=e});A.requestRedraw();return d};this.plugin=function(a){return this.plugins[a]};this.incrementUpdatableObjects=function(){++this.nbUpdatableObjects;
          this.requestContinuousUpdate(!0);fd=!1};this.decrementUpdatableObjects=function(){0===this.nbUpdatableObjects?ea.log("ERROR INTERNAL: decrementUpdatableObjects below 0"):(--this.nbUpdatableObjects,0===this.nbUpdatableObjects&&(this.requestContinuousUpdate(!1),fd=!0))};this.computeRoute=function(a){return(new da(function(d,e){if(void 0!==a&&void 0!==a.src&&void 0!==a.dst){var f={src:a.src,dst:a.dst};void 0!==A.logStatistics&&A.logStatistics&&A.statistics.logStat("routing",f);var g=["computeNavigation",
          "language","routingParameters","navigationParameters"],k;for(k in g){var l=g[k];"undefined"!==typeof a[l]&&(f[l]=a[l])}f.version=this.version;f.sdk="VisioWeb";"#javascript"===A.getRoutingURL()&&!1!==this.routingSolver?(f=this.routingSolver.computeRoute(a),f.sdkVersion=A.version,f.routingServerVersion="javascript",200===f.status&&a.computeNavigation&&!1!==this.navigationSolver&&(f.navigation=this.navigationSolver.computeNavigation(f,a.navigationParameters)),d({request:a,data:f})):(a.src===a.dst&&e(Error("routeRequest invalid, src same as dst")),
          m.request(Nb,"GET",f,{crossDomain:!0}).then(function(e){var f=JSON.parse(e.response);ea.log(e);d({request:a,data:f})}).catch(function(a){e(a)}))}else e(Error("routeRequest invalid, maybe missing src or dst"))}.bind(this))).tap(function(a){A.trigger("routeComputed",{request:a.request,data:a.data})}).then(function(d){"undefined"!==typeof a.success&&a.success(d);return d}).catch(function(d){"undefined"!==typeof a.error&&a.error();throw d;})};this.getRoutingModalities=function(){return!1!==A.routingSolver&&
        "#javascript"===A.getRoutingURL()?A.routingSolver.getModalities():!1};this.getRoutingAttributes=function(){return!1!==A.routingSolver&&"#javascript"===A.getRoutingURL()?A.routingSolver.getAttributes():!1};this.getRoutingNode=function(a,d){return!1!==A.routingSolver&&"#javascript"===A.getRoutingURL()?A.routingSolver.getRoutingNode(a,d):a};this.getLoaderStatistics=function(){this.loaderStatistics.requestRedraw=!1!==X?!0:!1;return this.loaderStatistics};this.isLoaded=function(){return 0==this.loaderStatistics.models&&
          0==this.loaderStatistics.textures};this.queryNearPlaces=function(a,d){return!1!==A.routingSolver&&"#javascript"===A.getRoutingURL()?A.routingSolver.queryNearPlaces(a,d):[]};this.start=function(){bb=!0;fd?A.requestRedraw():A.requestContinuousUpdate(!0)};this.stop=function(){bb=!1};this.getFloors=function(){if(!this.publicFloors){this.publicFloors=[];for(var a=0,d=Oa.length;a<d;a++)this.publicFloors.push(Oa[a].getPublicFloor());this.publicFloors.sort(function(a,d){return"undefined"!==typeof a.heightMin&&
        "undefined"!==typeof a.heightMax&&"undefined"!==typeof d.heightMin&&"undefined"!==typeof d.heightMax?a.heightMax+a.heightMin-(d.heightMax+d.heightMin):0});a=0;for(d=this.publicFloors.length;a<d;a++)this.publicFloors[a].index=a}return this.publicFloors};this.setPlaceName=function(a,d){this.deferredPoiLoading.active&&(this.deferredPoiLoading.setPlaceName[a]=d);var e=this.pois[a];if("undefined"!==typeof e){"undefined"===typeof d?d={text:""}:"string"===typeof d&&(d={text:d});for(var f in e){var g=e[f];
          g.options("image")||g.options("model")||g.options(d)}}};this.setPlaceIcon=function(a,d){this.deferredPoiLoading.active&&(this.deferredPoiLoading.setPlaceIcon[a]=d);var e=this.pois[a];if("undefined"!==typeof e){"undefined"===typeof d?d={url:""}:"string"===typeof d&&(d={url:d});for(var f in e){var g=e[f];g.options("image")||g.options("model")||g.options(d)}}};this.getPlace=function(a){return"undefined"!==typeof this.places[a]?this.places[a]:!1};this.isInside2D=function(a,d){return l.isInside2D(a,d)};
        this.isInsideFootprint=function(a,d){var e=this.getFootprint(d);return e?"number"===typeof e.length?e.some(function(d){return this.isInside2D(a,d.points)},this):this.isInside2D(a,e.points):!1};this.getFootprint=function(a){var d=this.publicFootprintsTable[a];if("undefined"!==typeof d)return d;if("undefined"!==typeof this.polygons_table[a]&&0<this.polygons_table[a].length){var e=(d=this.pois_floor_table[a])?d.floorName:void 0,f=this.polygons_table[a];if(1<f.length)for(var d=[],g=0;g<f.length;g++){for(var k=
          f[g].points.split(/,/),l,m=[],n=0,q=k.length;n<q;++n)l=k[n].split(/ /),m.push(Sa({x:parseFloat(l[0]),y:parseFloat(l[1])}));d.push({id:a,points:m,floor:e})}else{k=f[0].points.split(/,/);m=[];n=0;for(q=k.length;n<q;++n)l=k[n].split(/ /),m.push(Sa({x:parseFloat(l[0]),y:parseFloat(l[1])}));d={id:a,points:m,floor:e}}return this.publicFootprintsTable[a]=d}return!1};this.publicFootprintsTable={};this.publicFootprintsTableInitialized=!1;this.getFootprintPoints=function(a){a=this.getFootprint(a);return"number"===
        typeof a.length?(points=[],a.forEach(function(a){points.push.apply(points,a.points)}),points):a.points};this.getFootprints=function(){if(!this.publicFootprintsTableInitialized){for(id in this.polygons_table)this.getFootprint(id);this.publicFootprintsTableInitialized=!0}return this.publicFootprintsTable};this.publicPOFTable={};this.publicPOFTableInitialized=!1;this.getPOF=function(a){var d=this.publicPOFTable[a];if(d)return d;if("undefined"!==typeof this.pofs_table[a]){var d=this.pofs_table[a],e=Sa({x:parseFloat(d.x),
          y:parseFloat(d.y)}),f=this.pois_floor_table[a],d={id:a,x:e.x,y:e.y,height:d.height,headingInDegrees:d.headingInDegrees,floor:f?f.floorName:void 0};return this.publicPOFTable[a]=d}return!1};this.getPOFs=function(){if(!this.publicPOFTableInitialized){for(id in this.pofs_table)this.getPOF(id);this.publicPOFTableInitialized=!0}return this.publicPOFTable};this.getPlaces=function(){return this.places};this.setPlaceColor=function(a,d){return a&&a.setColor?a.setColor(d):!1};this.resetPlaceColor=function(a){var d=
          !1;if("undefined"===typeof a||!1===a)return d;if(a instanceof Array)for(var e in a)a[e].resetColor&&(a[e].resetColor(),d=!0);else a.resetColor&&(d=a.resetColor());return d};this.getRoutingURL=function(){return Nb};this.setRoutingURL=function(a){Nb=a};this.changeFloor=function(a,d){if("undefined"===typeof a)return da.reject();if(this.currentFloorName===a)return da.resolve();if(!1===A.trigger("floorWillChange",{current:A.currentFloorName,target:a}))return da.reject();var e=A.currentFloorName,f=this.currentFloor,
          g=f.getLOD(A.current_lod);if(g&&!ld){var k=this.getFloor(a),l=this.computeTargetLod(a),m=k.getLOD(l);if(null===m&&0!==k.lods.length)for(var n in k.lods){l=n;m=k.lods[n];break}ld=!0;A.incrementUpdatableObjects();return Mb(f,!0,k,d).then(function(){f.setEnabled(!1);g.setEnabled(!1);k.setEnabled(!0);m.setEnabled(!0);A.currentFloorName=a;A.currentFloor=k;A.current_lod=l;A.mustUpdateCameraObjects=!0;return Mb(k,!1,f,d)}).then(function(){A.mustUpdateCameraObjects=!0;A.decrementUpdatableObjects();A.requestRedraw();
          ld=!1;A.trigger("floorChanged",{current:e,target:a})})}return da.reject()};this.resize=function(a,d){return this.resizeInternal(a,d,!0)};this.resizeInternal=function(a,d,e){this.viewportWidth=a;this.viewportHeight=d;N.update(this.viewportWidth,this.viewportHeight);"undefined"!==typeof Ka&&"undefined"!==typeof T&&ha(Ka*T.meters_per_pixel,!0);var f=this.camera;f.aspect=this.viewportWidth/this.viewportHeight;f instanceof I.OrthographicCamera?(f.left=this.viewportWidth/-2,f.right=this.viewportWidth/2,
          f.top=this.viewportHeight/2,f.bottom=this.viewportHeight/-2,this.orthographicNormalizedZoom=1>f.aspect?this.viewportWidth/this.sideInMeters:this.viewportHeight/this.sideInMeters):f.fov=N.fovY;null!==this.skybox&&this.skybox.update(N.fovY,f.aspect);f.updateProjectionMatrix();A.manipulator.update();oa.setSize(this.viewportWidth,this.viewportHeight);oa.domElement.style.width=this.viewportWidth;oa.domElement.style.height=this.viewportHeight;$a=null;A.requestRedraw();this.trigger("resize",{mapWidth:a,
          mapHeight:d},!0);e&&this.render();return!0};this.getCurrentFloor=function(){return this.currentFloorName};this.getViewpointFromPositions=function(a){var d=a.top||0,e=a.bottom||0,f=a.left||0,g=a.right||0,k=a.points;if("undefined"===typeof k||!k.length)return!1;var l,m,n="number"===typeof a.pitch?!0:!1,q="number"===typeof a.heading?!0:!1;n&&(l=this.publicCamera.pitch,this.publicCamera.pitch=a.pitch);q&&(m=this.publicCamera.heading,this.publicCamera.heading=a.heading);a=!1;if(n||q)a=function(){n&&(this.publicCamera.pitch=
          l);q&&(this.publicCamera.heading=m)}.bind(this);var r=new I.Vector3(A.camera.matrix.elements[0],A.camera.matrix.elements[1],A.camera.matrix.elements[2]),t=new I.Vector3(A.camera.matrix.elements[4],A.camera.matrix.elements[5],A.camera.matrix.elements[6]),u=new I.Vector3(A.camera.matrix.elements[8],A.camera.matrix.elements[9],A.camera.matrix.elements[10]),v=.5*A.viewportWidth,w=.5*A.viewportHeight,x=v/w,y;y=Math.tan(I.Math.degToRad(.5*A.camera.fov));var x=y*x,z,B,C,H,J,E;z=y*(w-d)/w;B=-y*(w-e)/w;C=
          x*(v-g)/v;H=-x*(v-f)/v;x=.5*(z+B);y=.5*(C+H);J=z-B;E=C-H;for(var G in this.helpers)A.scene.remove(this.helpers[G]);this.helpers=[];if(1===k.length){u=k[0];if("undefined"===typeof u||"undefined"===typeof u.x||"undefined"===typeof u.y)return a&&a(),!1;r=A.convertScreenToPoint({left:v+.5*(f-g),top:w+.5*(d-e)},u.z||0);t=A.publicCamera.position;u={x:u.x-r.x+t.x,y:u.y-r.y+t.y,radius:t.radius};a&&a();return u}var K=new I.Vector3(k[0].x,k[0].y,k[0].z||0),L=K.clone(),w=-u.dot(new I.Vector3(k[0].x,k[0].y,k[0].z||
          0));G=1;for(var N=k.length;G<N;++G)v=k[G],K.x=Math.max(K.x,v.x),K.y=Math.max(K.y,v.y),K.z=Math.max(K.z,v.z||0),L.x=Math.min(L.x,v.x),L.y=Math.min(L.y,v.y),L.z=Math.min(L.z,v.z||0),w=Math.min(w,-u.dot(new I.Vector3(k[G].x,k[G].y,k[G].z||0)));v=new I.Vector3;v.addVectors(L,K);v.multiplyScalar(.5);v=v.sub(u.clone().multiplyScalar(w+u.dot(v)));w=new I.Vector3(k[0].x,k[0].y,k[0].z||0);w.sub(v);if(1E-6>K.x-L.x&&1E-6>K.y-L.y&&1E-6>K.z-L.z)return u=this.getViewpointFromPositions({points:[k[0]],top:d,bottom:e,
          left:f,right:g}),a&&a(),u;if(A.camera instanceof I.OrthographicCamera)return a&&a(),a=Math.max(K.x-L.x,K.y-K.y),{x:v.x,y:v.y,radius:this.manipulator.wholeRadius*a/this.sideInMeters};var O,Q,R,T,S;O=w.dot(u);S=N=w.dot(t);L=K=w.dot(r);N+=O*z;S+=O*B;K+=O*C;L+=O*H;g=e=d=f=0;for(G=1;G<k.length;++G)w=new I.Vector3(k[G].x,k[G].y,k[G].z||0),w.sub(v),O=w.dot(u),R=Q=w.dot(t),T=w=w.dot(r),Q+=O*z,R+=O*B,w+=O*C,T+=O*H,Q>N&&(N=Q,f=G),R<S&&(S=R,d=G),T<L&&(L=T,g=G),w>K&&(K=w,e=G);G=.5*(N+S);z=.5*(K+L);J=(N-S)/J;
          E=(K-L)/E;J>E?(E=J,G=v.clone().add(t.clone().multiplyScalar(G-E*x)).add(r.clone().multiplyScalar(z-E*y)).add(u.clone().multiplyScalar(E)),t=(new I.Vector3(k[g].x,k[g].y,k[g].z)).sub(G.clone().sub(u.clone().multiplyScalar(E))),x=(new I.Vector3(k[e].x,k[e].y,k[e].z)).sub(G.clone().sub(u.clone().multiplyScalar(E))),k=E-t.dot(u),E-=x.dot(u),t=t.dot(r),x=x.dot(r),t=(t*E+x*k-2*y*k*E)/(k+E),G.add(r.clone().multiplyScalar(t))):(G=v.clone().add(t.clone().multiplyScalar(G-E*x)).add(r.clone().multiplyScalar(z-
            E*y)).add(u.clone().multiplyScalar(E)),r=(new I.Vector3(k[f].x,k[f].y,k[f].z)).sub(G.clone().sub(u.clone().multiplyScalar(E))),y=(new I.Vector3(k[d].x,k[d].y,k[d].z)).sub(G.clone().sub(u.clone().multiplyScalar(E))),k=E-r.dot(u),E-=y.dot(u),r=r.dot(t),y=y.dot(t),r=(r*E+y*k-2*x*k*E)/(k+E),G.add(t.clone().multiplyScalar(r)));r=G.z/u.z;u=u.clone().multiplyScalar(G.z/u.z);G.sub(u);a&&a();return{x:G.x,y:G.y,radius:r}};this.notifications=new J;this.on=function(a,d){return this.notifications.on(a,d,!1)};
        this.once=function(a,d){return this.notifications.on(a,d,!0)};this.off=function(a,d){return this.notifications.off(a,d)};this.trigger=function(a,d,e){return this.notifications.trigger(a,d,e)};this.animateValue=function(a,d,e){var f;if("undefined"!==typeof e){a=parseFloat(a);d=parseFloat(d);e.duration="undefined"!==typeof e.duration?e.duration:1E3;if("number"===typeof e.duration){f=(new TWEEN.Tween(a)).to(d,e.duration);A.incrementUpdatableObjects();if("function"===typeof e.step)f.onUpdate(function(e){return function(f){e(a+
          f*(d-a))}}(e.step));f.onComplete(function(a){return function(){A.decrementUpdatableObjects();f.onStop(null);if("function"===typeof a){var d=function(){setTimeout(function(){a()},0);A.removePostRenderListener(d)};A.addPostRenderListener(d);A.requestRedraw()}}}(e.complete));f.onStop(function(a){return function(){A.decrementUpdatableObjects();f.onStop(null);"function"===typeof a&&a()}}(e.stop));f.start();return function(a){return{stop:function(){a.stop()},repeat:function(d){a.repeat(d)},yoyo:function(d){a.yoyo(d)}}}(f)}return!1}};
        this.cameraNorthRotation=!1;Object.defineProperty(this,"isAccelerated",{get:function(){return!0}});Object.defineProperty(this,"version",{get:function(){return"1.8.10"}});Object.defineProperty(this,"minimumDataSDKVersion",{get:function(){return"1.4.0"}});Object.defineProperty(this,"sdkType",{get:function(){return"web"}});Object.defineProperty(this,"revision",{get:function(){return"ad6f17e"}});this.getExtraData=function(){return this.extraData};this.getMapName=function(){return this.mapName};
        this.getPOIs=function(){return R.extend({},this.pois)};this.getPOI=function(a){return this.pois[a]};this.getLogStatistic=function(){return this.logStatistics};this.setLogStatistic=function(a){(this.logStatistics=a)?(void 0===this.statistics&&(this.statistics=new O(A)),this.statistics.setMapParameters(this.logStatisticsParameters)):this.statistics=void 0};this.getLogStatisticURL=function(){return this.statistics.getURL()};this.setLogStatisticURL=function(a){this.statistics.setURL(a)};this.getLogStatisticAppID=
          function(){return this.statistics.getAppID()};this.setLogStatisticAppID=function(a){this.statistics.setAppID(a)};this.setup()};G.available_plugins=[];G.zOffsetPOI=.1;G.zOffsetPath=.1;G.renderDepthPOIOverlay=-4E5;G.renderDepthPathOverlay=-3E5;G.renderDepthPath=-2E5;G.renderDepthPOIFacing=-15E4;G.renderDepthPOI=-1E5;return G});
  define("com/visioglobe/web/Mapviewer",["com/visioglobe/web/MapviewerPrivate","underscoretiny"],function(e,n){return function(){var l=new e,m={initialize:!0,setSkybox:!0,start:!0,stop:!0,loadMap:!0,unloadMap:!0,getFloors:!0,setPlaceName:!0,setPlaceIcon:!0,getPlace:!0,getPlaces:!0,getPOI:!0,getPOIs:!0,setPlaceColor:!0,resetPlaceColor:!0,computeRoute:!0,getRoutingURL:!0,setRoutingURL:!0,changeFloor:!0,resize:!0,getCurrentFloor:!0,getExtraData:!0,getMapName:!0,getRoutingAttributes:!0,getRoutingModalities:!0,
    getRoutingNode:!0,queryNearPlaces:!0,getViewpointFromPositions:!0,convertLatLonToPoint:!0,convertPointToLatLon:!0,offsetPosition:!0,computeHeadingAngle:!0,computeDistance:!0,initializeProjection:!0,addPOI:!0,addRoutingPath:!0,addRoutingLink:!0,convertScreenToPoint:!0,convertPointToScreen:!0,addPostRenderListener:!0,removePostRenderListener:!0,plugin:!0,isInside2D:!0,isInsideFootprint:!0,getFootprint:!0,getFootprintPoints:!0,getFootprints:!0,getPOF:!0,getPOFs:!0,setAutoUpdateLOD:!0,on:!0,once:!0,off:!0,
    trigger:!0,animateValue:!0,getLoaderStatistics:!0,isLoaded:!0,requestRedraw:!0,getLogStatistic:!0,setLogStatistic:!0,getLogStatisticURL:!0,setLogStatisticURL:!0,getLogStatisticAppID:!0,setLogStatisticAppID:!0,setupMultiBuildingView:!0};Object.defineProperty(this,"lodFactor",{get:function(){return l.publicLodFactor},set:function(d){0>=d||(l.publicLodFactor=d,l.manipulator.update())}});Object.defineProperty(this,"multiBuildingView",{get:function(){return"undefined"===typeof l.multiBuildingView?!1:l.multiBuildingView.publicMultiBuildingView}});
    Object.defineProperty(this,"cameraDrivenExplorer",{get:function(){return"undefined"===typeof l.cameraDrivenExplorer?!1:l.cameraDrivenExplorer.publicCameraDrivenExplorer}});Object.defineProperty(this,"camera",{get:function(){return l.publicCamera}});Object.defineProperty(this,"cameraNorthRotation",{get:function(){return l.cameraNorthRotation}});Object.defineProperty(this,"isAccelerated",{get:function(){return l.isAccelerated}});Object.defineProperty(this,"version",{get:function(){return l.version}});
    Object.defineProperty(this,"minimumDataSDKVersion",{get:function(){return l.minimumDataSDKVersion}});Object.defineProperty(this,"sdkType",{get:function(){return l.sdkType}});Object.defineProperty(this,"revision",{get:function(){return l.revision}});Object.defineProperty(this,"frameRateDivider",{get:function(){return l.frameRateDivider},set:function(d){0>=d||(l.frameRateDivider=d)}});Object.keys(m).forEach(function(d){var a=m[d];"undefined"!==typeof l[d]&&function(a,d,e){a[d]=!0!==e?function(){return e.apply(a,
      arguments)}:function(){return l[d].apply(l,arguments)}}(this,d,a)},this);return this}});define("text!com/visioglobe/web/shaders/gradient.frag",[],function(){return"uniform vec3 spots[NB_SPOTS];varying vec3 vPos;uniform vec4 gradient[NB_GRADIENTS];float a(float b,float c,float d,float e,float f){return e+(b-c)*(f-e)/(d-c);}vec3 g(float h){h=clamp(h,gradient[0].w,gradient[NB_GRADIENTS-1].w);vec3 i;for(int j=0;j<NB_GRADIENTS-1;++j){if(h>=gradient[j].w&&h<=gradient[j+1].w){h=a(h,gradient[j].w,gradient[j+1].w,0.0,1.0);vec3 k=gradient[j].xyz;vec3 l=gradient[j+1].xyz;i=mix(k,l,h);}}return i;}void main(){vec2 m=vPos.xy;float n=0.0;float o[NB_SPOTS];for(int j=0;j<NB_SPOTS;++j){vec2 p=spots[j].xy-m;float q=sqrt(p.x*p.x+p.y*p.y);float r=1.0/pow(q,1.0);n+=r;o[j]=r*spots[j].z;}float s=0.0;for(int j=0;j<NB_SPOTS;++j){s+=o[j]/n;}vec3 i=g(s);gl_FragColor=vec4(i.rgb,1.0);}"});
  define("text!com/visioglobe/web/shaders/gradient.vert",[],function(){return"varying vec3 vPos;void main(){vPos=position;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}"});
  define("com/visioglobe/web/plugins/GradientPlugin",["com/visioglobe/web/MapviewerPrivate","text!com/visioglobe/web/shaders/gradient.frag","text!com/visioglobe/web/shaders/gradient.vert","three"],function(e,n,l,m){e.available_plugins.push({name:"gradient",factory:function(d){function a(a,d){a=m.Math.clamp(a,d[0].parameter,d[d.length-1].parameter);for(var e=0;e<d.length-1&&!(a<=d[e+1].parameter);)++e;a=m.Math.mapLinear(a,d[e].parameter,d[e+1].parameter,0,1);var f=new m.Color(d[e].value),e=new m.Color(d[e+
    1].value);return f.lerp(e,a)}function e(){Object.keys(this.parameters.gradient).forEach(function(a){var d=new m.Color(this.parameters.gradient[a].value);f.push(new m.Vector4(d.r,d.g,d.b,this.parameters.gradient[a].parameter))},this)}var r={},f=[];this.initialize=function(a){console.log("Running gradient plugin");this.parameters=a;this.inverse_lookup={};Object.keys(this.parameters.spots_lookup).forEach(function(a){var d=this.parameters.spots_lookup[a];Object.keys(d).forEach(function(e){this.inverse_lookup[d[e].id]=
      {id:a}},this)},this);e.apply(this);var u=function(a){if("undefined"!==typeof r[a])return r[a];var d=new m.ShaderMaterial({defines:{NB_SPOTS:a,NB_GRADIENTS:f.length},uniforms:{spots:{type:"v3v",value:[]},gradient:{type:"v4v",value:f}},depthWrite:!0,vertexShader:l,fragmentShader:n});return r[a]=d};Object.keys(this.parameters.spots_lookup).forEach(function(a){var e=this.parameters.spots_lookup[a],g=d.places_list[a];"undefined"!==typeof g&&Object.keys(g).forEach(function(a){a=g[a];var k=[];Object.keys(e).forEach(function(a){a=
      e[a].id;var f=d.pois[a];"undefined"!==typeof f&&1===f.length&&(f=f[0],f=f.options("position"),this.inverse_lookup[a].index=k.length,k.push(new m.Vector3(f.x,f.y,0)))},this);1===e.length?a.material.vertexColors=m.NoColors:1<e.length&&(a.material=u(k.length).clone(),a.material.uniforms.gradient.value=f,a.material.uniforms.spots.value=k)},this)},this);"undefined"!==typeof this.parameters.spots&&this.updateSpots(this.parameters.spots);d.requestRedraw()};this.updateSpots=function(e){if("undefined"===typeof this.inverse_lookup)return!1;
      Object.keys(e).forEach(function(f){var k=this.inverse_lookup[f];if("undefined"!==typeof k){var l=k.id,m=this.parameters.spots_lookup[l].length,n=d.places_list[l];"undefined"!==typeof n&&Object.keys(n).forEach(function(l){l=n[l];if(1===m){var q=a(parseFloat(e[f].value),this.parameters.gradient);"undefined"!==typeof e[f].duration&&0<e[f].duration?(d.incrementUpdatableObjects(),(new TWEEN.Tween(l.material.color)).to(q,parseFloat(e[f].duration)).onComplete(function(){d.decrementUpdatableObjects()}).start()):
        l.material.color.copy(q)}else 1<m&&("undefined"!==typeof e[f].duration&&0<e[f].duration?(d.incrementUpdatableObjects(),(new TWEEN.Tween(l.material.uniforms.spots.value[k.index])).to({z:parseFloat(e[f].value)},parseFloat(e[f].duration)).onComplete(function(){d.decrementUpdatableObjects()}).start()):l.material.uniforms.spots.value[k.index].z=parseFloat(e[f].value))},this)}},this);d.requestRedraw();return!0};this.updateGradient=function(a){this.parameters.gradient=a;f.splice(0,f.length);e.apply(this);
      Object.keys(r).forEach(function(a){r[a].defines.NB_GRADIENTS=f.length});Object.keys(this.parameters.spots_lookup).forEach(function(a){var e=this.parameters.spots_lookup[a],f=d.places_list[a];"undefined"!==typeof f&&Object.keys(f).forEach(function(a){a=f[a];1!==e.length&&(a.material.needsUpdate=!0)},this)},this);d.requestRedraw()}}})});
  define("com/visioglobe/web/plugins/IconsPlugin",["com/visioglobe/web/MapviewerPrivate","com/visioglobe/web/helpers/CachedTexture"],function(e,n){e.available_plugins.push({name:"icons",factory:function(e){this.loadAsset=function(m){new n(e,m,!0)}}})});define("com/visioglobe/web/plugins/PoiPlugin",["com/visioglobe/web/MapviewerPrivate"],function(e){e.available_plugins.push({name:"poi",factory:function(e){this.getPois=function(){return e.getPois()};this.getPoi=function(l){return e.getPoi(l)}}})});
  var vg=vg||{};
  (function(){var e=new function(){var e=0,l=document.createEvent("Event");l.initEvent("mapviewerready",!0,!0);this.wait=function(){++e};this.go=function(){--e;0===e&&document.dispatchEvent(l)}};e.wait();document.onreadystatechange=function(){"complete"===document.readyState&&e.go()};e.wait();require(["com/visioglobe/web/plugins/GradientPlugin"],function(){e.go()});e.wait();require(["com/visioglobe/web/plugins/IconsPlugin"],function(){e.go()});e.wait();require(["com/visioglobe/web/plugins/PoiPlugin"],function(){e.go()});
    e.wait();require(["com/visioglobe/web/Mapviewer"],function(n){vg.mapviewer=vg.mapviewer||{};vg.mapviewer.web=vg.mapviewer.web||{};vg.mapviewer.web.Mapviewer=n;vg.mapviewer.Mapviewer=vg.mapviewer.Mapviewer||n;e.go()})})();define("com/visioglobe/web/main",function(){});
  return vg;

  /* without requirejs */
})(vg);
/* with requirejs (uncomment next line, comment line above) */
//});

/* end Visioglobe SDK*/
